(self.webpackChunkquizzard=self.webpackChunkquizzard||[]).push([[179],{7128:(Zt,Ye,H)=>{"use strict";H.d(Ye,{nm:()=>fn});var T=H(5813),ge=(H(5e3),H(3692),H(5867),H(5861)),xe=H(9681),Be=H(4859),de=H(2090),$e=H(1877);const le=new Map,ue={activated:!1,tokenObservers:[]},Oe={initialized:!1,enabled:!1};function tt(Te){return le.get(Te)||ue}function Xe(Te,Ne){le.set(Te,Ne)}function ut(){return Oe}class _t{constructor(Ne,He,mt,Ot,At){if(this.operation=Ne,this.retryPolicy=He,this.getWaitDuration=mt,this.lowerBound=Ot,this.upperBound=At,this.pending=null,this.nextErrorWaitInterval=Ot,Ot>At)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ne){var He=this;return(0,ge.Z)(function*(){He.stop();try{He.pending=new de.BH,yield(Te=He.getNextRun(Ne),new Promise(Ne=>{setTimeout(Ne,Te)})),He.pending.resolve(),yield He.pending.promise,He.pending=new de.BH,yield He.operation(),He.pending.resolve(),yield He.pending.promise,He.process(!0).catch(()=>{})}catch(mt){He.retryPolicy(mt)?He.process(!1).catch(()=>{}):He.stop()}var Te})()}getNextRun(Ne){if(Ne)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const He=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),He}}}const Ct=new de.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function qe(Te){if(!tt(Te).activated)throw Ct.create("use-before-activation",{appName:Te.name})}function gt(Te,Ne){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,ge.Z)(function*({url:Te,body:Ne},He){const mt={"Content-Type":"application/json"},Ot=He.getImmediate({optional:!0});Ot&&(mt["X-Firebase-Client"]=Ot.getPlatformInfoString());const At={method:"POST",body:JSON.stringify(Ne),headers:mt};let Ft,sr;try{Ft=yield fetch(Te,At)}catch(gi){throw Ct.create("fetch-network-error",{originalErrorMessage:gi.message})}if(200!==Ft.status)throw Ct.create("fetch-status-error",{httpStatus:Ft.status});try{sr=yield Ft.json()}catch(gi){throw Ct.create("fetch-parse-error",{originalErrorMessage:gi.message})}const Dn=sr.ttl.match(/^([\d.]+)(s)$/);if(!Dn||!Dn[2]||isNaN(Number(Dn[1])))throw Ct.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${sr.ttl}`});const ei=1e3*Number(Dn[1]),Xn=Date.now();return{token:sr.attestationToken,expireTimeMillis:Xn+ei,issuedAtTimeMillis:Xn}})).apply(this,arguments)}function an(Te,Ne){const{projectId:He,appId:mt,apiKey:Ot}=Te.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${He}/apps/${mt}:exchangeDebugToken?key=${Ot}`,body:{debug_token:Ne}}}const Kt="firebase-app-check-store";let Mn=null;function ur(){return Mn||(Mn=new Promise((Te,Ne)=>{try{const He=indexedDB.open("firebase-app-check-database",1);He.onsuccess=mt=>{Te(mt.target.result)},He.onerror=mt=>{var Ot;Ne(Ct.create("storage-open",{originalErrorMessage:null===(Ot=mt.target.error)||void 0===Ot?void 0:Ot.message}))},He.onupgradeneeded=mt=>{0===mt.oldVersion&&mt.target.result.createObjectStore(Kt,{keyPath:"compositeKey"})}}catch(He){Ne(Ct.create("storage-open",{originalErrorMessage:He.message}))}}),Mn)}function Ni(){return(Ni=(0,ge.Z)(function*(Te,Ne){const mt=(yield ur()).transaction(Kt,"readwrite"),At=mt.objectStore(Kt).put({compositeKey:Te,value:Ne});return new Promise((Ft,sr)=>{At.onsuccess=Dn=>{Ft()},mt.onerror=Dn=>{var ei;sr(Ct.create("storage-set",{originalErrorMessage:null===(ei=Dn.target.error)||void 0===ei?void 0:ei.message}))}})})).apply(this,arguments)}const Gn=new $e.Yd("@firebase/app-check");function Lt(Te,Ne){return(0,de.hl)()?function(Te,Ne){return function(Te,Ne){return Ni.apply(this,arguments)}(function(Te){return`${Te.options.appId}-${Te.name}`}(Te),Ne)}(Te,Ne).catch(He=>{Gn.warn(`Failed to write token to IndexedDB. Error: ${He}`)}):Promise.resolve()}function Ar(){return ut().enabled}function vn(){return _n.apply(this,arguments)}function _n(){return(_n=(0,ge.Z)(function*(){const Te=ut();if(Te.enabled&&Te.token)return Te.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Vn={error:"UNKNOWN_ERROR"};function Dr(Te){return de.US.encodeString(JSON.stringify(Te),!1)}function An(Te){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,ge.Z)(function*(Te,Ne=!1){const He=Te.app;qe(He);const mt=tt(He);let At,Ot=mt.token;if(!Ot){const Dn=yield mt.cachedTokenPromise;Dn&&Se(Dn)&&(Ot=Dn)}if(!Ne&&Ot&&Se(Ot))return{token:Ot.token};let sr,Ft=!1;if(Ar()){mt.exchangeTokenPromise||(mt.exchangeTokenPromise=gt(an(He,yield vn()),Te.platformLoggerProvider).then(ei=>(mt.exchangeTokenPromise=void 0,ei)),Ft=!0);const Dn=yield mt.exchangeTokenPromise;return yield Lt(He,Dn),Xe(He,Object.assign(Object.assign({},mt),{token:Dn})),{token:Dn.token}}try{mt.exchangeTokenPromise||(mt.exchangeTokenPromise=mt.provider.getToken().then(Dn=>(mt.exchangeTokenPromise=void 0,Dn)),Ft=!0),Ot=yield mt.exchangeTokenPromise}catch(Dn){"appCheck/throttled"===Dn.code?Gn.warn(Dn.message):Gn.error(Dn),At=Dn}return Ot?(sr={token:Ot.token},Xe(He,Object.assign(Object.assign({},mt),{token:Ot})),yield Lt(He,Ot)):sr=yt(At),Ft&&ye(He,sr),sr})).apply(this,arguments)}function Li(Te,Ne){const He=tt(Te),mt=He.tokenObservers.filter(Ot=>Ot.next!==Ne);0===mt.length&&He.tokenRefresher&&He.tokenRefresher.isRunning()&&He.tokenRefresher.stop(),Xe(Te,Object.assign(Object.assign({},He),{tokenObservers:mt}))}function dr(Te){const{app:Ne}=Te,He=tt(Ne);let mt=He.tokenRefresher;mt||(mt=function(Te){const{app:Ne}=Te;return new _t((0,ge.Z)(function*(){let mt;if(mt=tt(Ne).token?yield An(Te,!0):yield An(Te),mt.error)throw mt.error}),()=>!0,()=>{const He=tt(Ne);if(He.token){let mt=He.token.issuedAtTimeMillis+.5*(He.token.expireTimeMillis-He.token.issuedAtTimeMillis)+3e5;return mt=Math.min(mt,He.token.expireTimeMillis-3e5),Math.max(0,mt-Date.now())}return 0},3e4,96e4)}(Te),Xe(Ne,Object.assign(Object.assign({},He),{tokenRefresher:mt}))),!mt.isRunning()&&He.isTokenAutoRefreshEnabled&&mt.start()}function ye(Te,Ne){const He=tt(Te).tokenObservers;for(const mt of He)try{"EXTERNAL"===mt.type&&null!=Ne.error?mt.error(Ne.error):mt.next(Ne)}catch(Ot){}}function Se(Te){return Te.expireTimeMillis-Date.now()>0}function yt(Te){return{token:Dr(Vn),error:Te}}class ie{constructor(Ne,He){this.app=Ne,this.platformLoggerProvider=He}_delete(){const{tokenObservers:Ne}=tt(this.app);for(const He of Ne)Li(this.app,He.next);return Promise.resolve()}}const jr="app-check-internal";(0,xe._registerComponent)(new Be.wA("app-check",Te=>function(Te,Ne){return new ie(Te,Ne)}(Te.getProvider("app").getImmediate(),Te.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Te,Ne,He)=>{Te.getProvider(jr).initialize()})),(0,xe._registerComponent)(new Be.wA(jr,Te=>function(Te){return{getToken:Ne=>An(Te,Ne),addTokenListener:Ne=>function(Te,Ne,He,mt){const{app:Ot}=Te,At=tt(Ot),Ft={next:He,error:mt,type:Ne};if(Xe(Ot,Object.assign(Object.assign({},At),{tokenObservers:[...At.tokenObservers,Ft]})),At.token&&Se(At.token)){const sr=At.token;Promise.resolve().then(()=>{He({token:sr.token}),dr(Te)}).catch(()=>{})}At.cachedTokenPromise.then(()=>dr(Te))}(Te,"INTERNAL",Ne),removeTokenListener:Ne=>Li(Te.app,Ne)}}(Te.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,xe.registerVersion)("@firebase/app-check","0.5.2");class fn{constructor(){return(0,T.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Ot:()=>K,z6:()=>ge,ZF:()=>ze,hX:()=>tt});var T=H(5867),_=H(5e3),Y=H(5813);class K{constructor(_t){return _t}}class ge{constructor(){return(0,T.C6)()}}const de=new _.OlP("angularfire2._apps"),$e={provide:K,useFactory:function(me){return me&&1===me.length?me[0]:new K((0,T.Mq)())},deps:[[new _.FiY,de]]},le={provide:ge,deps:[[new _.FiY,de]]};function ue(me){return(_t,pt)=>{const Ut=_t.runOutsideAngular(()=>me(pt));return new K(Ut)}}let Oe=(()=>{class me{constructor(pt){(0,T.KN)("angularfire",Y.q4.full,"core"),(0,T.KN)("angularfire",Y.q4.full,"app"),(0,T.KN)("angular",_.q4F.full,pt.toString())}}return me.\u0275fac=function(pt){return new(pt||me)(_.LFG(_.Lbi))},me.\u0275mod=_.oAB({type:me}),me.\u0275inj=_.cJS({providers:[$e,le]}),me})();function tt(me,..._t){return{ngModule:Oe,providers:[{provide:de,useFactory:ue(me),multi:!0,deps:[_.R0b,_.zs3,Y.HU,..._t]}]}}const ze=(0,Y.u3)(T.ZF,!0)},1205:(Zt,Ye,H)=>{"use strict";H.d(Ye,{zQ:()=>Ge,ww:()=>nn,rT:()=>et,f7:()=>rt,L6:()=>zt,_Q:()=>qe,lh:()=>Qe,Qv:()=>Ct,nw:()=>gt});var T=H(5e3),_=H(7579),Y=H(9646),K=H(8306),ge=H(8996),xe=H(6451),Be=H(6063);class de extends _.x{constructor(an=1/0,Qt=1/0,It=Be.l){super(),this._bufferSize=an,this._windowTime=Qt,this._timestampProvider=It,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Qt===1/0,this._bufferSize=Math.max(1,an),this._windowTime=Math.max(1,Qt)}next(an){const{isStopped:Qt,_buffer:It,_infiniteTimeWindow:Kt,_timestampProvider:dn,_windowTime:Mn}=this;Qt||(It.push(an),!Kt&&It.push(dn.now()+Mn)),this._trimBuffer(),super.next(an)}_subscribe(an){this._throwIfClosed(),this._trimBuffer();const Qt=this._innerSubscribe(an),{_infiniteTimeWindow:It,_buffer:Kt}=this,dn=Kt.slice();for(let Mn=0;Mn<dn.length&&!an.closed;Mn+=It?1:2)an.next(dn[Mn]);return this._checkFinalizedStatuses(an),Qt}_trimBuffer(){const{_bufferSize:an,_timestampProvider:Qt,_buffer:It,_infiniteTimeWindow:Kt}=this,dn=(Kt?1:2)*an;if(an<1/0&&dn<It.length&&It.splice(0,It.length-dn),!Kt){const Mn=Qt.now();let ur=0;for(let Ln=1;Ln<It.length&&It[Ln]<=Mn;Ln+=2)ur=Ln;ur&&It.splice(0,ur+1)}}}var $e=H(3099);function le(xt,an,Qt){var It,Kt;let dn,Mn=!1;return xt&&"object"==typeof xt?(dn=null!==(It=xt.bufferSize)&&void 0!==It?It:1/0,an=null!==(Kt=xt.windowTime)&&void 0!==Kt?Kt:1/0,Mn=!!xt.refCount,Qt=xt.scheduler):dn=null!=xt?xt:1/0,(0,$e.B)({connector:()=>new de(dn,an,Qt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Mn})}var ue=H(3900),Oe=H(576);function tt(xt,an){return(0,Oe.m)(an)?(0,ue.w)(()=>xt,an):(0,ue.w)(()=>xt)}var Xe=H(5363),ut=H(4004),dt=H(590),ze=H(9468),Ae=H(9300),Le=H(5813),Pe=H(2011),me=H(9808),_t=H(7128),pt=H(127);const Ct=new T.OlP("angularfire2.auth.use-emulator"),zt=new T.OlP("angularfire2.auth.settings"),qe=new T.OlP("angularfire2.auth.tenant-id"),et=new T.OlP("angularfire2.auth.langugage-code"),Qe=new T.OlP("angularfire2.auth.use-device-language"),rt=new T.OlP("angularfire.auth.persistence"),gt=(xt,an,Qt,It,Kt,dn,Mn,ur)=>(0,Pe.cc)(`${xt.name}.auth`,"AngularFireAuth",xt.name,()=>{const Ln=an.runOutsideAngular(()=>xt.auth());if(Qt&&Ln.useEmulator(...Qt),It&&(Ln.tenantId=It),Ln.languageCode=Kt,dn&&Ln.useDeviceLanguage(),Mn)for(const[Ti,Zn]of Object.entries(Mn))Ln.settings[Ti]=Zn;return ur&&Ln.setPersistence(ur),Ln},[Qt,It,Kt,dn,Mn,ur]);let Ge=(()=>{class xt{constructor(Qt,It,Kt,dn,Mn,ur,Ln,Ti,Zn,cr,Hn,Ni){const Lr=new _.x,Xr=(0,Y.of)(void 0).pipe((0,Xe.Q)(Mn.outsideAngular),(0,ue.w)(()=>dn.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,5881)))),(0,ut.U)(()=>(0,Pe.on)(Qt,dn,It)),(0,ut.U)(wt=>gt(wt,dn,ur,Ti,Zn,cr,Ln,Hn)),le({bufferSize:1,refCount:!1}));if((0,me.PM)(Kt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{Xr.pipe((0,dt.P)()).subscribe();const Gn=Xr.pipe((0,ue.w)(Lt=>Lt.getRedirectResult().then(jt=>jt,()=>null)),Le.iC,le({bufferSize:1,refCount:!1})),Mr=Xr.pipe((0,ue.w)(Lt=>new K.y(jt=>({unsubscribe:dn.runOutsideAngular(()=>Lt.onAuthStateChanged(wr=>jt.next(wr),wr=>jt.error(wr),()=>jt.complete()))})))),Yr=Xr.pipe((0,ue.w)(Lt=>new K.y(jt=>({unsubscribe:dn.runOutsideAngular(()=>Lt.onIdTokenChanged(wr=>jt.next(wr),wr=>jt.error(wr),()=>jt.complete()))}))));this.authState=Gn.pipe(tt(Mr),(0,ze.R)(Mn.outsideAngular),(0,Xe.Q)(Mn.insideAngular)),this.user=Gn.pipe(tt(Yr),(0,ze.R)(Mn.outsideAngular),(0,Xe.Q)(Mn.insideAngular)),this.idToken=this.user.pipe((0,ue.w)(Lt=>Lt?(0,ge.D)(Lt.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,ue.w)(Lt=>Lt?(0,ge.D)(Lt.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,xe.T)(Gn,Lr,this.authState.pipe((0,Ae.h)(Lt=>!Lt))).pipe((0,ut.U)(Lt=>(null==Lt?void 0:Lt.user)?Lt:null),(0,ze.R)(Mn.outsideAngular),(0,Xe.Q)(Mn.insideAngular))}return(0,Pe.pX)(this,Xr,dn,{spy:{apply:(wt,Gn,Mr)=>{(wt.startsWith("signIn")||wt.startsWith("createUser"))&&Mr.then(Yr=>Lr.next(Yr))}}})}}return xt.\u0275fac=function(Qt){return new(Qt||xt)(T.LFG(Pe.Dh),T.LFG(Pe.xv,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(Le.HU),T.LFG(Ct,8),T.LFG(zt,8),T.LFG(qe,8),T.LFG(et,8),T.LFG(Qe,8),T.LFG(rt,8),T.LFG(_t.nm,8))},xt.\u0275prov=T.Yz7({token:xt,factory:xt.\u0275fac,providedIn:"any"}),xt})(),nn=(()=>{class xt{constructor(){pt.Z.registerVersion("angularfire",Le.q4.full,"auth-compat")}}return xt.\u0275fac=function(Qt){return new(Qt||xt)},xt.\u0275mod=T.oAB({type:xt}),xt.\u0275inj=T.cJS({providers:[Ge]}),xt})()},9586:(Zt,Ye,H)=>{"use strict";H.d(Ye,{KQ:()=>Li,JS:()=>dr});var T=H(5e3),_=H(4986),Y=H(8306),K=H(9646),ge=H(6451),xe=H(4482),Be=H(5403),$e=H(4004),le=H(3099),ue=H(3900),Oe=H(5026),tt=H(1884),Xe=H(1365),ut=H(5813),dt=H(2011),Ae=(H(5881),H(3942)),Le=H(4859),Pe=H(1627),me=H(2090);const Ct=new(H(1877).Yd)("@firebase/database-compat"),zt=function(We){Ct.warn("FIREBASE WARNING: "+We)};class Qe{constructor(ye){this._delegate=ye}cancel(ye){(0,me.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,me.Wj)("OnDisconnect.cancel","onComplete",ye,!0);const Se=this._delegate.cancel();return ye&&Se.then(()=>ye(null),yt=>ye(yt)),Se}remove(ye){(0,me.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,me.Wj)("OnDisconnect.remove","onComplete",ye,!0);const Se=this._delegate.remove();return ye&&Se.then(()=>ye(null),yt=>ye(yt)),Se}set(ye,Se){(0,me.Dv)("OnDisconnect.set",1,2,arguments.length),(0,me.Wj)("OnDisconnect.set","onComplete",Se,!0);const yt=this._delegate.set(ye);return Se&&yt.then(()=>Se(null),ie=>Se(ie)),yt}setWithPriority(ye,Se,yt){(0,me.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,me.Wj)("OnDisconnect.setWithPriority","onComplete",yt,!0);const ie=this._delegate.setWithPriority(ye,Se);return yt&&ie.then(()=>yt(null),oe=>yt(oe)),ie}update(ye,Se){if((0,me.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(ye)){const ie={};for(let oe=0;oe<ye.length;++oe)ie[""+oe]=ye[oe];ye=ie,zt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,me.Wj)("OnDisconnect.update","onComplete",Se,!0);const yt=this._delegate.update(ye);return Se&&yt.then(()=>Se(null),ie=>Se(ie)),yt}}class rt{constructor(ye,Se){this.committed=ye,this.snapshot=Se}toJSON(){return(0,me.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class gt{constructor(ye,Se){this._database=ye,this._delegate=Se}val(){return(0,me.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,me.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,me.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,me.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(ye){return(0,me.Dv)("DataSnapshot.child",0,1,arguments.length),ye=String(ye),(0,Pe.FQ)("DataSnapshot.child","path",ye,!1),new gt(this._database,this._delegate.child(ye))}hasChild(ye){return(0,me.Dv)("DataSnapshot.hasChild",1,1,arguments.length),(0,Pe.FQ)("DataSnapshot.hasChild","path",ye,!1),this._delegate.hasChild(ye)}getPriority(){return(0,me.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(ye){return(0,me.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,me.Wj)("DataSnapshot.forEach","action",ye,!1),this._delegate.forEach(Se=>ye(new gt(this._database,Se)))}hasChildren(){return(0,me.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,me.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,me.Dv)("DataSnapshot.ref",0,0,arguments.length),new nn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ge{constructor(ye,Se){this.database=ye,this._delegate=Se}on(ye,Se,yt,ie){var oe;(0,me.Dv)("Query.on",2,4,arguments.length),(0,me.Wj)("Query.on","callback",Se,!1);const _e=Ge.getCancelAndContextArgs_("Query.on",yt,ie),Ze=(Gt,rn)=>{Se.call(_e.context,new gt(this.database,Gt),rn)};Ze.userCallback=Se,Ze.context=_e.context;const Ue=null===(oe=_e.cancel)||void 0===oe?void 0:oe.bind(_e.context);switch(ye){case"value":return(0,Pe.jM)(this._delegate,Ze,Ue),Se;case"child_added":return(0,Pe.yv)(this._delegate,Ze,Ue),Se;case"child_removed":return(0,Pe.MQ)(this._delegate,Ze,Ue),Se;case"child_changed":return(0,Pe.Jr)(this._delegate,Ze,Ue),Se;case"child_moved":return(0,Pe.Vt)(this._delegate,Ze,Ue),Se;default:throw new Error((0,me.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(ye,Se,yt){if((0,me.Dv)("Query.off",0,3,arguments.length),function(We,ye,Se){if(void 0!==ye)switch(ye){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,me.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,ye),(0,me.Wj)("Query.off","callback",Se,!0),(0,me.lb)("Query.off","context",yt,!0),Se){const ie=()=>{};ie.userCallback=Se,ie.context=yt,(0,Pe.S1)(this._delegate,ye,ie)}else(0,Pe.S1)(this._delegate,ye)}get(){return(0,Pe.U2)(this._delegate).then(ye=>new gt(this.database,ye))}once(ye,Se,yt,ie){(0,me.Dv)("Query.once",1,4,arguments.length),(0,me.Wj)("Query.once","callback",Se,!0);const oe=Ge.getCancelAndContextArgs_("Query.once",yt,ie),_e=new me.BH,Ze=(Gt,rn)=>{const or=new gt(this.database,Gt);Se&&Se.call(oe.context,or,rn),_e.resolve(or)};Ze.userCallback=Se,Ze.context=oe.context;const Ue=Gt=>{oe.cancel&&oe.cancel.call(oe.context,Gt),_e.reject(Gt)};switch(ye){case"value":(0,Pe.jM)(this._delegate,Ze,Ue,{onlyOnce:!0});break;case"child_added":(0,Pe.yv)(this._delegate,Ze,Ue,{onlyOnce:!0});break;case"child_removed":(0,Pe.MQ)(this._delegate,Ze,Ue,{onlyOnce:!0});break;case"child_changed":(0,Pe.Jr)(this._delegate,Ze,Ue,{onlyOnce:!0});break;case"child_moved":(0,Pe.Vt)(this._delegate,Ze,Ue,{onlyOnce:!0});break;default:throw new Error((0,me.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return _e.promise}limitToFirst(ye){return(0,me.Dv)("Query.limitToFirst",1,1,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.Kk)(ye)))}limitToLast(ye){return(0,me.Dv)("Query.limitToLast",1,1,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.vh)(ye)))}orderByChild(ye){return(0,me.Dv)("Query.orderByChild",1,1,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.g2)(ye)))}orderByKey(){return(0,me.Dv)("Query.orderByKey",0,0,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.R)()))}orderByPriority(){return(0,me.Dv)("Query.orderByPriority",0,0,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.HE)()))}orderByValue(){return(0,me.Dv)("Query.orderByValue",0,0,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.Bd)()))}startAt(ye=null,Se){return(0,me.Dv)("Query.startAt",0,2,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.e0)(ye,Se)))}startAfter(ye=null,Se){return(0,me.Dv)("Query.startAfter",0,2,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.TQ)(ye,Se)))}endAt(ye=null,Se){return(0,me.Dv)("Query.endAt",0,2,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.Wu)(ye,Se)))}endBefore(ye=null,Se){return(0,me.Dv)("Query.endBefore",0,2,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.Lx)(ye,Se)))}equalTo(ye,Se){return(0,me.Dv)("Query.equalTo",1,2,arguments.length),new Ge(this.database,(0,Pe.IO)(this._delegate,(0,Pe.EW)(ye,Se)))}toString(){return(0,me.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,me.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(ye){if((0,me.Dv)("Query.isEqual",1,1,arguments.length),!(ye instanceof Ge))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(ye._delegate)}static getCancelAndContextArgs_(ye,Se,yt){const ie={cancel:void 0,context:void 0};if(Se&&yt)ie.cancel=Se,(0,me.Wj)(ye,"cancel",ie.cancel,!0),ie.context=yt,(0,me.lb)(ye,"context",ie.context,!0);else if(Se)if("object"==typeof Se&&null!==Se)ie.context=Se;else{if("function"!=typeof Se)throw new Error((0,me.gK)(ye,"cancelOrContext")+" must either be a cancel callback or a context object.");ie.cancel=Se}return ie}get ref(){return new nn(this.database,new Pe.tn(this._delegate._repo,this._delegate._path))}}class nn extends Ge{constructor(ye,Se){super(ye,new Pe.JH(Se._repo,Se._path,new Pe.G$,!1)),this.database=ye,this._delegate=Se}getKey(){return(0,me.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(ye){return(0,me.Dv)("Reference.child",1,1,arguments.length),"number"==typeof ye&&(ye=String(ye)),new nn(this.database,(0,Pe.iU)(this._delegate,ye))}getParent(){(0,me.Dv)("Reference.parent",0,0,arguments.length);const ye=this._delegate.parent;return ye?new nn(this.database,ye):null}getRoot(){return(0,me.Dv)("Reference.root",0,0,arguments.length),new nn(this.database,this._delegate.root)}set(ye,Se){(0,me.Dv)("Reference.set",1,2,arguments.length),(0,me.Wj)("Reference.set","onComplete",Se,!0);const yt=(0,Pe.t8)(this._delegate,ye);return Se&&yt.then(()=>Se(null),ie=>Se(ie)),yt}update(ye,Se){if((0,me.Dv)("Reference.update",1,2,arguments.length),Array.isArray(ye)){const ie={};for(let oe=0;oe<ye.length;++oe)ie[""+oe]=ye[oe];ye=ie,zt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Pe.mI)("Reference.update",this._delegate._path),(0,me.Wj)("Reference.update","onComplete",Se,!0);const yt=(0,Pe.Vx)(this._delegate,ye);return Se&&yt.then(()=>Se(null),ie=>Se(ie)),yt}setWithPriority(ye,Se,yt){(0,me.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,me.Wj)("Reference.setWithPriority","onComplete",yt,!0);const ie=(0,Pe.cy)(this._delegate,ye,Se);return yt&&ie.then(()=>yt(null),oe=>yt(oe)),ie}remove(ye){(0,me.Dv)("Reference.remove",0,1,arguments.length),(0,me.Wj)("Reference.remove","onComplete",ye,!0);const Se=(0,Pe.Od)(this._delegate);return ye&&Se.then(()=>ye(null),yt=>ye(yt)),Se}transaction(ye,Se,yt){(0,me.Dv)("Reference.transaction",1,3,arguments.length),(0,me.Wj)("Reference.transaction","transactionUpdate",ye,!1),(0,me.Wj)("Reference.transaction","onComplete",Se,!0),function(We,ye,Se,yt){if(void 0!==Se&&"boolean"!=typeof Se)throw new Error((0,me.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,yt);const ie=(0,Pe.i3)(this._delegate,ye,{applyLocally:yt}).then(oe=>new rt(oe.committed,new gt(this.database,oe.snapshot)));return Se&&ie.then(oe=>Se(null,oe.committed,oe.snapshot),oe=>Se(oe,!1,null)),ie}setPriority(ye,Se){(0,me.Dv)("Reference.setPriority",1,2,arguments.length),(0,me.Wj)("Reference.setPriority","onComplete",Se,!0);const yt=(0,Pe.Sl)(this._delegate,ye);return Se&&yt.then(()=>Se(null),ie=>Se(ie)),yt}push(ye,Se){(0,me.Dv)("Reference.push",0,2,arguments.length),(0,me.Wj)("Reference.push","onComplete",Se,!0);const yt=(0,Pe.VF)(this._delegate,ye),ie=yt.then(_e=>new nn(this.database,_e));Se&&ie.then(()=>Se(null),_e=>Se(_e));const oe=new nn(this.database,yt);return oe.then=ie.then.bind(ie),oe.catch=ie.catch.bind(ie,void 0),oe}onDisconnect(){return(0,Pe.mI)("Reference.onDisconnect",this._delegate._path),new Qe(new Pe.vA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class xt{constructor(ye,Se){this._delegate=ye,this.app=Se,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(ye,Se,yt={}){(0,Pe.dH)(this._delegate,ye,Se,yt)}ref(ye){if((0,me.Dv)("database.ref",0,1,arguments.length),ye instanceof nn){const Se=(0,Pe.qT)(this._delegate,ye.toString());return new nn(this,Se)}{const Se=(0,Pe.iH)(this._delegate,ye);return new nn(this,Se)}}refFromURL(ye){(0,me.Dv)("database.refFromURL",1,1,arguments.length);const yt=(0,Pe.qT)(this._delegate,ye);return new nn(this,yt)}goOffline(){return(0,me.Dv)("database.goOffline",0,0,arguments.length),(0,Pe.Sb)(this._delegate)}goOnline(){return(0,me.Dv)("database.goOnline",0,0,arguments.length),(0,Pe.$o)(this._delegate)}}xt.ServerValue={TIMESTAMP:(0,Pe.Bt)(),increment:We=>(0,Pe.nP)(We)};var Qt=Object.freeze({__proto__:null,initStandalone:function({app:We,url:ye,version:Se,customAuthImpl:yt,namespace:ie,nodeAdmin:oe=!1}){(0,Pe.AM)(Se);const _e=new Le.zt("auth-internal",new Le.H0("database-standalone"));return _e.setComponent(new Le.wA("auth-internal",()=>yt,"PRIVATE")),{instance:new xt((0,Pe.wj)(We,_e,void 0,ye,oe),We),namespace:ie}}});const It=xt.ServerValue;var We;(We=Ae.Z).INTERNAL.registerComponent(new Le.wA("database-compat",(ye,{instanceIdentifier:Se})=>{const yt=ye.getProvider("app-compat").getImmediate(),ie=ye.getProvider("database").getImmediate({identifier:Se});return new xt(ie,yt)},"PUBLIC").setServiceProps({Reference:nn,Query:Ge,Database:xt,DataSnapshot:gt,enableLogging:Pe.U7,INTERNAL:Qt,ServerValue:It}).setMultipleInstances(!0)),We.registerVersion("@firebase/database-compat","0.1.4");var dn=H(1205),Mn=H(7128),ur=H(127);function Zn(We){return null==We}function cr(We){return"function"==typeof We.set}function Hn(We,ye){return cr(ye)?ye:We.ref(ye)}function Ni(We,ye){if(function(We){return"string"==typeof We}(We))return ye.stringCase();if(cr(We))return ye.firebaseCase();if(function(We){return"function"==typeof We.exportVal}(We))return ye.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof We)}function Lr(We,ye,Se="on",yt=_.z){return new Y.y(ie=>{let oe=null;return oe=We[Se](ye,(_e,Ze)=>{yt.schedule(()=>{ie.next({snapshot:_e,prevKey:Ze})}),"once"===Se&&yt.schedule(()=>ie.complete())},_e=>{yt.schedule(()=>ie.error(_e))}),"on"===Se?{unsubscribe(){null!=oe&&We.off(ye,oe)}}:{unsubscribe(){}}}).pipe((0,$e.U)(ie=>{const{snapshot:oe,prevKey:_e}=ie;let Ze=null;return oe.exists()&&(Ze=oe.key),{type:ye,payload:oe,prevKey:_e,key:Ze}}),(0,le.B)())}function wt(We,ye){const Se=We.length;for(let yt=0;yt<Se;yt++)if(We[yt].payload.key===ye)return yt;return-1}function Mr(We,ye){const{payload:Se,prevKey:yt,key:ie}=ye,oe=wt(We,ie),_e=function(We,ye){if(Zn(ye))return 0;{const Se=wt(We,ye);return-1===Se?We.length:Se+1}}(We,yt);switch(ye.type){case"value":if(ye.payload&&ye.payload.exists()){let Ze=null;ye.payload.forEach(Ue=>{const Gt={payload:Ue,type:"value",prevKey:Ze,key:Ue.key};return Ze=Ue.key,We=[...We,Gt],!1})}return We;case"child_added":if(oe>-1){const Ze=We[oe-1];(Ze&&Ze.key||null)!==yt&&(We=We.filter(Ue=>Ue.payload.key!==Se.key)).splice(_e,0,ye)}else{if(null==yt)return[ye,...We];(We=We.slice()).splice(_e,0,ye)}return We;case"child_removed":return We.filter(Ze=>Ze.payload.key!==Se.key);case"child_changed":return We.map(Ze=>Ze.payload.key===ie?ye:Ze);case"child_moved":if(oe>-1){const Ze=We.splice(oe,1)[0];return(We=We.slice()).splice(_e,0,Ze),We}return We;default:return We}}function Yr(We){return(Zn(We)||0===We.length)&&(We=["child_added","child_removed","child_changed","child_moved"]),We}function Lt(We,ye,Se){return function(We,ye,Se){return Lr(We,"value","once",Se).pipe((0,ue.w)(yt=>{const ie=[(0,K.of)(yt)];return ye.forEach(oe=>ie.push(Lr(We,oe,"on",Se))),(0,ge.T)(...ie).pipe((0,Oe.R)(Mr,[]))}),(0,tt.x)())}(We,ye=Yr(ye),Se)}function jt(We,ye,Se){const yt=(ye=Yr(ye)).map(ie=>Lr(We,ie,"on",Se));return(0,ge.T)(...yt)}function _n(We,ye){return function(yt,ie){return Ni(yt,{stringCase:()=>We.child(yt)[ye](ie),firebaseCase:()=>yt[ye](ie),snapshotCase:()=>yt.ref[ye](ie)})}}function bn(We){return function(Se){return Se?Ni(Se,{stringCase:()=>We.child(Se).remove(),firebaseCase:()=>Se.remove(),snapshotCase:()=>Se.ref.remove()}):We.remove()}}function Dr(We,ye){return function(){return Lr(We,"value","on",ye)}}const Ht=new T.OlP("angularfire2.realtimeDatabaseURL"),ln=new T.OlP("angularfire2.database.use-emulator");let Li=(()=>{class We{constructor(Se,yt,ie,oe,_e,Ze,Ue,Gt,rn,or,xr,hn,zr,Ve,be){this.schedulers=Ze;const Ie=Ue,ht=(0,dt.on)(Se,_e,yt);Gt&&(0,dn.nw)(ht,_e,rn,xr,hn,zr,or,Ve),this.database=(0,dt.cc)(`${ht.name}.database.${ie}`,"AngularFireDatabase",ht.name,()=>{const Pt=_e.runOutsideAngular(()=>ht.database(ie||void 0));return Ie&&Pt.useEmulator(...Ie),Pt},[Ie])}list(Se,yt){const ie=this.schedulers.ngZone.runOutsideAngular(()=>Hn(this.database,Se));let oe=ie;return yt&&(oe=yt(ie)),function(We,ye){const Se=ye.schedulers.outsideAngular,yt=ye.schedulers.ngZone.run(()=>We.ref);return{query:We,update:_n(yt,"update"),set:_n(yt,"set"),push:ie=>yt.push(ie),remove:bn(yt),snapshotChanges:ie=>Lt(We,ie,Se).pipe(ut.iC),stateChanges:ie=>jt(We,ie,Se).pipe(ut.iC),auditTrail:ie=>function(We,ye,Se){return function(We,ye,Se){return function(We,ye){return Lr(We,"value","on",ye).pipe((0,$e.U)(Se=>{let yt;return Se.payload.forEach(ie=>(yt=ie.key,!1)),{data:Se,lastKeyToLoad:yt}}))}(We,Se).pipe((0,Xe.M)(ye),(0,$e.U)(([ie,oe])=>{const _e=ie.lastKeyToLoad,Ze=oe.map(Ue=>Ue.key);return{actions:oe,lastKeyToLoad:_e,loadedKeys:Ze}}),(0,xe.e)((ye,Se)=>{let yt=!1;ye.subscribe(new Be.Q(Se,oe=>(yt||(yt=!(ie=>-1===ie.loadedKeys.indexOf(ie.lastKeyToLoad))(oe)))&&Se.next(oe)))}),(0,$e.U)(ie=>ie.actions))}(We,jt(We,ye).pipe((0,Oe.R)((ie,oe)=>[...ie,oe],[])),Se)}(We,ie,Se).pipe(ut.iC),valueChanges:(ie,oe)=>Lt(We,ie,Se).pipe((0,$e.U)(Ze=>Ze.map(Ue=>oe&&oe.idField?Object.assign(Object.assign({},Ue.payload.val()),{[oe.idField]:Ue.key}):Ue.payload.val())),ut.iC)}}(oe,this)}object(Se){return function(We,ye){return{query:We,snapshotChanges:()=>Dr(We,ye.schedulers.outsideAngular)().pipe(ut.iC),update:Se=>We.ref.update(Se),set:Se=>We.ref.set(Se),remove:()=>We.ref.remove(),valueChanges:()=>Dr(We,ye.schedulers.outsideAngular)().pipe(ut.iC,(0,$e.U)(yt=>yt.payload.exists()?yt.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Hn(this.database,Se)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return We.\u0275fac=function(Se){return new(Se||We)(T.LFG(dt.Dh),T.LFG(dt.xv,8),T.LFG(Ht,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(ut.HU),T.LFG(ln,8),T.LFG(dn.zQ,8),T.LFG(dn.Qv,8),T.LFG(dn.L6,8),T.LFG(dn._Q,8),T.LFG(dn.rT,8),T.LFG(dn.lh,8),T.LFG(dn.f7,8),T.LFG(Mn.nm,8))},We.\u0275prov=T.Yz7({token:We,factory:We.\u0275fac,providedIn:"any"}),We})(),dr=(()=>{class We{constructor(){ur.Z.registerVersion("angularfire",ut.q4.full,"rtdb-compat")}}return We.\u0275fac=function(Se){return new(Se||We)},We.\u0275mod=T.oAB({type:We}),We.\u0275inj=T.cJS({providers:[Li]}),We})()},2011:(Zt,Ye,H)=>{"use strict";H.d(Ye,{hO:()=>tt,xv:()=>$e,Dh:()=>de,GT:()=>xe,cc:()=>Xe,on:()=>le,pX:()=>ge});var T=H(5e3),_=H(127),Y=H(5813);Zt=H.hmd(Zt);const K=["ngOnDestroy"],ge=(Ae,Le,Pe,me={})=>new Proxy(Ae,{get:(_t,pt)=>Pe.runOutsideAngular(()=>{var Ut;if(Ae[pt])return(null===(Ut=null==me?void 0:me.spy)||void 0===Ut?void 0:Ut.get)&&me.spy.get(pt,Ae[pt]),Ae[pt];if(K.indexOf(pt)>-1)return()=>{};const Ct=Le.toPromise().then(zt=>{const qe=zt&&zt[pt];return"function"==typeof qe?qe.bind(zt):qe&&qe.then?qe.then(et=>Pe.run(()=>et)):Pe.run(()=>qe)});return new Proxy(()=>{},{get:(zt,qe)=>Ct[qe],apply:(zt,qe,et)=>Ct.then(Qe=>{var rt;const gt=Qe&&Qe(...et);return(null===(rt=null==me?void 0:me.spy)||void 0===rt?void 0:rt.apply)&&me.spy.apply(pt,et,gt),gt})})})}),xe=(Ae,Le)=>{Le.forEach(Pe=>{Object.getOwnPropertyNames(Pe.prototype||Pe).forEach(me=>{Object.defineProperty(Ae.prototype,me,Object.getOwnPropertyDescriptor(Pe.prototype||Pe,me))})})};class Be{constructor(Le){return Le}}const de=new T.OlP("angularfire2.app.options"),$e=new T.OlP("angularfire2.app.name");function le(Ae,Le,Pe){const _t="object"==typeof Pe&&Pe||{};_t.name=_t.name||"string"==typeof Pe&&Pe||"[DEFAULT]";const Ut=_.Z.apps.filter(Ct=>Ct&&Ct.name===_t.name)[0]||Le.runOutsideAngular(()=>_.Z.initializeApp(Ae,_t));try{JSON.stringify(Ae)!==JSON.stringify(Ut.options)&&ue("error",`${Ut.name} Firebase App already initialized with different options${Zt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ct){}return new Be(Ut)}const ue=(Ae,...Le)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Le)},Oe={provide:Be,useFactory:le,deps:[de,T.R0b,[new T.FiY,$e]]};let tt=(()=>{class Ae{constructor(Pe){_.Z.registerVersion("angularfire",Y.q4.full,"core"),_.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),_.Z.registerVersion("angular",T.q4F.full,Pe.toString())}static initializeApp(Pe,me){return{ngModule:Ae,providers:[{provide:de,useValue:Pe},{provide:$e,useValue:me}]}}}return Ae.\u0275fac=function(Pe){return new(Pe||Ae)(T.LFG(T.Lbi))},Ae.\u0275mod=T.oAB({type:Ae}),Ae.\u0275inj=T.cJS({providers:[Oe]}),Ae})();function Xe(Ae,Le,Pe,me,_t){const[,pt,Ut]=globalThis.\u0275AngularfireInstanceCache.find(Ct=>Ct[0]===Ae)||[];if(pt)return function(Ae,Le){try{return Ae.toString()===Le.toString()}catch(Pe){return Ae===Le}}(_t,Ut)||(ze("error",`${Le} was already initialized on the ${Pe} Firebase App with different settings.${dt?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:_t,was:Ut})),pt;{const Ct=me();return globalThis.\u0275AngularfireInstanceCache.push([Ae,Ct,_t]),Ct}}const dt=!!Zt.hot,ze=(Ae,...Le)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Le)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Zt,Ye,H)=>{"use strict";H.d(Ye,{q4:()=>kc,iC:()=>Jo,HU:()=>ml,vb:()=>oc,JM:()=>sc,u3:()=>qs});var T=H(5e3),_=H(5867),Y=H(5861),K=H(9681),ge=H(2090),xe=H(4859),Be=H(1877),de=H(2940);const $e="@firebase/installations",Oe="w:0.5.4",tt="FIS_v2",Le=new ge.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pe(F){return F instanceof ge.ZR&&F.code.includes("request-failed")}function me({projectId:F}){return`https://firebaseinstallations.googleapis.com/v1/projects/${F}/installations`}function _t(F){return{token:F.token,requestStatus:2,expiresIn:Qe(F.expiresIn),creationTime:Date.now()}}function pt(F,$){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,Y.Z)(function*(F,$){const fe=(yield $.json()).error;return Le.create("request-failed",{requestName:F,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function Ct({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function zt(F,{refreshToken:$}){const X=Ct(F);return X.append("Authorization",function(F){return`${tt} ${F}`}($)),X}function qe(F){return et.apply(this,arguments)}function et(){return(et=(0,Y.Z)(function*(F){const $=yield F();return $.status>=500&&$.status<600?F():$})).apply(this,arguments)}function Qe(F){return Number(F.replace("s","000"))}function gt(F,$){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,Y.Z)(function*(F,{fid:$}){const X=me(F),it={method:"POST",headers:Ct(F),body:JSON.stringify({fid:$,authVersion:tt,appId:F.appId,sdkVersion:Oe})},Rt=yield qe(()=>fetch(X,it));if(Rt.ok){const un=yield Rt.json();return{fid:un.fid||$,registrationStatus:2,refreshToken:un.refreshToken,authToken:_t(un.authToken)}}throw yield pt("Create Installation",Rt)})).apply(this,arguments)}function nn(F){return new Promise($=>{setTimeout($,F)})}const an=/^[cdef][\w-]{21}$/;function It(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const X=function(F){return function(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return an.test(X)?X:""}catch(F){return""}}function dn(F){return`${F.appName}!${F.appId}`}const Mn=new Map;function ur(F,$){const X=dn(F);Zn(X,$),function(F,$){const X=(!Hn&&"BroadcastChannel"in self&&(Hn=new BroadcastChannel("[Firebase] FID Change"),Hn.onmessage=F=>{Zn(F.data.key,F.data.fid)}),Hn);X&&X.postMessage({key:F,fid:$}),0===Mn.size&&Hn&&(Hn.close(),Hn=null)}(X,$)}function Zn(F,$){const X=Mn.get(F);if(X)for(const fe of X)fe($)}let Hn=null;const Gn="firebase-installations-store";let Mr=null;function Yr(){return Mr||(Mr=(0,de.openDb)("firebase-installations-database",1,F=>{0===F.oldVersion&&F.createObjectStore(Gn)})),Mr}function Lt(F,$){return jt.apply(this,arguments)}function jt(){return(jt=(0,Y.Z)(function*(F,$){const X=dn(F),Fe=(yield Yr()).transaction(Gn,"readwrite"),it=Fe.objectStore(Gn),Rt=yield it.get(X);return yield it.put($,X),yield Fe.complete,(!Rt||Rt.fid!==$.fid)&&ur(F,$.fid),$})).apply(this,arguments)}function wr(F){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,Y.Z)(function*(F){const $=dn(F),fe=(yield Yr()).transaction(Gn,"readwrite");yield fe.objectStore(Gn).delete($),yield fe.complete})).apply(this,arguments)}function vn(F,$){return _n.apply(this,arguments)}function _n(){return(_n=(0,Y.Z)(function*(F,$){const X=dn(F),Fe=(yield Yr()).transaction(Gn,"readwrite"),it=Fe.objectStore(Gn),Rt=yield it.get(X),un=$(Rt);return void 0===un?yield it.delete(X):yield it.put(un,X),yield Fe.complete,un&&(!Rt||Rt.fid!==un.fid)&&ur(F,un.fid),un})).apply(this,arguments)}function bn(F){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,Y.Z)(function*(F){let $;const X=yield vn(F,fe=>{const Fe=Dr(fe),it=An(F,Fe);return $=it.registrationPromise,it.installationEntry});return""===X.fid?{installationEntry:yield $}:{installationEntry:X,registrationPromise:$}})).apply(this,arguments)}function Dr(F){return ye(F||{fid:It(),registrationStatus:0})}function An(F,$){if(0===$.registrationStatus){if(!navigator.onLine)return{installationEntry:$,registrationPromise:Promise.reject(Le.create("app-offline"))};const X={fid:$.fid,registrationStatus:1,registrationTime:Date.now()},fe=function(F,$){return ln.apply(this,arguments)}(F,X);return{installationEntry:X,registrationPromise:fe}}return 1===$.registrationStatus?{installationEntry:$,registrationPromise:Li(F)}:{installationEntry:$}}function ln(){return(ln=(0,Y.Z)(function*(F,$){try{return Lt(F,yield gt(F,$))}catch(X){throw Pe(X)&&409===X.customData.serverCode?yield wr(F):yield Lt(F,{fid:$.fid,registrationStatus:0}),X}})).apply(this,arguments)}function Li(F){return dr.apply(this,arguments)}function dr(){return(dr=(0,Y.Z)(function*(F){let $=yield We(F);for(;1===$.registrationStatus;)yield nn(100),$=yield We(F);if(0===$.registrationStatus){const{installationEntry:X,registrationPromise:fe}=yield bn(F);return fe||X}return $})).apply(this,arguments)}function We(F){return vn(F,$=>{if(!$)throw Le.create("installation-not-found");return ye($)})}function ye(F){return function(F){return 1===F.registrationStatus&&F.registrationTime+1e4<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function yt(F,$){return ie.apply(this,arguments)}function ie(){return(ie=(0,Y.Z)(function*({appConfig:F,platformLoggerProvider:$},X){const fe=oe(F,X),Fe=zt(F,X),it=$.getImmediate({optional:!0});it&&Fe.append("x-firebase-client",it.getPlatformInfoString());const un={method:"POST",headers:Fe,body:JSON.stringify({installation:{sdkVersion:Oe}})},tn=yield qe(()=>fetch(fe,un));if(tn.ok)return _t(yield tn.json());throw yield pt("Generate Auth Token",tn)})).apply(this,arguments)}function oe(F,{fid:$}){return`${me(F)}/${$}/authTokens:generate`}function _e(F){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,Y.Z)(function*(F,$=!1){let X;const fe=yield vn(F.appConfig,it=>{if(!hn(it))throw Le.create("not-registered");const Rt=it.authToken;if(!$&&zr(Rt))return it;if(1===Rt.requestStatus)return X=Ue(F,$),it;{if(!navigator.onLine)throw Le.create("app-offline");const un=be(it);return X=or(F,un),un}});return X?yield X:fe.authToken})).apply(this,arguments)}function Ue(F,$){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,Y.Z)(function*(F,$){let X=yield rn(F.appConfig);for(;1===X.authToken.requestStatus;)yield nn(100),X=yield rn(F.appConfig);const fe=X.authToken;return 0===fe.requestStatus?_e(F,$):fe})).apply(this,arguments)}function rn(F){return vn(F,$=>{if(!hn($))throw Le.create("not-registered");return function(F){return 1===F.requestStatus&&F.requestTime+1e4<Date.now()}($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}function or(F,$){return xr.apply(this,arguments)}function xr(){return(xr=(0,Y.Z)(function*(F,$){try{const X=yield yt(F,$),fe=Object.assign(Object.assign({},$),{authToken:X});return yield Lt(F.appConfig,fe),X}catch(X){if(!Pe(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const fe=Object.assign(Object.assign({},$),{authToken:{requestStatus:0}});yield Lt(F.appConfig,fe)}else yield wr(F.appConfig);throw X}})).apply(this,arguments)}function hn(F){return void 0!==F&&2===F.registrationStatus}function zr(F){return 2===F.requestStatus&&!function(F){const $=Date.now();return $<F.creationTime||F.creationTime+F.expiresIn<$+36e5}(F)}function be(F){const $={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:$})}function Pt(){return(Pt=(0,Y.Z)(function*(F){const $=F,{installationEntry:X,registrationPromise:fe}=yield bn($.appConfig);return fe?fe.catch(console.error):_e($).catch(console.error),X.fid})).apply(this,arguments)}function Bn(){return(Bn=(0,Y.Z)(function*(F,$=!1){const X=F;return yield On(X.appConfig),(yield _e(X,$)).token})).apply(this,arguments)}function On(F){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,Y.Z)(function*(F){const{registrationPromise:$}=yield bn(F);$&&(yield $)})).apply(this,arguments)}function jr(F){return Le.create("missing-app-config-values",{valueName:F})}const uo="installations";(0,K._registerComponent)(new xe.wA(uo,F=>{const $=F.getProvider("app").getImmediate(),X=function(F){if(!F||!F.options)throw jr("App Configuration");if(!F.name)throw jr("App Name");const $=["projectId","apiKey","appId"];for(const X of $)if(!F.options[X])throw jr(X);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}($);return{app:$,appConfig:X,platformLoggerProvider:(0,K._getProvider)($,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,K._registerComponent)(new xe.wA("installations-internal",F=>{const $=F.getProvider("app").getImmediate(),X=(0,K._getProvider)($,uo).getImmediate();return{getId:()=>function(F){return Pt.apply(this,arguments)}(X),getToken:Fe=>function(F){return Bn.apply(this,arguments)}(X,Fe)}},"PRIVATE")),(0,K.registerVersion)($e,"0.5.4"),(0,K.registerVersion)($e,"0.5.4","esm2017");const _i="@firebase/remote-config",qr=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gi{constructor($,X,fe,Fe){this.client=$,this.storage=X,this.storageCache=fe,this.logger=Fe}isCachedDataFresh($,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-X,Fe=fe<=$;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${$}. Is cache hit: ${Fe}.`),Fe}fetch($){var X=this;return(0,Y.Z)(function*(){const[fe,Fe]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if(Fe&&X.isCachedDataFresh($.cacheMaxAgeMillis,fe))return Fe;$.eTag=Fe&&Fe.eTag;const it=yield X.client.fetch($),Rt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===it.status&&Rt.push(X.storage.setLastSuccessfulFetchResponse(it)),yield Promise.all(Rt),it})()}}function oa(F=navigator){return F.languages&&F.languages[0]||F.language}class vi{constructor($,X,fe,Fe,it,Rt){this.firebaseInstallations=$,this.sdkVersion=X,this.namespace=fe,this.projectId=Fe,this.apiKey=it,this.appId=Rt}fetch($){var X=this;return(0,Y.Z)(function*(){const[fe,Fe]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),Rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":$.eTag||"*"},tn={sdk_version:X.sdkVersion,app_instance_id:fe,app_instance_id_token:Fe,app_id:X.appId,language_code:oa()},kr={method:"POST",headers:un,body:JSON.stringify(tn)},Pr=fetch(Rt,kr),Ns=new Promise((tl,Do)=>{$.signal.addEventListener(()=>{const Ba=new Error("The operation was aborted.");Ba.name="AbortError",Do(Ba)})});let es;try{yield Promise.race([Pr,Ns]),es=yield Pr}catch(tl){let Do="fetch-client-network";throw"AbortError"===tl.name&&(Do="fetch-timeout"),qr.create(Do,{originalErrorMessage:tl.message})}let ri=es.status;const Vo=es.headers.get("ETag")||void 0;let ro,Va;if(200===es.status){let tl;try{tl=yield es.json()}catch(Do){throw qr.create("fetch-client-parse",{originalErrorMessage:Do.message})}ro=tl.entries,Va=tl.state}if("INSTANCE_STATE_UNSPECIFIED"===Va?ri=500:"NO_CHANGE"===Va?ri=304:("NO_TEMPLATE"===Va||"EMPTY_CONFIG"===Va)&&(ro={}),304!==ri&&200!==ri)throw qr.create("fetch-status",{httpStatus:ri});return{status:ri,eTag:Vo,config:ro}})()}}class Io{constructor($,X){this.client=$,this.storage=X}fetch($){var X=this;return(0,Y.Z)(function*(){const fe=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch($,fe)})()}attemptFetch($,{throttleEndTimeMillis:X,backoffCount:fe}){var Fe=this;return(0,Y.Z)(function*(){yield function(F,$){return new Promise((X,fe)=>{const Fe=Math.max($-Date.now(),0),it=setTimeout(X,Fe);F.addEventListener(()=>{clearTimeout(it),fe(qr.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}($.signal,X);try{const it=yield Fe.client.fetch($);return yield Fe.storage.deleteThrottleMetadata(),it}catch(it){if(!function(F){if(!(F instanceof ge.ZR&&F.customData))return!1;const $=Number(F.customData.httpStatus);return 429===$||500===$||503===$||504===$}(it))throw it;const Rt={throttleEndTimeMillis:Date.now()+(0,ge.$s)(fe),backoffCount:fe+1};return yield Fe.storage.setThrottleMetadata(Rt),Fe.attemptFetch($,Rt)}})()}}class Ta{constructor($,X,fe,Fe,it){this.app=$,this._client=X,this._storageCache=fe,this._storage=Fe,this._logger=it,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ao(F,$){const X=F.target.error||void 0;return qr.create($,{originalErrorMessage:X&&X.message})}const No="app_namespace_store";class ps{constructor($,X,fe,Fe=function(){return new Promise((F,$)=>{try{const X=indexedDB.open("firebase_remote_config",1);X.onerror=fe=>{$(Ao(fe,"storage-open"))},X.onsuccess=fe=>{F(fe.target.result)},X.onupgradeneeded=fe=>{0===fe.oldVersion&&fe.target.result.createObjectStore(No,{keyPath:"compositeKey"})}}catch(X){$(qr.create("storage-open",{originalErrorMessage:X}))}})}()){this.appId=$,this.appName=X,this.namespace=fe,this.openDbPromise=Fe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus($){return this.set("last_fetch_status",$)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis($){return this.set("last_successful_fetch_timestamp_millis",$)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse($){return this.set("last_successful_fetch_response",$)}getActiveConfig(){return this.get("active_config")}setActiveConfig($){return this.set("active_config",$)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag($){return this.set("active_config_etag",$)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata($){return this.set("throttle_metadata",$)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get($){var X=this;return(0,Y.Z)(function*(){const fe=yield X.openDbPromise;return new Promise((Fe,it)=>{const un=fe.transaction([No],"readonly").objectStore(No),tn=X.createCompositeKey($);try{const kr=un.get(tn);kr.onerror=Pr=>{it(Ao(Pr,"storage-get"))},kr.onsuccess=Pr=>{const Ns=Pr.target.result;Fe(Ns?Ns.value:void 0)}}catch(kr){it(qr.create("storage-get",{originalErrorMessage:kr&&kr.message}))}})})()}set($,X){var fe=this;return(0,Y.Z)(function*(){const Fe=yield fe.openDbPromise;return new Promise((it,Rt)=>{const tn=Fe.transaction([No],"readwrite").objectStore(No),kr=fe.createCompositeKey($);try{const Pr=tn.put({compositeKey:kr,value:X});Pr.onerror=Ns=>{Rt(Ao(Ns,"storage-set"))},Pr.onsuccess=()=>{it()}}catch(Pr){Rt(qr.create("storage-set",{originalErrorMessage:Pr&&Pr.message}))}})})()}delete($){var X=this;return(0,Y.Z)(function*(){const fe=yield X.openDbPromise;return new Promise((Fe,it)=>{const un=fe.transaction([No],"readwrite").objectStore(No),tn=X.createCompositeKey($);try{const kr=un.delete(tn);kr.onerror=Pr=>{it(Ao(Pr,"storage-delete"))},kr.onsuccess=()=>{Fe()}}catch(kr){it(qr.create("storage-delete",{originalErrorMessage:kr&&kr.message}))}})})()}createCompositeKey($){return[this.appId,this.appName,this.namespace,$].join()}}class qn{constructor($){this.storage=$}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var $=this;return(0,Y.Z)(function*(){const X=$.storage.getLastFetchStatus(),fe=$.storage.getLastSuccessfulFetchTimestampMillis(),Fe=$.storage.getActiveConfig(),it=yield X;it&&($.lastFetchStatus=it);const Rt=yield fe;Rt&&($.lastSuccessfulFetchTimestampMillis=Rt);const un=yield Fe;un&&($.activeConfig=un)})()}setLastFetchStatus($){return this.lastFetchStatus=$,this.storage.setLastFetchStatus($)}setLastSuccessfulFetchTimestampMillis($){return this.lastSuccessfulFetchTimestampMillis=$,this.storage.setLastSuccessfulFetchTimestampMillis($)}setActiveConfig($){return this.activeConfig=$,this.storage.setActiveConfig($)}}function ti(){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,Y.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch(F){return!1}})).apply(this,arguments)}(0,K._registerComponent)(new xe.wA("remote-config",function($,{instanceIdentifier:X}){const fe=$.getProvider("app").getImmediate(),Fe=$.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw qr.create("registration-window");if(!(0,ge.hl)())throw qr.create("indexed-db-unavailable");const{projectId:it,apiKey:Rt,appId:un}=fe.options;if(!it)throw qr.create("registration-project-id");if(!Rt)throw qr.create("registration-api-key");if(!un)throw qr.create("registration-app-id");const tn=new ps(un,fe.name,X=X||"firebase"),kr=new qn(tn),Pr=new Be.Yd(_i);Pr.logLevel=Be.in.ERROR;const Ns=new vi(Fe,K.SDK_VERSION,X,it,Rt,un),es=new Io(Ns,tn),ri=new gi(es,tn,kr,Pr),Vo=new Ta(fe,ri,kr,tn,Pr);return function(F){const $=(0,ge.m9)(F);$._initializePromise||($._initializePromise=$._storageCache.loadFromStorage().then(()=>{$._isInitializationComplete=!0}))}(Vo),Vo},"PUBLIC").setMultipleInstances(!0)),(0,K.registerVersion)(_i,"0.3.3"),(0,K.registerVersion)(_i,"0.3.3","esm2017");const hi="/firebase-messaging-sw.js",ul="/firebase-cloud-messaging-push-scope",li="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mi="google.c.a.c_id",Cr="google.c.a.c_l",Ki="google.c.a.ts",Sa="google.c.a.e";var Tr=(()=>{return(F=Tr||(Tr={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",Tr;var F})();function bi(F){const $=new Uint8Array(F);return btoa(String.fromCharCode(...$)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function aa(F){const X=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(X),Fe=new Uint8Array(fe.length);for(let it=0;it<fe.length;++it)Fe[it]=fe.charCodeAt(it);return Fe}const Mo="fcm_token_details_db",ho="fcm_token_object_Store";function Ga(F){return Kn.apply(this,arguments)}function Kn(){return Kn=(0,Y.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(it=>it.name).includes(Mo))return null;let $=null;return(yield(0,de.openDb)(Mo,5,function(){var fe=(0,Y.Z)(function*(Fe){var it;if(Fe.oldVersion<2||!Fe.objectStoreNames.contains(ho))return;const Rt=Fe.transaction.objectStore(ho),un=yield Rt.index("fcmSenderId").get(F);if(yield Rt.clear(),un)if(2===Fe.oldVersion){const tn=un;if(!tn.auth||!tn.p256dh||!tn.endpoint)return;$={token:tn.fcmToken,createTime:null!==(it=tn.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:tn.auth,p256dh:tn.p256dh,endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:"string"==typeof tn.vapidKey?tn.vapidKey:bi(tn.vapidKey)}}}else if(3===Fe.oldVersion){const tn=un;$={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:bi(tn.auth),p256dh:bi(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:bi(tn.vapidKey)}}}else if(4===Fe.oldVersion){const tn=un;$={token:tn.fcmToken,createTime:tn.createTime,subscriptionOptions:{auth:bi(tn.auth),p256dh:bi(tn.p256dh),endpoint:tn.endpoint,swScope:tn.swScope,vapidKey:bi(tn.vapidKey)}}}});return function(Fe){return fe.apply(this,arguments)}}())).close(),yield(0,de.deleteDb)(Mo),yield(0,de.deleteDb)("fcm_vapid_details_db"),yield(0,de.deleteDb)("undefined"),Ro($)?$:null}),Kn.apply(this,arguments)}function Ro(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:$}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof $.auth&&$.auth.length>0&&"string"==typeof $.p256dh&&$.p256dh.length>0&&"string"==typeof $.endpoint&&$.endpoint.length>0&&"string"==typeof $.swScope&&$.swScope.length>0&&"string"==typeof $.vapidKey&&$.vapidKey.length>0}const Ir="firebase-messaging-store";let ji=null;function $i(){return ji||(ji=(0,de.openDb)("firebase-messaging-database",1,F=>{0===F.oldVersion&&F.createObjectStore(Ir)})),ji}function V(F){return Z.apply(this,arguments)}function Z(){return(Z=(0,Y.Z)(function*(F){const $=Et(F),fe=yield(yield $i()).transaction(Ir).objectStore(Ir).get($);if(fe)return fe;{const Fe=yield Ga(F.appConfig.senderId);if(Fe)return yield j(F,Fe),Fe}})).apply(this,arguments)}function j(F,$){return ne.apply(this,arguments)}function ne(){return(ne=(0,Y.Z)(function*(F,$){const X=Et(F),Fe=(yield $i()).transaction(Ir,"readwrite");return yield Fe.objectStore(Ir).put($,X),yield Fe.complete,$})).apply(this,arguments)}function De(F){return Je.apply(this,arguments)}function Je(){return(Je=(0,Y.Z)(function*(F){const $=Et(F),fe=(yield $i()).transaction(Ir,"readwrite");yield fe.objectStore(Ir).delete($),yield fe.complete})).apply(this,arguments)}function Et({appConfig:F}){return F.appId}const mn=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Sr(F,$){return fr.apply(this,arguments)}function fr(){return(fr=(0,Y.Z)(function*(F,$){const X=yield fo(F),fe=Hi($),Fe={method:"POST",headers:X,body:JSON.stringify(fe)};let it;try{it=yield(yield fetch(Sn(F.appConfig),Fe)).json()}catch(Rt){throw mn.create("token-subscribe-failed",{errorInfo:Rt})}if(it.error)throw mn.create("token-subscribe-failed",{errorInfo:it.error.message});if(!it.token)throw mn.create("token-subscribe-no-token");return it.token})).apply(this,arguments)}function pr(F,$){return Br.apply(this,arguments)}function Br(){return(Br=(0,Y.Z)(function*(F,$){const X=yield fo(F),fe=Hi($.subscriptionOptions),Fe={method:"PATCH",headers:X,body:JSON.stringify(fe)};let it;try{it=yield(yield fetch(`${Sn(F.appConfig)}/${$.token}`,Fe)).json()}catch(Rt){throw mn.create("token-update-failed",{errorInfo:Rt})}if(it.error)throw mn.create("token-update-failed",{errorInfo:it.error.message});if(!it.token)throw mn.create("token-update-no-token");return it.token})).apply(this,arguments)}function _r(F,$){return kn.apply(this,arguments)}function kn(){return(kn=(0,Y.Z)(function*(F,$){const fe={method:"DELETE",headers:yield fo(F)};try{const it=yield(yield fetch(`${Sn(F.appConfig)}/${$}`,fe)).json();if(it.error)throw mn.create("token-unsubscribe-failed",{errorInfo:it.error.message})}catch(Fe){throw mn.create("token-unsubscribe-failed",{errorInfo:Fe})}})).apply(this,arguments)}function Sn({projectId:F}){return`https://fcmregistrations.googleapis.com/v1/projects/${F}/registrations`}function fo(F){return rs.apply(this,arguments)}function rs(){return(rs=(0,Y.Z)(function*({appConfig:F,installations:$}){const X=yield $.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function Hi({p256dh:F,auth:$,endpoint:X,vapidKey:fe}){const Fe={web:{endpoint:X,auth:$,p256dh:F}};return fe!==li&&(Fe.web.applicationPubKey=fe),Fe}const Ls=6048e5;function _s(F){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,Y.Z)(function*(F){const $=yield la(F.swRegistration,F.vapidKey),X={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:$.endpoint,auth:bi($.getKey("auth")),p256dh:bi($.getKey("p256dh"))},fe=yield V(F.firebaseDependencies);if(fe){if(Wa(fe.subscriptionOptions,X))return Date.now()>=fe.createTime+Ls?er(F,{token:fe.token,createTime:Date.now(),subscriptionOptions:X}):fe.token;try{yield _r(F.firebaseDependencies,fe.token)}catch(Fe){console.warn(Fe)}return ar(F.firebaseDependencies,X)}return ar(F.firebaseDependencies,X)})).apply(this,arguments)}function Bs(F){return bt.apply(this,arguments)}function bt(){return(bt=(0,Y.Z)(function*(F){const $=yield V(F.firebaseDependencies);$&&(yield _r(F.firebaseDependencies,$.token),yield De(F.firebaseDependencies));const X=yield F.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()})).apply(this,arguments)}function er(F,$){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,Y.Z)(function*(F,$){try{const X=yield pr(F.firebaseDependencies,$),fe=Object.assign(Object.assign({},$),{token:X,createTime:Date.now()});return yield j(F.firebaseDependencies,fe),X}catch(X){throw yield Bs(F),X}})).apply(this,arguments)}function ar(F,$){return cl.apply(this,arguments)}function cl(){return(cl=(0,Y.Z)(function*(F,$){const fe={token:yield Sr(F,$),createTime:Date.now(),subscriptionOptions:$};return yield j(F,fe),fe.token})).apply(this,arguments)}function la(F,$){return eo.apply(this,arguments)}function eo(){return(eo=(0,Y.Z)(function*(F,$){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:aa($)})})).apply(this,arguments)}function Wa(F,$){return $.vapidKey===F.vapidKey&&$.endpoint===F.endpoint&&$.auth===F.auth&&$.p256dh===F.p256dh}function Aa(F){const $={from:F.from,collapseKey:F.collapse_key,messageId:F.fcm_message_id};return function(F,$){if(!$.notification)return;F.notification={};const X=$.notification.title;X&&(F.notification.title=X);const fe=$.notification.body;fe&&(F.notification.body=fe);const Fe=$.notification.image;Fe&&(F.notification.image=Fe)}($,F),function(F,$){!$.data||(F.data=$.data)}($,F),function(F,$){if(!$.fcmOptions)return;F.fcmOptions={};const X=$.fcmOptions.link;X&&(F.fcmOptions.link=X);const fe=$.fcmOptions.analytics_label;fe&&(F.fcmOptions.analyticsLabel=fe)}($,F),$}function ys(F){return"object"==typeof F&&!!F&&mi in F}function Gi(F,$){const X=[];for(let fe=0;fe<F.length;fe++)X.push(F.charAt(fe)),fe<$.length&&X.push($.charAt(fe));return X.join("")}function vs(F){return mn.create("missing-app-config-values",{valueName:F})}Gi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Gi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ca{constructor($,X,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Fe=function(F){if(!F||!F.options)throw vs("App Configuration Object");if(!F.name)throw vs("App Name");const $=["projectId","apiKey","appId","messagingSenderId"],{options:X}=F;for(const fe of $)if(!X[fe])throw vs(fe);return{appName:F.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}($);this.firebaseDependencies={app:$,appConfig:Fe,installations:X,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function ls(F){return to.apply(this,arguments)}function to(){return(to=(0,Y.Z)(function*(F){try{F.swRegistration=yield navigator.serviceWorker.register(hi,{scope:ul}),F.swRegistration.update().catch(()=>{})}catch($){throw mn.create("failed-service-worker-registration",{browserErrorMessage:$.message})}})).apply(this,arguments)}function Tl(F,$){return go.apply(this,arguments)}function go(){return(go=(0,Y.Z)(function*(F,$){if(!$&&!F.swRegistration&&(yield ls(F)),$||!F.swRegistration){if(!($ instanceof ServiceWorkerRegistration))throw mn.create("invalid-sw-registration");F.swRegistration=$}})).apply(this,arguments)}function dl(F,$){return da.apply(this,arguments)}function da(){return(da=(0,Y.Z)(function*(F,$){$?F.vapidKey=$:F.vapidKey||(F.vapidKey=li)})).apply(this,arguments)}function Di(){return(Di=(0,Y.Z)(function*(F,$){if(!navigator)throw mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mn.create("permission-blocked");return yield dl(F,null==$?void 0:$.vapidKey),yield Tl(F,null==$?void 0:$.serviceWorkerRegistration),_s(F)})).apply(this,arguments)}function hl(F,$,X){return qo.apply(this,arguments)}function qo(){return(qo=(0,Y.Z)(function*(F,$,X){const fe=mo($);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:X[mi],message_name:X[Cr],message_time:X[Ki],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function mo(F){switch(F){case Tr.NOTIFICATION_CLICKED:return"notification_open";case Tr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ko(){return(ko=(0,Y.Z)(function*(F,$){const X=$.data;if(!X.isFirebaseMessaging)return;F.onMessageHandler&&X.messageType===Tr.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(Aa(X)):F.onMessageHandler.next(Aa(X)));const fe=X.data;ys(fe)&&"1"===fe[Sa]&&(yield hl(F,X.messageType,fe))})).apply(this,arguments)}const is="@firebase/messaging";function _o(){return fi.apply(this,arguments)}function fi(){return(fi=(0,Y.Z)(function*(){return"undefined"!=typeof window&&(0,ge.hl)()&&(yield(0,ge.eu)())&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,K._registerComponent)(new xe.wA("messaging",F=>{const $=new ca(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function(F,$){return ko.apply(this,arguments)}($,X)),$},"PUBLIC")),(0,K._registerComponent)(new xe.wA("messaging-internal",F=>{const $=F.getProvider("messaging").getImmediate();return{getToken:fe=>function(F,$){return Di.apply(this,arguments)}($,fe)}},"PRIVATE")),(0,K.registerVersion)(is,"0.9.4"),(0,K.registerVersion)(is,"0.9.4","esm2017");const tr="analytics",Ii="firebase_id",lu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Za="https://www.googletagmanager.com/gtag/js",Hr=new Be.Yd("@firebase/analytics");function fa(F){return Promise.all(F.map($=>$.catch(X=>X)))}function Ss(F,$){const X=document.createElement("script");X.src=`${Za}?l=${F}&id=${$}`,X.async=!0,document.head.appendChild(X)}function vo(F,$,X,fe,Fe,it){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,Y.Z)(function*(F,$,X,fe,Fe,it){const Rt=fe[Fe];try{if(Rt)yield $[Rt];else{const tn=(yield fa(X)).find(kr=>kr.measurementId===Fe);tn&&(yield $[tn.appId])}}catch(un){Hr.error(un)}F("config",Fe,it)})).apply(this,arguments)}function bo(F,$,X,fe,Fe){return Po.apply(this,arguments)}function Po(){return(Po=(0,Y.Z)(function*(F,$,X,fe,Fe){try{let it=[];if(Fe&&Fe.send_to){let Rt=Fe.send_to;Array.isArray(Rt)||(Rt=[Rt]);const un=yield fa(X);for(const tn of Rt){const kr=un.find(Ns=>Ns.measurementId===tn),Pr=kr&&$[kr.appId];if(!Pr){it=[];break}it.push(Pr)}}0===it.length&&(it=Object.values($)),yield Promise.all(it),F("event",fe,Fe||{})}catch(it){Hr.error(it)}})).apply(this,arguments)}function Vt(){const F=window.document.getElementsByTagName("script");for(const $ of Object.values(F))if($.src&&$.src.includes(Za))return $;return null}const Qi=new ge.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),xa=new class{constructor($={},X=1e3){this.throttleMetadata=$,this.intervalMillis=X}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,X){this.throttleMetadata[$]=X}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function Jt(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function ot(F){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,Y.Z)(function*(F){var $;const{appId:X,apiKey:fe}=F,Fe={method:"GET",headers:Jt(fe)},it=lu.replace("{app-id}",X),Rt=yield fetch(it,Fe);if(200!==Rt.status&&304!==Rt.status){let un="";try{const tn=yield Rt.json();(null===($=tn.error)||void 0===$?void 0:$.message)&&(un=tn.error.message)}catch(tn){}throw Qi.create("config-fetch-failed",{httpStatus:Rt.status,responseMessage:un})}return Rt.json()})).apply(this,arguments)}function Gr(F){return fl.apply(this,arguments)}function fl(){return(fl=(0,Y.Z)(function*(F,$=xa,X){const{appId:fe,apiKey:Fe,measurementId:it}=F.options;if(!fe)throw Qi.create("no-app-id");if(!Fe){if(it)return{measurementId:it,appId:fe};throw Qi.create("no-api-key")}const Rt=$.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},un=new B;return setTimeout((0,Y.Z)(function*(){un.abort()}),void 0!==X?X:6e4),Oa({appId:fe,apiKey:Fe,measurementId:it},Rt,un,$)})).apply(this,arguments)}function Oa(F,$,X){return k.apply(this,arguments)}function k(){return(k=(0,Y.Z)(function*(F,{throttleEndTimeMillis:$,backoffCount:X},fe,Fe=xa){const{appId:it,measurementId:Rt}=F;try{yield N(fe,$)}catch(un){if(Rt)return Hr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${un.message}]`),{appId:it,measurementId:Rt};throw un}try{const un=yield ot(F);return Fe.deleteThrottleMetadata(it),un}catch(un){if(!S(un)){if(Fe.deleteThrottleMetadata(it),Rt)return Hr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Rt} provided in the "measurementId" field in the local Firebase config. [${un.message}]`),{appId:it,measurementId:Rt};throw un}const tn=503===Number(un.customData.httpStatus)?(0,ge.$s)(X,Fe.intervalMillis,30):(0,ge.$s)(X,Fe.intervalMillis),kr={throttleEndTimeMillis:Date.now()+tn,backoffCount:X+1};return Fe.setThrottleMetadata(it,kr),Hr.debug(`Calling attemptFetch again in ${tn} millis`),Oa(F,kr,fe,Fe)}})).apply(this,arguments)}function N(F,$){return new Promise((X,fe)=>{const Fe=Math.max($-Date.now(),0),it=setTimeout(X,Fe);F.addEventListener(()=>{clearTimeout(it),fe(Qi.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}function S(F){if(!(F instanceof ge.ZR&&F.customData))return!1;const $=Number(F.customData.httpStatus);return 429===$||500===$||503===$||504===$}class B{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}function W(){return te.apply(this,arguments)}function te(){return(te=(0,Y.Z)(function*(){if(!(0,ge.hl)())return Hr.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ge.eu)()}catch(F){return Hr.warn(Qi.create("indexeddb-unavailable",{errorInfo:F}).message),!1}return!0})).apply(this,arguments)}function we(){return(we=(0,Y.Z)(function*(F,$,X,fe,Fe,it,Rt){var un;const tn=Gr(F);tn.then(ri=>{X[ri.measurementId]=ri.appId,F.options.measurementId&&ri.measurementId!==F.options.measurementId&&Hr.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${ri.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ri=>Hr.error(ri)),$.push(tn);const kr=W().then(ri=>{if(ri)return fe.getId()}),[Pr,Ns]=yield Promise.all([tn,kr]);Vt()||Ss(it,Pr.measurementId),Fe("js",new Date);const es=null!==(un=null==Rt?void 0:Rt.config)&&void 0!==un?un:{};return es.origin="firebase",es.update=!0,null!=Ns&&(es[Ii]=Ns),Fe("config",Pr.measurementId,es),Pr.measurementId})).apply(this,arguments)}class ct{constructor($){this.app=$}_delete(){return delete Xt[this.app.options.appId],Promise.resolve()}}let Xt={},en=[];const En={};let Fn,Ji,Nr="dataLayer",ui=!1;function In(F,$,X){!function(){const F=[];if((0,ge.ru)()&&F.push("This is a browser extension environment."),(0,ge.zI)()||F.push("Cookies are not available."),F.length>0){const $=F.map((fe,Fe)=>`(${Fe+1}) ${fe}`).join(" "),X=Qi.create("invalid-analytics-context",{errorInfo:$});Hr.warn(X.message)}}();const fe=F.options.appId;if(!fe)throw Qi.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw Qi.create("no-api-key");Hr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xt[fe])throw Qi.create("already-exists",{id:fe});if(!ui){!function(F){let $=[];Array.isArray(window[F])?$=window[F]:window[F]=$}(Nr);const{wrappedGtag:it,gtagCore:Rt}=function(F,$,X,fe,Fe){let it=function(...Rt){window[fe].push(arguments)};return window[Fe]&&"function"==typeof window[Fe]&&(it=window[Fe]),window[Fe]=function(F,$,X,fe){function it(){return(it=(0,Y.Z)(function*(Rt,un,tn){try{"event"===Rt?yield bo(F,$,X,un,tn):"config"===Rt?yield vo(F,$,X,fe,un,tn):F("set",un)}catch(kr){Hr.error(kr)}})).apply(this,arguments)}return function(Rt,un,tn){return it.apply(this,arguments)}}(it,F,$,X),{gtagCore:it,wrappedGtag:window[Fe]}}(Xt,en,En,Nr,"gtag");Ji=it,Fn=Rt,ui=!0}return Xt[fe]=function(F,$,X,fe,Fe,it,Rt){return we.apply(this,arguments)}(F,en,En,$,Fn,Nr,X),new ct(F)}function pi(){return(pi=(0,Y.Z)(function*(F,$,X,fe,Fe){if(Fe&&Fe.global)F("event",X,fe);else{const it=yield $;F("event",X,Object.assign(Object.assign({},fe),{send_to:it}))}})).apply(this,arguments)}function Qr(){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,Y.Z)(function*(){if((0,ge.ru)()||!(0,ge.zI)()||!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch(F){return!1}})).apply(this,arguments)}const Il="@firebase/analytics";(0,K._registerComponent)(new xe.wA(tr,($,{options:X})=>In($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,K._registerComponent)(new xe.wA("analytics-internal",function($){try{const X=$.getProvider(tr).getImmediate();return{logEvent:(fe,Fe,it)=>function(F,$,X,fe){F=(0,ge.m9)(F),function(F,$,X,fe,Fe){return pi.apply(this,arguments)}(Ji,Xt[F.app.options.appId],$,X,fe).catch(Fe=>Hr.error(Fe))}(X,fe,Fe,it)}}catch(X){throw Qi.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,K.registerVersion)(Il,"0.7.4"),(0,K.registerVersion)(Il,"0.7.4","esm2017");var Wi=H(4408),Qa=H(7565);const Kl=new class extends Qa.v{}(class extends Wi.o{constructor($,X){super($,X),this.scheduler=$,this.work=X}schedule($,X=0){return X>0?super.schedule($,X):(this.delay=X,this.state=$,this.scheduler.flush(this),this)}execute($,X){return X>0||this.closed?super.execute($,X):this._execute($,X)}requestAsyncId($,X,fe=0){return null!=fe&&fe>0||null==fe&&this.delay>0?super.requestAsyncId($,X,fe):$.flush(this)}});var zi=H(4986),Yo=H(8306),xi=H(8505),Sl=H(9468),ni=H(5363);const kc=new T.GfV("7.2.0"),Ja="__angularfire_symbol__analyticsIsSupported",no="__angularfire_symbol__remoteConfigIsSupported",us="__angularfire_symbol__messagingIsSupported";function sc(F,$,X){if($){if(1===$.length)return $[0];const it=$.filter(Rt=>Rt.app===X);if(1===it.length)return it[0]}return X.container.getProvider(F).getImmediate({optional:!0})}globalThis[Ja]||(globalThis[Ja]=Qr().then(F=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=F)),globalThis[us]||(globalThis[us]=_o().then(F=>globalThis.__angularfire_symbol__messagingIsSupportedValue=F)),globalThis[no]||(globalThis[no]=ti().then(F=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=F));const oc=(F,$)=>{const X=$?[$]:(0,_.C6)(),fe=[];return X.forEach(Fe=>{Fe.container.getProvider(F).instances.forEach(Rt=>{fe.includes(Rt)||fe.push(Rt)})}),fe};function Qo(){}class Pc{constructor($,X=Kl){this.zone=$,this.delegate=X}now(){return this.delegate.now()}schedule($,X,fe){const Fe=this.zone;return this.delegate.schedule(function(Rt){Fe.runGuarded(()=>{$.apply(this,[Rt])})},X,fe)}}class Xa{constructor($){this.zone=$,this.task=null}call($,X){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo)),X.pipe((0,xi.b)({next:fe,complete:fe,error:fe})).subscribe($).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ml=(()=>{class F{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new Pc(Zone.current)),this.insideAngular=X.run(()=>new Pc(Zone.current,zi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(X){return new(X||F)(T.LFG(T.R0b))},F.\u0275prov=T.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function zs(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function Al(F){return zs().ngZone.runOutsideAngular(()=>F())}function As(F){return zs().ngZone.run(()=>F())}function Jo(F){return zs(),function(F){return function(X){return(X=X.lift(new Xa(F.ngZone))).pipe((0,Sl.R)(F.outsideAngular),(0,ni.Q)(F.insideAngular))}}(zs())(F)}const Nl=(F,$)=>{const X=void 0;return function(){return $&&setTimeout(()=>{"scheduled"===$.state&&$.invoke()},10),As(()=>F.apply(X,arguments))}},qs=(F,$)=>function(){let X;for(let Fe=0;Fe<arguments.length;Fe++)"function"==typeof arguments[Fe]&&($&&(X||(X=As(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo)))),arguments[Fe]=Nl(arguments[Fe],X));const fe=Al(()=>F.apply(this,arguments));if(!$){if(fe instanceof Yo.y){const Fe=zs();return fe.pipe((0,Sl.R)(Fe.outsideAngular),(0,ni.Q)(Fe.insideAngular))}return As(()=>fe)}return fe instanceof Yo.y?fe.pipe(Jo):fe instanceof Promise?As(()=>new Promise((Fe,it)=>fe.then(Rt=>As(()=>Fe(Rt)),Rt=>As(()=>it(Rt))))):"function"==typeof fe&&X?function(){return setTimeout(()=>{X&&"scheduled"===X.state&&X.invoke()},10),fe.apply(this,arguments)}:As(()=>fe)}},662:(Zt,Ye,H)=>{"use strict";H.d(Ye,{$:()=>dl,A:()=>Qt,E:()=>Dn,G:()=>vi,I:()=>Yi,K:()=>Zi,L:()=>V,M:()=>De,N:()=>Je,P:()=>Nl,Q:()=>Et,R:()=>sc,T:()=>ne,U:()=>fr,V:()=>pr,W:()=>fo,X:()=>Aa,Y:()=>ua,Z:()=>ys,_:()=>ca,a:()=>Fn,a0:()=>Na,a1:()=>hl,a2:()=>mo,a3:()=>ko,a4:()=>js,a5:()=>$s,a6:()=>$l,a7:()=>fi,a8:()=>yo,a9:()=>Ko,aA:()=>ga,aB:()=>Ua,aC:()=>Ft,aG:()=>bs,aJ:()=>mn,aa:()=>Hl,ab:()=>tr,ae:()=>lu,af:()=>Hr,ag:()=>fa,aj:()=>Vs,ak:()=>Ei,am:()=>Oa,an:()=>te,ao:()=>$r,ap:()=>Mr,aq:()=>on,ar:()=>oi,as:()=>cr,at:()=>xl,au:()=>Zs,av:()=>Hn,aw:()=>wt,ax:()=>Lt,ay:()=>Vr,az:()=>ma,b:()=>Nr,c:()=>un,d:()=>Ns,e:()=>kr,f:()=>cu,g:()=>Fu,h:()=>hu,i:()=>Wi,j:()=>Ql,k:()=>Lu,l:()=>ml,m:()=>Ci,n:()=>nd,o:()=>nn,r:()=>Al,s:()=>Pc,u:()=>Jo,z:()=>dn});var T=H(5861),_=H(2090),Y=H(9681);function Be(C,y){var w={};for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&y.indexOf(R)<0&&(w[R]=C[R]);if(null!=C&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(R=Object.getOwnPropertySymbols(C);z<R.length;z++)y.indexOf(R[z])<0&&Object.prototype.propertyIsEnumerable.call(C,R[z])&&(w[R[z]]=C[R[z]])}return w}var rt=H(1877),gt=H(4859);const nn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Qt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const dn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Mn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ur=new _.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ti=new rt.Yd("@firebase/auth");function Zn(C,...y){Ti.logLevel<=rt.in.ERROR&&Ti.error(`Auth (${Y.SDK_VERSION}): ${C}`,...y)}function cr(C,...y){throw Xr(C,...y)}function Hn(C,...y){return Xr(C,...y)}function Ni(C,y,w){const R=Object.assign(Object.assign({},Mn()),{[y]:w});return new _.LL("auth","Firebase",R).create(y,{appName:C.name})}function Lr(C,y,w){if(!(y instanceof w))throw w.name!==y.constructor.name&&cr(C,"argument-error"),Ni(C,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xr(C,...y){if("string"!=typeof C){const w=y[0],R=[...y.slice(1)];return R[0]&&(R[0].appName=C.name),C._errorFactory.create(w,...R)}return ur.create(C,...y)}function wt(C,y,...w){if(!C)throw Xr(y,...w)}function Gn(C){const y="INTERNAL ASSERTION FAILED: "+C;throw Zn(y),new Error(y)}function Mr(C,y){C||Gn(y)}const Yr=new Map;function Lt(C){Mr(C instanceof Function,"Expected a class definition");let y=Yr.get(C);return y?(Mr(y instanceof C,"Instance stored in cache mismatched with class"),y):(y=new C,Yr.set(C,y),y)}function Ar(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function vn(){return"http:"===_n()||"https:"===_n()}function _n(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Dr{constructor(y,w){this.shortDelay=y,this.longDelay=w,Mr(w>y,"Short delay should be less than long delay!"),this.isMobile=(0,_.uI)()||(0,_.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vn()||(0,_.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function An(C,y){Mr(C.emulator,"Emulator should always be set here");const{url:w}=C.emulator;return y?`${w}${y.startsWith("/")?y.slice(1):y}`:w}class Ht{static initialize(y,w,R){this.fetchImpl=y,w&&(this.headersImpl=w),R&&(this.responseImpl=R)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ln={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Li=new Dr(3e4,6e4);function dr(C,y){return C.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:C.tenantId}):y}function We(C,y,w,R){return ye.apply(this,arguments)}function ye(){return(ye=(0,T.Z)(function*(C,y,w,R,z={}){return Se(C,z,(0,T.Z)(function*(){let ee={},Re={};R&&("GET"===y?Re=R:ee={body:JSON.stringify(R)});const ft=(0,_.xO)(Object.assign({key:C.config.apiKey},Re)).slice(1),qt=yield C._getAdditionalHeaders();return qt["Content-Type"]="application/json",C.languageCode&&(qt["X-Firebase-Locale"]=C.languageCode),Ht.fetch()(_e(C,C.config.apiHost,w,ft),Object.assign({method:y,headers:qt,referrerPolicy:"no-referrer"},ee))}))})).apply(this,arguments)}function Se(C,y,w){return yt.apply(this,arguments)}function yt(){return(yt=(0,T.Z)(function*(C,y,w){C._canInitEmulator=!1;const R=Object.assign(Object.assign({},ln),y);try{const z=new Ze(C),ee=yield Promise.race([w(),z.promise]);z.clearNetworkTimeout();const Re=yield ee.json();if("needConfirmation"in Re)throw Ue(C,"account-exists-with-different-credential",Re);if(ee.ok&&!("errorMessage"in Re))return Re;{const ft=ee.ok?Re.errorMessage:Re.error.message,[qt,Bt]=ft.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qt)throw Ue(C,"credential-already-in-use",Re);if("EMAIL_EXISTS"===qt)throw Ue(C,"email-already-in-use",Re);const Un=R[qt]||qt.toLowerCase().replace(/[_\s]+/g,"-");if(Bt)throw Ni(C,Un,Bt);cr(C,Un)}}catch(z){if(z instanceof _.ZR)throw z;cr(C,"network-request-failed")}})).apply(this,arguments)}function ie(C,y,w,R){return oe.apply(this,arguments)}function oe(){return(oe=(0,T.Z)(function*(C,y,w,R,z={}){const ee=yield We(C,y,w,R,z);return"mfaPendingCredential"in ee&&cr(C,"multi-factor-auth-required",{_serverResponse:ee}),ee})).apply(this,arguments)}function _e(C,y,w,R){const z=`${y}${w}?${R}`;return C.config.emulator?An(C.config,z):`${C.config.apiScheme}://${z}`}class Ze{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((w,R)=>{this.timer=setTimeout(()=>R(Hn(this.auth,"timeout")),Li.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ue(C,y,w){const R={appName:C.name};w.email&&(R.email=w.email),w.phoneNumber&&(R.phoneNumber=w.phoneNumber);const z=Hn(C,y,R);return z.customData._tokenResponse=w,z}function rn(){return(rn=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function or(C,y){return xr.apply(this,arguments)}function xr(){return(xr=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function hn(C,y){return zr.apply(this,arguments)}function zr(){return(zr=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Ve(C){if(C)try{const y=new Date(Number(C));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function ht(){return(ht=(0,T.Z)(function*(C,y=!1){const w=(0,_.m9)(C),R=yield w.getIdToken(y),z=Rn(R);wt(z&&z.exp&&z.auth_time&&z.iat,w.auth,"internal-error");const ee="object"==typeof z.firebase?z.firebase:void 0,Re=null==ee?void 0:ee.sign_in_provider;return{claims:z,token:R,authTime:Ve(Pt(z.auth_time)),issuedAtTime:Ve(Pt(z.iat)),expirationTime:Ve(Pt(z.exp)),signInProvider:Re||null,signInSecondFactor:(null==ee?void 0:ee.sign_in_second_factor)||null}})).apply(this,arguments)}function Pt(C){return 1e3*Number(C)}function Rn(C){const[y,w,R]=C.split(".");if(void 0===y||void 0===w||void 0===R)return Zn("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,_.tV)(w);return z?JSON.parse(z):(Zn("Failed to decode base64 JWT payload"),null)}catch(z){return Zn("Caught error parsing JWT payload as JSON",z),null}}function On(C,y){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,T.Z)(function*(C,y,w=!1){if(w)return y;try{return yield y}catch(R){throw R instanceof _.ZR&&mr(R)&&C.auth.currentUser===C&&(yield C.auth.signOut()),R}})).apply(this,arguments)}function mr({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class Or{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var w;if(y){const R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}{this.errorBackoff=3e4;const z=(null!==(w=this.user.stsTokenManager.expirationTime)&&void 0!==w?w:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(y=!1){var w=this;if(!this.isRunning)return;const R=this.getInterval(y);this.timerId=setTimeout((0,T.Z)(function*(){yield w.iteration()}),R)}iteration(){var y=this;return(0,T.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===w.code&&y.schedule(!0))}y.schedule()})()}}class wn{constructor(y,w){this.createdAt=y,this.lastLoginAt=w,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ve(this.lastLoginAt),this.creationTime=Ve(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hr(C){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,T.Z)(function*(C){var y;const w=C.auth,R=yield C.getIdToken(),z=yield On(C,hn(w,{idToken:R}));wt(null==z?void 0:z.users.length,w,"internal-error");const ee=z.users[0];C._notifyReloadListener(ee);const Re=(null===(y=ee.providerUserInfo)||void 0===y?void 0:y.length)?jr(ee.providerUserInfo):[],ft=Vi(C.providerData,Re),Un=!!C.isAnonymous&&!(C.email&&ee.passwordHash||(null==ft?void 0:ft.length)),Wr={uid:ee.localId,displayName:ee.displayName||null,photoURL:ee.photoUrl||null,email:ee.email||null,emailVerified:ee.emailVerified||!1,phoneNumber:ee.phoneNumber||null,tenantId:ee.tenantId||null,providerData:ft,metadata:new wn(ee.createdAt,ee.lastLoginAt),isAnonymous:Un};Object.assign(C,Wr)})).apply(this,arguments)}function Js(){return(Js=(0,T.Z)(function*(C){const y=(0,_.m9)(C);yield hr(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Vi(C,y){return[...C.filter(R=>!y.some(z=>z.providerId===R.providerId)),...y]}function jr(C){return C.map(y=>{var{providerId:w}=y,R=Be(y,["providerId"]);return{providerId:w,uid:R.rawId||"",displayName:R.displayName||null,email:R.email||null,phoneNumber:R.phoneNumber||null,photoURL:R.photoUrl||null}})}function Bi(){return(Bi=(0,T.Z)(function*(C,y){const w=yield Se(C,{},(0,T.Z)(function*(){const R=(0,_.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:z,apiKey:ee}=C.config,Re=_e(C,z,"/v1/token",`key=${ee}`),ft=yield C._getAdditionalHeaders();return ft["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(Re,{method:"POST",headers:ft,body:R})}));return{accessToken:w.access_token,expiresIn:w.expires_in,refreshToken:w.refresh_token}})).apply(this,arguments)}class $t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){wt(y.idToken,"internal-error"),wt(void 0!==y.idToken,"internal-error"),wt(void 0!==y.refreshToken,"internal-error");const w="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function(C){const y=Rn(C);return wt(y,"internal-error"),wt(void 0!==y.exp,"internal-error"),wt(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,w)}getToken(y,w=!1){var R=this;return(0,T.Z)(function*(){return wt(!R.accessToken||R.refreshToken,y,"user-token-expired"),w||!R.accessToken||R.isExpired?R.refreshToken?(yield R.refresh(y,R.refreshToken),R.accessToken):null:R.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,w){var R=this;return(0,T.Z)(function*(){const{accessToken:z,refreshToken:ee,expiresIn:Re}=yield function(C,y){return Bi.apply(this,arguments)}(y,w);R.updateTokensAndExpiration(z,ee,Number(Re))})()}updateTokensAndExpiration(y,w,R){this.refreshToken=w||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*R}static fromJSON(y,w){const{refreshToken:R,accessToken:z,expirationTime:ee}=w,Re=new $t;return R&&(wt("string"==typeof R,"internal-error",{appName:y}),Re.refreshToken=R),z&&(wt("string"==typeof z,"internal-error",{appName:y}),Re.accessToken=z),ee&&(wt("number"==typeof ee,"internal-error",{appName:y}),Re.expirationTime=ee),Re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new $t,this.toJSON())}_performRefresh(){return Gn("not implemented")}}function fn(C,y){wt("string"==typeof C||void 0===C,"internal-error",{appName:y})}class Er{constructor(y){var{uid:w,auth:R,stsTokenManager:z}=y,ee=Be(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Or(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=w,this.auth=R,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=ee.displayName||null,this.email=ee.email||null,this.emailVerified=ee.emailVerified||!1,this.phoneNumber=ee.phoneNumber||null,this.photoURL=ee.photoURL||null,this.isAnonymous=ee.isAnonymous||!1,this.tenantId=ee.tenantId||null,this.metadata=new wn(ee.createdAt||void 0,ee.lastLoginAt||void 0)}getIdToken(y){var w=this;return(0,T.Z)(function*(){const R=yield On(w,w.stsTokenManager.getToken(w.auth,y));return wt(R,w.auth,"internal-error"),w.accessToken!==R&&(w.accessToken=R,yield w.auth._persistUserIfCurrent(w),w.auth._notifyListenersIfCurrent(w)),R})()}getIdTokenResult(y){return function(C){return ht.apply(this,arguments)}(this,y)}reload(){return function(C){return Js.apply(this,arguments)}(this)}_assign(y){this!==y&&(wt(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(w=>Object.assign({},w)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new Er(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,w=!1){var R=this;return(0,T.Z)(function*(){let z=!1;y.idToken&&y.idToken!==R.stsTokenManager.accessToken&&(R.stsTokenManager.updateFromServerResponse(y),z=!0),w&&(yield hr(R)),yield R.auth._persistUserIfCurrent(R),z&&R.auth._notifyListenersIfCurrent(R)})()}delete(){var y=this;return(0,T.Z)(function*(){const w=yield y.getIdToken();return yield On(y,function(C,y){return rn.apply(this,arguments)}(y.auth,{idToken:w})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,w){var R,z,ee,Re,ft,qt,Bt,Un;const Wr=null!==(R=w.displayName)&&void 0!==R?R:void 0,Kr=null!==(z=w.email)&&void 0!==z?z:void 0,Eo=null!==(ee=w.phoneNumber)&&void 0!==ee?ee:void 0,ya=null!==(Re=w.photoURL)&&void 0!==Re?Re:void 0,ds=null!==(ft=w.tenantId)&&void 0!==ft?ft:void 0,wu=null!==(qt=w._redirectEventId)&&void 0!==qt?qt:void 0,rd=null!==(Bt=w.createdAt)&&void 0!==Bt?Bt:void 0,tu=null!==(Un=w.lastLoginAt)&&void 0!==Un?Un:void 0,{uid:ki,emailVerified:kl,isAnonymous:nu,providerData:Du,stsTokenManager:Pl}=w;wt(ki&&Pl,y,"internal-error");const ea=$t.fromJSON(this.name,Pl);wt("string"==typeof ki,y,"internal-error"),fn(Wr,y.name),fn(Kr,y.name),wt("boolean"==typeof kl,y,"internal-error"),wt("boolean"==typeof nu,y,"internal-error"),fn(Eo,y.name),fn(ya,y.name),fn(ds,y.name),fn(wu,y.name),fn(rd,y.name),fn(tu,y.name);const id=new Er({uid:ki,auth:y,email:Kr,emailVerified:kl,displayName:Wr,isAnonymous:nu,photoURL:ya,phoneNumber:Eo,tenantId:ds,stsTokenManager:ea,createdAt:rd,lastLoginAt:tu});return Du&&Array.isArray(Du)&&(id.providerData=Du.map(hc=>Object.assign({},hc))),wu&&(id._redirectEventId=wu),id}static _fromIdTokenResponse(y,w,R=!1){return(0,T.Z)(function*(){const z=new $t;z.updateFromServerResponse(w);const ee=new Er({uid:w.localId,auth:y,stsTokenManager:z,isAnonymous:R});return yield hr(ee),ee})()}}const Zi=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(w,R){var z=this;return(0,T.Z)(function*(){z.storage[w]=R})()}_get(w){var R=this;return(0,T.Z)(function*(){const z=R.storage[w];return void 0===z?null:z})()}_remove(w){var R=this;return(0,T.Z)(function*(){delete R.storage[w]})()}_addListener(w,R){}_removeListener(w,R){}}return C.type="NONE",C})();function Vr(C,y,w){return`firebase:${C}:${y}:${w}`}class yi{constructor(y,w,R){this.persistence=y,this.auth=w,this.userKey=R;const{config:z,name:ee}=this.auth;this.fullUserKey=Vr(this.userKey,z.apiKey,ee),this.fullPersistenceKey=Vr("persistence",z.apiKey,ee),this.boundEventHandler=w._onStorageEvent.bind(w),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,T.Z)(function*(){const w=yield y.persistence._get(y.fullUserKey);return w?Er._fromJSON(y.auth,w):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var w=this;return(0,T.Z)(function*(){if(w.persistence===y)return;const R=yield w.getCurrentUser();return yield w.removeCurrentUser(),w.persistence=y,R?w.setCurrentUser(R):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,w,R="authUser"){return(0,T.Z)(function*(){if(!w.length)return new yi(Lt(Zi),y,R);const z=(yield Promise.all(w.map(function(){var Bt=(0,T.Z)(function*(Un){if(yield Un._isAvailable())return Un});return function(Un){return Bt.apply(this,arguments)}}()))).filter(Bt=>Bt);let ee=z[0]||Lt(Zi);const Re=Vr(R,y.config.apiKey,y.name);let ft=null;for(const Bt of w)try{const Un=yield Bt._get(Re);if(Un){const Wr=Er._fromJSON(y,Un);Bt!==ee&&(ft=Wr),ee=Bt;break}}catch(Un){}const qt=z.filter(Bt=>Bt._shouldAllowMigration);return ee._shouldAllowMigration&&qt.length?(ee=qt[0],ft&&(yield ee._set(Re,ft.toJSON())),yield Promise.all(w.map(function(){var Bt=(0,T.Z)(function*(Un){if(Un!==ee)try{yield Un._remove(Re)}catch(Wr){}});return function(Un){return Bt.apply(this,arguments)}}())),new yi(ee,y,R)):new yi(ee,y,R)})()}}function ir(C){const y=C.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(ks(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(qr(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(lr(y))return"Blackberry";if(Wn(y))return"Webos";if(Ts(y))return"Safari";if((y.includes("chrome/")||Nn(y))&&!y.includes("edge/"))return"Chrome";if(oi(y))return"Android";{const R=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==R?void 0:R.length))return R[1]}return"Other"}function qr(C=(0,_.z$)()){return/firefox\//i.test(C)}function Ts(C=(0,_.z$)()){const y=C.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Nn(C=(0,_.z$)()){return/crios\//i.test(C)}function ks(C=(0,_.z$)()){return/iemobile/i.test(C)}function oi(C=(0,_.z$)()){return/android/i.test(C)}function lr(C=(0,_.z$)()){return/blackberry/i.test(C)}function Wn(C=(0,_.z$)()){return/webos/i.test(C)}function on(C=(0,_.z$)()){return/iphone|ipad|ipod/i.test(C)}function $r(C=(0,_.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function He(C=(0,_.z$)()){return on(C)||oi(C)||Wn(C)||lr(C)||/windows phone/i.test(C)||ks(C)}function Ot(C,y=[]){let w;switch(C){case"Browser":w=ir((0,_.z$)());break;case"Worker":w=`${ir((0,_.z$)())}-${C}`;break;default:w=C}const R=y.length?y.join(","):"FirebaseCore-web";return`${w}/JsCore/${Y.SDK_VERSION}/${R}`}class At{constructor(y,w){this.app=y,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sr(this),this.idTokenSubscription=new sr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ur,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(y,w){var R=this;return w&&(this._popupRedirectResolver=Lt(w)),this._initializationPromise=this.queue((0,T.Z)(function*(){var z,ee;if(!R._deleted&&(R.persistenceManager=yield yi.create(R,y),!R._deleted)){if(null===(z=R._popupRedirectResolver)||void 0===z?void 0:z._shouldInitProactively)try{yield R._popupRedirectResolver._initialize(R)}catch(Re){}yield R.initializeCurrentUser(w),R.lastNotifiedUid=(null===(ee=R.currentUser)||void 0===ee?void 0:ee.uid)||null,!R._deleted&&(R._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,T.Z)(function*(){if(y._deleted)return;const w=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||w){if(y.currentUser&&w&&y.currentUser.uid===w.uid)return y._currentUser._assign(w),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(w)}})()}initializeCurrentUser(y){var w=this;return(0,T.Z)(function*(){var R;let z=yield w.assertedPersistence.getCurrentUser();if(y&&w.config.authDomain){yield w.getOrInitRedirectPersistenceManager();const ee=null===(R=w.redirectUser)||void 0===R?void 0:R._redirectEventId,Re=null==z?void 0:z._redirectEventId,ft=yield w.tryRedirectSignIn(y);(!ee||ee===Re)&&(null==ft?void 0:ft.user)&&(z=ft.user)}return z?z._redirectEventId?(wt(w._popupRedirectResolver,w,"argument-error"),yield w.getOrInitRedirectPersistenceManager(),w.redirectUser&&w.redirectUser._redirectEventId===z._redirectEventId?w.directlySetCurrentUser(z):w.reloadAndSetCurrentUserOrClear(z)):w.reloadAndSetCurrentUserOrClear(z):w.directlySetCurrentUser(null)})()}tryRedirectSignIn(y){var w=this;return(0,T.Z)(function*(){let R=null;try{R=yield w._popupRedirectResolver._completeRedirectFn(w,y,!0)}catch(z){yield w._setRedirectUser(null)}return R})()}reloadAndSetCurrentUserOrClear(y){var w=this;return(0,T.Z)(function*(){try{yield hr(y)}catch(R){if("auth/network-request-failed"!==R.code)return w.directlySetCurrentUser(null)}return w.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var y=this;return(0,T.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var w=this;return(0,T.Z)(function*(){const R=y?(0,_.m9)(y):null;return R&&wt(R.auth.config.apiKey===w.config.apiKey,w,"invalid-user-token"),w._updateCurrentUser(R&&R._clone(w))})()}_updateCurrentUser(y){var w=this;return(0,T.Z)(function*(){if(!w._deleted)return y&&wt(w.tenantId===y.tenantId,w,"tenant-id-mismatch"),w.queue((0,T.Z)(function*(){yield w.directlySetCurrentUser(y),w.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,T.Z)(function*(){return(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null)})()}setPersistence(y){var w=this;return this.queue((0,T.Z)(function*(){yield w.assertedPersistence.setPersistence(Lt(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new _.LL("auth","Firebase",y())}onAuthStateChanged(y,w,R){return this.registerStateListener(this.authStateSubscription,y,w,R)}onIdTokenChanged(y,w,R){return this.registerStateListener(this.idTokenSubscription,y,w,R)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,w){var R=this;return(0,T.Z)(function*(){const z=yield R.getOrInitRedirectPersistenceManager(w);return null===y?z.removeCurrentUser():z.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var w=this;return(0,T.Z)(function*(){if(!w.redirectPersistenceManager){const R=y&&Lt(y)||w._popupRedirectResolver;wt(R,w,"argument-error"),w.redirectPersistenceManager=yield yi.create(w,[Lt(R._redirectPersistence)],"redirectUser"),w.redirectUser=yield w.redirectPersistenceManager.getCurrentUser()}return w.redirectPersistenceManager})()}_redirectUserForId(y){var w=this;return(0,T.Z)(function*(){var R,z;return w._isInitialized&&(yield w.queue((0,T.Z)(function*(){}))),(null===(R=w._currentUser)||void 0===R?void 0:R._redirectEventId)===y?w._currentUser:(null===(z=w.redirectUser)||void 0===z?void 0:z._redirectEventId)===y?w.redirectUser:null})()}_persistUserIfCurrent(y){var w=this;return(0,T.Z)(function*(){if(y===w.currentUser)return w.queue((0,T.Z)(function*(){return w.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,w;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const R=null!==(w=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==w?w:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,w,R,z){if(this._deleted)return()=>{};const ee="function"==typeof w?w:w.next.bind(w),Re=this._isInitialized?Promise.resolve():this._initializationPromise;return wt(Re,this,"internal-error"),Re.then(()=>ee(this.currentUser)),"function"==typeof w?y.addObserver(w,R,z):y.addObserver(w)}directlySetCurrentUser(y){var w=this;return(0,T.Z)(function*(){w.currentUser&&w.currentUser!==y&&(w._currentUser._stopProactiveRefresh(),y&&w.isProactiveRefreshEnabled&&y._startProactiveRefresh()),w.currentUser=y,y?yield w.assertedPersistence.setCurrentUser(y):yield w.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Ot(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,T.Z)(function*(){const w={"X-Client-Version":y.clientVersion};return y.app.options.appId&&(w["X-Firebase-gmpid"]=y.app.options.appId),w})()}}function Ft(C){return(0,_.m9)(C)}class sr{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,_.ne)(w=>this.observer=w)}get next(){return wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Dn(C,y,w){const R=Ft(C);wt(R._canInitEmulator,R,"emulator-config-failed"),wt(/^https?:\/\//.test(y),R,"invalid-emulator-scheme");const z=!!(null==w?void 0:w.disableWarnings),ee=ei(y),{host:Re,port:ft}=function(C){const y=ei(C),w=/(\/\/)?([^?#/]+)/.exec(C.substr(y.length));if(!w)return{host:"",port:null};const R=w[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(R);if(z){const ee=z[1];return{host:ee,port:gi(R.substr(ee.length+1))}}{const[ee,Re]=R.split(":");return{host:ee,port:gi(Re)}}}(y);R.config.emulator={url:`${ee}//${Re}${null===ft?"":`:${ft}`}/`},R.settings.appVerificationDisabledForTesting=!0,R.emulatorConfig=Object.freeze({host:Re,port:ft,protocol:ee.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function(){function C(){const y=document.createElement("p"),w=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",w.position="fixed",w.width="100%",w.backgroundColor="#ffffff",w.border=".1em solid #000000",w.color="#b50000",w.bottom="0px",w.left="0px",w.margin="0px",w.zIndex="10000",w.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function ei(C){const y=C.indexOf(":");return y<0?"":C.substr(0,y+1)}function gi(C){if(!C)return null;const y=Number(C);return isNaN(y)?null:y}class vi{constructor(y,w){this.providerId=y,this.signInMethod=w}toJSON(){return Gn("not implemented")}_getIdTokenResponse(y){return Gn("not implemented")}_linkToIdToken(y,w){return Gn("not implemented")}_getReauthenticationResolver(y){return Gn("not implemented")}}function Ha(C,y){return fs.apply(this,arguments)}function fs(){return(fs=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:resetPassword",dr(C,y))})).apply(this,arguments)}function Io(C,y){return So.apply(this,arguments)}function So(){return(So=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function jl(C,y){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:update",dr(C,y))})).apply(this,arguments)}function No(){return(No=(0,T.Z)(function*(C,y){return ie(C,"POST","/v1/accounts:signInWithPassword",dr(C,y))})).apply(this,arguments)}function co(C,y){return ll.apply(this,arguments)}function ll(){return(ll=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:sendOobCode",dr(C,y))})).apply(this,arguments)}function Ia(C,y){return ps.apply(this,arguments)}function ps(){return(ps=(0,T.Z)(function*(C,y){return co(C,y)})).apply(this,arguments)}function qn(C,y){return gs.apply(this,arguments)}function gs(){return(gs=(0,T.Z)(function*(C,y){return co(C,y)})).apply(this,arguments)}function ms(C,y){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,T.Z)(function*(C,y){return co(C,y)})).apply(this,arguments)}function ti(C,y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,T.Z)(function*(C,y){return co(C,y)})).apply(this,arguments)}function ul(){return(ul=(0,T.Z)(function*(C,y){return ie(C,"POST","/v1/accounts:signInWithEmailLink",dr(C,y))})).apply(this,arguments)}function Ri(){return(Ri=(0,T.Z)(function*(C,y){return ie(C,"POST","/v1/accounts:signInWithEmailLink",dr(C,y))})).apply(this,arguments)}class mi extends vi{constructor(y,w,R,z=null){super("password",R),this._email=y,this._password=w,this._tenantId=z}static _fromEmailAndPassword(y,w){return new mi(y,w,"password")}static _fromEmailAndCode(y,w,R=null){return new mi(y,w,"emailLink",R)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y;if((null==w?void 0:w.email)&&(null==w?void 0:w.password)){if("password"===w.signInMethod)return this._fromEmailAndPassword(w.email,w.password);if("emailLink"===w.signInMethod)return this._fromEmailAndCode(w.email,w.password,w.tenantId)}return null}_getIdTokenResponse(y){var w=this;return(0,T.Z)(function*(){switch(w.signInMethod){case"password":return function(C,y){return No.apply(this,arguments)}(y,{returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(C,y){return ul.apply(this,arguments)}(y,{email:w._email,oobCode:w._password});default:cr(y,"internal-error")}})()}_linkToIdToken(y,w){var R=this;return(0,T.Z)(function*(){switch(R.signInMethod){case"password":return Io(y,{idToken:w,returnSecureToken:!0,email:R._email,password:R._password});case"emailLink":return function(C,y){return Ri.apply(this,arguments)}(y,{idToken:w,email:R._email,oobCode:R._password});default:cr(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Cr(C,y){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,T.Z)(function*(C,y){return ie(C,"POST","/v1/accounts:signInWithIdp",dr(C,y))})).apply(this,arguments)}class Yi extends vi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const w=new Yi(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(w.idToken=y.idToken),y.accessToken&&(w.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(w.nonce=y.nonce),y.pendingToken&&(w.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(w.accessToken=y.oauthToken,w.secret=y.oauthTokenSecret):cr("argument-error"),w}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y,{providerId:R,signInMethod:z}=w,ee=Be(w,["providerId","signInMethod"]);if(!R||!z)return null;const Re=new Yi(R,z);return Re.idToken=ee.idToken||void 0,Re.accessToken=ee.accessToken||void 0,Re.secret=ee.secret,Re.nonce=ee.nonce,Re.pendingToken=ee.pendingToken||null,Re}_getIdTokenResponse(y){return Cr(y,this.buildRequest())}_linkToIdToken(y,w){const R=this.buildRequest();return R.idToken=w,Cr(y,R)}_getReauthenticationResolver(y){const w=this.buildRequest();return w.autoCreate=!1,Cr(y,w)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const w={};this.idToken&&(w.id_token=this.idToken),this.accessToken&&(w.access_token=this.accessToken),this.secret&&(w.oauth_token_secret=this.secret),w.providerId=this.providerId,this.nonce&&!this.pendingToken&&(w.nonce=this.nonce),y.postBody=(0,_.xO)(w)}return y}}function Tr(C,y){return bi.apply(this,arguments)}function bi(){return(bi=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:sendVerificationCode",dr(C,y))})).apply(this,arguments)}function Mo(){return(Mo=(0,T.Z)(function*(C,y){return ie(C,"POST","/v1/accounts:signInWithPhoneNumber",dr(C,y))})).apply(this,arguments)}function ho(){return(ho=(0,T.Z)(function*(C,y){const w=yield ie(C,"POST","/v1/accounts:signInWithPhoneNumber",dr(C,y));if(w.temporaryProof)throw Ue(C,"account-exists-with-different-credential",w);return w})).apply(this,arguments)}const Ga={USER_NOT_FOUND:"user-not-found"};function Ro(){return(Ro=(0,T.Z)(function*(C,y){return ie(C,"POST","/v1/accounts:signInWithPhoneNumber",dr(C,Object.assign(Object.assign({},y),{operation:"REAUTH"})),Ga)})).apply(this,arguments)}class Fs extends vi{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,w){return new Fs({verificationId:y,verificationCode:w})}static _fromTokenResponse(y,w){return new Fs({phoneNumber:y,temporaryProof:w})}_getIdTokenResponse(y){return function(C,y){return Mo.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,w){return function(C,y){return ho.apply(this,arguments)}(y,Object.assign({idToken:w},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function(C,y){return Ro.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:w,verificationId:R,verificationCode:z}=this.params;return y&&w?{temporaryProof:y,phoneNumber:w}:{sessionInfo:R,code:z}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:w,verificationCode:R,phoneNumber:z,temporaryProof:ee}=y;return R||w||z||ee?new Fs({verificationId:w,verificationCode:R,phoneNumber:z,temporaryProof:ee}):null}}class ji{constructor(y){var w,R,z,ee,Re,ft;const qt=(0,_.zd)((0,_.pd)(y)),Bt=null!==(w=qt.apiKey)&&void 0!==w?w:null,Un=null!==(R=qt.oobCode)&&void 0!==R?R:null,Wr=function(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=qt.mode)&&void 0!==z?z:null);wt(Bt&&Un&&Wr,"argument-error"),this.apiKey=Bt,this.operation=Wr,this.code=Un,this.continueUrl=null!==(ee=qt.continueUrl)&&void 0!==ee?ee:null,this.languageCode=null!==(Re=qt.languageCode)&&void 0!==Re?Re:null,this.tenantId=null!==(ft=qt.tenantId)&&void 0!==ft?ft:null}static parseLink(y){const w=function(C){const y=(0,_.zd)((0,_.pd)(C)).link,w=y?(0,_.zd)((0,_.pd)(y)).deep_link_id:null,R=(0,_.zd)((0,_.pd)(C)).deep_link_id;return(R?(0,_.zd)((0,_.pd)(R)).link:null)||R||w||y||C}(y);try{return new ji(w)}catch(R){return null}}}let V=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(w,R){return mi._fromEmailAndPassword(w,R)}static credentialWithLink(w,R){const z=ji.parseLink(R);return wt(z,"argument-error"),mi._fromEmailAndCode(w,z.code,z.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Z{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class j extends Z{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class ne extends j{static credentialFromJSON(y){const w="string"==typeof y?JSON.parse(y):y;return wt("providerId"in w&&"signInMethod"in w,"argument-error"),Yi._fromParams(w)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return wt(y.idToken||y.accessToken,"argument-error"),Yi._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return ne.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return ne.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:w,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:ee,nonce:Re,providerId:ft}=y;if(!R&&!z&&!w&&!ee||!ft)return null;try{return new ne(ft)._credential({idToken:w,accessToken:R,nonce:Re,pendingToken:ee})}catch(qt){return null}}}let De=(()=>{class C extends j{constructor(){super("facebook.com")}static credential(w){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return C.credential(w.oauthAccessToken)}catch(R){return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Je=(()=>{class C extends j{constructor(){super("google.com"),this.addScope("profile")}static credential(w,R){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:w,accessToken:R})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthIdToken:R,oauthAccessToken:z}=w;if(!R&&!z)return null;try{return C.credential(R,z)}catch(ee){return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Et=(()=>{class C extends j{constructor(){super("github.com")}static credential(w){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:w})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w||!("oauthAccessToken"in w)||!w.oauthAccessToken)return null;try{return C.credential(w.oauthAccessToken)}catch(R){return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class mn extends vi{constructor(y,w){super(y,y),this.pendingToken=w}_getIdTokenResponse(y){return Cr(y,this.buildRequest())}_linkToIdToken(y,w){const R=this.buildRequest();return R.idToken=w,Cr(y,R)}_getReauthenticationResolver(y){const w=this.buildRequest();return w.autoCreate=!1,Cr(y,w)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const w="string"==typeof y?JSON.parse(y):y,{providerId:R,signInMethod:z,pendingToken:ee}=w;return R&&z&&ee&&R===z?new mn(R,ee):null}static _create(y,w){return new mn(y,w)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fr extends Z{constructor(y){wt(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return fr.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return fr.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const w=mn.fromJSON(y);return wt(w,"argument-error"),w}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:w,providerId:R}=y;if(!w||!R)return null;try{return mn._create(R,w)}catch(z){return null}}}let pr=(()=>{class C extends j{constructor(){super("twitter.com")}static credential(w,R){return Yi._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:w,oauthTokenSecret:R})}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{oauthAccessToken:R,oauthTokenSecret:z}=w;if(!R||!z)return null;try{return C.credential(R,z)}catch(ee){return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Br(C,y){return _r.apply(this,arguments)}function _r(){return(_r=(0,T.Z)(function*(C,y){return ie(C,"POST","/v1/accounts:signUp",dr(C,y))})).apply(this,arguments)}class kn{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,w,R,z=!1){return(0,T.Z)(function*(){const ee=yield Er._fromIdTokenResponse(y,R,z),Re=Sn(R);return new kn({user:ee,providerId:Re,_tokenResponse:R,operationType:w})})()}static _forOperation(y,w,R){return(0,T.Z)(function*(){yield y._updateTokensIfNecessary(R,!0);const z=Sn(R);return new kn({user:y,providerId:z,_tokenResponse:R,operationType:w})})()}}function Sn(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function fo(C){return rs.apply(this,arguments)}function rs(){return(rs=(0,T.Z)(function*(C){var y;const w=Ft(C);if(yield w._initializationPromise,null===(y=w.currentUser)||void 0===y?void 0:y.isAnonymous)return new kn({user:w.currentUser,providerId:null,operationType:"signIn"});const R=yield Br(w,{returnSecureToken:!0}),z=yield kn._fromIdTokenResponse(w,"signIn",R,!0);return yield w._updateCurrentUser(z.user),z})).apply(this,arguments)}class Hi extends _.ZR{constructor(y,w,R,z){var ee;super(w.code,w.message),this.operationType=R,this.user=z,Object.setPrototypeOf(this,Hi.prototype),this.customData={appName:y.name,tenantId:null!==(ee=y.tenantId)&&void 0!==ee?ee:void 0,_serverResponse:w.customData._serverResponse,operationType:R}}static _fromErrorAndOperation(y,w,R,z){return new Hi(y,w,R,z)}}function Ls(C,y,w,R){return("reauthenticate"===y?w._getReauthenticationResolver(C):w._getIdTokenResponse(C)).catch(ee=>{throw"auth/multi-factor-auth-required"===ee.code?Hi._fromErrorAndOperation(C,ee,y,R):ee})}function _s(C){return new Set(C.map(({providerId:y})=>y).filter(y=>!!y))}function Vs(C,y){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,T.Z)(function*(C,y){const w=(0,_.m9)(C);yield Oo(!0,w,y);const{providerUserInfo:R}=yield or(w.auth,{idToken:yield w.getIdToken(),deleteProvider:[y]}),z=_s(R||[]);return w.providerData=w.providerData.filter(ee=>z.has(ee.providerId)),z.has("phone")||(w.phoneNumber=null),yield w.auth._persistUserIfCurrent(w),w})).apply(this,arguments)}function bt(C,y){return er.apply(this,arguments)}function er(){return(er=(0,T.Z)(function*(C,y,w=!1){const R=yield On(C,y._linkToIdToken(C.auth,yield C.getIdToken()),w);return kn._forOperation(C,"link",R)})).apply(this,arguments)}function Oo(C,y,w){return ar.apply(this,arguments)}function ar(){return(ar=(0,T.Z)(function*(C,y,w){yield hr(y);const z=!1===C?"provider-already-linked":"no-such-provider";wt(_s(y.providerData).has(w)===C,y.auth,z)})).apply(this,arguments)}function cl(C,y){return la.apply(this,arguments)}function la(){return(la=(0,T.Z)(function*(C,y,w=!1){const{auth:R}=C,z="reauthenticate";try{const ee=yield On(C,Ls(R,z,y,C),w);wt(ee.idToken,R,"internal-error");const Re=Rn(ee.idToken);wt(Re,R,"internal-error");const{sub:ft}=Re;return wt(C.uid===ft,R,"user-mismatch"),kn._forOperation(C,z,ee)}catch(ee){throw"auth/user-not-found"===(null==ee?void 0:ee.code)&&cr(R,"user-mismatch"),ee}})).apply(this,arguments)}function eo(C,y){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,T.Z)(function*(C,y,w=!1){const R="signIn",z=yield Ls(C,R,y),ee=yield kn._fromIdTokenResponse(C,R,z);return w||(yield C._updateCurrentUser(ee.user)),ee})).apply(this,arguments)}function Aa(C,y){return zo.apply(this,arguments)}function zo(){return(zo=(0,T.Z)(function*(C,y){return eo(Ft(C),y)})).apply(this,arguments)}function ua(C,y){return po.apply(this,arguments)}function po(){return(po=(0,T.Z)(function*(C,y){const w=(0,_.m9)(C);return yield Oo(!1,w,y.providerId),bt(w,y)})).apply(this,arguments)}function ys(C,y){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,T.Z)(function*(C,y){return cl((0,_.m9)(C),y)})).apply(this,arguments)}function wi(C,y){return vs.apply(this,arguments)}function vs(){return(vs=(0,T.Z)(function*(C,y){return ie(C,"POST","/v1/accounts:signInWithCustomToken",dr(C,y))})).apply(this,arguments)}function ca(C,y){return ls.apply(this,arguments)}function ls(){return(ls=(0,T.Z)(function*(C,y){const w=Ft(C),R=yield wi(w,{token:y,returnSecureToken:!0}),z=yield kn._fromIdTokenResponse(w,"signIn",R);return yield w._updateCurrentUser(z.user),z})).apply(this,arguments)}class to{constructor(y,w){this.factorId=y,this.uid=w.mfaEnrollmentId,this.enrollmentTime=new Date(w.enrolledAt).toUTCString(),this.displayName=w.displayName}static _fromServerResponse(y,w){return"phoneInfo"in w?Tl._fromServerResponse(y,w):cr(y,"internal-error")}}class Tl extends to{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,w){return new Tl(w)}}function go(C,y,w){var R;wt((null===(R=w.url)||void 0===R?void 0:R.length)>0,C,"invalid-continue-uri"),wt(void 0===w.dynamicLinkDomain||w.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),y.continueUrl=w.url,y.dynamicLinkDomain=w.dynamicLinkDomain,y.canHandleCodeInApp=w.handleCodeInApp,w.iOS&&(wt(w.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),y.iOSBundleId=w.iOS.bundleId),w.android&&(wt(w.android.packageName.length>0,C,"missing-android-pkg-name"),y.androidInstallApp=w.android.installApp,y.androidMinimumVersionCode=w.android.minimumVersion,y.androidPackageName=w.android.packageName)}function dl(C,y,w){return da.apply(this,arguments)}function da(){return(da=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C),z={requestType:"PASSWORD_RESET",email:y};w&&go(R,z,w),yield qn(R,z)})).apply(this,arguments)}function Na(C,y,w){return Di.apply(this,arguments)}function Di(){return(Di=(0,T.Z)(function*(C,y,w){yield Ha((0,_.m9)(C),{oobCode:y,newPassword:w})})).apply(this,arguments)}function hl(C,y){return qo.apply(this,arguments)}function qo(){return(qo=(0,T.Z)(function*(C,y){yield jl((0,_.m9)(C),{oobCode:y})})).apply(this,arguments)}function mo(C,y){return Us.apply(this,arguments)}function Us(){return(Us=(0,T.Z)(function*(C,y){const w=(0,_.m9)(C),R=yield Ha(w,{oobCode:y}),z=R.requestType;switch(wt(z,w,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":wt(R.newEmail,w,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":wt(R.mfaInfo,w,"internal-error");default:wt(R.email,w,"internal-error")}let ee=null;return R.mfaInfo&&(ee=to._fromServerResponse(Ft(w),R.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:ee},operation:z}})).apply(this,arguments)}function ko(C,y){return is.apply(this,arguments)}function is(){return(is=(0,T.Z)(function*(C,y){const{data:w}=yield mo((0,_.m9)(C),y);return w.email})).apply(this,arguments)}function js(C,y,w){return ss.apply(this,arguments)}function ss(){return(ss=(0,T.Z)(function*(C,y,w){const R=Ft(C),z=yield Br(R,{returnSecureToken:!0,email:y,password:w}),ee=yield kn._fromIdTokenResponse(R,"signIn",z);return yield R._updateCurrentUser(ee.user),ee})).apply(this,arguments)}function $s(C,y,w){return Aa((0,_.m9)(C),V.credential(y,w))}function $l(C,y,w){return _o.apply(this,arguments)}function _o(){return(_o=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C),z={requestType:"EMAIL_SIGNIN",email:y};wt(w.handleCodeInApp,R,"argument-error"),w&&go(R,z,w),yield ms(R,z)})).apply(this,arguments)}function fi(C,y){const w=ji.parseLink(y);return"EMAIL_SIGNIN"===(null==w?void 0:w.operation)}function yo(C,y,w){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C),z=V.credentialWithLink(y,w||Ar());return wt(z._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),Aa(R,z)})).apply(this,arguments)}function Zo(C,y){return za.apply(this,arguments)}function za(){return(za=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:createAuthUri",dr(C,y))})).apply(this,arguments)}function Ko(C,y){return gr.apply(this,arguments)}function gr(){return(gr=(0,T.Z)(function*(C,y){const R={identifier:y,continueUri:vn()?Ar():"http://localhost"},{signinMethods:z}=yield Zo((0,_.m9)(C),R);return z||[]})).apply(this,arguments)}function Hl(C,y){return qa.apply(this,arguments)}function qa(){return(qa=(0,T.Z)(function*(C,y){const w=(0,_.m9)(C),z={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};y&&go(w.auth,z,y);const{email:ee}=yield Ia(w.auth,z);ee!==C.email&&(yield C.reload())})).apply(this,arguments)}function tr(C,y,w){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C),ee={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:y};w&&go(R.auth,ee,w);const{email:Re}=yield ti(R.auth,ee);Re!==C.email&&(yield C.reload())})).apply(this,arguments)}function Is(C,y){return ha.apply(this,arguments)}function ha(){return(ha=(0,T.Z)(function*(C,y){return We(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function lu(C,y){return Za.apply(this,arguments)}function Za(){return(Za=(0,T.Z)(function*(C,{displayName:y,photoURL:w}){if(void 0===y&&void 0===w)return;const R=(0,_.m9)(C),ee={idToken:yield R.getIdToken(),displayName:y,photoUrl:w,returnSecureToken:!0},Re=yield On(R,Is(R.auth,ee));R.displayName=Re.displayName||null,R.photoURL=Re.photoUrl||null;const ft=R.providerData.find(({providerId:qt})=>"password"===qt);ft&&(ft.displayName=R.displayName,ft.photoURL=R.photoURL),yield R._updateTokensIfNecessary(Re)})).apply(this,arguments)}function Hr(C,y){return Ss((0,_.m9)(C),y,null)}function fa(C,y){return Ss((0,_.m9)(C),null,y)}function Ss(C,y,w){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,T.Z)(function*(C,y,w){const{auth:R}=C,ee={idToken:yield C.getIdToken(),returnSecureToken:!0};y&&(ee.email=y),w&&(ee.password=w);const Re=yield On(C,Io(R,ee));yield C._updateTokensIfNecessary(Re,!0)})).apply(this,arguments)}class Rr{constructor(y,w,R={}){this.isNewUser=y,this.providerId=w,this.profile=R}}class bo extends Rr{constructor(y,w,R,z){super(y,w,R),this.username=z}}class Po extends Rr{constructor(y,w){super(y,"facebook.com",w)}}class Gl extends bo{constructor(y,w){super(y,"github.com",w,"string"==typeof(null==w?void 0:w.login)?null==w?void 0:w.login:null)}}class ic extends Rr{constructor(y,w){super(y,"google.com",w)}}class Vt extends bo{constructor(y,w,R){super(y,"twitter.com",w,R)}}function Ei(C){const{user:y,_tokenResponse:w}=C;return y.isAnonymous&&!w?{providerId:null,isNewUser:!1,profile:null}:function(C){var y,w;if(!C)return null;const{providerId:R}=C,z=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},ee=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!R&&(null==C?void 0:C.idToken)){const Re=null===(w=null===(y=Rn(C.idToken))||void 0===y?void 0:y.firebase)||void 0===w?void 0:w.sign_in_provider;if(Re)return new Rr(ee,"anonymous"!==Re&&"custom"!==Re?Re:null)}if(!R)return null;switch(R){case"facebook.com":return new Po(ee,z);case"github.com":return new Gl(ee,z);case"google.com":return new ic(ee,z);case"twitter.com":return new Vt(ee,z,C.screenName||null);case"custom":case"anonymous":return new Rr(ee,null);default:return new Rr(ee,R,z)}}(w)}class Gr{constructor(y,w){this.type=y,this.credential=w}static _fromIdtoken(y){return new Gr("enroll",y)}static _fromMfaPendingCredential(y){return new Gr("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var w,R;if(null==y?void 0:y.multiFactorSession){if(null===(w=y.multiFactorSession)||void 0===w?void 0:w.pendingCredential)return Gr._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(R=y.multiFactorSession)||void 0===R?void 0:R.idToken)return Gr._fromIdtoken(y.multiFactorSession.idToken)}return null}}class fl{constructor(y,w,R){this.session=y,this.hints=w,this.signInResolver=R}static _fromError(y,w){const R=Ft(y),z=w.customData._serverResponse,ee=(z.mfaInfo||[]).map(ft=>to._fromServerResponse(R,ft));wt(z.mfaPendingCredential,R,"internal-error");const Re=Gr._fromMfaPendingCredential(z.mfaPendingCredential);return new fl(Re,ee,function(){var ft=(0,T.Z)(function*(qt){const Bt=yield qt._process(R,Re);delete z.mfaInfo,delete z.mfaPendingCredential;const Un=Object.assign(Object.assign({},z),{idToken:Bt.idToken,refreshToken:Bt.refreshToken});switch(w.operationType){case"signIn":const Wr=yield kn._fromIdTokenResponse(R,w.operationType,Un);return yield R._updateCurrentUser(Wr.user),Wr;case"reauthenticate":return wt(w.user,R,"internal-error"),kn._forOperation(w.user,w.operationType,Un);default:cr(R,"internal-error")}});return function(qt){return ft.apply(this,arguments)}}())}resolveSignIn(y){var w=this;return(0,T.Z)(function*(){return w.signInResolver(y)})()}}function Oa(C,y){var w;const R=(0,_.m9)(C),z=y;return wt(y.customData.operationType,R,"argument-error"),wt(null===(w=z.customData._serverResponse)||void 0===w?void 0:w.mfaPendingCredential,R,"argument-error"),fl._fromError(R,z)}function k(C,y){return We(C,"POST","/v2/accounts/mfaEnrollment:start",dr(C,y))}class B{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(w=>{w.mfaInfo&&(this.enrolledFactors=w.mfaInfo.map(R=>to._fromServerResponse(y.auth,R)))})}static _fromUser(y){return new B(y)}getSession(){var y=this;return(0,T.Z)(function*(){return Gr._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,w){var R=this;return(0,T.Z)(function*(){const z=y,ee=yield R.getSession(),Re=yield On(R.user,z._process(R.user.auth,ee,w));return yield R.user._updateTokensIfNecessary(Re),R.user.reload()})()}unenroll(y){var w=this;return(0,T.Z)(function*(){const R="string"==typeof y?y:y.uid,z=yield w.user.getIdToken(),ee=yield On(w.user,function(C,y){return We(C,"POST","/v2/accounts/mfaEnrollment:withdraw",dr(C,y))}(w.user.auth,{idToken:z,mfaEnrollmentId:R}));w.enrolledFactors=w.enrolledFactors.filter(({uid:Re})=>Re!==R),yield w.user._updateTokensIfNecessary(ee);try{yield w.user.reload()}catch(Re){if("auth/user-token-expired"!==Re.code)throw Re}})()}}const W=new WeakMap;function te(C){const y=(0,_.m9)(C);return W.has(y)||W.set(y,B._fromUser(y)),W.get(y)}const he="__sak";class we{constructor(y,w){this.storageRetriever=y,this.type=w}_isAvailable(){try{return this.storage?(this.storage.setItem(he,"1"),this.storage.removeItem(he),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,w){return this.storage.setItem(y,JSON.stringify(w)),Promise.resolve()}_get(y){const w=this.storage.getItem(y);return Promise.resolve(w?JSON.parse(w):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nr=(()=>{class C extends we{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(w,R)=>this.onStorageEvent(w,R),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const C=(0,_.z$)();return Ts(C)||on(C)}()&&function(){try{return!(!window||window===window.top)}catch(C){return!1}}(),this.fallbackToPolling=He(),this._shouldAllowMigration=!0}forAllChangedKeys(w){for(const R of Object.keys(this.listeners)){const z=this.storage.getItem(R),ee=this.localCache[R];z!==ee&&w(R,ee,z)}}onStorageEvent(w,R=!1){if(!w.key)return void this.forAllChangedKeys((ft,qt,Bt)=>{this.notifyListeners(ft,Bt)});const z=w.key;if(R?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ft=this.storage.getItem(z);if(w.newValue!==ft)null!==w.newValue?this.storage.setItem(z,w.newValue):this.storage.removeItem(z);else if(this.localCache[z]===w.newValue&&!R)return}const ee=()=>{const ft=this.storage.getItem(z);!R&&this.localCache[z]===ft||this.notifyListeners(z,ft)},Re=this.storage.getItem(z);(0,_.w1)()&&10===document.documentMode&&Re!==w.newValue&&w.newValue!==w.oldValue?setTimeout(ee,10):ee()}notifyListeners(w,R){this.localCache[w]=R;const z=this.listeners[w];if(z)for(const ee of Array.from(z))ee(R&&JSON.parse(R))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((w,R,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:w,oldValue:R,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(w,R){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[w]||(this.listeners[w]=new Set,this.localCache[w]=this.storage.getItem(w)),this.listeners[w].add(R)}_removeListener(w,R){this.listeners[w]&&(this.listeners[w].delete(R),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(w,R){var z=()=>super._set,ee=this;return(0,T.Z)(function*(){yield z().call(ee,w,R),ee.localCache[w]=JSON.stringify(R)})()}_get(w){var R=()=>super._get,z=this;return(0,T.Z)(function*(){const ee=yield R().call(z,w);return z.localCache[w]=JSON.stringify(ee),ee})()}_remove(w){var R=()=>super._remove,z=this;return(0,T.Z)(function*(){yield R().call(z,w),delete z.localCache[w]})()}}return C.type="LOCAL",C})(),Fn=(()=>{class C extends we{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(w,R){}_removeListener(w,R){}}return C.type="SESSION",C})();let ui=(()=>{class C{constructor(w){this.eventTarget=w,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(w){const R=this.receivers.find(ee=>ee.isListeningto(w));if(R)return R;const z=new C(w);return this.receivers.push(z),z}isListeningto(w){return this.eventTarget===w}handleEvent(w){var R=this;return(0,T.Z)(function*(){const z=w,{eventId:ee,eventType:Re,data:ft}=z.data,qt=R.handlersMap[Re];if(!(null==qt?void 0:qt.size))return;z.ports[0].postMessage({status:"ack",eventId:ee,eventType:Re});const Bt=Array.from(qt).map(function(){var Wr=(0,T.Z)(function*(Kr){return Kr(z.origin,ft)});return function(Kr){return Wr.apply(this,arguments)}}()),Un=yield function(C){return Promise.all(C.map(function(){var y=(0,T.Z)(function*(w){try{return{fulfilled:!0,value:yield w}}catch(R){return{fulfilled:!1,reason:R}}});return function(w){return y.apply(this,arguments)}}()))}(Bt);z.ports[0].postMessage({status:"done",eventId:ee,eventType:Re,response:Un})})()}_subscribe(w,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[w]||(this.handlersMap[w]=new Set),this.handlersMap[w].add(R)}_unsubscribe(w,R){this.handlersMap[w]&&R&&this.handlersMap[w].delete(R),(!R||0===this.handlersMap[w].size)&&delete this.handlersMap[w],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function bs(C="",y=10){let w="";for(let R=0;R<y;R++)w+=Math.floor(10*Math.random());return C+w}class Hs{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,w,R=50){var z=this;return(0,T.Z)(function*(){const ee="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ee)throw new Error("connection_unavailable");let Re,ft;return new Promise((qt,Bt)=>{const Un=bs("",20);ee.port1.start();const Wr=setTimeout(()=>{Bt(new Error("unsupported_event"))},R);ft={messageChannel:ee,onMessage(Kr){const Eo=Kr;if(Eo.data.eventId===Un)switch(Eo.data.status){case"ack":clearTimeout(Wr),Re=setTimeout(()=>{Bt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Re),qt(Eo.data.response);break;default:clearTimeout(Wr),clearTimeout(Re),Bt(new Error("invalid_response"))}}},z.handlers.add(ft),ee.port1.addEventListener("message",ft.onMessage),z.target.postMessage({eventType:y,eventId:Un,data:w},[ee.port2])}).finally(()=>{ft&&z.removeMessageHandler(ft)})})()}}function In(){return window}function pi(){return void 0!==In().WorkerGlobalScope&&"function"==typeof In().importScripts}function pl(){return(pl=(0,T.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(C){return null}})).apply(this,arguments)}const Ws="firebaseLocalStorageDb",Fo="firebaseLocalStorage",Lo="fbase_key";class Wl{constructor(y){this.request=y}toPromise(){return new Promise((y,w)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{w(this.request.error)})})}}function Pa(C,y){return C.transaction([Fo],y?"readwrite":"readonly").objectStore(Fo)}function Ka(){const C=indexedDB.open(Ws,1);return new Promise((y,w)=>{C.addEventListener("error",()=>{w(C.error)}),C.addEventListener("upgradeneeded",()=>{const R=C.result;try{R.createObjectStore(Fo,{keyPath:Lo})}catch(z){w(z)}}),C.addEventListener("success",(0,T.Z)(function*(){const R=C.result;R.objectStoreNames.contains(Fo)?y(R):(R.close(),yield function(){const C=indexedDB.deleteDatabase(Ws);return new Wl(C).toPromise()}(),y(yield Ka()))}))})}function Ru(C,y,w){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,T.Z)(function*(C,y,w){const R=Pa(C,!0).put({[Lo]:y,value:w});return new Wl(R).toPromise()})).apply(this,arguments)}function Fa(){return(Fa=(0,T.Z)(function*(C,y){const w=Pa(C,!1).get(y),R=yield new Wl(w).toPromise();return void 0===R?null:R.value})).apply(this,arguments)}function ql(C,y){const w=Pa(C,!0).delete(y);return new Wl(w).toPromise()}const Wi=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var w=this;return(0,T.Z)(function*(){return w.db||(w.db=yield Ka()),w.db})()}_withRetries(w){var R=this;return(0,T.Z)(function*(){let z=0;for(;;)try{const ee=yield R._openDb();return yield w(ee)}catch(ee){if(z++>3)throw ee;R.db&&(R.db.close(),R.db=void 0)}})()}initializeServiceWorkerMessaging(){var w=this;return(0,T.Z)(function*(){return pi()?w.initializeReceiver():w.initializeSender()})()}initializeReceiver(){var w=this;return(0,T.Z)(function*(){w.receiver=ui._getInstance(pi()?self:null),w.receiver._subscribe("keyChanged",function(){var R=(0,T.Z)(function*(z,ee){return{keyProcessed:(yield w._poll()).includes(ee.key)}});return function(z,ee){return R.apply(this,arguments)}}()),w.receiver._subscribe("ping",function(){var R=(0,T.Z)(function*(z,ee){return["keyChanged"]});return function(z,ee){return R.apply(this,arguments)}}())})()}initializeSender(){var w=this;return(0,T.Z)(function*(){var R,z;if(w.activeServiceWorker=yield function(){return pl.apply(this,arguments)}(),!w.activeServiceWorker)return;w.sender=new Hs(w.activeServiceWorker);const ee=yield w.sender._send("ping",{},800);!ee||(null===(R=ee[0])||void 0===R?void 0:R.fulfilled)&&(null===(z=ee[0])||void 0===z?void 0:z.value.includes("keyChanged"))&&(w.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(w){var R=this;return(0,T.Z)(function*(){if(R.sender&&R.activeServiceWorker&&function(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===R.activeServiceWorker)try{yield R.sender._send("keyChanged",{key:w},R.serviceWorkerReceiverAvailable?800:50)}catch(z){}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const w=yield Ka();return yield Ru(w,he,"1"),yield ql(w,he),!0}catch(w){}return!1})()}_withPendingWrite(w){var R=this;return(0,T.Z)(function*(){R.pendingWrites++;try{yield w()}finally{R.pendingWrites--}})()}_set(w,R){var z=this;return(0,T.Z)(function*(){return z._withPendingWrite((0,T.Z)(function*(){return yield z._withRetries(ee=>Ru(ee,w,R)),z.localCache[w]=R,z.notifyServiceWorker(w)}))})()}_get(w){var R=this;return(0,T.Z)(function*(){const z=yield R._withRetries(ee=>function(C,y){return Fa.apply(this,arguments)}(ee,w));return R.localCache[w]=z,z})()}_remove(w){var R=this;return(0,T.Z)(function*(){return R._withPendingWrite((0,T.Z)(function*(){return yield R._withRetries(z=>ql(z,w)),delete R.localCache[w],R.notifyServiceWorker(w)}))})()}_poll(){var w=this;return(0,T.Z)(function*(){const R=yield w._withRetries(Re=>{const ft=Pa(Re,!1).getAll();return new Wl(ft).toPromise()});if(!R)return[];if(0!==w.pendingWrites)return[];const z=[],ee=new Set;for(const{fbase_key:Re,value:ft}of R)ee.add(Re),JSON.stringify(w.localCache[Re])!==JSON.stringify(ft)&&(w.notifyListeners(Re,ft),z.push(Re));for(const Re of Object.keys(w.localCache))w.localCache[Re]&&!ee.has(Re)&&(w.notifyListeners(Re,null),z.push(Re));return z})()}notifyListeners(w,R){this.localCache[w]=R;const z=this.listeners[w];if(z)for(const ee of Array.from(z))ee(R)}startPolling(){var w=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return w._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(w,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[w]||(this.listeners[w]=new Set,this._get(w)),this.listeners[w].add(R)}_removeListener(w,R){this.listeners[w]&&(this.listeners[w].delete(R),0===this.listeners[w].size&&delete this.listeners[w]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function Zl(C,y){return We(C,"POST","/v2/accounts/mfaSignIn:start",dr(C,y))}function Kl(){return(Kl=(0,T.Z)(function*(C){return(yield We(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zi(C){return new Promise((y,w)=>{const R=document.createElement("script");R.setAttribute("src",C),R.onload=y,R.onerror=z=>{const ee=Hn("internal-error");ee.customData=z,w(ee)},R.type="text/javascript",R.charset="UTF-8",function(){var C,y;return null!==(y=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==y?y:document}().appendChild(R)})}function Yo(C){return`__${C}${Math.floor(1e6*Math.random())}`}const ni=1e12;class kc{constructor(y){this.auth=y,this.counter=ni,this._widgets=new Map}render(y,w){const R=this.counter;return this._widgets.set(R,new uu(y,this.auth.name,w||{})),this.counter++,R}reset(y){var w;const R=y||ni;null===(w=this._widgets.get(R))||void 0===w||w.delete(),this._widgets.delete(R)}getResponse(y){var w;return(null===(w=this._widgets.get(y||ni))||void 0===w?void 0:w.getResponse())||""}execute(y){var w=this;return(0,T.Z)(function*(){var R;return null===(R=w._widgets.get(y||ni))||void 0===R||R.execute(),""})()}}class uu{constructor(y,w,R){this.params=R,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof y?document.getElementById(y):y;wt(z,"argument-error",{appName:w}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(C){const y=[],w="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<50;R++)y.push(w.charAt(Math.floor(Math.random()*w.length)));return y.join("")}();const{callback:y,"expired-callback":w}=this.params;if(y)try{y(this.responseToken)}catch(R){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,w)try{w()}catch(R){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xu=Yo("rcb"),no=new Dr(3e4,6e4);class us{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!In().grecaptcha}load(y,w=""){return wt((C=w).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C),y,"argument-error"),this.shouldResolveImmediately(w)?Promise.resolve(In().grecaptcha):new Promise((R,z)=>{const ee=In().setTimeout(()=>{z(Hn(y,"network-request-failed"))},no.get());In()[xu]=()=>{In().clearTimeout(ee),delete In()[xu];const ft=In().grecaptcha;if(!ft)return void z(Hn(y,"internal-error"));const qt=ft.render;ft.render=(Bt,Un)=>{const Wr=qt(Bt,Un);return this.counter++,Wr},this.hostLanguage=w,R(ft)},zi(`https://www.google.com/recaptcha/api.js??${(0,_.xO)({onload:xu,render:"explicit",hl:w})}`).catch(()=>{clearTimeout(ee),z(Hn(y,"internal-error"))})});var C}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!In().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fh{load(y){return(0,T.Z)(function*(){return new kc(y)})()}clearedOneInstance(){}}const Ou="recaptcha",Md={theme:"light",type:"image"};class sc{constructor(y,w=Object.assign({},Md),R){this.parameters=w,this.type=Ou,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ft(R),this.isInvisible="invisible"===this.parameters.size,wt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof y?document.getElementById(y):y;wt(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fh:new us,this.validateStartingState()}verify(){var y=this;return(0,T.Z)(function*(){y.assertNotDestroyed();const w=yield y.render(),R=y.getAssertedRecaptcha();return R.getResponse(w)||new Promise(ee=>{const Re=ft=>{!ft||(y.tokenChangeListeners.delete(Re),ee(ft))};y.tokenChangeListeners.add(Re),y.isInvisible&&R.execute(w)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){wt(!this.parameters.sitekey,this.auth,"argument-error"),wt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),wt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return w=>{if(this.tokenChangeListeners.forEach(R=>R(w)),"function"==typeof y)y(w);else if("string"==typeof y){const R=In()[y];"function"==typeof R&&R(w)}}}assertNotDestroyed(){wt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,T.Z)(function*(){if(yield y.init(),!y.widgetId){let w=y.container;if(!y.isInvisible){const R=document.createElement("div");w.appendChild(R),w=R}y.widgetId=y.getAssertedRecaptcha().render(w,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,T.Z)(function*(){wt(vn()&&!pi(),y.auth,"internal-error"),yield function(){let C=null;return new Promise(y=>{"complete"!==document.readyState?(C=()=>y(),window.addEventListener("load",C)):y()}).catch(y=>{throw C&&window.removeEventListener("load",C),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const w=yield function(C){return Kl.apply(this,arguments)}(y.auth);wt(w,y.auth,"internal-error"),y.parameters.sitekey=w})()}getAssertedRecaptcha(){return wt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qo{constructor(y,w){this.verificationId=y,this.onConfirmation=w}confirm(y){const w=Fs._fromVerification(this.verificationId,y);return this.onConfirmation(w)}}function Pc(C,y,w){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,T.Z)(function*(C,y,w){const R=Ft(C),z=yield el(R,y,(0,_.m9)(w));return new Qo(z,ee=>Aa(R,ee))})).apply(this,arguments)}function ml(C,y,w){return zs.apply(this,arguments)}function zs(){return(zs=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C);yield Oo(!1,R,"phone");const z=yield el(R.auth,y,(0,_.m9)(w));return new Qo(z,ee=>ua(R,ee))})).apply(this,arguments)}function Al(C,y,w){return As.apply(this,arguments)}function As(){return(As=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C),z=yield el(R.auth,y,(0,_.m9)(w));return new Qo(z,ee=>ys(R,ee))})).apply(this,arguments)}function el(C,y,w){return _l.apply(this,arguments)}function _l(){return(_l=(0,T.Z)(function*(C,y,w){var R;const z=yield w.verify();try{let ee;if(wt("string"==typeof z,C,"argument-error"),wt(w.type===Ou,C,"argument-error"),ee="string"==typeof y?{phoneNumber:y}:y,"session"in ee){const Re=ee.session;if("phoneNumber"in ee)return wt("enroll"===Re.type,C,"internal-error"),(yield k(C,{idToken:Re.credential,phoneEnrollmentInfo:{phoneNumber:ee.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{wt("signin"===Re.type,C,"internal-error");const ft=(null===(R=ee.multiFactorHint)||void 0===R?void 0:R.uid)||ee.multiFactorUid;return wt(ft,C,"missing-multi-factor-info"),(yield Zl(C,{mfaPendingCredential:Re.credential,mfaEnrollmentId:ft,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Re}=yield Tr(C,{phoneNumber:ee.phoneNumber,recaptchaToken:z});return Re}}finally{w._reset()}})).apply(this,arguments)}function Jo(C,y){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,T.Z)(function*(C,y){yield bt((0,_.m9)(C),y)})).apply(this,arguments)}let Nl=(()=>{class C{constructor(w){this.providerId=C.PROVIDER_ID,this.auth=Ft(w)}verifyPhoneNumber(w,R){return el(this.auth,w,(0,_.m9)(R))}static credential(w,R){return Fs._fromVerification(w,R)}static credentialFromResult(w){return C.credentialFromTaggedObject(w)}static credentialFromError(w){return C.credentialFromTaggedObject(w.customData||{})}static credentialFromTaggedObject({_tokenResponse:w}){if(!w)return null;const{phoneNumber:R,temporaryProof:z}=w;return R&&z?Fs._fromTokenResponse(R,z):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function qs(C,y){return y?Lt(y):(wt(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class F extends vi{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Cr(y,this._buildIdpRequest())}_linkToIdToken(y,w){return Cr(y,this._buildIdpRequest(w))}_getReauthenticationResolver(y){return Cr(y,this._buildIdpRequest())}_buildIdpRequest(y){const w={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(w.idToken=y),w}}function $(C){return eo(C.auth,new F(C),C.bypassAuthState)}function X(C){const{auth:y,user:w}=C;return wt(w,y,"internal-error"),cl(w,new F(C),C.bypassAuthState)}function fe(C){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,T.Z)(function*(C){const{auth:y,user:w}=C;return wt(w,y,"internal-error"),bt(w,new F(C),C.bypassAuthState)})).apply(this,arguments)}class it{constructor(y,w,R,z,ee=!1){this.auth=y,this.resolver=R,this.user=z,this.bypassAuthState=ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(w)?w:[w]}execute(){var y=this;return new Promise(function(){var w=(0,T.Z)(function*(R,z){y.pendingPromise={resolve:R,reject:z};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(ee){y.reject(ee)}});return function(R,z){return w.apply(this,arguments)}}())}onAuthEvent(y){var w=this;return(0,T.Z)(function*(){const{urlResponse:R,sessionId:z,postBody:ee,tenantId:Re,error:ft,type:qt}=y;if(ft)return void w.reject(ft);const Bt={auth:w.auth,requestUri:R,sessionId:z,tenantId:Re||void 0,postBody:ee||void 0,user:w.user,bypassAuthState:w.bypassAuthState};try{w.resolve(yield w.getIdpTask(qt)(Bt))}catch(Un){w.reject(Un)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return $;case"linkViaPopup":case"linkViaRedirect":return fe;case"reauthViaPopup":case"reauthViaRedirect":return X;default:cr(this.auth,"internal-error")}}resolve(y){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rt=new Dr(2e3,1e4);function un(C,y,w){return tn.apply(this,arguments)}function tn(){return(tn=(0,T.Z)(function*(C,y,w){const R=Ft(C);Lr(C,y,Z);const z=qs(R,w);return new ri(R,"signInViaPopup",y,z).executeNotNull()})).apply(this,arguments)}function kr(C,y,w){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C);Lr(R.auth,y,Z);const z=qs(R.auth,w);return new ri(R.auth,"reauthViaPopup",y,z,R).executeNotNull()})).apply(this,arguments)}function Ns(C,y,w){return es.apply(this,arguments)}function es(){return(es=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C);Lr(R.auth,y,Z);const z=qs(R.auth,w);return new ri(R.auth,"linkViaPopup",y,z,R).executeNotNull()})).apply(this,arguments)}let ri=(()=>{class C extends it{constructor(w,R,z,ee,Re){super(w,R,ee,Re),this.provider=z,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var w=this;return(0,T.Z)(function*(){const R=yield w.execute();return wt(R,w.auth,"internal-error"),R})()}onExecution(){var w=this;return(0,T.Z)(function*(){Mr(1===w.filter.length,"Popup operations only handle one event");const R=bs();w.authWindow=yield w.resolver._openPopup(w.auth,w.provider,w.filter[0],R),w.authWindow.associatedEvent=R,w.resolver._originValidation(w.auth).catch(z=>{w.reject(z)}),w.resolver._isIframeWebStorageSupported(w.auth,z=>{z||w.reject(Hn(w.auth,"web-storage-unsupported"))}),w.pollUserCancellation()})()}get eventId(){var w;return(null===(w=this.authWindow)||void 0===w?void 0:w.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const w=()=>{var R,z;this.pollId=(null===(z=null===(R=this.authWindow)||void 0===R?void 0:R.window)||void 0===z?void 0:z.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(w,Rt.get())};w()}}return C.currentPopupAction=null,C})();const ro=new Map;class Va extends it{constructor(y,w,R=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],w,void 0,R),this.eventId=null}execute(){var y=()=>super.execute,w=this;return(0,T.Z)(function*(){let R=ro.get(w.auth._key());if(!R){try{const ee=(yield function(C,y){return Do.apply(this,arguments)}(w.resolver,w.auth))?yield y().call(w):null;R=()=>Promise.resolve(ee)}catch(z){R=()=>Promise.reject(z)}ro.set(w.auth._key(),R)}return w.bypassAuthState||ro.set(w.auth._key(),()=>Promise.resolve(null)),R()})()}onAuthEvent(y){var w=()=>super.onAuthEvent,R=this;return(0,T.Z)(function*(){if("signInViaRedirect"===y.type)return w().call(R,y);if("unknown"!==y.type){if(y.eventId){const z=yield R.auth._redirectUserForId(y.eventId);if(z)return R.user=z,w().call(R,y);R.resolve(null)}}else R.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function Do(){return(Do=(0,T.Z)(function*(C,y){const w=Xo(y),R=ku(C);if(!(yield R._isAvailable()))return!1;const z="true"===(yield R._get(w));return yield R._remove(w),z})).apply(this,arguments)}function Ba(C,y){return yl.apply(this,arguments)}function yl(){return(yl=(0,T.Z)(function*(C,y){return ku(C)._set(Xo(y),"true")})).apply(this,arguments)}function Ua(){ro.clear()}function ku(C){return Lt(C._redirectPersistence)}function Xo(C){return Vr("pendingRedirect",C.config.apiKey,C.name)}function cu(C,y,w){return function(C,y,w){return Pu.apply(this,arguments)}(C,y,w)}function Pu(){return(Pu=(0,T.Z)(function*(C,y,w){const R=Ft(C);Lr(C,y,Z);const z=qs(R,w);return yield Ba(z,R),z._openRedirect(R,y,"signInViaRedirect")})).apply(this,arguments)}function hu(C,y,w){return function(C,y,w){return ac.apply(this,arguments)}(C,y,w)}function ac(){return(ac=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C);Lr(R.auth,y,Z);const z=qs(R.auth,w);yield Ba(z,R.auth);const ee=yield gu(R);return z._openRedirect(R.auth,y,"reauthViaRedirect",ee)})).apply(this,arguments)}function Fu(C,y,w){return function(C,y,w){return nl.apply(this,arguments)}(C,y,w)}function nl(){return(nl=(0,T.Z)(function*(C,y,w){const R=(0,_.m9)(C);Lr(R.auth,y,Z);const z=qs(R.auth,w);yield Oo(!1,R,y.providerId),yield Ba(z,R.auth);const ee=yield gu(R);return z._openRedirect(R.auth,y,"linkViaRedirect",ee)})).apply(this,arguments)}function Ql(C,y){return pu.apply(this,arguments)}function pu(){return(pu=(0,T.Z)(function*(C,y){return yield Ft(C)._initializationPromise,ga(C,y,!1)})).apply(this,arguments)}function ga(C,y){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,T.Z)(function*(C,y,w=!1){const R=Ft(C),z=qs(R,y),Re=yield new Va(R,z,w).execute();return Re&&!w&&(delete Re.user._redirectEventId,yield R._persistUserIfCurrent(Re.user),yield R._setRedirectUser(null,y)),Re})).apply(this,arguments)}function gu(C){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,T.Z)(function*(C){const y=bs(`${C.uid}:::`);return C._redirectEventId=y,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),y})).apply(this,arguments)}class ma{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let w=!1;return this.consumers.forEach(R=>{this.isEventForConsumer(y,R)&&(w=!0,this.sendToConsumer(y,R),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mu(C);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,w||(this.queuedRedirectEvent=y,w=!0)),w}sendToConsumer(y,w){var R;if(y.error&&!mu(y)){const z=(null===(R=y.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";w.onError(Hn(this.auth,z))}else w.onAuthEvent(y)}isEventForConsumer(y,w){const R=null===w.eventId||!!y.eventId&&y.eventId===w.eventId;return w.filter.includes(y.type)&&R}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lc(y))}saveEventToCache(y){this.cachedEventUids.add(lc(y)),this.lastProcessedEventTime=Date.now()}}function lc(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(y=>y).join("-")}function mu({type:C,error:y}){return"unknown"===C&&"auth/no-auth-event"===(null==y?void 0:y.code)}function Zs(C){return _u.apply(this,arguments)}function _u(){return(_u=(0,T.Z)(function*(C,y={}){return We(C,"GET","/v1/projects",y)})).apply(this,arguments)}const ph=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cs=/^https?/;function Lc(){return(Lc=(0,T.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:y}=yield Zs(C);for(const w of y)try{if(Ml(w))return}catch(R){}cr(C,"unauthorized-domain")})).apply(this,arguments)}function Ml(C){const y=Ar(),{protocol:w,hostname:R}=new URL(y);if(C.startsWith("chrome-extension://")){const Re=new URL(C);return""===Re.hostname&&""===R?"chrome-extension:"===w&&C.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===w&&Re.hostname===R}if(!cs.test(w))return!1;if(ph.test(C))return R===C;const z=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(R)}const qi=new Dr(3e4,6e4);function vl(){const C=In().___jsl;if(null==C?void 0:C.H)for(const y of Object.keys(C.H))if(C.H[y].r=C.H[y].r||[],C.H[y].L=C.H[y].L||[],C.H[y].r=[...C.H[y].L],C.CP)for(let w=0;w<C.CP.length;w++)C.CP[w]=null}let Oi=null;function gh(C){return Oi=Oi||function(C){return new Promise((y,w)=>{var R,z,ee;function Re(){vl(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{vl(),w(Hn(C,"network-request-failed"))},timeout:qi.get()})}if(null===(z=null===(R=In().gapi)||void 0===R?void 0:R.iframes)||void 0===z?void 0:z.Iframe)y(gapi.iframes.getContext());else{if(!(null===(ee=In().gapi)||void 0===ee?void 0:ee.load)){const ft=Yo("iframefcb");return In()[ft]=()=>{gapi.load?Re():w(Hn(C,"network-request-failed"))},zi(`https://apis.google.com/js/api.js?onload=${ft}`).catch(qt=>w(qt))}Re()}}).catch(y=>{throw Oi=null,y})}(C),Oi}const ed=new Dr(5e3,15e3),cc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Od(C){const y=C.config;wt(y.authDomain,C,"auth-domain-config-required");const w=y.emulator?An(y,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,R={apiKey:y.apiKey,appName:C.name,v:Y.SDK_VERSION},z=xd.get(C.config.apiHost);z&&(R.eid=z);const ee=C._getFrameworks();return ee.length&&(R.fw=ee.join(",")),`${w}?${(0,_.xO)(R).slice(1)}`}function ii(){return ii=(0,T.Z)(function*(C){const y=yield gh(C),w=In().gapi;return wt(w,C,"internal-error"),y.open({where:document.body,url:Od(C),messageHandlersFilter:w.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cc,dontclear:!0},R=>new Promise(function(){var z=(0,T.Z)(function*(ee,Re){yield R.restyle({setHideOnLeave:!1});const ft=Hn(C,"network-request-failed"),qt=In().setTimeout(()=>{Re(ft)},ed.get());function Bt(){In().clearTimeout(qt),ee(R)}R.ping(Bt).then(Bt,()=>{Re(ft)})});return function(ee,Re){return z.apply(this,arguments)}}()))}),ii.apply(this,arguments)}const mh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xl{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function xl(C,y,w,R,z,ee){wt(C.config.authDomain,C,"auth-domain-config-required"),wt(C.config.apiKey,C,"invalid-api-key");const Re={apiKey:C.config.apiKey,appName:C.name,authType:w,redirectUrl:R,v:Y.SDK_VERSION,eventId:z};if(y instanceof Z){y.setDefaultLanguage(C.languageCode),Re.providerId=y.providerId||"",(0,_.xb)(y.getCustomParameters())||(Re.customParameters=JSON.stringify(y.getCustomParameters()));for(const[qt,Bt]of Object.entries(ee||{}))Re[qt]=Bt}if(y instanceof j){const qt=y.getScopes().filter(Bt=>""!==Bt);qt.length>0&&(Re.scopes=qt.join(","))}C.tenantId&&(Re.tid=C.tenantId);const ft=Re;for(const qt of Object.keys(ft))void 0===ft[qt]&&delete ft[qt];return`${function({config:C}){return C.emulator?An(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,_.xO)(ft).slice(1)}`}const il="webStorageSupport",Lu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fn,this._completeRedirectFn=ga}_openPopup(y,w,R,z){var ee=this;return(0,T.Z)(function*(){var Re;Mr(null===(Re=ee.eventManagers[y._key()])||void 0===Re?void 0:Re.manager,"_initialize() not called before _openPopup()");const ft=xl(y,w,R,Ar(),z);return function(C,y,w,R=500,z=600){const ee=Math.max((window.screen.availHeight-z)/2,0).toString(),Re=Math.max((window.screen.availWidth-R)/2,0).toString();let ft="";const qt=Object.assign(Object.assign({},mh),{width:R.toString(),height:z.toString(),top:ee,left:Re}),Bt=(0,_.z$)().toLowerCase();w&&(ft=Nn(Bt)?"_blank":w),qr(Bt)&&(y=y||"http://localhost",qt.scrollbars="yes");const Un=Object.entries(qt).reduce((Kr,[Eo,ya])=>`${Kr}${Eo}=${ya},`,"");if(function(C=(0,_.z$)()){var y;return on(C)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(Bt)&&"_self"!==ft)return function(C,y){const w=document.createElement("a");w.href=C,w.target=y;const R=document.createEvent("MouseEvent");R.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),w.dispatchEvent(R)}(y||"",ft),new Xl(null);const Wr=window.open(y||"",ft,Un);wt(Wr,C,"popup-blocked");try{Wr.focus()}catch(Kr){}return new Xl(Wr)}(y,ft,bs())})()}_openRedirect(y,w,R,z){var ee=this;return(0,T.Z)(function*(){return yield ee._originValidation(y),C=xl(y,w,R,Ar(),z),In().location.href=C,new Promise(()=>{});var C})()}_initialize(y){const w=y._key();if(this.eventManagers[w]){const{manager:z,promise:ee}=this.eventManagers[w];return z?Promise.resolve(z):(Mr(ee,"If manager is not set, promise should be"),ee)}const R=this.initAndGetManager(y);return this.eventManagers[w]={promise:R},R.catch(()=>{delete this.eventManagers[w]}),R}initAndGetManager(y){var w=this;return(0,T.Z)(function*(){const R=yield function(C){return ii.apply(this,arguments)}(y),z=new ma(y);return R.register("authEvent",ee=>(wt(null==ee?void 0:ee.authEvent,y,"invalid-auth-event"),{status:z.onEvent(ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),w.eventManagers[y._key()]={manager:z},w.iframes[y._key()]=R,z})()}_isIframeWebStorageSupported(y,w){this.iframes[y._key()].send(il,{type:il},z=>{var ee;const Re=null===(ee=null==z?void 0:z[0])||void 0===ee?void 0:ee[il];void 0!==Re&&w(!!Re),cr(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const w=y._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function(C){return Lc.apply(this,arguments)}(y)),this.originValidationPromises[w]}get _shouldInitProactively(){return He()||Ts()||on()}};class Vu extends class{constructor(y){this.factorId=y}_process(y,w,R){switch(w.type){case"enroll":return this._finalizeEnroll(y,w.credential,R);case"signin":return this._finalizeSignIn(y,w.credential);default:return Gn("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new Vu(y)}_finalizeEnroll(y,w,R){return function(C,y){return We(C,"POST","/v2/accounts/mfaEnrollment:finalize",dr(C,y))}(y,{idToken:w,displayName:R,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,w){return function(C,y){return We(C,"POST","/v2/accounts/mfaSignIn:finalize",dr(C,y))}(y,{mfaPendingCredential:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ci=(()=>{class C{constructor(){}static assertion(w){return Vu._fromCredential(w)}}return C.FACTOR_ID="phone",C})();var C,bu="@firebase/auth";class Bu{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var w=this;return(0,T.Z)(function*(){return w.assertAuthConfigured(),yield w.auth._initializationPromise,w.auth.currentUser?{accessToken:yield w.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const w=this.auth.onIdTokenChanged(R=>{var z;y((null===(z=R)||void 0===z?void 0:z.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,w),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const w=this.internalListeners.get(y);!w||(this.internalListeners.delete(y),w(),this.updateProactiveRefresh())}assertAuthConfigured(){wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nd(C=(0,Y.getApp)()){const y=(0,Y._getProvider)(C,"auth");return y.isInitialized()?y.getImmediate():function(C,y){const w=(0,Y._getProvider)(C,"auth");if(w.isInitialized()){const z=w.getImmediate(),ee=w.getOptions();if((0,_.vZ)(ee,null!=y?y:{}))return z;cr(z,"already-initialized")}return w.initialize({options:y})}(C,{popupRedirectResolver:Lu,persistence:[Wi,Nr,Fn]})}C="Browser",(0,Y._registerComponent)(new gt.wA("auth",(y,{options:w})=>{const R=y.getProvider("app").getImmediate(),{apiKey:z,authDomain:ee}=R.options;return(Re=>{wt(z&&!z.includes(":"),"invalid-api-key",{appName:Re.name}),wt(!(null==ee?void 0:ee.includes(":")),"argument-error",{appName:Re.name});const ft={apiKey:z,authDomain:ee,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ot(C)},qt=new At(Re,ft);return function(C,y){const w=(null==y?void 0:y.persistence)||[],R=(Array.isArray(w)?w:[w]).map(Lt);(null==y?void 0:y.errorMap)&&C._updateErrorMap(y.errorMap),C._initializeWithPersistence(R,null==y?void 0:y.popupRedirectResolver)}(qt,w),qt})(R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,w,R)=>{y.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new gt.wA("auth-internal",y=>{const w=Ft(y.getProvider("auth").getImmediate());return new Bu(w)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(bu,"0.19.4",void 0),(0,Y.registerVersion)(bu,"0.19.4","esm2017")},1627:(Zt,Ye,H)=>{"use strict";H.d(Ye,{vA:()=>R,JH:()=>z,G$:()=>er,tn:()=>qt,wj:()=>na,AM:()=>$e,FQ:()=>gu,mI:()=>Ms,iU:()=>Kr,dH:()=>jd,U7:()=>mc,Wu:()=>so,Lx:()=>ff,EW:()=>pc,U2:()=>kl,N8:()=>vh,Sb:()=>gc,$o:()=>bh,nP:()=>Np,Kk:()=>fc,vh:()=>Uu,S1:()=>Co,yv:()=>id,Jr:()=>hc,Vt:()=>Uo,MQ:()=>Ld,jM:()=>ea,g2:()=>Ip,R:()=>yh,HE:()=>Vd,Bd:()=>pf,VF:()=>ya,IO:()=>Sp,iH:()=>Un,qT:()=>Wr,Od:()=>ds,i3:()=>wh,Bt:()=>_c,t8:()=>wu,Sl:()=>rd,cy:()=>tu,TQ:()=>jo,e0:()=>sl,Vx:()=>ki});var T=H(5861),_=H(9681),Y=H(4859),K=H(2090),ge=H(1877);const xe="@firebase/database";let de="";function $e(m){de=m}class le{constructor(d){this.domStorage_=d,this.prefix_="firebase:"}set(d,h){null==h?this.domStorage_.removeItem(this.prefixedName_(d)):this.domStorage_.setItem(this.prefixedName_(d),(0,K.Pz)(h))}get(d){const h=this.domStorage_.getItem(this.prefixedName_(d));return null==h?null:(0,K.cI)(h)}remove(d){this.domStorage_.removeItem(this.prefixedName_(d))}prefixedName_(d){return this.prefix_+d}toString(){return this.domStorage_.toString()}}class ue{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(d,h){null==h?delete this.cache_[d]:this.cache_[d]=h}get(d){return(0,K.r3)(this.cache_,d)?this.cache_[d]:null}remove(d){delete this.cache_[d]}}const Oe=function(m){try{if("undefined"!=typeof window&&void 0!==window[m]){const d=window[m];return d.setItem("firebase:sentinel","cache"),d.removeItem("firebase:sentinel"),new le(d)}}catch(d){}return new ue},tt=Oe("localStorage"),Xe=Oe("sessionStorage"),ut=new ge.Yd("@firebase/database"),dt=function(){let m=1;return function(){return m++}}(),ze=function(m){const d=(0,K.dS)(m),h=new K.gQ;h.update(d);const b=h.digest();return K.US.encodeByteArray(b)},Ae=function(...m){let d="";for(let h=0;h<m.length;h++){const b=m[h];Array.isArray(b)||b&&"object"==typeof b&&"number"==typeof b.length?d+=Ae.apply(null,b):d+="object"==typeof b?(0,K.Pz)(b):b,d+=" "}return d};let Le=null,Pe=!0;const me=function(m,d){(0,K.hu)(!d||!0===m||!1===m,"Can't turn on custom loggers persistently."),!0===m?(ut.logLevel=ge.in.VERBOSE,Le=ut.log.bind(ut),d&&Xe.set("logging_enabled",!0)):"function"==typeof m?Le=m:(Le=null,Xe.remove("logging_enabled"))},_t=function(...m){if(!0===Pe&&(Pe=!1,null===Le&&!0===Xe.get("logging_enabled")&&me(!0)),Le){const d=Ae.apply(null,m);Le(d)}},pt=function(m){return function(...d){_t(m,...d)}},Ut=function(...m){const d="FIREBASE INTERNAL ERROR: "+Ae(...m);ut.error(d)},Ct=function(...m){const d=`FIREBASE FATAL ERROR: ${Ae(...m)}`;throw ut.error(d),new Error(d)},zt=function(...m){const d="FIREBASE WARNING: "+Ae(...m);ut.warn(d)},et=function(m){return"number"==typeof m&&(m!=m||m===Number.POSITIVE_INFINITY||m===Number.NEGATIVE_INFINITY)},rt="[MIN_NAME]",gt="[MAX_NAME]",Ge=function(m,d){if(m===d)return 0;if(m===rt||d===gt)return-1;if(d===rt||m===gt)return 1;{const h=cr(m),b=cr(d);return null!==h?null!==b?h-b==0?m.length-d.length:h-b:-1:null!==b?1:m<d?-1:1}},nn=function(m,d){return m===d?0:m<d?-1:1},xt=function(m,d){if(d&&m in d)return d[m];throw new Error("Missing required key ("+m+") in object: "+(0,K.Pz)(d))},an=function(m){if("object"!=typeof m||null===m)return(0,K.Pz)(m);const d=[];for(const b in m)d.push(b);d.sort();let h="{";for(let b=0;b<d.length;b++)0!==b&&(h+=","),h+=(0,K.Pz)(d[b]),h+=":",h+=an(m[d[b]]);return h+="}",h},Qt=function(m,d){const h=m.length;if(h<=d)return[m];const b=[];for(let A=0;A<h;A+=d)b.push(m.substring(A,A+d>h?h:A+d));return b};function It(m,d){for(const h in m)m.hasOwnProperty(h)&&d(h,m[h])}const Kt=function(m){(0,K.hu)(!et(m),"Invalid JSON number");const b=1023;let A,L,G,se,pe;0===m?(L=0,G=0,A=1/m==-1/0?1:0):(A=m<0,(m=Math.abs(m))>=Math.pow(2,1-b)?(se=Math.min(Math.floor(Math.log(m)/Math.LN2),b),L=se+b,G=Math.round(m*Math.pow(2,52-se)-Math.pow(2,52))):(L=0,G=Math.round(m/Math.pow(2,-1074))));const Ce=[];for(pe=52;pe;pe-=1)Ce.push(G%2?1:0),G=Math.floor(G/2);for(pe=11;pe;pe-=1)Ce.push(L%2?1:0),L=Math.floor(L/2);Ce.push(A?1:0),Ce.reverse();const st=Ce.join("");let nt="";for(pe=0;pe<64;pe+=8){let Dt=parseInt(st.substr(pe,8),2).toString(16);1===Dt.length&&(Dt="0"+Dt),nt+=Dt}return nt.toLowerCase()},Ln=new RegExp("^-?(0*)\\d{1,10}$"),Ti=-2147483648,Zn=2147483647,cr=function(m){if(Ln.test(m)){const d=Number(m);if(d>=Ti&&d<=Zn)return d}return null},Hn=function(m){try{m()}catch(d){setTimeout(()=>{throw zt("Exception was thrown by user callback.",d.stack||""),d},Math.floor(0))}},Lr=function(m,d){const h=setTimeout(m,d);return"object"==typeof h&&h.unref&&h.unref(),h};class Xr{constructor(d,h){this.appName_=d,this.appCheckProvider=h,this.appCheck=null==h?void 0:h.getImmediate({optional:!0}),this.appCheck||null==h||h.get().then(b=>this.appCheck=b)}getToken(d){return this.appCheck?this.appCheck.getToken(d):new Promise((h,b)=>{setTimeout(()=>{this.appCheck?this.getToken(d).then(h,b):h(null)},0)})}addTokenChangeListener(d){var h;null===(h=this.appCheckProvider)||void 0===h||h.get().then(b=>b.addTokenListener(d))}notifyForInvalidToken(){zt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wt{constructor(d,h,b){this.appName_=d,this.firebaseOptions_=h,this.authProvider_=b,this.auth_=null,this.auth_=b.getImmediate({optional:!0}),this.auth_||b.onInit(A=>this.auth_=A)}getToken(d){return this.auth_?this.auth_.getToken(d).catch(h=>h&&"auth/token-not-initialized"===h.code?(_t("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(h)):new Promise((h,b)=>{setTimeout(()=>{this.auth_?this.getToken(d).then(h,b):h(null)},0)})}addTokenChangeListener(d){this.auth_?this.auth_.addAuthTokenListener(d):this.authProvider_.get().then(h=>h.addAuthTokenListener(d))}removeTokenChangeListener(d){this.authProvider_.get().then(h=>h.removeAuthTokenListener(d))}notifyForInvalidToken(){let d='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';d+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zt(d)}}let Gn=(()=>{class m{constructor(h){this.accessToken=h}getToken(h){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(h){h(this.accessToken)}removeTokenChangeListener(h){}notifyForInvalidToken(){}}return m.OWNER="owner",m})();const Ar=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vn="websocket",Dr="long_polling";class An{constructor(d,h,b,A,L=!1,G="",se=!1){this.secure=h,this.namespace=b,this.webSocketOnly=A,this.nodeAdmin=L,this.persistenceKey=G,this.includeNamespaceInQueryParams=se,this._host=d.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=tt.get("host:"+d)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(d){d!==this.internalHost&&(this.internalHost=d,this.isCacheableHost()&&tt.set("host:"+this._host,this.internalHost))}toString(){let d=this.toURLString();return this.persistenceKey&&(d+="<"+this.persistenceKey+">"),d}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ln(m,d,h){let b;if((0,K.hu)("string"==typeof d,"typeof type must == string"),(0,K.hu)("object"==typeof h,"typeof params must == object"),d===Vn)b=(m.secure?"wss://":"ws://")+m.internalHost+"/.ws?";else{if(d!==Dr)throw new Error("Unknown connection type: "+d);b=(m.secure?"https://":"http://")+m.internalHost+"/.lp?"}(function(m){return m.host!==m.internalHost||m.isCustomHost()||m.includeNamespaceInQueryParams})(m)&&(h.ns=m.namespace);const A=[];return It(h,(L,G)=>{A.push(L+"="+G)}),b+A.join("&")}class Li{constructor(){this.counters_={}}incrementCounter(d,h=1){(0,K.r3)(this.counters_,d)||(this.counters_[d]=0),this.counters_[d]+=h}get(){return(0,K.p$)(this.counters_)}}const dr={},We={};function ye(m){const d=m.toString();return dr[d]||(dr[d]=new Li),dr[d]}class yt{constructor(d){this.onMessage_=d,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(d,h){this.closeAfterResponse=d,this.onClose=h,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(d,h){for(this.pendingResponses[d]=h;this.pendingResponses[this.currentResponseNum];){const b=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let A=0;A<b.length;++A)b[A]&&Hn(()=>{this.onMessage_(b[A])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bn{constructor(d,h,b,A,L,G,se){this.connId=d,this.repoInfo=h,this.applicationId=b,this.appCheckToken=A,this.authToken=L,this.transportSessionId=G,this.lastSessionId=se,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pt(d),this.stats_=ye(h),this.urlFn=pe=>(this.appCheckToken&&(pe.ac=this.appCheckToken),ln(h,Dr,pe))}open(d,h){this.curSegmentNum=0,this.onDisconnect_=h,this.myPacketOrderer=new yt(d),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(m){if((0,K.Yr)()||"complete"===document.readyState)m();else{let d=!1;const h=function(){document.body?d||(d=!0,m()):setTimeout(h,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",h,!1),window.addEventListener("load",h,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&h()}),window.attachEvent("onload",h))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new On((...L)=>{const[G,se,pe,Ce,st]=L;if(this.incrementIncomingBytes_(L),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===G)this.id=se,this.password=pe;else{if("close"!==G)throw new Error("Unrecognized command received: "+G);se?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(se,()=>{this.onClosed_()})):this.onClosed_()}},(...L)=>{const[G,se]=L;this.incrementIncomingBytes_(L),this.myPacketOrderer.handleResponse(G,se)},()=>{this.onClosed_()},this.urlFn);const b={start:"t"};b.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(b.cb=this.scriptTagHolder.uniqueCallbackIdentifier),b.v="5",this.transportSessionId&&(b.s=this.transportSessionId),this.lastSessionId&&(b.ls=this.lastSessionId),this.applicationId&&(b.p=this.applicationId),this.appCheckToken&&(b.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ar.test(location.hostname)&&(b.r="f");const A=this.urlFn(b);this.log_("Connecting via long-poll to "+A),this.scriptTagHolder.addTag(A,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bn.forceAllow_=!0}static forceDisallow(){Bn.forceDisallow_=!0}static isAvailable(){return!((0,K.Yr)()||!Bn.forceAllow_&&(Bn.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(d){const h=(0,K.Pz)(d);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);const b=(0,K.h$)(h),A=Qt(b,1840);for(let L=0;L<A.length;L++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,A.length,A[L]),this.curSegmentNum++}addDisconnectPingFrame(d,h){if((0,K.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const b={dframe:"t"};b.id=d,b.pw=h,this.myDisconnFrame.src=this.urlFn(b),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(d){const h=(0,K.Pz)(d).length;this.bytesReceived+=h,this.stats_.incrementCounter("bytes_received",h)}}class On{constructor(d,h,b,A){if(this.onDisconnect=b,this.urlFn=A,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,K.Yr)())this.commandCB=d,this.onMessageCB=h;else{this.uniqueCallbackIdentifier=dt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=d,window["pRTLPCB"+this.uniqueCallbackIdentifier]=h,this.myIFrame=On.createIFrame_();let L="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(L='<script>document.domain="'+document.domain+'";<\/script>');const G="<html><body>"+L+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(G),this.myIFrame.doc.close()}catch(se){_t("frame writing exception"),se.stack&&_t(se.stack),_t(se)}}}static createIFrame_(){const d=document.createElement("iframe");if(d.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(d);try{d.contentWindow.document||_t("No IE domain setting required")}catch(h){const b=document.domain;d.src="javascript:void((function(){document.open();document.domain='"+b+"';document.close();})())"}return d.contentDocument?d.doc=d.contentDocument:d.contentWindow?d.doc=d.contentWindow.document:d.document&&(d.doc=d.document),d}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const d=this.onDisconnect;d&&(this.onDisconnect=null,d())}startLongPoll(d,h){for(this.myID=d,this.myPW=h,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const d={};d.id=this.myID,d.pw=this.myPW,d.ser=this.currentSerial;let h=this.urlFn(d),b="",A=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+b.length<=1870;){const G=this.pendingSegs.shift();b=b+"&seg"+A+"="+G.seg+"&ts"+A+"="+G.ts+"&d"+A+"="+G.d,A++}return h+=b,this.addLongPollTag_(h,this.currentSerial),!0}return!1}enqueueSegment(d,h,b){this.pendingSegs.push({seg:d,ts:h,d:b}),this.alive&&this.newRequest_()}addLongPollTag_(d,h){this.outstandingRequests.add(h);const b=()=>{this.outstandingRequests.delete(h),this.newRequest_()},A=setTimeout(b,Math.floor(25e3));this.addTag(d,()=>{clearTimeout(A),b()})}addTag(d,h){(0,K.Yr)()?this.doNodeLongPoll(d,h):setTimeout(()=>{try{if(!this.sendNewPolls)return;const b=this.myIFrame.doc.createElement("script");b.type="text/javascript",b.async=!0,b.src=d,b.onload=b.onreadystatechange=function(){const A=b.readyState;(!A||"loaded"===A||"complete"===A)&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),h())},b.onerror=()=>{_t("Long-poll script failed to load: "+d),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(b)}catch(b){}},Math.floor(1))}}let Or=null;"undefined"!=typeof MozWebSocket?Or=MozWebSocket:"undefined"!=typeof WebSocket&&(Or=WebSocket);let wn=(()=>{class m{constructor(h,b,A,L,G,se,pe){this.connId=h,this.applicationId=A,this.appCheckToken=L,this.authToken=G,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pt(this.connId),this.stats_=ye(b),this.connURL=m.connectionURL_(b,se,pe,L),this.nodeAdmin=b.nodeAdmin}static connectionURL_(h,b,A,L){const G={v:"5"};return!(0,K.Yr)()&&"undefined"!=typeof location&&location.hostname&&Ar.test(location.hostname)&&(G.r="f"),b&&(G.s=b),A&&(G.ls=A),L&&(G.ac=L),ln(h,Vn,G)}open(h,b){this.onDisconnect=b,this.onMessage=h,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,tt.set("previous_websocket_failure",!0);try{if((0,K.Yr)()){const L={headers:{"User-Agent":`Firebase/5/${de}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(L.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(L.headers["X-Firebase-AppCheck"]=this.appCheckToken);const G=process.env,se=0===this.connURL.indexOf("wss://")?G.HTTPS_PROXY||G.https_proxy:G.HTTP_PROXY||G.http_proxy;se&&(L.proxy={origin:se}),this.mySock=new Or(this.connURL,[],L)}else this.mySock=new Or(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(A){this.log_("Error instantiating WebSocket.");const L=A.message||A.data;return L&&this.log_(L),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=A=>{this.handleIncomingFrame(A)},this.mySock.onerror=A=>{this.log_("WebSocket error.  Closing connection.");const L=A.message||A.data;L&&this.log_(L),this.onClosed_()}}start(){}static forceDisallow(){m.forceDisallow_=!0}static isAvailable(){let h=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const A=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);A&&A.length>1&&parseFloat(A[1])<4.4&&(h=!0)}return!h&&null!==Or&&!m.forceDisallow_}static previouslyFailed(){return tt.isInMemoryStorage||!0===tt.get("previous_websocket_failure")}markConnectionHealthy(){tt.remove("previous_websocket_failure")}appendFrame_(h){if(this.frames.push(h),this.frames.length===this.totalFrames){const b=this.frames.join("");this.frames=null;const A=(0,K.cI)(b);this.onMessage(A)}}handleNewFrameCount_(h){this.totalFrames=h,this.frames=[]}extractFrameCount_(h){if((0,K.hu)(null===this.frames,"We already have a frame buffer"),h.length<=6){const b=Number(h);if(!isNaN(b))return this.handleNewFrameCount_(b),null}return this.handleNewFrameCount_(1),h}handleIncomingFrame(h){if(null===this.mySock)return;const b=h.data;if(this.bytesReceived+=b.length,this.stats_.incrementCounter("bytes_received",b.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(b);else{const A=this.extractFrameCount_(b);null!==A&&this.appendFrame_(A)}}send(h){this.resetKeepAlive();const b=(0,K.Pz)(h);this.bytesSent+=b.length,this.stats_.incrementCounter("bytes_sent",b.length);const A=Qt(b,16384);A.length>1&&this.sendString_(String(A.length));for(let L=0;L<A.length;L++)this.sendString_(A[L])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(h){try{this.mySock.send(h)}catch(b){this.log_("Exception thrown from WebSocket.send():",b.message||b.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return m.responsesRequiredToBeHealthy=2,m.healthyTimeout=3e4,m})();class hr{constructor(d){this.initTransports_(d)}static get ALL_TRANSPORTS(){return[Bn,wn]}initTransports_(d){const h=wn&&wn.isAvailable();let b=h&&!wn.previouslyFailed();if(d.webSocketOnly&&(h||zt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),b=!0),b)this.transports_=[wn];else{const A=this.transports_=[];for(const L of hr.ALL_TRANSPORTS)L&&L.isAvailable()&&A.push(L)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class ir{constructor(d,h,b,A,L,G,se,pe,Ce,st){this.id=d,this.repoInfo_=h,this.applicationId_=b,this.appCheckToken_=A,this.authToken_=L,this.onMessage_=G,this.onReady_=se,this.onDisconnect_=pe,this.onKill_=Ce,this.lastSessionId=st,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pt("c:"+this.id+":"),this.transportManager_=new hr(h),this.log_("Connection created"),this.start_()}start_(){const d=this.transportManager_.initialTransport();this.conn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const h=this.connReceiver_(this.conn_),b=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(h,b)},Math.floor(0));const A=d.healthyTimeout||0;A>0&&(this.healthyTimeout_=Lr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(A)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(d){return h=>{d===this.conn_?this.onConnectionLost_(h):d===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(d){return h=>{2!==this.state_&&(d===this.rx_?this.onPrimaryMessageReceived_(h):d===this.secondaryConn_?this.onSecondaryMessageReceived_(h):this.log_("message on old connection"))}}sendRequest(d){this.sendData_({t:"d",d})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(d){if("t"in d){const h=d.t;"a"===h?this.upgradeIfSecondaryHealthy_():"r"===h?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===h&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(d){const h=xt("t",d),b=xt("d",d);if("c"===h)this.onSecondaryControl_(b);else{if("d"!==h)throw new Error("Unknown protocol layer: "+h);this.pendingDataMessages.push(b)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(d){const h=xt("t",d),b=xt("d",d);"c"===h?this.onControl_(b):"d"===h&&this.onDataMessage_(b)}onDataMessage_(d){this.onPrimaryResponse_(),this.onMessage_(d)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(d){const h=xt("t",d);if("d"in d){const b=d.d;if("h"===h)this.onHandshake_(b);else if("n"===h){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let A=0;A<this.pendingDataMessages.length;++A)this.onDataMessage_(this.pendingDataMessages[A]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===h?this.onConnectionShutdown_(b):"r"===h?this.onReset_(b):"e"===h?Ut("Server Error: "+b):"o"===h?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ut("Unknown control packet command: "+h)}}onHandshake_(d){const h=d.ts,b=d.v,A=d.h;this.sessionId=d.s,this.repoInfo_.host=A,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,h),"5"!==b&&zt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const d=this.transportManager_.upgradeTransport();d&&this.startUpgrade_(d)}startUpgrade_(d){this.secondaryConn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const h=this.connReceiver_(this.secondaryConn_),b=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(h,b),Lr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(d){this.log_("Reset packet received.  New host: "+d),this.repoInfo_.host=d,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(d,h){this.log_("Realtime connection established."),this.conn_=d,this.state_=1,this.onReady_&&(this.onReady_(h,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const d=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===d||this.rx_===d)&&this.close()}onConnectionLost_(d){this.conn_=null,d||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(d){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(d),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(d){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(d)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qr{put(d,h,b,A){}merge(d,h,b,A){}refreshAuthToken(d){}refreshAppCheckToken(d){}onDisconnectPut(d,h,b){}onDisconnectMerge(d,h,b){}onDisconnectCancel(d,h){}reportStats(d){}}class Ts{constructor(d){this.allowedEvents_=d,this.listeners_={},(0,K.hu)(Array.isArray(d)&&d.length>0,"Requires a non-empty array")}trigger(d,...h){if(Array.isArray(this.listeners_[d])){const b=[...this.listeners_[d]];for(let A=0;A<b.length;A++)b[A].callback.apply(b[A].context,h)}}on(d,h,b){this.validateEventType_(d),this.listeners_[d]=this.listeners_[d]||[],this.listeners_[d].push({callback:h,context:b});const A=this.getInitialEvent(d);A&&h.apply(b,A)}off(d,h,b){this.validateEventType_(d);const A=this.listeners_[d]||[];for(let L=0;L<A.length;L++)if(A[L].callback===h&&(!b||b===A[L].context))return void A.splice(L,1)}validateEventType_(d){(0,K.hu)(this.allowedEvents_.find(h=>h===d),"Unknown event: "+d)}}class Nn extends Ts{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,K.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Nn}getInitialEvent(d){return(0,K.hu)("online"===d,"Unknown event type: "+d),[this.online_]}currentlyOnline(){return this.online_}}class lr{constructor(d,h){if(void 0===h){this.pieces_=d.split("/");let b=0;for(let A=0;A<this.pieces_.length;A++)this.pieces_[A].length>0&&(this.pieces_[b]=this.pieces_[A],b++);this.pieces_.length=b,this.pieceNum_=0}else this.pieces_=d,this.pieceNum_=h}toString(){let d="";for(let h=this.pieceNum_;h<this.pieces_.length;h++)""!==this.pieces_[h]&&(d+="/"+this.pieces_[h]);return d||"/"}}function Wn(){return new lr("")}function on(m){return m.pieceNum_>=m.pieces_.length?null:m.pieces_[m.pieceNum_]}function $r(m){return m.pieces_.length-m.pieceNum_}function Te(m){let d=m.pieceNum_;return d<m.pieces_.length&&d++,new lr(m.pieces_,d)}function Ne(m){return m.pieceNum_<m.pieces_.length?m.pieces_[m.pieces_.length-1]:null}function mt(m,d=0){return m.pieces_.slice(m.pieceNum_+d)}function Ot(m){if(m.pieceNum_>=m.pieces_.length)return null;const d=[];for(let h=m.pieceNum_;h<m.pieces_.length-1;h++)d.push(m.pieces_[h]);return new lr(d,0)}function At(m,d){const h=[];for(let b=m.pieceNum_;b<m.pieces_.length;b++)h.push(m.pieces_[b]);if(d instanceof lr)for(let b=d.pieceNum_;b<d.pieces_.length;b++)h.push(d.pieces_[b]);else{const b=d.split("/");for(let A=0;A<b.length;A++)b[A].length>0&&h.push(b[A])}return new lr(h,0)}function Ft(m){return m.pieceNum_>=m.pieces_.length}function sr(m,d){const h=on(m),b=on(d);if(null===h)return d;if(h===b)return sr(Te(m),Te(d));throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+m+")")}function Dn(m,d){const h=mt(m,0),b=mt(d,0);for(let A=0;A<h.length&&A<b.length;A++){const L=Ge(h[A],b[A]);if(0!==L)return L}return h.length===b.length?0:h.length<b.length?-1:1}function ei(m,d){if($r(m)!==$r(d))return!1;for(let h=m.pieceNum_,b=d.pieceNum_;h<=m.pieces_.length;h++,b++)if(m.pieces_[h]!==d.pieces_[b])return!1;return!0}function Xn(m,d){let h=m.pieceNum_,b=d.pieceNum_;if($r(m)>$r(d))return!1;for(;h<m.pieces_.length;){if(m.pieces_[h]!==d.pieces_[b])return!1;++h,++b}return!0}class gi{constructor(d,h){this.errorPrefix_=h,this.parts_=mt(d,0),this.byteLength_=Math.max(1,this.parts_.length);for(let b=0;b<this.parts_.length;b++)this.byteLength_+=(0,K.ug)(this.parts_[b]);Ha(this)}}function Ha(m){if(m.byteLength_>768)throw new Error(m.errorPrefix_+"has a key path longer than 768 bytes ("+m.byteLength_+").");if(m.parts_.length>32)throw new Error(m.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+fs(m))}function fs(m){return 0===m.parts_.length?"":"in property '"+m.parts_.join(".")+"'"}class Io extends Ts{constructor(){let d,h;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(h="visibilitychange",d="hidden"):void 0!==document.mozHidden?(h="mozvisibilitychange",d="mozHidden"):void 0!==document.msHidden?(h="msvisibilitychange",d="msHidden"):void 0!==document.webkitHidden&&(h="webkitvisibilitychange",d="webkitHidden")),this.visible_=!0,h&&document.addEventListener(h,()=>{const b=!document[d];b!==this.visible_&&(this.visible_=b,this.trigger("visible",b))},!1)}static getInstance(){return new Io}getInitialEvent(d){return(0,K.hu)("visible"===d,"Unknown event type: "+d),[this.visible_]}}const So=1e3;let ms,ps=(()=>{class m extends qr{constructor(h,b,A,L,G,se,pe,Ce){if(super(),this.repoInfo_=h,this.applicationId_=b,this.onDataUpdate_=A,this.onConnectStatus_=L,this.onServerInfoUpdate_=G,this.authTokenProvider_=se,this.appCheckTokenProvider_=pe,this.authOverride_=Ce,this.id=m.nextPersistentConnectionId_++,this.log_=pt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=So,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ce&&!(0,K.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Io.getInstance().on("visible",this.onVisible_,this),-1===h.host.indexOf("fblocal")&&Nn.getInstance().on("online",this.onOnline_,this)}sendRequest(h,b,A){const L=++this.requestNumber_,G={r:L,a:h,b};this.log_((0,K.Pz)(G)),(0,K.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(G),A&&(this.requestCBHash_[L]=A)}get(h){this.initConnection_();const b=new K.BH,A={p:h._path.toString(),q:h._queryObject},L={action:"g",request:A,onComplete:se=>{const pe=se.d;"ok"===se.s?(this.onDataUpdate_(A.p,pe,!1,null),b.resolve(pe)):b.reject(pe)}};this.outstandingGets_.push(L),this.outstandingGetCount_++;const G=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const se=this.outstandingGets_[G];void 0===se||L!==se||(delete this.outstandingGets_[G],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+G+" timed out on connection"),b.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(G),b.promise}listen(h,b,A,L){this.initConnection_();const G=h._queryIdentifier,se=h._path.toString();this.log_("Listen called for "+se+" "+G),this.listens.has(se)||this.listens.set(se,new Map),(0,K.hu)(h._queryParams.isDefault()||!h._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,K.hu)(!this.listens.get(se).has(G),"listen() called twice for same path/queryId.");const pe={onComplete:L,hashFn:b,query:h,tag:A};this.listens.get(se).set(G,pe),this.connected_&&this.sendListen_(pe)}sendGet_(h){const b=this.outstandingGets_[h];this.sendRequest("g",b.request,A=>{delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),b.onComplete&&b.onComplete(A)})}sendListen_(h){const b=h.query,A=b._path.toString(),L=b._queryIdentifier;this.log_("Listen on "+A+" for "+L);const G={p:A};h.tag&&(G.q=b._queryObject,G.t=h.tag),G.h=h.hashFn(),this.sendRequest("q",G,pe=>{const Ce=pe.d,st=pe.s;m.warnOnListenWarnings_(Ce,b),(this.listens.get(A)&&this.listens.get(A).get(L))===h&&(this.log_("listen response",pe),"ok"!==st&&this.removeListen_(A,L),h.onComplete&&h.onComplete(st,Ce))})}static warnOnListenWarnings_(h,b){if(h&&"object"==typeof h&&(0,K.r3)(h,"w")){const A=(0,K.DV)(h,"w");if(Array.isArray(A)&&~A.indexOf("no_index")){const L='".indexOn": "'+b._queryParams.getIndex().toString()+'"',G=b._path.toString();zt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${L} at ${G} to your security rules for better performance.`)}}}refreshAuthToken(h){this.authToken_=h,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(h)}reduceReconnectDelayIfAdminCredential_(h){(h&&40===h.length||(0,K.GJ)(h))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(h){this.appCheckToken_=h,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const h=this.authToken_,b=(0,K.w9)(h)?"auth":"gauth",A={cred:h};null===this.authOverride_?A.noauth=!0:"object"==typeof this.authOverride_&&(A.authvar=this.authOverride_),this.sendRequest(b,A,L=>{const G=L.s,se=L.d||"error";this.authToken_===h&&("ok"===G?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(G,se))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},h=>{const b=h.s,A=h.d||"error";"ok"===b?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(b,A)})}unlisten(h,b){const A=h._path.toString(),L=h._queryIdentifier;this.log_("Unlisten called for "+A+" "+L),(0,K.hu)(h._queryParams.isDefault()||!h._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(A,L)&&this.connected_&&this.sendUnlisten_(A,L,h._queryObject,b)}sendUnlisten_(h,b,A,L){this.log_("Unlisten on "+h+" for "+b);const G={p:h};L&&(G.q=A,G.t=L),this.sendRequest("n",G)}onDisconnectPut(h,b,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",h,b,A):this.onDisconnectRequestQueue_.push({pathString:h,action:"o",data:b,onComplete:A})}onDisconnectMerge(h,b,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",h,b,A):this.onDisconnectRequestQueue_.push({pathString:h,action:"om",data:b,onComplete:A})}onDisconnectCancel(h,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",h,null,b):this.onDisconnectRequestQueue_.push({pathString:h,action:"oc",data:null,onComplete:b})}sendOnDisconnect_(h,b,A,L){const G={p:b,d:A};this.log_("onDisconnect "+h,G),this.sendRequest(h,G,se=>{L&&setTimeout(()=>{L(se.s,se.d)},Math.floor(0))})}put(h,b,A,L){this.putInternal("p",h,b,A,L)}merge(h,b,A,L){this.putInternal("m",h,b,A,L)}putInternal(h,b,A,L,G){this.initConnection_();const se={p:b,d:A};void 0!==G&&(se.h=G),this.outstandingPuts_.push({action:h,request:se,onComplete:L}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+b)}sendPut_(h){const b=this.outstandingPuts_[h].action,A=this.outstandingPuts_[h].request,L=this.outstandingPuts_[h].onComplete;this.outstandingPuts_[h].queued=this.connected_,this.sendRequest(b,A,G=>{this.log_(b+" response",G),delete this.outstandingPuts_[h],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),L&&L(G.s,G.d)})}reportStats(h){if(this.connected_){const b={c:h};this.log_("reportStats",b),this.sendRequest("s",b,A=>{"ok"!==A.s&&this.log_("reportStats","Error sending stats: "+A.d)})}}onDataMessage_(h){if("r"in h){this.log_("from server: "+(0,K.Pz)(h));const b=h.r,A=this.requestCBHash_[b];A&&(delete this.requestCBHash_[b],A(h.b))}else{if("error"in h)throw"A server-side error has occurred: "+h.error;"a"in h&&this.onDataPush_(h.a,h.b)}}onDataPush_(h,b){this.log_("handleServerMessage",h,b),"d"===h?this.onDataUpdate_(b.p,b.d,!1,b.t):"m"===h?this.onDataUpdate_(b.p,b.d,!0,b.t):"c"===h?this.onListenRevoked_(b.p,b.q):"ac"===h?this.onAuthRevoked_(b.s,b.d):"apc"===h?this.onAppCheckRevoked_(b.s,b.d):"sd"===h?this.onSecurityDebugPacket_(b):Ut("Unrecognized action received from server: "+(0,K.Pz)(h)+"\nAre you using the latest client?")}onReady_(h,b){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(h),this.lastSessionId=b,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(h){(0,K.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(h))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(h){h&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=So,this.realtime_||this.scheduleConnect_(0)),this.visible_=h}onOnline_(h){h?(this.log_("Browser went online."),this.reconnectDelay_=So,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=So),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const h=(new Date).getTime()-this.lastConnectionAttemptTime_;let b=Math.max(0,this.reconnectDelay_-h);b=Math.random()*b,this.log_("Trying to reconnect in "+b+"ms"),this.scheduleConnect_(b),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var h=this;return(0,T.Z)(function*(){if(h.shouldReconnect_()){h.log_("Making a connection attempt"),h.lastConnectionAttemptTime_=(new Date).getTime(),h.lastConnectionEstablishedTime_=null;const b=h.onDataMessage_.bind(h),A=h.onReady_.bind(h),L=h.onRealtimeDisconnect_.bind(h),G=h.id+":"+m.nextConnectionId_++,se=h.lastSessionId;let pe=!1,Ce=null;const st=function(){Ce?Ce.close():(pe=!0,L())};h.realtime_={close:st,sendRequest:function(pn){(0,K.hu)(Ce,"sendRequest call when we're not connected not allowed."),Ce.sendRequest(pn)}};const Dt=h.forceTokenRefresh_;h.forceTokenRefresh_=!1;try{const[pn,zn]=yield Promise.all([h.authTokenProvider_.getToken(Dt),h.appCheckTokenProvider_.getToken(Dt)]);pe?_t("getToken() completed but was canceled"):(_t("getToken() completed. Creating connection."),h.authToken_=pn&&pn.accessToken,h.appCheckToken_=zn&&zn.token,Ce=new ir(G,h.repoInfo_,h.applicationId_,h.appCheckToken_,h.authToken_,b,A,L,Fr=>{zt(Fr+" ("+h.repoInfo_.toString()+")"),h.interrupt("server_kill")},se))}catch(pn){h.log_("Failed to get token: "+pn),pe||(h.repoInfo_.nodeAdmin&&zt(pn),st())}}})()}interrupt(h){_t("Interrupting connection for reason: "+h),this.interruptReasons_[h]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(h){_t("Resuming connection for reason: "+h),delete this.interruptReasons_[h],(0,K.xb)(this.interruptReasons_)&&(this.reconnectDelay_=So,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(h){const b=h-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:b})}cancelSentTransactions_(){for(let h=0;h<this.outstandingPuts_.length;h++){const b=this.outstandingPuts_[h];b&&"h"in b.request&&b.queued&&(b.onComplete&&b.onComplete("disconnect"),delete this.outstandingPuts_[h],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(h,b){let A;A=b?b.map(G=>an(G)).join("$"):"default";const L=this.removeListen_(h,A);L&&L.onComplete&&L.onComplete("permission_denied")}removeListen_(h,b){const A=new lr(h).toString();let L;if(this.listens.has(A)){const G=this.listens.get(A);L=G.get(b),G.delete(b),0===G.size&&this.listens.delete(A)}else L=void 0;return L}onAuthRevoked_(h,b){_t("Auth token revoked: "+h+"/"+b),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===h||"permission_denied"===h)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(h,b){_t("App check token revoked: "+h+"/"+b),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===h||"permission_denied"===h)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(h){this.securityDebugCallback_?this.securityDebugCallback_(h):"msg"in h&&console.log("FIREBASE: "+h.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const h of this.listens.values())for(const b of h.values())this.sendListen_(b);for(let h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){const h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(let h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)}sendConnectStats_(){const h={};let b="js";(0,K.Yr)()&&(b=this.repoInfo_.nodeAdmin?"admin_node":"node"),h["sdk."+b+"."+de.replace(/\./g,"-")]=1,(0,K.uI)()?h["framework.cordova"]=1:(0,K.b$)()&&(h["framework.reactnative"]=1),this.reportStats(h)}shouldReconnect_(){const h=Nn.getInstance().currentlyOnline();return(0,K.xb)(this.interruptReasons_)&&h}}return m.nextPersistentConnectionId_=0,m.nextConnectionId_=0,m})();class qn{constructor(d,h){this.name=d,this.node=h}static Wrap(d,h){return new qn(d,h)}}class gs{getCompare(){return this.compare.bind(this)}indexedValueChanged(d,h){const b=new qn(rt,d),A=new qn(rt,h);return 0!==this.compare(b,A)}minPost(){return qn.MIN}}class Ps extends gs{static get __EMPTY_NODE(){return ms}static set __EMPTY_NODE(d){ms=d}compare(d,h){return Ge(d.name,h.name)}isDefinedOn(d){throw(0,K.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(d,h){return!1}minPost(){return qn.MIN}maxPost(){return new qn(gt,ms)}makePost(d,h){return(0,K.hu)("string"==typeof d,"KeyIndex indexValue must always be a string."),new qn(d,ms)}toString(){return".key"}}const ti=new Ps;class Xs{constructor(d,h,b,A,L=null){this.isReverse_=A,this.resultGenerator_=L,this.nodeStack_=[];let G=1;for(;!d.isEmpty();)if(d=d,G=h?b(d.key,h):1,A&&(G*=-1),G<0)d=this.isReverse_?d.left:d.right;else{if(0===G){this.nodeStack_.push(d);break}this.nodeStack_.push(d),d=this.isReverse_?d.right:d.left}}getNext(){if(0===this.nodeStack_.length)return null;let h,d=this.nodeStack_.pop();if(h=this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value},this.isReverse_)for(d=d.left;!d.isEmpty();)this.nodeStack_.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack_.push(d),d=d.left;return h}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const d=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value}}}let Cr,hi=(()=>{class m{constructor(h,b,A,L,G){this.key=h,this.value=b,this.color=null!=A?A:m.RED,this.left=null!=L?L:li.EMPTY_NODE,this.right=null!=G?G:li.EMPTY_NODE}copy(h,b,A,L,G){return new m(null!=h?h:this.key,null!=b?b:this.value,null!=A?A:this.color,null!=L?L:this.left,null!=G?G:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(h){return this.left.inorderTraversal(h)||!!h(this.key,this.value)||this.right.inorderTraversal(h)}reverseTraversal(h){return this.right.reverseTraversal(h)||h(this.key,this.value)||this.left.reverseTraversal(h)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(h,b,A){let L=this;const G=A(h,L.key);return L=G<0?L.copy(null,null,null,L.left.insert(h,b,A),null):0===G?L.copy(null,b,null,null,null):L.copy(null,null,null,null,L.right.insert(h,b,A)),L.fixUp_()}removeMin_(){if(this.left.isEmpty())return li.EMPTY_NODE;let h=this;return!h.left.isRed_()&&!h.left.left.isRed_()&&(h=h.moveRedLeft_()),h=h.copy(null,null,null,h.left.removeMin_(),null),h.fixUp_()}remove(h,b){let A,L;if(A=this,b(h,A.key)<0)!A.left.isEmpty()&&!A.left.isRed_()&&!A.left.left.isRed_()&&(A=A.moveRedLeft_()),A=A.copy(null,null,null,A.left.remove(h,b),null);else{if(A.left.isRed_()&&(A=A.rotateRight_()),!A.right.isEmpty()&&!A.right.isRed_()&&!A.right.left.isRed_()&&(A=A.moveRedRight_()),0===b(h,A.key)){if(A.right.isEmpty())return li.EMPTY_NODE;L=A.right.min_(),A=A.copy(L.key,L.value,null,null,A.right.removeMin_())}A=A.copy(null,null,null,null,A.right.remove(h,b))}return A.fixUp_()}isRed_(){return this.color}fixUp_(){let h=this;return h.right.isRed_()&&!h.left.isRed_()&&(h=h.rotateLeft_()),h.left.isRed_()&&h.left.left.isRed_()&&(h=h.rotateRight_()),h.left.isRed_()&&h.right.isRed_()&&(h=h.colorFlip_()),h}moveRedLeft_(){let h=this.colorFlip_();return h.right.left.isRed_()&&(h=h.copy(null,null,null,null,h.right.rotateRight_()),h=h.rotateLeft_(),h=h.colorFlip_()),h}moveRedRight_(){let h=this.colorFlip_();return h.left.left.isRed_()&&(h=h.rotateRight_(),h=h.colorFlip_()),h}rotateLeft_(){const h=this.copy(null,null,m.RED,null,this.right.left);return this.right.copy(null,null,this.color,h,null)}rotateRight_(){const h=this.copy(null,null,m.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,h)}colorFlip_(){const h=this.left.copy(null,null,!this.left.color,null,null),b=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,h,b)}checkMaxDepth_(){const h=this.check_();return Math.pow(2,h)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const h=this.left.check_();if(h!==this.right.check_())throw new Error("Black depths differ");return h+(this.isRed_()?0:1)}}return m.RED=!0,m.BLACK=!1,m})();class li{constructor(d,h=li.EMPTY_NODE){this.comparator_=d,this.root_=h}insert(d,h){return new li(this.comparator_,this.root_.insert(d,h,this.comparator_).copy(null,null,hi.BLACK,null,null))}remove(d){return new li(this.comparator_,this.root_.remove(d,this.comparator_).copy(null,null,hi.BLACK,null,null))}get(d){let h,b=this.root_;for(;!b.isEmpty();){if(h=this.comparator_(d,b.key),0===h)return b.value;h<0?b=b.left:h>0&&(b=b.right)}return null}getPredecessorKey(d){let h,b=this.root_,A=null;for(;!b.isEmpty();){if(h=this.comparator_(d,b.key),0===h){if(b.left.isEmpty())return A?A.key:null;for(b=b.left;!b.right.isEmpty();)b=b.right;return b.key}h<0?b=b.left:h>0&&(A=b,b=b.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(d){return this.root_.inorderTraversal(d)}reverseTraversal(d){return this.root_.reverseTraversal(d)}getIterator(d){return new Xs(this.root_,null,this.comparator_,!1,d)}getIteratorFrom(d,h){return new Xs(this.root_,d,this.comparator_,!1,h)}getReverseIteratorFrom(d,h){return new Xs(this.root_,d,this.comparator_,!0,h)}getReverseIterator(d){return new Xs(this.root_,null,this.comparator_,!0,d)}}function Ri(m,d){return Ge(m.name,d.name)}function mi(m,d){return Ge(m,d)}li.EMPTY_NODE=new class{copy(d,h,b,A,L){return this}insert(d,h,b){return new hi(d,h,null)}remove(d,h){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(d){return!1}reverseTraversal(d){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Sa=function(m){return"number"==typeof m?"number:"+Kt(m):"string:"+m},Yi=function(m){if(m.isLeafNode()){const d=m.val();(0,K.hu)("string"==typeof d||"number"==typeof d||"object"==typeof d&&(0,K.r3)(d,".sv"),"Priority must be a string or number.")}else(0,K.hu)(m===Cr||m.isEmpty(),"priority of unexpected type.");(0,K.hu)(m===Cr||m.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Tr,aa,Mo,bi=(()=>{class m{constructor(h,b=m.__childrenNodeConstructor.EMPTY_NODE){this.value_=h,this.priorityNode_=b,this.lazyHash_=null,(0,K.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Yi(this.priorityNode_)}static set __childrenNodeConstructor(h){Tr=h}static get __childrenNodeConstructor(){return Tr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(h){return new m(this.value_,h)}getImmediateChild(h){return".priority"===h?this.priorityNode_:m.__childrenNodeConstructor.EMPTY_NODE}getChild(h){return Ft(h)?this:".priority"===on(h)?this.priorityNode_:m.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(h,b){return null}updateImmediateChild(h,b){return".priority"===h?this.updatePriority(b):b.isEmpty()&&".priority"!==h?this:m.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(h,b).updatePriority(this.priorityNode_)}updateChild(h,b){const A=on(h);return null===A?b:b.isEmpty()&&".priority"!==A?this:((0,K.hu)(".priority"!==A||1===$r(h),".priority must be the last token in a path"),this.updateImmediateChild(A,m.__childrenNodeConstructor.EMPTY_NODE.updateChild(Te(h),b)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(h,b){return!1}val(h){return h&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let h="";this.priorityNode_.isEmpty()||(h+="priority:"+Sa(this.priorityNode_.val())+":");const b=typeof this.value_;h+=b+":",h+="number"===b?Kt(this.value_):this.value_,this.lazyHash_=ze(h)}return this.lazyHash_}getValue(){return this.value_}compareTo(h){return h===m.__childrenNodeConstructor.EMPTY_NODE?1:h instanceof m.__childrenNodeConstructor?-1:((0,K.hu)(h.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(h))}compareToLeafNode_(h){const b=typeof h.value_,A=typeof this.value_,L=m.VALUE_TYPE_ORDER.indexOf(b),G=m.VALUE_TYPE_ORDER.indexOf(A);return(0,K.hu)(L>=0,"Unknown leaf type: "+b),(0,K.hu)(G>=0,"Unknown leaf type: "+A),L===G?"object"===A?0:this.value_<h.value_?-1:this.value_===h.value_?0:1:G-L}withIndex(){return this}isIndexed(){return!0}equals(h){if(h===this)return!0;if(h.isLeafNode()){const b=h;return this.value_===b.value_&&this.priorityNode_.equals(b.priorityNode_)}return!1}}return m.VALUE_TYPE_ORDER=["object","boolean","number","string"],m})();const Kn=new class extends gs{compare(d,h){const b=d.node.getPriority(),A=h.node.getPriority(),L=b.compareTo(A);return 0===L?Ge(d.name,h.name):L}isDefinedOn(d){return!d.getPriority().isEmpty()}indexedValueChanged(d,h){return!d.getPriority().equals(h.getPriority())}minPost(){return qn.MIN}maxPost(){return new qn(gt,new bi("[PRIORITY-POST]",Mo))}makePost(d,h){const b=aa(d);return new qn(h,new bi("[PRIORITY-POST]",b))}toString(){return".priority"}},Ro=Math.log(2);class Fs{constructor(d){this.count=parseInt(Math.log(d+1)/Ro,10),this.current_=this.count-1;const A=(L=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=d+1&A}nextBitIsOne(){const d=!(this.bits_&1<<this.current_);return this.current_--,d}}const xo=function(m,d,h,b){m.sort(d);const A=function(pe,Ce){const st=Ce-pe;let nt,Dt;if(0===st)return null;if(1===st)return nt=m[pe],Dt=h?h(nt):nt,new hi(Dt,nt.node,hi.BLACK,null,null);{const pn=parseInt(st/2,10)+pe,zn=A(pe,pn),Fr=A(pn+1,Ce);return nt=m[pn],Dt=h?h(nt):nt,new hi(Dt,nt.node,hi.BLACK,zn,Fr)}},se=function(pe){let Ce=null,st=null,nt=m.length;const Dt=function(zn,Fr){const ao=nt-zn,Vl=nt;nt-=zn;const Bl=A(ao+1,Vl),Gu=m[ao],mf=h?h(Gu):Gu;pn(new hi(mf,Gu.node,Fr,null,Bl))},pn=function(zn){Ce?(Ce.left=zn,Ce=zn):(st=zn,Ce=zn)};for(let zn=0;zn<pe.count;++zn){const Fr=pe.nextBitIsOne(),ao=Math.pow(2,pe.count-(zn+1));Fr?Dt(ao,hi.BLACK):(Dt(ao,hi.BLACK),Dt(ao,hi.RED))}return st}(new Fs(m.length));return new li(b||d,se)};let Ir;const ji={};class $i{constructor(d,h){this.indexes_=d,this.indexSet_=h}static get Default(){return(0,K.hu)(ji&&Kn,"ChildrenNode.ts has not been loaded"),Ir=Ir||new $i({".priority":ji},{".priority":Kn}),Ir}get(d){const h=(0,K.DV)(this.indexes_,d);if(!h)throw new Error("No index defined for "+d);return h instanceof li?h:null}hasIndex(d){return(0,K.r3)(this.indexSet_,d.toString())}addIndex(d,h){(0,K.hu)(d!==ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const b=[];let A=!1;const L=h.getIterator(qn.Wrap);let se,G=L.getNext();for(;G;)A=A||d.isDefinedOn(G.node),b.push(G),G=L.getNext();se=A?xo(b,d.getCompare()):ji;const pe=d.toString(),Ce=Object.assign({},this.indexSet_);Ce[pe]=d;const st=Object.assign({},this.indexes_);return st[pe]=se,new $i(st,Ce)}addToIndexes(d,h){const b=(0,K.UI)(this.indexes_,(A,L)=>{const G=(0,K.DV)(this.indexSet_,L);if((0,K.hu)(G,"Missing index implementation for "+L),A===ji){if(G.isDefinedOn(d.node)){const se=[],pe=h.getIterator(qn.Wrap);let Ce=pe.getNext();for(;Ce;)Ce.name!==d.name&&se.push(Ce),Ce=pe.getNext();return se.push(d),xo(se,G.getCompare())}return ji}{const se=h.get(d.name);let pe=A;return se&&(pe=pe.remove(new qn(d.name,se))),pe.insert(d,d.node)}});return new $i(b,this.indexSet_)}removeFromIndexes(d,h){const b=(0,K.UI)(this.indexes_,A=>{if(A===ji)return A;{const L=h.get(d.name);return L?A.remove(new qn(d.name,L)):A}});return new $i(b,this.indexSet_)}}let V,Z=(()=>{class m{constructor(h,b,A){this.children_=h,this.priorityNode_=b,this.indexMap_=A,this.lazyHash_=null,this.priorityNode_&&Yi(this.priorityNode_),this.children_.isEmpty()&&(0,K.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return V||(V=new m(new li(mi),null,$i.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||V}updatePriority(h){return this.children_.isEmpty()?this:new m(this.children_,h,this.indexMap_)}getImmediateChild(h){if(".priority"===h)return this.getPriority();{const b=this.children_.get(h);return null===b?V:b}}getChild(h){const b=on(h);return null===b?this:this.getImmediateChild(b).getChild(Te(h))}hasChild(h){return null!==this.children_.get(h)}updateImmediateChild(h,b){if((0,K.hu)(b,"We should always be passing snapshot nodes"),".priority"===h)return this.updatePriority(b);{const A=new qn(h,b);let L,G;b.isEmpty()?(L=this.children_.remove(h),G=this.indexMap_.removeFromIndexes(A,this.children_)):(L=this.children_.insert(h,b),G=this.indexMap_.addToIndexes(A,this.children_));const se=L.isEmpty()?V:this.priorityNode_;return new m(L,se,G)}}updateChild(h,b){const A=on(h);if(null===A)return b;{(0,K.hu)(".priority"!==on(h)||1===$r(h),".priority must be the last token in a path");const L=this.getImmediateChild(A).updateChild(Te(h),b);return this.updateImmediateChild(A,L)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(h){if(this.isEmpty())return null;const b={};let A=0,L=0,G=!0;if(this.forEachChild(Kn,(se,pe)=>{b[se]=pe.val(h),A++,G&&m.INTEGER_REGEXP_.test(se)?L=Math.max(L,Number(se)):G=!1}),!h&&G&&L<2*A){const se=[];for(const pe in b)se[pe]=b[pe];return se}return h&&!this.getPriority().isEmpty()&&(b[".priority"]=this.getPriority().val()),b}hash(){if(null===this.lazyHash_){let h="";this.getPriority().isEmpty()||(h+="priority:"+Sa(this.getPriority().val())+":"),this.forEachChild(Kn,(b,A)=>{const L=A.hash();""!==L&&(h+=":"+b+":"+L)}),this.lazyHash_=""===h?"":ze(h)}return this.lazyHash_}getPredecessorChildName(h,b,A){const L=this.resolveIndex_(A);if(L){const G=L.getPredecessorKey(new qn(h,b));return G?G.name:null}return this.children_.getPredecessorKey(h)}getFirstChildName(h){const b=this.resolveIndex_(h);if(b){const A=b.minKey();return A&&A.name}return this.children_.minKey()}getFirstChild(h){const b=this.getFirstChildName(h);return b?new qn(b,this.children_.get(b)):null}getLastChildName(h){const b=this.resolveIndex_(h);if(b){const A=b.maxKey();return A&&A.name}return this.children_.maxKey()}getLastChild(h){const b=this.getLastChildName(h);return b?new qn(b,this.children_.get(b)):null}forEachChild(h,b){const A=this.resolveIndex_(h);return A?A.inorderTraversal(L=>b(L.name,L.node)):this.children_.inorderTraversal(b)}getIterator(h){return this.getIteratorFrom(h.minPost(),h)}getIteratorFrom(h,b){const A=this.resolveIndex_(b);if(A)return A.getIteratorFrom(h,L=>L);{const L=this.children_.getIteratorFrom(h.name,qn.Wrap);let G=L.peek();for(;null!=G&&b.compare(G,h)<0;)L.getNext(),G=L.peek();return L}}getReverseIterator(h){return this.getReverseIteratorFrom(h.maxPost(),h)}getReverseIteratorFrom(h,b){const A=this.resolveIndex_(b);if(A)return A.getReverseIteratorFrom(h,L=>L);{const L=this.children_.getReverseIteratorFrom(h.name,qn.Wrap);let G=L.peek();for(;null!=G&&b.compare(G,h)>0;)L.getNext(),G=L.peek();return L}}compareTo(h){return this.isEmpty()?h.isEmpty()?0:-1:h.isLeafNode()||h.isEmpty()?1:h===ne?-1:0}withIndex(h){if(h===ti||this.indexMap_.hasIndex(h))return this;{const b=this.indexMap_.addIndex(h,this.children_);return new m(this.children_,this.priorityNode_,b)}}isIndexed(h){return h===ti||this.indexMap_.hasIndex(h)}equals(h){if(h===this)return!0;if(h.isLeafNode())return!1;{const b=h;if(this.getPriority().equals(b.getPriority())){if(this.children_.count()===b.children_.count()){const A=this.getIterator(Kn),L=b.getIterator(Kn);let G=A.getNext(),se=L.getNext();for(;G&&se;){if(G.name!==se.name||!G.node.equals(se.node))return!1;G=A.getNext(),se=L.getNext()}return null===G&&null===se}return!1}return!1}}resolveIndex_(h){return h===ti?null:this.indexMap_.get(h.toString())}}return m.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,m})();const ne=new class extends Z{constructor(){super(new li(mi),Z.EMPTY_NODE,$i.Default)}compareTo(d){return d===this?0:1}equals(d){return d===this}getPriority(){return this}getImmediateChild(d){return Z.EMPTY_NODE}isEmpty(){return!1}};function Je(m,d=null){if(null===m)return Z.EMPTY_NODE;if("object"==typeof m&&".priority"in m&&(d=m[".priority"]),(0,K.hu)(null===d||"string"==typeof d||"number"==typeof d||"object"==typeof d&&".sv"in d,"Invalid priority type found: "+typeof d),"object"==typeof m&&".value"in m&&null!==m[".value"]&&(m=m[".value"]),"object"!=typeof m||".sv"in m)return new bi(m,Je(d));if(m instanceof Array){let h=Z.EMPTY_NODE;return It(m,(b,A)=>{if((0,K.r3)(m,b)&&"."!==b.substring(0,1)){const L=Je(A);(L.isLeafNode()||!L.isEmpty())&&(h=h.updateImmediateChild(b,L))}}),h.updatePriority(Je(d))}{const h=[];let b=!1;if(It(m,(G,se)=>{if("."!==G.substring(0,1)){const pe=Je(se);pe.isEmpty()||(b=b||!pe.getPriority().isEmpty(),h.push(new qn(G,pe)))}}),0===h.length)return Z.EMPTY_NODE;const L=xo(h,Ri,G=>G.name,mi);if(b){const G=xo(h,Kn.getCompare());return new Z(L,Je(d),new $i({".priority":G},{".priority":Kn}))}return new Z(L,Je(d),$i.Default)}}Object.defineProperties(qn,{MIN:{value:new qn(rt,Z.EMPTY_NODE)},MAX:{value:new qn(gt,ne)}}),Ps.__EMPTY_NODE=Z.EMPTY_NODE,bi.__childrenNodeConstructor=Z,Cr=ne,Mo=ne,function(m){aa=m}(Je);class Et extends gs{constructor(d){super(),this.indexPath_=d,(0,K.hu)(!Ft(d)&&".priority"!==on(d),"Can't create PathIndex with empty path or .priority key")}extractChild(d){return d.getChild(this.indexPath_)}isDefinedOn(d){return!d.getChild(this.indexPath_).isEmpty()}compare(d,h){const b=this.extractChild(d.node),A=this.extractChild(h.node),L=b.compareTo(A);return 0===L?Ge(d.name,h.name):L}makePost(d,h){const b=Je(d),A=Z.EMPTY_NODE.updateChild(this.indexPath_,b);return new qn(h,A)}maxPost(){const d=Z.EMPTY_NODE.updateChild(this.indexPath_,ne);return new qn(gt,d)}toString(){return mt(this.indexPath_,0).join("/")}}const mn=new class extends gs{compare(d,h){const b=d.node.compareTo(h.node);return 0===b?Ge(d.name,h.name):b}isDefinedOn(d){return!0}indexedValueChanged(d,h){return!d.equals(h)}minPost(){return qn.MIN}maxPost(){return qn.MAX}makePost(d,h){const b=Je(d);return new qn(h,b)}toString(){return".value"}},Sr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_r=function(){let m=0;const d=[];return function(h){const b=h===m;let A;m=h;const L=new Array(8);for(A=7;A>=0;A--)L[A]=Sr.charAt(h%64),h=Math.floor(h/64);(0,K.hu)(0===h,"Cannot push at time == 0");let G=L.join("");if(b){for(A=11;A>=0&&63===d[A];A--)d[A]=0;d[A]++}else for(A=0;A<12;A++)d[A]=Math.floor(64*Math.random());for(A=0;A<12;A++)G+=Sr.charAt(d[A]);return(0,K.hu)(20===G.length,"nextPushId: Length should be 20."),G}}(),kn=function(m){if(m===""+Zn)return"-";const d=cr(m);if(null!=d)return""+(d+1);const h=new Array(m.length);for(let G=0;G<h.length;G++)h[G]=m.charAt(G);if(h.length<786)return h.push("-"),h.join("");let b=h.length-1;for(;b>=0&&"z"===h[b];)b--;if(-1===b)return gt;const L=Sr.charAt(Sr.indexOf(h[b])+1);return h[b]=L,h.slice(0,b+1).join("")},Sn=function(m){if(m===""+Ti)return rt;const d=cr(m);if(null!=d)return""+(d-1);const h=new Array(m.length);for(let b=0;b<h.length;b++)h[b]=m.charAt(b);return"-"===h[h.length-1]?1===h.length?""+Zn:(delete h[h.length-1],h.join("")):(h[h.length-1]=Sr.charAt(Sr.indexOf(h[h.length-1])-1),h.join("")+"z".repeat(786-h.length))};function fo(m){return{type:"value",snapshotNode:m}}function rs(m,d){return{type:"child_added",snapshotNode:d,childName:m}}function Hi(m,d){return{type:"child_removed",snapshotNode:d,childName:m}}function Ls(m,d,h){return{type:"child_changed",snapshotNode:d,childName:m,oldSnap:h}}class Vs{constructor(d){this.index_=d}updateChild(d,h,b,A,L,G){(0,K.hu)(d.isIndexed(this.index_),"A node must be indexed if only a child is updated");const se=d.getImmediateChild(h);return se.getChild(A).equals(b.getChild(A))&&se.isEmpty()===b.isEmpty()||(null!=G&&(b.isEmpty()?d.hasChild(h)?G.trackChildChange(Hi(h,se)):(0,K.hu)(d.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):se.isEmpty()?G.trackChildChange(rs(h,b)):G.trackChildChange(Ls(h,b,se))),d.isLeafNode()&&b.isEmpty())?d:d.updateImmediateChild(h,b).withIndex(this.index_)}updateFullNode(d,h,b){return null!=b&&(d.isLeafNode()||d.forEachChild(Kn,(A,L)=>{h.hasChild(A)||b.trackChildChange(Hi(A,L))}),h.isLeafNode()||h.forEachChild(Kn,(A,L)=>{if(d.hasChild(A)){const G=d.getImmediateChild(A);G.equals(L)||b.trackChildChange(Ls(A,L,G))}else b.trackChildChange(rs(A,L))})),h.withIndex(this.index_)}updatePriority(d,h){return d.isEmpty()?Z.EMPTY_NODE:d.updatePriority(h)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Bs{constructor(d){this.indexedFilter_=new Vs(d.getIndex()),this.index_=d.getIndex(),this.startPost_=Bs.getStartPost_(d),this.endPost_=Bs.getEndPost_(d)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(d){return this.index_.compare(this.getStartPost(),d)<=0&&this.index_.compare(d,this.getEndPost())<=0}updateChild(d,h,b,A,L,G){return this.matches(new qn(h,b))||(b=Z.EMPTY_NODE),this.indexedFilter_.updateChild(d,h,b,A,L,G)}updateFullNode(d,h,b){h.isLeafNode()&&(h=Z.EMPTY_NODE);let A=h.withIndex(this.index_);A=A.updatePriority(Z.EMPTY_NODE);const L=this;return h.forEachChild(Kn,(G,se)=>{L.matches(new qn(G,se))||(A=A.updateImmediateChild(G,Z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(d,A,b)}updatePriority(d,h){return d}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(d){if(d.hasStart()){const h=d.getIndexStartName();return d.getIndex().makePost(d.getIndexStartValue(),h)}return d.getIndex().minPost()}static getEndPost_(d){if(d.hasEnd()){const h=d.getIndexEndName();return d.getIndex().makePost(d.getIndexEndValue(),h)}return d.getIndex().maxPost()}}class bt{constructor(d){this.rangedFilter_=new Bs(d),this.index_=d.getIndex(),this.limit_=d.getLimit(),this.reverse_=!d.isViewFromLeft()}updateChild(d,h,b,A,L,G){return this.rangedFilter_.matches(new qn(h,b))||(b=Z.EMPTY_NODE),d.getImmediateChild(h).equals(b)?d:d.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(d,h,b,A,L,G):this.fullLimitUpdateChild_(d,h,b,L,G)}updateFullNode(d,h,b){let A;if(h.isLeafNode()||h.isEmpty())A=Z.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<h.numChildren()&&h.isIndexed(this.index_)){let L;A=Z.EMPTY_NODE.withIndex(this.index_),L=this.reverse_?h.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):h.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let G=0;for(;L.hasNext()&&G<this.limit_;){const se=L.getNext();let pe;if(pe=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),se)<=0:this.index_.compare(se,this.rangedFilter_.getEndPost())<=0,!pe)break;A=A.updateImmediateChild(se.name,se.node),G++}}else{let L,G,se,pe;if(A=h.withIndex(this.index_),A=A.updatePriority(Z.EMPTY_NODE),this.reverse_){pe=A.getReverseIterator(this.index_),L=this.rangedFilter_.getEndPost(),G=this.rangedFilter_.getStartPost();const nt=this.index_.getCompare();se=(Dt,pn)=>nt(pn,Dt)}else pe=A.getIterator(this.index_),L=this.rangedFilter_.getStartPost(),G=this.rangedFilter_.getEndPost(),se=this.index_.getCompare();let Ce=0,st=!1;for(;pe.hasNext();){const nt=pe.getNext();!st&&se(L,nt)<=0&&(st=!0),st&&Ce<this.limit_&&se(nt,G)<=0?Ce++:A=A.updateImmediateChild(nt.name,Z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(d,A,b)}updatePriority(d,h){return d}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(d,h,b,A,L){let G;if(this.reverse_){const nt=this.index_.getCompare();G=(Dt,pn)=>nt(pn,Dt)}else G=this.index_.getCompare();const se=d;(0,K.hu)(se.numChildren()===this.limit_,"");const pe=new qn(h,b),Ce=this.reverse_?se.getFirstChild(this.index_):se.getLastChild(this.index_),st=this.rangedFilter_.matches(pe);if(se.hasChild(h)){const nt=se.getImmediateChild(h);let Dt=A.getChildAfterChild(this.index_,Ce,this.reverse_);for(;null!=Dt&&(Dt.name===h||se.hasChild(Dt.name));)Dt=A.getChildAfterChild(this.index_,Dt,this.reverse_);const pn=null==Dt?1:G(Dt,pe);if(st&&!b.isEmpty()&&pn>=0)return null!=L&&L.trackChildChange(Ls(h,b,nt)),se.updateImmediateChild(h,b);{null!=L&&L.trackChildChange(Hi(h,nt));const Fr=se.updateImmediateChild(h,Z.EMPTY_NODE);return null!=Dt&&this.rangedFilter_.matches(Dt)?(null!=L&&L.trackChildChange(rs(Dt.name,Dt.node)),Fr.updateImmediateChild(Dt.name,Dt.node)):Fr}}return b.isEmpty()?d:st&&G(Ce,pe)>=0?(null!=L&&(L.trackChildChange(Hi(Ce.name,Ce.node)),L.trackChildChange(rs(h,b))),se.updateImmediateChild(h,b).updateImmediateChild(Ce.name,Z.EMPTY_NODE)):d}}class er{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,K.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rt}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,K.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,K.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kn}copy(){const d=new er;return d.limitSet_=this.limitSet_,d.limit_=this.limit_,d.startSet_=this.startSet_,d.indexStartValue_=this.indexStartValue_,d.startNameSet_=this.startNameSet_,d.indexStartName_=this.indexStartName_,d.endSet_=this.endSet_,d.indexEndValue_=this.indexEndValue_,d.endNameSet_=this.endNameSet_,d.indexEndName_=this.indexEndName_,d.index_=this.index_,d.viewFrom_=this.viewFrom_,d}}function la(m,d,h){const b=m.copy();return b.startSet_=!0,void 0===d&&(d=null),b.indexStartValue_=d,null!=h?(b.startNameSet_=!0,b.indexStartName_=h):(b.startNameSet_=!1,b.indexStartName_=""),b}function Wa(m,d,h){const b=m.copy();return b.endSet_=!0,void 0===d&&(d=null),b.indexEndValue_=d,void 0!==h?(b.endNameSet_=!0,b.indexEndName_=h):(b.endNameSet_=!1,b.indexEndName_=""),b}function zo(m,d){const h=m.copy();return h.index_=d,h}function ua(m){const d={};if(m.isDefault())return d;let h;return m.index_===Kn?h="$priority":m.index_===mn?h="$value":m.index_===ti?h="$key":((0,K.hu)(m.index_ instanceof Et,"Unrecognized index type!"),h=m.index_.toString()),d.orderBy=(0,K.Pz)(h),m.startSet_&&(d.startAt=(0,K.Pz)(m.indexStartValue_),m.startNameSet_&&(d.startAt+=","+(0,K.Pz)(m.indexStartName_))),m.endSet_&&(d.endAt=(0,K.Pz)(m.indexEndValue_),m.endNameSet_&&(d.endAt+=","+(0,K.Pz)(m.indexEndName_))),m.limitSet_&&(m.isViewFromLeft()?d.limitToFirst=m.limit_:d.limitToLast=m.limit_),d}function po(m){const d={};if(m.startSet_&&(d.sp=m.indexStartValue_,m.startNameSet_&&(d.sn=m.indexStartName_)),m.endSet_&&(d.ep=m.indexEndValue_,m.endNameSet_&&(d.en=m.indexEndName_)),m.limitSet_){d.l=m.limit_;let h=m.viewFrom_;""===h&&(h=m.isViewFromLeft()?"l":"r"),d.vf=h}return m.index_!==Kn&&(d.i=m.index_.toString()),d}class ys extends qr{constructor(d,h,b,A){super(),this.repoInfo_=d,this.onDataUpdate_=h,this.authTokenProvider_=b,this.appCheckTokenProvider_=A,this.log_=pt("p:rest:"),this.listens_={}}reportStats(d){throw new Error("Method not implemented.")}static getListenId_(d,h){return void 0!==h?"tag$"+h:((0,K.hu)(d._queryParams.isDefault(),"should have a tag if it's not a default query."),d._path.toString())}listen(d,h,b,A){const L=d._path.toString();this.log_("Listen called for "+L+" "+d._queryIdentifier);const G=ys.getListenId_(d,b),se={};this.listens_[G]=se;const pe=ua(d._queryParams);this.restRequest_(L+".json",pe,(Ce,st)=>{let nt=st;if(404===Ce&&(nt=null,Ce=null),null===Ce&&this.onDataUpdate_(L,nt,!1,b),(0,K.DV)(this.listens_,G)===se){let Dt;Dt=Ce?401===Ce?"permission_denied":"rest_error:"+Ce:"ok",A(Dt,null)}})}unlisten(d,h){const b=ys.getListenId_(d,h);delete this.listens_[b]}get(d){const h=ua(d._queryParams),b=d._path.toString(),A=new K.BH;return this.restRequest_(b+".json",h,(L,G)=>{let se=G;404===L&&(se=null,L=null),null===L?(this.onDataUpdate_(b,se,!1,null),A.resolve(se)):A.reject(new Error(se))}),A.promise}refreshAuthToken(d){}restRequest_(d,h={},b){return h.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([A,L])=>{A&&A.accessToken&&(h.auth=A.accessToken),L&&L.token&&(h.ac=L.token);const G=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+d+"?ns="+this.repoInfo_.namespace+(0,K.xO)(h);this.log_("Sending REST request for "+G);const se=new XMLHttpRequest;se.onreadystatechange=()=>{if(b&&4===se.readyState){this.log_("REST Response for "+G+" received. status:",se.status,"response:",se.responseText);let pe=null;if(se.status>=200&&se.status<300){try{pe=(0,K.cI)(se.responseText)}catch(Ce){zt("Failed to parse JSON response for "+G+": "+se.responseText)}b(null,pe)}else 401!==se.status&&404!==se.status&&zt("Got unsuccessful REST response for "+G+" Status: "+se.status),b(se.status);b=null}},se.open("GET",G,!0),se.send()})}}class Gi{constructor(){this.rootNode_=Z.EMPTY_NODE}getNode(d){return this.rootNode_.getChild(d)}updateSnapshot(d,h){this.rootNode_=this.rootNode_.updateChild(d,h)}}function wi(){return{value:null,children:new Map}}function vs(m,d,h){if(Ft(d))m.value=h,m.children.clear();else if(null!==m.value)m.value=m.value.updateChild(d,h);else{const b=on(d);m.children.has(b)||m.children.set(b,wi()),vs(m.children.get(b),d=Te(d),h)}}function ca(m,d){if(Ft(d))return m.value=null,m.children.clear(),!0;if(null!==m.value){if(m.value.isLeafNode())return!1;{const h=m.value;return m.value=null,h.forEachChild(Kn,(b,A)=>{vs(m,new lr(b),A)}),ca(m,d)}}if(m.children.size>0){const h=on(d);return d=Te(d),m.children.has(h)&&ca(m.children.get(h),d)&&m.children.delete(h),0===m.children.size}return!0}function ls(m,d,h){null!==m.value?h(d,m.value):function(m,d){m.children.forEach((h,b)=>{d(b,h)})}(m,(b,A)=>{ls(A,new lr(d.toString()+"/"+b),h)})}class Tl{constructor(d){this.collection_=d,this.last_=null}get(){const d=this.collection_.get(),h=Object.assign({},d);return this.last_&&It(this.last_,(b,A)=>{h[b]=h[b]-A}),this.last_=d,h}}class Na{constructor(d,h){this.server_=h,this.statsToReport_={},this.statsListener_=new Tl(d);const b=1e4+2e4*Math.random();Lr(this.reportStats_.bind(this),Math.floor(b))}reportStats_(){const d=this.statsListener_.get(),h={};let b=!1;It(d,(A,L)=>{L>0&&(0,K.r3)(this.statsToReport_,A)&&(h[A]=L,b=!0)}),b&&this.server_.reportStats(h),Lr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Di=(()=>(function(m){m[m.OVERWRITE=0]="OVERWRITE",m[m.MERGE=1]="MERGE",m[m.ACK_USER_WRITE=2]="ACK_USER_WRITE",m[m.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Di||(Di={})),Di))();function mo(m){return{fromUser:!1,fromServer:!0,queryId:m,tagged:!0}}class Us{constructor(d,h,b){this.path=d,this.affectedTree=h,this.revert=b,this.type=Di.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(d){if(Ft(this.path)){if(null!=this.affectedTree.value)return(0,K.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const h=this.affectedTree.subtree(new lr(d));return new Us(Wn(),h,this.revert)}}return(0,K.hu)(on(this.path)===d,"operationForChild called for unrelated child."),new Us(Te(this.path),this.affectedTree,this.revert)}}class ko{constructor(d,h){this.source=d,this.path=h,this.type=Di.LISTEN_COMPLETE}operationForChild(d){return Ft(this.path)?new ko(this.source,Wn()):new ko(this.source,Te(this.path))}}class is{constructor(d,h,b){this.source=d,this.path=h,this.snap=b,this.type=Di.OVERWRITE}operationForChild(d){return Ft(this.path)?new is(this.source,Wn(),this.snap.getImmediateChild(d)):new is(this.source,Te(this.path),this.snap)}}class js{constructor(d,h,b){this.source=d,this.path=h,this.children=b,this.type=Di.MERGE}operationForChild(d){if(Ft(this.path)){const h=this.children.subtree(new lr(d));return h.isEmpty()?null:h.value?new is(this.source,Wn(),h.value):new js(this.source,Wn(),h)}return(0,K.hu)(on(this.path)===d,"Can't get a merge for a child not on the path of the operation"),new js(this.source,Te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ss{constructor(d,h,b){this.node_=d,this.fullyInitialized_=h,this.filtered_=b}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(d){if(Ft(d))return this.isFullyInitialized()&&!this.filtered_;const h=on(d);return this.isCompleteForChild(h)}isCompleteForChild(d){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(d)}getNode(){return this.node_}}class $s{constructor(d){this.query_=d,this.index_=this.query_._queryParams.getIndex()}}function _o(m,d,h,b,A,L){const G=b.filter(se=>se.type===h);G.sort((se,pe)=>function(m,d,h){if(null==d.childName||null==h.childName)throw(0,K.g5)("Should only compare child_ events.");const b=new qn(d.childName,d.snapshotNode),A=new qn(h.childName,h.snapshotNode);return m.index_.compare(b,A)}(m,se,pe)),G.forEach(se=>{const pe=function(m,d,h){return"value"===d.type||"child_removed"===d.type||(d.prevName=h.getPredecessorChildName(d.childName,d.snapshotNode,m.index_)),d}(m,se,L);A.forEach(Ce=>{Ce.respondsTo(se.type)&&d.push(Ce.createEvent(pe,m.query_))})})}function Ur(m,d){return{eventCache:m,serverCache:d}}function Zo(m,d,h,b){return Ur(new ss(d,h,b),m.serverCache)}function za(m,d,h,b){return Ur(m.eventCache,new ss(d,h,b))}function Ko(m){return m.eventCache.isFullyInitialized()?m.eventCache.getNode():null}function gr(m){return m.serverCache.isFullyInitialized()?m.serverCache.getNode():null}let Hl;class tr{constructor(d,h=(()=>(Hl||(Hl=new li(nn)),Hl))()){this.value=d,this.children=h}static fromObject(d){let h=new tr(null);return It(d,(b,A)=>{h=h.set(new lr(b),A)}),h}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(d,h){if(null!=this.value&&h(this.value))return{path:Wn(),value:this.value};if(Ft(d))return null;{const b=on(d),A=this.children.get(b);if(null!==A){const L=A.findRootMostMatchingPathAndValue(Te(d),h);return null!=L?{path:At(new lr(b),L.path),value:L.value}:null}return null}}findRootMostValueAndPath(d){return this.findRootMostMatchingPathAndValue(d,()=>!0)}subtree(d){if(Ft(d))return this;{const h=on(d),b=this.children.get(h);return null!==b?b.subtree(Te(d)):new tr(null)}}set(d,h){if(Ft(d))return new tr(h,this.children);{const b=on(d),L=(this.children.get(b)||new tr(null)).set(Te(d),h),G=this.children.insert(b,L);return new tr(this.value,G)}}remove(d){if(Ft(d))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const h=on(d),b=this.children.get(h);if(b){const A=b.remove(Te(d));let L;return L=A.isEmpty()?this.children.remove(h):this.children.insert(h,A),null===this.value&&L.isEmpty()?new tr(null):new tr(this.value,L)}return this}}get(d){if(Ft(d))return this.value;{const h=on(d),b=this.children.get(h);return b?b.get(Te(d)):null}}setTree(d,h){if(Ft(d))return h;{const b=on(d),L=(this.children.get(b)||new tr(null)).setTree(Te(d),h);let G;return G=L.isEmpty()?this.children.remove(b):this.children.insert(b,L),new tr(this.value,G)}}fold(d){return this.fold_(Wn(),d)}fold_(d,h){const b={};return this.children.inorderTraversal((A,L)=>{b[A]=L.fold_(At(d,A),h)}),h(d,this.value,b)}findOnPath(d,h){return this.findOnPath_(d,Wn(),h)}findOnPath_(d,h,b){const A=!!this.value&&b(h,this.value);if(A)return A;if(Ft(d))return null;{const L=on(d),G=this.children.get(L);return G?G.findOnPath_(Te(d),At(h,L),b):null}}foreachOnPath(d,h){return this.foreachOnPath_(d,Wn(),h)}foreachOnPath_(d,h,b){if(Ft(d))return this;{this.value&&b(h,this.value);const A=on(d),L=this.children.get(A);return L?L.foreachOnPath_(Te(d),At(h,A),b):new tr(null)}}foreach(d){this.foreach_(Wn(),d)}foreach_(d,h){this.children.inorderTraversal((b,A)=>{A.foreach_(At(d,b),h)}),this.value&&h(d,this.value)}foreachChild(d){this.children.inorderTraversal((h,b)=>{b.value&&d(h,b.value)})}}class Ii{constructor(d){this.writeTree_=d}static empty(){return new Ii(new tr(null))}}function Is(m,d,h){if(Ft(d))return new Ii(new tr(h));{const b=m.writeTree_.findRootMostValueAndPath(d);if(null!=b){const A=b.path;let L=b.value;const G=sr(A,d);return L=L.updateChild(G,h),new Ii(m.writeTree_.set(A,L))}{const A=new tr(h),L=m.writeTree_.setTree(d,A);return new Ii(L)}}}function ha(m,d,h){let b=m;return It(h,(A,L)=>{b=Is(b,At(d,A),L)}),b}function lu(m,d){if(Ft(d))return Ii.empty();{const h=m.writeTree_.setTree(d,new tr(null));return new Ii(h)}}function Za(m,d){return null!=Hr(m,d)}function Hr(m,d){const h=m.writeTree_.findRootMostValueAndPath(d);return null!=h?m.writeTree_.get(h.path).getChild(sr(h.path,d)):null}function fa(m){const d=[],h=m.writeTree_.value;return null!=h?h.isLeafNode()||h.forEachChild(Kn,(b,A)=>{d.push(new qn(b,A))}):m.writeTree_.children.inorderTraversal((b,A)=>{null!=A.value&&d.push(new qn(b,A.value))}),d}function Ss(m,d){if(Ft(d))return m;{const h=Hr(m,d);return new Ii(null!=h?new tr(h):m.writeTree_.subtree(d))}}function Ma(m){return m.writeTree_.isEmpty()}function vo(m,d){return Rr(Wn(),m.writeTree_,d)}function Rr(m,d,h){if(null!=d.value)return h.updateChild(m,d.value);{let b=null;return d.children.inorderTraversal((A,L)=>{".priority"===A?((0,K.hu)(null!==L.value,"Priority writes must always be leaf nodes"),b=L.value):h=Rr(At(m,A),L,h)}),!h.getChild(m).isEmpty()&&null!==b&&(h=h.updateChild(At(m,".priority"),b)),h}}function bo(m,d){return he(d,m)}function Ei(m,d){if(m.snap)return Xn(m.path,d);for(const h in m.children)if(m.children.hasOwnProperty(h)&&Xn(At(m.path,h),d))return!0;return!1}function Ra(m){return m.visible}function Tn(m,d,h){let b=Ii.empty();for(let A=0;A<m.length;++A){const L=m[A];if(d(L)){const G=L.path;let se;if(L.snap)Xn(h,G)?(se=sr(h,G),b=Is(b,se,L.snap)):Xn(G,h)&&(se=sr(G,h),b=Is(b,Wn(),L.snap.getChild(se)));else{if(!L.children)throw(0,K.g5)("WriteRecord should have .snap or .children");if(Xn(h,G))se=sr(h,G),b=ha(b,se,L.children);else if(Xn(G,h))if(se=sr(G,h),Ft(se))b=ha(b,Wn(),L.children);else{const pe=(0,K.DV)(L.children,on(se));if(pe){const Ce=pe.getChild(Te(se));b=Is(b,Wn(),Ce)}}}}}return b}function Pn(m,d,h,b,A){if(b||A){const L=Ss(m.visibleWrites,d);return!A&&Ma(L)?h:A||null!=h||Za(L,Wn())?vo(Tn(m.allWrites,function(Ce){return(Ce.visible||A)&&(!b||!~b.indexOf(Ce.writeId))&&(Xn(Ce.path,d)||Xn(d,Ce.path))},d),h||Z.EMPTY_NODE):null}{const L=Hr(m.visibleWrites,d);if(null!=L)return L;{const G=Ss(m.visibleWrites,d);return Ma(G)?h:null!=h||Za(G,Wn())?vo(G,h||Z.EMPTY_NODE):null}}}function Oa(m,d,h,b){return Pn(m.writeTree,m.treePath,d,h,b)}function k(m,d){return function(m,d,h){let b=Z.EMPTY_NODE;const A=Hr(m.visibleWrites,d);if(A)return A.isLeafNode()||A.forEachChild(Kn,(L,G)=>{b=b.updateImmediateChild(L,G)}),b;if(h){const L=Ss(m.visibleWrites,d);return h.forEachChild(Kn,(G,se)=>{const pe=vo(Ss(L,new lr(G)),se);b=b.updateImmediateChild(G,pe)}),fa(L).forEach(G=>{b=b.updateImmediateChild(G.name,G.node)}),b}return fa(Ss(m.visibleWrites,d)).forEach(G=>{b=b.updateImmediateChild(G.name,G.node)}),b}(m.writeTree,m.treePath,d)}function N(m,d,h,b){return function(m,d,h,b,A){(0,K.hu)(b||A,"Either existingEventSnap or existingServerSnap must exist");const L=At(d,h);if(Za(m.visibleWrites,L))return null;{const G=Ss(m.visibleWrites,L);return Ma(G)?A.getChild(h):vo(G,A.getChild(h))}}(m.writeTree,m.treePath,d,h,b)}function S(m,d){return function(m,d){return Hr(m.visibleWrites,d)}(m.writeTree,At(m.treePath,d))}function W(m,d,h){return function(m,d,h,b){const A=At(d,h),L=Hr(m.visibleWrites,A);return null!=L?L:b.isCompleteForChild(h)?vo(Ss(m.visibleWrites,A),b.getNode().getImmediateChild(h)):null}(m.writeTree,m.treePath,d,h)}function te(m,d){return he(At(m.treePath,d),m.writeTree)}function he(m,d){return{treePath:m,writeTree:d}}class we{constructor(){this.changeMap=new Map}trackChildChange(d){const h=d.type,b=d.childName;(0,K.hu)("child_added"===h||"child_changed"===h||"child_removed"===h,"Only child changes supported for tracking"),(0,K.hu)(".priority"!==b,"Only non-priority child changes can be tracked.");const A=this.changeMap.get(b);if(A){const L=A.type;if("child_added"===h&&"child_removed"===L)this.changeMap.set(b,Ls(b,d.snapshotNode,A.snapshotNode));else if("child_removed"===h&&"child_added"===L)this.changeMap.delete(b);else if("child_removed"===h&&"child_changed"===L)this.changeMap.set(b,Hi(b,A.oldSnap));else if("child_changed"===h&&"child_added"===L)this.changeMap.set(b,rs(b,d.snapshotNode));else{if("child_changed"!==h||"child_changed"!==L)throw(0,K.g5)("Illegal combination of changes: "+d+" occurred after "+A);this.changeMap.set(b,Ls(b,d.snapshotNode,A.oldSnap))}}else this.changeMap.set(b,d)}getChanges(){return Array.from(this.changeMap.values())}}const Xt=new class{getCompleteChild(d){return null}getChildAfterChild(d,h,b){return null}};class en{constructor(d,h,b=null){this.writes_=d,this.viewCache_=h,this.optCompleteServerCache_=b}getCompleteChild(d){const h=this.viewCache_.eventCache;if(h.isCompleteForChild(d))return h.getNode().getImmediateChild(d);{const b=null!=this.optCompleteServerCache_?new ss(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return W(this.writes_,d,b)}}getChildAfterChild(d,h,b){const A=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:gr(this.viewCache_),L=function(m,d,h,b,A,L){return function(m,d,h,b,A,L,G){let se;const pe=Ss(m.visibleWrites,d),Ce=Hr(pe,Wn());if(null!=Ce)se=Ce;else{if(null==h)return[];se=vo(pe,h)}if(se=se.withIndex(G),se.isEmpty()||se.isLeafNode())return[];{const st=[],nt=G.getCompare(),Dt=L?se.getReverseIteratorFrom(b,G):se.getIteratorFrom(b,G);let pn=Dt.getNext();for(;pn&&st.length<A;)0!==nt(pn,b)&&st.push(pn),pn=Dt.getNext();return st}}(m.writeTree,m.treePath,d,h,b,A,L)}(this.writes_,A,h,1,b,d);return 0===L.length?null:L[0]}}function Ji(m,d,h,b,A,L){const G=d.eventCache;if(null!=S(b,h))return d;{let se,pe;if(Ft(h))if((0,K.hu)(d.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),d.serverCache.isFiltered()){const Ce=gr(d),nt=k(b,Ce instanceof Z?Ce:Z.EMPTY_NODE);se=m.filter.updateFullNode(d.eventCache.getNode(),nt,L)}else{const Ce=Oa(b,gr(d));se=m.filter.updateFullNode(d.eventCache.getNode(),Ce,L)}else{const Ce=on(h);if(".priority"===Ce){(0,K.hu)(1===$r(h),"Can't have a priority with additional path components");const st=G.getNode();pe=d.serverCache.getNode();const nt=N(b,h,st,pe);se=null!=nt?m.filter.updatePriority(st,nt):G.getNode()}else{const st=Te(h);let nt;if(G.isCompleteForChild(Ce)){pe=d.serverCache.getNode();const Dt=N(b,h,G.getNode(),pe);nt=null!=Dt?G.getNode().getImmediateChild(Ce).updateChild(st,Dt):G.getNode().getImmediateChild(Ce)}else nt=W(b,Ce,d.serverCache);se=null!=nt?m.filter.updateChild(G.getNode(),Ce,nt,st,A,L):G.getNode()}}return Zo(d,se,G.isFullyInitialized()||Ft(h),m.filter.filtersNodes())}}function ui(m,d,h,b,A,L,G,se){const pe=d.serverCache;let Ce;const st=G?m.filter:m.filter.getIndexedFilter();if(Ft(h))Ce=st.updateFullNode(pe.getNode(),b,null);else if(st.filtersNodes()&&!pe.isFiltered()){const pn=pe.getNode().updateChild(h,b);Ce=st.updateFullNode(pe.getNode(),pn,null)}else{const pn=on(h);if(!pe.isCompleteForPath(h)&&$r(h)>1)return d;const zn=Te(h),ao=pe.getNode().getImmediateChild(pn).updateChild(zn,b);Ce=".priority"===pn?st.updatePriority(pe.getNode(),ao):st.updateChild(pe.getNode(),pn,ao,zn,Xt,null)}const nt=za(d,Ce,pe.isFullyInitialized()||Ft(h),st.filtersNodes());return Ji(m,nt,h,A,new en(A,nt,L),se)}function bs(m,d,h,b,A,L,G){const se=d.eventCache;let pe,Ce;const st=new en(A,d,L);if(Ft(h))Ce=m.filter.updateFullNode(d.eventCache.getNode(),b,G),pe=Zo(d,Ce,!0,m.filter.filtersNodes());else{const nt=on(h);if(".priority"===nt)Ce=m.filter.updatePriority(d.eventCache.getNode(),b),pe=Zo(d,Ce,se.isFullyInitialized(),se.isFiltered());else{const Dt=Te(h),pn=se.getNode().getImmediateChild(nt);let zn;if(Ft(Dt))zn=b;else{const Fr=st.getCompleteChild(nt);zn=null!=Fr?".priority"===Ne(Dt)&&Fr.getChild(Ot(Dt)).isEmpty()?Fr:Fr.updateChild(Dt,b):Z.EMPTY_NODE}pe=pn.equals(zn)?d:Zo(d,m.filter.updateChild(se.getNode(),nt,zn,Dt,st,G),se.isFullyInitialized(),m.filter.filtersNodes())}}return pe}function Hs(m,d){return m.eventCache.isCompleteForChild(d)}function Gs(m,d,h){return h.foreach((b,A)=>{d=d.updateChild(b,A)}),d}function pi(m,d,h,b,A,L,G,se){if(d.serverCache.getNode().isEmpty()&&!d.serverCache.isFullyInitialized())return d;let Ce,pe=d;Ce=Ft(h)?b:new tr(null).setTree(h,b);const st=d.serverCache.getNode();return Ce.children.inorderTraversal((nt,Dt)=>{if(st.hasChild(nt)){const zn=Gs(0,d.serverCache.getNode().getImmediateChild(nt),Dt);pe=ui(m,pe,new lr(nt),zn,A,L,G,se)}}),Ce.children.inorderTraversal((nt,Dt)=>{const pn=!d.serverCache.isCompleteForChild(nt)&&void 0===Dt.value;if(!st.hasChild(nt)&&!pn){const Fr=Gs(0,d.serverCache.getNode().getImmediateChild(nt),Dt);pe=ui(m,pe,new lr(nt),Fr,A,L,G,se)}}),pe}class pa{constructor(d,h){this.query_=d,this.eventRegistrations_=[];const b=this.query_._queryParams,A=new Vs(b.getIndex()),L=function(m){return m.loadsAllData()?new Vs(m.getIndex()):m.hasLimit()?new bt(m):new Bs(m)}(b);this.processor_=function(m){return{filter:m}}(L);const G=h.serverCache,se=h.eventCache,pe=A.updateFullNode(Z.EMPTY_NODE,G.getNode(),null),Ce=L.updateFullNode(Z.EMPTY_NODE,se.getNode(),null),st=new ss(pe,G.isFullyInitialized(),A.filtersNodes()),nt=new ss(Ce,se.isFullyInitialized(),L.filtersNodes());this.viewCache_=Ur(nt,st),this.eventGenerator_=new $s(this.query_)}get query(){return this.query_}}function Fo(m,d){const h=gr(m.viewCache_);return h&&(m.query._queryParams.loadsAllData()||!Ft(d)&&!h.getImmediateChild(on(d)).isEmpty())?h.getChild(d):null}function Lo(m){return 0===m.eventRegistrations_.length}function Pa(m,d,h){const b=[];if(h){(0,K.hu)(null==d,"A cancel should cancel all event registrations.");const A=m.query._path;m.eventRegistrations_.forEach(L=>{const G=L.createCancelEvent(h,A);G&&b.push(G)})}if(d){let A=[];for(let L=0;L<m.eventRegistrations_.length;++L){const G=m.eventRegistrations_[L];if(G.matches(d)){if(d.hasAnyCallback()){A=A.concat(m.eventRegistrations_.slice(L+1));break}}else A.push(G)}m.eventRegistrations_=A}else m.eventRegistrations_=[];return b}function Qr(m,d,h,b){d.type===Di.MERGE&&null!==d.source.queryId&&((0,K.hu)(gr(m.viewCache_),"We should always have a full cache before handling merges"),(0,K.hu)(Ko(m.viewCache_),"Missing event cache, even though we have a server cache"));const A=m.viewCache_,L=function(m,d,h,b,A){const L=new we;let G,se;if(h.type===Di.OVERWRITE){const Ce=h;Ce.source.fromUser?G=bs(m,d,Ce.path,Ce.snap,b,A,L):((0,K.hu)(Ce.source.fromServer,"Unknown source."),se=Ce.source.tagged||d.serverCache.isFiltered()&&!Ft(Ce.path),G=ui(m,d,Ce.path,Ce.snap,b,A,se,L))}else if(h.type===Di.MERGE){const Ce=h;Ce.source.fromUser?G=function(m,d,h,b,A,L,G){let se=d;return b.foreach((pe,Ce)=>{const st=At(h,pe);Hs(d,on(st))&&(se=bs(m,se,st,Ce,A,L,G))}),b.foreach((pe,Ce)=>{const st=At(h,pe);Hs(d,on(st))||(se=bs(m,se,st,Ce,A,L,G))}),se}(m,d,Ce.path,Ce.children,b,A,L):((0,K.hu)(Ce.source.fromServer,"Unknown source."),se=Ce.source.tagged||d.serverCache.isFiltered(),G=pi(m,d,Ce.path,Ce.children,b,A,se,L))}else if(h.type===Di.ACK_USER_WRITE){const Ce=h;G=Ce.revert?function(m,d,h,b,A,L){let G;if(null!=S(b,h))return d;{const se=new en(b,d,A),pe=d.eventCache.getNode();let Ce;if(Ft(h)||".priority"===on(h)){let st;if(d.serverCache.isFullyInitialized())st=Oa(b,gr(d));else{const nt=d.serverCache.getNode();(0,K.hu)(nt instanceof Z,"serverChildren would be complete if leaf node"),st=k(b,nt)}st=st,Ce=m.filter.updateFullNode(pe,st,L)}else{const st=on(h);let nt=W(b,st,d.serverCache);null==nt&&d.serverCache.isCompleteForChild(st)&&(nt=pe.getImmediateChild(st)),Ce=null!=nt?m.filter.updateChild(pe,st,nt,Te(h),se,L):d.eventCache.getNode().hasChild(st)?m.filter.updateChild(pe,st,Z.EMPTY_NODE,Te(h),se,L):pe,Ce.isEmpty()&&d.serverCache.isFullyInitialized()&&(G=Oa(b,gr(d)),G.isLeafNode()&&(Ce=m.filter.updateFullNode(Ce,G,L)))}return G=d.serverCache.isFullyInitialized()||null!=S(b,Wn()),Zo(d,Ce,G,m.filter.filtersNodes())}}(m,d,Ce.path,b,A,L):function(m,d,h,b,A,L,G){if(null!=S(A,h))return d;const se=d.serverCache.isFiltered(),pe=d.serverCache;if(null!=b.value){if(Ft(h)&&pe.isFullyInitialized()||pe.isCompleteForPath(h))return ui(m,d,h,pe.getNode().getChild(h),A,L,se,G);if(Ft(h)){let Ce=new tr(null);return pe.getNode().forEachChild(ti,(st,nt)=>{Ce=Ce.set(new lr(st),nt)}),pi(m,d,h,Ce,A,L,se,G)}return d}{let Ce=new tr(null);return b.foreach((st,nt)=>{const Dt=At(h,st);pe.isCompleteForPath(Dt)&&(Ce=Ce.set(st,pe.getNode().getChild(Dt)))}),pi(m,d,h,Ce,A,L,se,G)}}(m,d,Ce.path,Ce.affectedTree,b,A,L)}else{if(h.type!==Di.LISTEN_COMPLETE)throw(0,K.g5)("Unknown operation type: "+h.type);G=function(m,d,h,b,A){const L=d.serverCache;return Ji(m,za(d,L.getNode(),L.isFullyInitialized()||Ft(h),L.isFiltered()),h,b,Xt,A)}(m,d,h.path,b,L)}const pe=L.getChanges();return function(m,d,h){const b=d.eventCache;if(b.isFullyInitialized()){const A=b.getNode().isLeafNode()||b.getNode().isEmpty(),L=Ko(m);(h.length>0||!m.eventCache.isFullyInitialized()||A&&!b.getNode().equals(L)||!b.getNode().getPriority().equals(L.getPriority()))&&h.push(fo(Ko(d)))}}(d,G,pe),{viewCache:G,changes:pe}}(m.processor_,A,d,h,b);return function(m,d){(0,K.hu)(d.eventCache.getNode().isIndexed(m.filter.getIndex()),"Event snap not indexed"),(0,K.hu)(d.serverCache.getNode().isIndexed(m.filter.getIndex()),"Server snap not indexed")}(m.processor_,L.viewCache),(0,K.hu)(L.viewCache.serverCache.isFullyInitialized()||!A.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),m.viewCache_=L.viewCache,Ru(m,L.changes,L.viewCache.eventCache.getNode(),null)}function Ru(m,d,h,b){return function(m,d,h,b){const A=[],L=[];return d.forEach(G=>{"child_changed"===G.type&&m.index_.indexedValueChanged(G.oldSnap,G.snapshotNode)&&L.push(function(m,d){return{type:"child_moved",snapshotNode:d,childName:m}}(G.childName,G.snapshotNode))}),_o(m,A,"child_removed",d,b,h),_o(m,A,"child_added",d,b,h),_o(m,A,"child_moved",L,b,h),_o(m,A,"child_changed",d,b,h),_o(m,A,"value",d,b,h),A}(m.eventGenerator_,d,h,b?[b]:m.eventRegistrations_)}let Cn,xi;class zl{constructor(){this.views=new Map}}function Ya(m,d,h,b){const A=d.source.queryId;if(null!==A){const L=m.views.get(A);return(0,K.hu)(null!=L,"SyncTree gave us an op for an invalid query."),Qr(L,d,h,b)}{let L=[];for(const G of m.views.values())L=L.concat(Qr(G,d,h,b));return L}}function Oc(m,d,h,b,A){const G=m.views.get(d._queryIdentifier);if(!G){let se=Oa(h,A?b:null),pe=!1;se?pe=!0:b instanceof Z?(se=k(h,b),pe=!1):(se=Z.EMPTY_NODE,pe=!1);const Ce=Ur(new ss(se,pe,!1),new ss(b,A,!1));return new pa(d,Ce)}return G}function Qa(m){const d=[];for(const h of m.views.values())h.query._queryParams.loadsAllData()||d.push(h);return d}function La(m,d){let h=null;for(const b of m.views.values())h=h||Fo(b,d);return h}function Kl(m,d){return d._queryParams.loadsAllData()?Yo(m):m.views.get(d._queryIdentifier)}function wo(m,d){return null!=Kl(m,d)}function zi(m){return null!=Yo(m)}function Yo(m){for(const d of m.views.values())if(d.query._queryParams.loadsAllData())return d;return null}let kc=1;class uu{constructor(d){this.listenProvider_=d,this.syncPointTree_=new tr(null),this.pendingWriteTree_={visibleWrites:Ii.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ja(m,d,h,b,A){return function(m,d,h,b,A){(0,K.hu)(b>m.lastWriteId,"Stacking an older write on top of newer ones"),void 0===A&&(A=!0),m.allWrites.push({path:d,snap:h,writeId:b,visible:A}),A&&(m.visibleWrites=Is(m.visibleWrites,d,h)),m.lastWriteId=b}(m.pendingWriteTree_,d,h,b,A),A?Xa(m,new is({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,h)):[]}function no(m,d,h=!1){const b=function(m,d){for(let h=0;h<m.allWrites.length;h++){const b=m.allWrites[h];if(b.writeId===d)return b}return null}(m.pendingWriteTree_,d);if(function(m,d){const h=m.allWrites.findIndex(se=>se.writeId===d);(0,K.hu)(h>=0,"removeWrite called with nonexistent writeId.");const b=m.allWrites[h];m.allWrites.splice(h,1);let A=b.visible,L=!1,G=m.allWrites.length-1;for(;A&&G>=0;){const se=m.allWrites[G];se.visible&&(G>=h&&Ei(se,b.path)?A=!1:Xn(b.path,se.path)&&(L=!0)),G--}return!!A&&(L?(function(m){m.visibleWrites=Tn(m.allWrites,Ra,Wn()),m.lastWriteId=m.allWrites.length>0?m.allWrites[m.allWrites.length-1].writeId:-1}(m),!0):(b.snap?m.visibleWrites=lu(m.visibleWrites,b.path):It(b.children,pe=>{m.visibleWrites=lu(m.visibleWrites,At(b.path,pe))}),!0))}(m.pendingWriteTree_,d)){let L=new tr(null);return null!=b.snap?L=L.set(Wn(),!0):It(b.children,G=>{L=L.set(new lr(G),!0)}),Xa(m,new Us(b.path,L,h))}return[]}function Xi(m,d,h){return Xa(m,new is({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,h))}function Ou(m,d,h,b){const A=d._path,L=m.syncPointTree_.get(A);let G=[];if(L&&("default"===d._queryIdentifier||wo(L,d))){const se=function(m,d,h,b){const A=d._queryIdentifier,L=[];let G=[];const se=zi(m);if("default"===A)for(const[pe,Ce]of m.views.entries())G=G.concat(Pa(Ce,h,b)),Lo(Ce)&&(m.views.delete(pe),Ce.query._queryParams.loadsAllData()||L.push(Ce.query));else{const pe=m.views.get(A);pe&&(G=G.concat(Pa(pe,h,b)),Lo(pe)&&(m.views.delete(A),pe.query._queryParams.loadsAllData()||L.push(pe.query)))}return se&&!zi(m)&&L.push(new((0,K.hu)(Cn,"Reference.ts has not been loaded"),Cn)(d._repo,d._path)),{removed:L,events:G}}(L,d,h,b);(function(m){return 0===m.views.size})(L)&&(m.syncPointTree_=m.syncPointTree_.remove(A));const pe=se.removed;G=se.events;const Ce=-1!==pe.findIndex(nt=>nt._queryParams.loadsAllData()),st=m.syncPointTree_.findOnPath(A,(nt,Dt)=>zi(Dt));if(Ce&&!st){const nt=m.syncPointTree_.subtree(A);if(!nt.isEmpty()){const Dt=function(m){return m.fold((d,h,b)=>{if(h&&zi(h))return[Yo(h)];{let A=[];return h&&(A=Qa(h)),It(b,(L,G)=>{A=A.concat(G)}),A}})}(nt);for(let pn=0;pn<Dt.length;++pn){const zn=Dt[pn],Fr=zn.query,ao=Al(m,zn);m.listenProvider_.startListening(qs(Fr),As(m,Fr),ao.hashFn,ao.onComplete)}}}if(!st&&pe.length>0&&!b)if(Ce){const nt=null;m.listenProvider_.stopListening(qs(d),nt)}else pe.forEach(nt=>{const Dt=m.queryToTagMap.get(el(nt));m.listenProvider_.stopListening(qs(nt),Dt)});!function(m,d){for(let h=0;h<d.length;++h){const b=d[h];if(!b._queryParams.loadsAllData()){const A=el(b),L=m.queryToTagMap.get(A);m.queryToTagMap.delete(A),m.tagToQueryMap.delete(L)}}}(m,pe)}return G}function oc(m,d,h){const b=d._path;let A=null,L=!1;m.syncPointTree_.foreachOnPath(b,(nt,Dt)=>{const pn=sr(nt,b);A=A||La(Dt,pn),L=L||zi(Dt)});let se,G=m.syncPointTree_.get(b);G?(L=L||zi(G),A=A||La(G,Wn())):(G=new zl,m.syncPointTree_=m.syncPointTree_.set(b,G)),null!=A?se=!0:(se=!1,A=Z.EMPTY_NODE,m.syncPointTree_.subtree(b).foreachChild((Dt,pn)=>{const zn=La(pn,Wn());zn&&(A=A.updateImmediateChild(Dt,zn))}));const pe=wo(G,d);if(!pe&&!d._queryParams.loadsAllData()){const nt=el(d);(0,K.hu)(!m.queryToTagMap.has(nt),"View does not exist, but we have a tag");const Dt=kc++;m.queryToTagMap.set(nt,Dt),m.tagToQueryMap.set(Dt,nt)}let st=function(m,d,h,b,A,L){const G=Oc(m,d,b,A,L);return m.views.has(d._queryIdentifier)||m.views.set(d._queryIdentifier,G),function(m,d){m.eventRegistrations_.push(d)}(G,h),function(m,d){const h=m.viewCache_.eventCache,b=[];return h.getNode().isLeafNode()||h.getNode().forEachChild(Kn,(L,G)=>{b.push(rs(L,G))}),h.isFullyInitialized()&&b.push(fo(h.getNode())),Ru(m,b,h.getNode(),d)}(G,h)}(G,d,h,bo(m.pendingWriteTree_,b),A,se);if(!pe&&!L){const nt=Kl(G,d);st=st.concat(function(m,d,h){const b=d._path,A=As(m,d),L=Al(m,h),G=m.listenProvider_.startListening(qs(d),A,L.hashFn,L.onComplete),se=m.syncPointTree_.subtree(b);if(A)(0,K.hu)(!zi(se.value),"If we're adding a query, it shouldn't be shadowed");else{const pe=se.fold((Ce,st,nt)=>{if(!Ft(Ce)&&st&&zi(st))return[Yo(st).query];{let Dt=[];return st&&(Dt=Dt.concat(Qa(st).map(pn=>pn.query))),It(nt,(pn,zn)=>{Dt=Dt.concat(zn)}),Dt}});for(let Ce=0;Ce<pe.length;++Ce){const st=pe[Ce];m.listenProvider_.stopListening(qs(st),As(m,st))}}return G}(m,d,nt))}return st}function Qo(m,d,h){const A=m.pendingWriteTree_,L=m.syncPointTree_.findOnPath(d,(G,se)=>{const Ce=La(se,sr(G,d));if(Ce)return Ce});return Pn(A,d,L,h,!0)}function Xa(m,d){return ml(d,m.syncPointTree_,null,bo(m.pendingWriteTree_,Wn()))}function ml(m,d,h,b){if(Ft(m.path))return zs(m,d,h,b);{const A=d.get(Wn());null==h&&null!=A&&(h=La(A,Wn()));let L=[];const G=on(m.path),se=m.operationForChild(G),pe=d.children.get(G);if(pe&&se){const Ce=h?h.getImmediateChild(G):null,st=te(b,G);L=L.concat(ml(se,pe,Ce,st))}return A&&(L=L.concat(Ya(A,m,b,h))),L}}function zs(m,d,h,b){const A=d.get(Wn());null==h&&null!=A&&(h=La(A,Wn()));let L=[];return d.children.inorderTraversal((G,se)=>{const pe=h?h.getImmediateChild(G):null,Ce=te(b,G),st=m.operationForChild(G);st&&(L=L.concat(zs(st,se,pe,Ce)))}),A&&(L=L.concat(Ya(A,m,b,h))),L}function Al(m,d){const h=d.query,b=As(m,h);return{hashFn:()=>(function(m){return m.viewCache_.serverCache.getNode()}(d)||Z.EMPTY_NODE).hash(),onComplete:A=>{if("ok"===A)return b?function(m,d,h){const b=_l(m,h);if(b){const A=Jo(b),L=A.path,G=A.queryId,se=sr(L,d);return Yl(m,L,new ko(mo(G),se))}return[]}(m,h._path,b):function(m,d){return Xa(m,new ko({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d))}(m,h._path);{const L=function(m,d){let h="Unknown Error";"too_big"===m?h="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===m?h="Client doesn't have permission to access the desired data.":"unavailable"===m&&(h="The service is unavailable");const b=new Error(m+" at "+d._path.toString()+": "+h);return b.code=m.toUpperCase(),b}(A,h);return Ou(m,h,null,L)}}}}function As(m,d){const h=el(d);return m.queryToTagMap.get(h)}function el(m){return m._path.toString()+"$"+m._queryIdentifier}function _l(m,d){return m.tagToQueryMap.get(d)}function Jo(m){const d=m.indexOf("$");return(0,K.hu)(-1!==d&&d<m.length-1,"Bad queryKey."),{queryId:m.substr(d+1),path:new lr(m.substr(0,d))}}function Yl(m,d,h){const b=m.syncPointTree_.get(d);return(0,K.hu)(b,"Missing sync point for query tag that we're tracking"),Ya(b,h,bo(m.pendingWriteTree_,d),null)}function qs(m){return m._queryParams.loadsAllData()&&!m._queryParams.isDefault()?new((0,K.hu)(xi,"Reference.ts has not been loaded"),xi)(m._repo,m._path):m}class fe{constructor(d){this.node_=d}getImmediateChild(d){const h=this.node_.getImmediateChild(d);return new fe(h)}node(){return this.node_}}class Fe{constructor(d,h){this.syncTree_=d,this.path_=h}getImmediateChild(d){const h=At(this.path_,d);return new Fe(this.syncTree_,h)}node(){return Qo(this.syncTree_,this.path_)}}const Rt=function(m,d,h){return m&&"object"==typeof m?((0,K.hu)(".sv"in m,"Unexpected leaf node or priority contents"),"string"==typeof m[".sv"]?un(m[".sv"],d,h):"object"==typeof m[".sv"]?tn(m[".sv"],d):void(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(m,null,2))):m},un=function(m,d,h){if("timestamp"===m)return h.timestamp;(0,K.hu)(!1,"Unexpected server value: "+m)},tn=function(m,d,h){m.hasOwnProperty("increment")||(0,K.hu)(!1,"Unexpected server value: "+JSON.stringify(m,null,2));const b=m.increment;"number"!=typeof b&&(0,K.hu)(!1,"Unexpected increment value: "+b);const A=d.node();if((0,K.hu)(null!=A,"Expected ChildrenNode.EMPTY_NODE for nulls"),!A.isLeafNode())return b;const G=A.getValue();return"number"!=typeof G?b:G+b},kr=function(m,d,h,b){return Ns(d,new Fe(h,m),b)},Pr=function(m,d,h){return Ns(m,new fe(d),h)};function Ns(m,d,h){const b=m.getPriority().val(),A=Rt(b,d.getImmediateChild(".priority"),h);let L;if(m.isLeafNode()){const G=m,se=Rt(G.getValue(),d,h);return se!==G.getValue()||A!==G.getPriority().val()?new bi(se,Je(A)):m}{const G=m;return L=G,A!==G.getPriority().val()&&(L=L.updatePriority(new bi(A))),G.forEachChild(Kn,(se,pe)=>{const Ce=Ns(pe,d.getImmediateChild(se),h);Ce!==pe&&(L=L.updateImmediateChild(se,Ce))}),L}}class es{constructor(d="",h=null,b={children:{},childCount:0}){this.name=d,this.parent=h,this.node=b}}function ri(m,d){let h=d instanceof lr?d:new lr(d),b=m,A=on(h);for(;null!==A;){const L=(0,K.DV)(b.node.children,A)||{children:{},childCount:0};b=new es(A,b,L),h=Te(h),A=on(h)}return b}function Vo(m){return m.node.value}function ro(m,d){m.node.value=d,ku(m)}function Va(m){return m.node.childCount>0}function Do(m,d){It(m.node.children,(h,b)=>{d(new es(h,m,b))})}function Ba(m,d,h,b){h&&!b&&d(m),Do(m,A=>{Ba(A,d,!0,b)}),h&&b&&d(m)}function Ua(m){return new lr(null===m.parent?m.name:Ua(m.parent)+"/"+m.name)}function ku(m){null!==m.parent&&function(m,d,h){const b=function(m){return void 0===Vo(m)&&!Va(m)}(h),A=(0,K.r3)(m.node.children,d);b&&A?(delete m.node.children[d],m.node.childCount--,ku(m)):!b&&!A&&(m.node.children[d]=h.node,m.node.childCount++,ku(m))}(m.parent,m.name,m)}const cu=/[\[\].#$\/\u0000-\u001F\u007F]/,du=/[\[\].#$\u0000-\u001F\u007F]/,Pu=10485760,hu=function(m){return"string"==typeof m&&0!==m.length&&!cu.test(m)},fu=function(m){return"string"==typeof m&&0!==m.length&&!du.test(m)},Fu=function(m){return null===m||"string"==typeof m||"number"==typeof m&&!et(m)||m&&"object"==typeof m&&(0,K.r3)(m,".sv")},ci=function(m,d,h,b){b&&void 0===d||nl((0,K.gK)(m,"value"),d,h)},nl=function(m,d,h){const b=h instanceof lr?new gi(h,m):h;if(void 0===d)throw new Error(m+"contains undefined "+fs(b));if("function"==typeof d)throw new Error(m+"contains a function "+fs(b)+" with contents = "+d.toString());if(et(d))throw new Error(m+"contains "+d.toString()+" "+fs(b));if("string"==typeof d&&d.length>Pu/3&&(0,K.ug)(d)>Pu)throw new Error(m+"contains a string greater than "+Pu+" utf8 bytes "+fs(b)+" ('"+d.substring(0,50)+"...')");if(d&&"object"==typeof d){let A=!1,L=!1;if(It(d,(G,se)=>{if(".value"===G)A=!0;else if(".priority"!==G&&".sv"!==G&&(L=!0,!hu(G)))throw new Error(m+" contains an invalid key ("+G+") "+fs(b)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(m,d){m.parts_.length>0&&(m.byteLength_+=1),m.parts_.push(d),m.byteLength_+=(0,K.ug)(d),Ha(m)})(b,G),nl(m,se,b),function(m){const d=m.parts_.pop();m.byteLength_-=(0,K.ug)(d),m.parts_.length>0&&(m.byteLength_-=1)}(b)}),A&&L)throw new Error(m+' contains ".value" child '+fs(b)+" in addition to actual children.")}},pu=function(m,d,h,b){if(b&&void 0===d)return;const A=(0,K.gK)(m,"values");if(!d||"object"!=typeof d||Array.isArray(d))throw new Error(A+" must be an object containing the children to replace.");const L=[];It(d,(G,se)=>{const pe=new lr(G);if(nl(A,se,At(h,pe)),".priority"===Ne(pe)&&!Fu(se))throw new Error(A+"contains an invalid value for '"+pe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");L.push(pe)}),function(m,d){let h,b;for(h=0;h<d.length;h++){b=d[h];const L=mt(b);for(let G=0;G<L.length;G++)if((".priority"!==L[G]||G!==L.length-1)&&!hu(L[G]))throw new Error(m+"contains an invalid key ("+L[G]+") in path "+b.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}d.sort(Dn);let A=null;for(h=0;h<d.length;h++){if(b=d[h],null!==A&&Xn(A,b))throw new Error(m+"contains a path "+A.toString()+" that is ancestor of another path "+b.toString());A=b}}(A,L)},ga=function(m,d,h){if(!h||void 0!==d){if(et(d))throw new Error((0,K.gK)(m,"priority")+"is "+d.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fu(d))throw new Error((0,K.gK)(m,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Jl=function(m,d,h,b){if(!(b&&void 0===h||hu(h)))throw new Error((0,K.gK)(m,d)+'was an invalid key = "'+h+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gu=function(m,d,h,b){if(!(b&&void 0===h||fu(h)))throw new Error((0,K.gK)(m,d)+'was an invalid path = "'+h+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ms=function(m,d){if(".info"===on(d))throw new Error(m+" failed = Can't modify data under /.info/")},ma=function(m,d){const h=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!hu(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==h.length&&!function(m){return m&&(m=m.replace(/^\/*\.info(\/|$)/,"/")),fu(m)}(h))throw new Error((0,K.gK)(m,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class lc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mu(m,d){let h=null;for(let b=0;b<d.length;b++){const A=d[b],L=A.getPath();null!==h&&!ei(L,h.path)&&(m.eventLists_.push(h),h=null),null===h&&(h={events:[],path:L}),h.events.push(A)}h&&m.eventLists_.push(h)}function uc(m,d,h){mu(m,h),_u(m,b=>ei(b,d))}function Zs(m,d,h){mu(m,h),_u(m,b=>Xn(b,d)||Xn(d,b))}function _u(m,d){m.recursionDepth_++;let h=!0;for(let b=0;b<m.eventLists_.length;b++){const A=m.eventLists_[b];A&&(d(A.path)?(ph(m.eventLists_[b]),m.eventLists_[b]=null):h=!1)}h&&(m.eventLists_=[]),m.recursionDepth_--}function ph(m){for(let d=0;d<m.events.length;d++){const h=m.events[d];if(null!==h){m.events[d]=null;const b=h.getEventRunner();Le&&_t("event: "+h.toString()),Hn(b)}}}const cs="repo_interrupt";class Lc{constructor(d,h,b,A){this.repoInfo_=d,this.forceRestClient_=h,this.authTokenProvider_=b,this.appCheckProvider_=A,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wi(),this.transactionQueueTree_=new es,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qi(m){const h=m.infoData_.getNode(new lr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+h}function vl(m){return function(m){return(m=m||{}).timestamp=m.timestamp||(new Date).getTime(),m}({timestamp:qi(m)})}function Ks(m,d,h,b,A){m.dataUpdateCount++;const L=new lr(d);h=m.interceptServerDataCallback_?m.interceptServerDataCallback_(d,h):h;let G=[];if(A)if(b){const pe=(0,K.UI)(h,Ce=>Je(Ce));G=function(m,d,h,b){const A=_l(m,b);if(A){const L=Jo(A),G=L.path,se=L.queryId,pe=sr(G,d),Ce=tr.fromObject(h);return Yl(m,G,new js(mo(se),pe,Ce))}return[]}(m.serverSyncTree_,L,pe,A)}else{const pe=Je(h);G=function(m,d,h,b){const A=_l(m,b);if(null!=A){const L=Jo(A),G=L.path,se=L.queryId,pe=sr(G,d);return Yl(m,G,new is(mo(se),pe,h))}return[]}(m.serverSyncTree_,L,pe,A)}else if(b){const pe=(0,K.UI)(h,Ce=>Je(Ce));G=function(m,d,h){const b=tr.fromObject(h);return Xa(m,new js({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,b))}(m.serverSyncTree_,L,pe)}else{const pe=Je(h);G=Xi(m.serverSyncTree_,L,pe)}let se=L;G.length>0&&(se=il(m,L)),Zs(m.eventQueue_,se,G)}function Oi(m,d){ed(m,"connected",d),!1===d&&function(m){eu(m,"onDisconnectEvents");const d=vl(m),h=wi();ls(m.onDisconnect_,Wn(),(A,L)=>{const G=kr(A,L,m.serverSyncTree_,d);vs(h,A,G)});let b=[];ls(h,Wn(),(A,L)=>{b=b.concat(Xi(m.serverSyncTree_,A,L));const G=bu(m,A);il(m,G)}),m.onDisconnect_=wi(),Zs(m.eventQueue_,Wn(),b)}(m)}function ed(m,d,h){const b=new lr("/.info/"+d),A=Je(h);m.infoData_.updateSnapshot(b,A);const L=Xi(m.infoSyncTree_,b,A);Zs(m.eventQueue_,b,L)}function Bo(m){return m.nextWriteId_++}function cc(m,d,h,b,A){eu(m,"set",{path:d.toString(),value:h,priority:b});const L=vl(m),G=Je(h,b),se=Qo(m.serverSyncTree_,d),pe=Pr(G,se,L),Ce=Bo(m),st=Ja(m.serverSyncTree_,d,pe,Ce,!0);mu(m.eventQueue_,st),m.server_.put(d.toString(),G.val(!0),(Dt,pn)=>{const zn="ok"===Dt;zn||zt("set at "+d+" failed: "+Dt);const Fr=no(m.serverSyncTree_,Ce,!zn);Zs(m.eventQueue_,d,Fr),rl(0,A,Dt,pn)});const nt=bu(m,d);il(m,nt),Zs(m.eventQueue_,nt,[])}function kd(m,d,h){m.server_.onDisconnectCancel(d.toString(),(b,A)=>{"ok"===b&&ca(m.onDisconnect_,d),rl(0,h,b,A)})}function ii(m,d,h,b){const A=Je(h);m.server_.onDisconnectPut(d.toString(),A.val(!0),(L,G)=>{"ok"===L&&vs(m.onDisconnect_,d,A),rl(0,b,L,G)})}function io(m,d,h){let b;b=".info"===on(d._path)?Ou(m.infoSyncTree_,d,h):Ou(m.serverSyncTree_,d,h),uc(m.eventQueue_,d._path,b)}function Rl(m){m.persistentConnection_&&m.persistentConnection_.interrupt(cs)}function eu(m,...d){let h="";m.persistentConnection_&&(h=m.persistentConnection_.id+":"),_t(h,...d)}function rl(m,d,h,b){d&&Hn(()=>{if("ok"===h)d(null);else{const A=(h||"error").toUpperCase();let L=A;b&&(L+=": "+b);const G=new Error(L);G.code=A,d(G)}})}function ja(m,d,h){return Qo(m.serverSyncTree_,d,h)||Z.EMPTY_NODE}function xl(m,d=m.transactionQueueTree_){if(d||Ci(m,d),Vo(d)){const h=Fd(m,d);(0,K.hu)(h.length>0,"Sending zero length transaction queue"),h.every(A=>0===A.status)&&function(m,d,h){const b=h.map(Ce=>Ce.currentWriteId),A=ja(m,d,b);let L=A;const G=A.hash();for(let Ce=0;Ce<h.length;Ce++){const st=h[Ce];(0,K.hu)(0===st.status,"tryToSendTransactionQueue_: items in queue should all be run."),st.status=1,st.retryCount++;const nt=sr(d,st.path);L=L.updateChild(nt,st.currentOutputSnapshotRaw)}const se=L.val(!0),pe=d;m.server_.put(pe.toString(),se,Ce=>{eu(m,"transaction put response",{path:pe.toString(),status:Ce});let st=[];if("ok"===Ce){const nt=[];for(let Dt=0;Dt<h.length;Dt++)h[Dt].status=2,st=st.concat(no(m.serverSyncTree_,h[Dt].currentWriteId)),h[Dt].onComplete&&nt.push(()=>h[Dt].onComplete(null,!0,h[Dt].currentOutputSnapshotResolved)),h[Dt].unwatcher();Ci(m,ri(m.transactionQueueTree_,d)),xl(m,m.transactionQueueTree_),Zs(m.eventQueue_,d,st);for(let Dt=0;Dt<nt.length;Dt++)Hn(nt[Dt])}else{if("datastale"===Ce)for(let nt=0;nt<h.length;nt++)h[nt].status=3===h[nt].status?4:0;else{zt("transaction at "+pe.toString()+" failed: "+Ce);for(let nt=0;nt<h.length;nt++)h[nt].status=4,h[nt].abortReason=Ce}il(m,d)}},G)}(m,Ua(d),h)}else Va(d)&&Do(d,h=>{xl(m,h)})}function il(m,d){const h=Lu(m,d),b=Ua(h);return function(m,d,h){if(0===d.length)return;const b=[];let A=[];const G=d.filter(se=>0===se.status).map(se=>se.currentWriteId);for(let se=0;se<d.length;se++){const pe=d[se],Ce=sr(h,pe.path);let nt,st=!1;if((0,K.hu)(null!==Ce,"rerunTransactionsUnderNode_: relativePath should not be null."),4===pe.status)st=!0,nt=pe.abortReason,A=A.concat(no(m.serverSyncTree_,pe.currentWriteId,!0));else if(0===pe.status)if(pe.retryCount>=25)st=!0,nt="maxretry",A=A.concat(no(m.serverSyncTree_,pe.currentWriteId,!0));else{const Dt=ja(m,pe.path,G);pe.currentInputSnapshot=Dt;const pn=d[se].update(Dt.val());if(void 0!==pn){nl("transaction failed: Data returned ",pn,pe.path);let zn=Je(pn);"object"==typeof pn&&null!=pn&&(0,K.r3)(pn,".priority")||(zn=zn.updatePriority(Dt.getPriority()));const ao=pe.currentWriteId,Vl=vl(m),Bl=Pr(zn,Dt,Vl);pe.currentOutputSnapshotRaw=zn,pe.currentOutputSnapshotResolved=Bl,pe.currentWriteId=Bo(m),G.splice(G.indexOf(ao),1),A=A.concat(Ja(m.serverSyncTree_,pe.path,Bl,pe.currentWriteId,pe.applyLocally)),A=A.concat(no(m.serverSyncTree_,ao,!0))}else st=!0,nt="nodata",A=A.concat(no(m.serverSyncTree_,pe.currentWriteId,!0))}Zs(m.eventQueue_,h,A),A=[],st&&(d[se].status=2,setTimeout(d[se].unwatcher,Math.floor(0)),d[se].onComplete&&b.push("nodata"===nt?()=>d[se].onComplete(null,!1,d[se].currentInputSnapshot):()=>d[se].onComplete(new Error(nt),!1,null)))}Ci(m,m.transactionQueueTree_);for(let se=0;se<b.length;se++)Hn(b[se]);xl(m,m.transactionQueueTree_)}(m,Fd(m,h),b),b}function Lu(m,d){let h,b=m.transactionQueueTree_;for(h=on(d);null!==h&&void 0===Vo(b);)b=ri(b,h),h=on(d=Te(d));return b}function Fd(m,d){const h=[];return Vu(m,d,h),h.sort((b,A)=>b.order-A.order),h}function Vu(m,d,h){const b=Vo(d);if(b)for(let A=0;A<b.length;A++)h.push(b[A]);Do(d,A=>{Vu(m,A,h)})}function Ci(m,d){const h=Vo(d);if(h){let b=0;for(let A=0;A<h.length;A++)2!==h[A].status&&(h[b]=h[A],b++);h.length=b,ro(d,h.length>0?h:void 0)}Do(d,b=>{Ci(m,b)})}function bu(m,d){const h=Ua(Lu(m,d)),b=ri(m.transactionQueueTree_,d);return function(m,d,h){let b=m.parent;for(;null!==b;){if(d(b))return!0;b=b.parent}}(b,A=>{dc(m,A)}),dc(m,b),Ba(b,A=>{dc(m,A)}),h}function dc(m,d){const h=Vo(d);if(h){const b=[];let A=[],L=-1;for(let G=0;G<h.length;G++)3===h[G].status||(1===h[G].status?((0,K.hu)(L===G-1,"All SENT items should be at beginning of queue."),L=G,h[G].status=3,h[G].abortReason="set"):((0,K.hu)(0===h[G].status,"Unexpected transaction status in abort"),h[G].unwatcher(),A=A.concat(no(m.serverSyncTree_,h[G].currentWriteId,!0)),h[G].onComplete&&b.push(h[G].onComplete.bind(null,new Error("set"),!1,null))));-1===L?ro(d,void 0):h.length=L+1,Zs(m.eventQueue_,Ua(d),A);for(let G=0;G<b.length;G++)Hn(b[G])}}const Ol=function(m,d){const h=nd(m),b=h.namespace;return"firebase.com"===h.domain&&Ct(h.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!b||"undefined"===b)&&"localhost"!==h.domain&&Ct("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),h.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new An(h.host,h.secure,b,d,"ws"===h.scheme||"wss"===h.scheme,"",b!==h.subdomain),path:new lr(h.pathString)}},nd=function(m){let d="",h="",b="",A="",L="",G=!0,se="https",pe=443;if("string"==typeof m){let Ce=m.indexOf("//");Ce>=0&&(se=m.substring(0,Ce-1),m=m.substring(Ce+2));let st=m.indexOf("/");-1===st&&(st=m.length);let nt=m.indexOf("?");-1===nt&&(nt=m.length),d=m.substring(0,Math.min(st,nt)),st<nt&&(A=function(m){let d="";const h=m.split("/");for(let b=0;b<h.length;b++)if(h[b].length>0){let A=h[b];try{A=decodeURIComponent(A.replace(/\+/g," "))}catch(L){}d+="/"+A}return d}(m.substring(st,nt)));const Dt=function(m){const d={};"?"===m.charAt(0)&&(m=m.substring(1));for(const h of m.split("&")){if(0===h.length)continue;const b=h.split("=");2===b.length?d[decodeURIComponent(b[0])]=decodeURIComponent(b[1]):zt(`Invalid query segment '${h}' in query '${m}'`)}return d}(m.substring(Math.min(m.length,nt)));Ce=d.indexOf(":"),Ce>=0?(G="https"===se||"wss"===se,pe=parseInt(d.substring(Ce+1),10)):Ce=d.length;const pn=d.slice(0,Ce);if("localhost"===pn.toLowerCase())h="localhost";else if(pn.split(".").length<=2)h=pn;else{const zn=d.indexOf(".");b=d.substring(0,zn).toLowerCase(),h=d.substring(zn+1),L=b}"ns"in Dt&&(L=Dt.ns)}return{host:d,port:pe,domain:h,subdomain:b,secure:G,scheme:se,pathString:A,namespace:L}};class C{constructor(d,h,b,A){this.eventType=d,this.eventRegistration=h,this.snapshot=b,this.prevName=A}getPath(){const d=this.snapshot.ref;return"value"===this.eventType?d._path:d.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,K.Pz)(this.snapshot.exportVal())}}class y{constructor(d,h,b){this.eventRegistration=d,this.error=h,this.path=b}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class w{constructor(d,h){this.snapshotCallback=d,this.cancelCallback=h}onValue(d,h){this.snapshotCallback.call(null,d,h)}onCancel(d){return(0,K.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,d)}get hasCancelCallback(){return!!this.cancelCallback}matches(d){return this.snapshotCallback===d.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===d.snapshotCallback.userCallback&&this.snapshotCallback.context===d.snapshotCallback.context}}class R{constructor(d,h){this._repo=d,this._path=h}cancel(){const d=new K.BH;return kd(this._repo,this._path,d.wrapCallback(()=>{})),d.promise}remove(){Ms("OnDisconnect.remove",this._path);const d=new K.BH;return ii(this._repo,this._path,null,d.wrapCallback(()=>{})),d.promise}set(d){Ms("OnDisconnect.set",this._path),ci("OnDisconnect.set",d,this._path,!1);const h=new K.BH;return ii(this._repo,this._path,d,h.wrapCallback(()=>{})),h.promise}setWithPriority(d,h){Ms("OnDisconnect.setWithPriority",this._path),ci("OnDisconnect.setWithPriority",d,this._path,!1),ga("OnDisconnect.setWithPriority",h,!1);const b=new K.BH;return function(m,d,h,b,A){const L=Je(h,b);m.server_.onDisconnectPut(d.toString(),L.val(!0),(G,se)=>{"ok"===G&&vs(m.onDisconnect_,d,L),rl(0,A,G,se)})}(this._repo,this._path,d,h,b.wrapCallback(()=>{})),b.promise}update(d){Ms("OnDisconnect.update",this._path),pu("OnDisconnect.update",d,this._path,!1);const h=new K.BH;return function(m,d,h,b){if((0,K.xb)(h))return _t("onDisconnect().update() called with empty data.  Don't do anything."),void rl(0,b,"ok",void 0);m.server_.onDisconnectMerge(d.toString(),h,(A,L)=>{"ok"===A&&It(h,(G,se)=>{const pe=Je(se);vs(m.onDisconnect_,At(d,G),pe)}),rl(0,b,A,L)})}(this._repo,this._path,d,h.wrapCallback(()=>{})),h.promise}}class z{constructor(d,h,b,A){this._repo=d,this._path=h,this._queryParams=b,this._orderByCalled=A}get key(){return Ft(this._path)?null:Ne(this._path)}get ref(){return new qt(this._repo,this._path)}get _queryIdentifier(){const d=po(this._queryParams),h=an(d);return"{}"===h?"default":h}get _queryObject(){return po(this._queryParams)}isEqual(d){if(!((d=(0,K.m9)(d))instanceof z))return!1;const h=this._repo===d._repo,b=ei(this._path,d._path);return h&&b&&this._queryIdentifier===d._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(m){let d="";for(let h=m.pieceNum_;h<m.pieces_.length;h++)""!==m.pieces_[h]&&(d+="/"+encodeURIComponent(String(m.pieces_[h])));return d||"/"}(this._path)}}function ee(m,d){if(!0===m._orderByCalled)throw new Error(d+": You can't combine multiple orderBy calls.")}function Re(m){let d=null,h=null;if(m.hasStart()&&(d=m.getIndexStartValue()),m.hasEnd()&&(h=m.getIndexEndValue()),m.getIndex()===ti){const b="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",A="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(m.hasStart()){if(m.getIndexStartName()!==rt)throw new Error(b);if("string"!=typeof d)throw new Error(A)}if(m.hasEnd()){if(m.getIndexEndName()!==gt)throw new Error(b);if("string"!=typeof h)throw new Error(A)}}else if(m.getIndex()===Kn){if(null!=d&&!Fu(d)||null!=h&&!Fu(h))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,K.hu)(m.getIndex()instanceof Et||m.getIndex()===mn,"unknown index type."),null!=d&&"object"==typeof d||null!=h&&"object"==typeof h)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ft(m){if(m.hasStart()&&m.hasEnd()&&m.hasLimit()&&!m.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class qt extends z{constructor(d,h){super(d,h,new er,!1)}get parent(){const d=Ot(this._path);return null===d?null:new qt(this._repo,d)}get root(){let d=this;for(;null!==d.parent;)d=d.parent;return d}}class Bt{constructor(d,h,b){this._node=d,this.ref=h,this._index=b}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(d){const h=new lr(d),b=Kr(this.ref,d);return new Bt(this._node.getChild(h),b,Kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(d){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(b,A)=>d(new Bt(A,Kr(this.ref,b),Kn)))}hasChild(d){const h=new lr(d);return!this._node.getChild(h).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Un(m,d){return(m=(0,K.m9)(m))._checkNotDeleted("ref"),void 0!==d?Kr(m._root,d):m._root}function Wr(m,d){(m=(0,K.m9)(m))._checkNotDeleted("refFromURL");const h=Ol(d,m._repo.repoInfo_.nodeAdmin);ma("refFromURL",h);const b=h.repoInfo;return!m._repo.repoInfo_.isCustomHost()&&b.host!==m._repo.repoInfo_.host&&Ct("refFromURL: Host name does not match the current database: (found "+b.host+" but expected "+m._repo.repoInfo_.host+")"),Un(m,h.path.toString())}function Kr(m,d){return null===on((m=(0,K.m9)(m))._path)?(h=d,h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),gu("child","path",h,!1)):gu("child","path",d,!1),new qt(m._repo,At(m._path,d));var h}function ya(m,d){m=(0,K.m9)(m),Ms("push",m._path),ci("push",d,m._path,!0);const h=qi(m._repo),b=_r(h),A=Kr(m,b),L=Kr(m,b);let G;return G=null!=d?wu(L,d).then(()=>L):Promise.resolve(L),A.then=G.then.bind(G),A.catch=G.then.bind(G,void 0),A}function ds(m){return Ms("remove",m._path),wu(m,null)}function wu(m,d){m=(0,K.m9)(m),Ms("set",m._path),ci("set",d,m._path,!1);const h=new K.BH;return cc(m._repo,m._path,d,null,h.wrapCallback(()=>{})),h.promise}function rd(m,d){m=(0,K.m9)(m),Ms("setPriority",m._path),ga("setPriority",d,!1);const h=new K.BH;return cc(m._repo,At(m._path,".priority"),d,null,h.wrapCallback(()=>{})),h.promise}function tu(m,d,h){if(Ms("setWithPriority",m._path),ci("setWithPriority",d,m._path,!1),ga("setWithPriority",h,!1),".length"===m.key||".keys"===m.key)throw"setWithPriority failed: "+m.key+" is a read-only object.";const b=new K.BH;return cc(m._repo,m._path,d,h,b.wrapCallback(()=>{})),b.promise}function ki(m,d){pu("update",d,m._path,!1);const h=new K.BH;return function(m,d,h,b){eu(m,"update",{path:d.toString(),value:h});let A=!0;const L=vl(m),G={};if(It(h,(se,pe)=>{A=!1,G[se]=kr(At(d,se),Je(pe),m.serverSyncTree_,L)}),A)_t("update() called with empty data.  Don't do anything."),rl(0,b,"ok",void 0);else{const se=Bo(m),pe=function(m,d,h,b){!function(m,d,h,b){(0,K.hu)(b>m.lastWriteId,"Stacking an older merge on top of newer ones"),m.allWrites.push({path:d,children:h,writeId:b,visible:!0}),m.visibleWrites=ha(m.visibleWrites,d,h),m.lastWriteId=b}(m.pendingWriteTree_,d,h,b);const A=tr.fromObject(h);return Xa(m,new js({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,A))}(m.serverSyncTree_,d,G,se);mu(m.eventQueue_,pe),m.server_.merge(d.toString(),h,(Ce,st)=>{const nt="ok"===Ce;nt||zt("update at "+d+" failed: "+Ce);const Dt=no(m.serverSyncTree_,se,!nt),pn=Dt.length>0?il(m,d):d;Zs(m.eventQueue_,pn,Dt),rl(0,b,Ce,st)}),It(h,Ce=>{const st=bu(m,At(d,Ce));il(m,st)}),Zs(m.eventQueue_,d,[])}}(m._repo,m._path,d,h.wrapCallback(()=>{})),h.promise}function kl(m){return function(m,d){const h=function(m,d){const h=d._path;let b=null;m.syncPointTree_.foreachOnPath(h,(Ce,st)=>{const nt=sr(Ce,h);b=b||La(st,nt)});let A=m.syncPointTree_.get(h);A?b=b||La(A,Wn()):(A=new zl,m.syncPointTree_=m.syncPointTree_.set(h,A));const L=null!=b,G=L?new ss(b,!0,!1):null;return function(m){return Ko(m.viewCache_)}(Oc(A,d,bo(m.pendingWriteTree_,d._path),L?G.getNode():Z.EMPTY_NODE,L))}(m.serverSyncTree_,d);return null!=h?Promise.resolve(h):m.server_.get(d).then(b=>{const A=Je(b).withIndex(d._queryParams.getIndex()),L=Xi(m.serverSyncTree_,d._path,A);return uc(m.eventQueue_,d._path,L),Promise.resolve(A)},b=>(eu(m,"get for query "+(0,K.Pz)(d)+" failed: "+b),Promise.reject(new Error(b))))}((m=(0,K.m9)(m))._repo,m).then(d=>new Bt(d,new qt(m._repo,m._path),m._queryParams.getIndex()))}class nu{constructor(d){this.callbackContext=d}respondsTo(d){return"value"===d}createEvent(d,h){const b=h._queryParams.getIndex();return new C("value",this,new Bt(d.snapshotNode,new qt(h._repo,h._path),b))}getEventRunner(d){return"cancel"===d.getEventType()?()=>this.callbackContext.onCancel(d.error):()=>this.callbackContext.onValue(d.snapshot,null)}createCancelEvent(d,h){return this.callbackContext.hasCancelCallback?new y(this,d,h):null}matches(d){return d instanceof nu&&(!d.callbackContext||!this.callbackContext||d.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Du{constructor(d,h){this.eventType=d,this.callbackContext=h}respondsTo(d){let h="children_added"===d?"child_added":d;return h="children_removed"===h?"child_removed":h,this.eventType===h}createCancelEvent(d,h){return this.callbackContext.hasCancelCallback?new y(this,d,h):null}createEvent(d,h){(0,K.hu)(null!=d.childName,"Child events should have a childName.");const b=Kr(new qt(h._repo,h._path),d.childName),A=h._queryParams.getIndex();return new C(d.type,this,new Bt(d.snapshotNode,b,A),d.prevName)}getEventRunner(d){return"cancel"===d.getEventType()?()=>this.callbackContext.onCancel(d.error):()=>this.callbackContext.onValue(d.snapshot,d.prevName)}matches(d){return d instanceof Du&&this.eventType===d.eventType&&(!this.callbackContext||!d.callbackContext||this.callbackContext.matches(d.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Pl(m,d,h,b,A){let L;if("object"==typeof b&&(L=void 0,A=b),"function"==typeof b&&(L=b),A&&A.onlyOnce){const pe=h,Ce=(st,nt)=>{io(m._repo,m,se),pe(st,nt)};Ce.userCallback=h.userCallback,Ce.context=h.context,h=Ce}const G=new w(h,L||void 0),se="value"===d?new nu(G):new Du(d,G);return function(m,d,h){let b;b=".info"===on(d._path)?oc(m.infoSyncTree_,d,h):oc(m.serverSyncTree_,d,h),uc(m.eventQueue_,d._path,b)}(m._repo,m,se),()=>io(m._repo,m,se)}function ea(m,d,h,b){return Pl(m,"value",d,h,b)}function id(m,d,h,b){return Pl(m,"child_added",d,h,b)}function hc(m,d,h,b){return Pl(m,"child_changed",d,h,b)}function Uo(m,d,h,b){return Pl(m,"child_moved",d,h,b)}function Ld(m,d,h,b){return Pl(m,"child_removed",d,h,b)}function Co(m,d,h){let b=null;const A=h?new w(h):null;"value"===d?b=new nu(A):d&&(b=new Du(d,A)),io(m._repo,m,b)}class ws{}class Pi extends ws{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){ci("endAt",this._value,d._path,!0);const h=Wa(d._queryParams,this._value,this._key);if(ft(h),Re(h),d._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new z(d._repo,d._path,h,d._orderByCalled)}}function so(m,d){return Jl("endAt","key",d,!0),new Pi(m,d)}class hf extends ws{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){ci("endBefore",this._value,d._path,!1);const h=function(m,d,h){let b,A;return m.index_===ti?("string"==typeof d&&(d=Sn(d)),A=Wa(m,d,h)):(b=null==h?rt:Sn(h),A=Wa(m,d,b)),A.endBeforeSet_=!0,A}(d._queryParams,this._value,this._key);if(ft(h),Re(h),d._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new z(d._repo,d._path,h,d._orderByCalled)}}function ff(m,d){return Jl("endBefore","key",d,!0),new hf(m,d)}class os extends ws{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){ci("startAt",this._value,d._path,!0);const h=la(d._queryParams,this._value,this._key);if(ft(h),Re(h),d._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new z(d._repo,d._path,h,d._orderByCalled)}}function sl(m=null,d){return Jl("startAt","key",d,!0),new os(m,d)}class Rs extends ws{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){ci("startAfter",this._value,d._path,!1);const h=function(m,d,h){let b;if(m.index_===ti)"string"==typeof d&&(d=kn(d)),b=la(m,d,h);else{let A;A=null==h?gt:kn(h),b=la(m,d,A)}return b.startAfterSet_=!0,b}(d._queryParams,this._value,this._key);if(ft(h),Re(h),d._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new z(d._repo,d._path,h,d._orderByCalled)}}function jo(m,d){return Jl("startAfter","key",d,!0),new Rs(m,d)}class oo extends ws{constructor(d){super(),this._limit=d}_apply(d){if(d._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new z(d._repo,d._path,function(m,d){const h=m.copy();return h.limitSet_=!0,h.limit_=d,h.viewFrom_="l",h}(d._queryParams,this._limit),d._orderByCalled)}}function fc(m){if("number"!=typeof m||Math.floor(m)!==m||m<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(m)}class Eu extends ws{constructor(d){super(),this._limit=d}_apply(d){if(d._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new z(d._repo,d._path,function(m,d){const h=m.copy();return h.limitSet_=!0,h.limit_=d,h.viewFrom_="r",h}(d._queryParams,this._limit),d._orderByCalled)}}function Uu(m){if("number"!=typeof m||Math.floor(m)!==m||m<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Eu(m)}class ta extends ws{constructor(d){super(),this._path=d}_apply(d){ee(d,"orderByChild");const h=new lr(this._path);if(Ft(h))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const b=new Et(h),A=zo(d._queryParams,b);return Re(A),new z(d._repo,d._path,A,!0)}}function Ip(m){if("$key"===m)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===m)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===m)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gu("orderByChild","path",m,!1),new ta(m)}class _h extends ws{_apply(d){ee(d,"orderByKey");const h=zo(d._queryParams,ti);return Re(h),new z(d._repo,d._path,h,!0)}}function yh(){return new _h}class Nt extends ws{_apply(d){ee(d,"orderByPriority");const h=zo(d._queryParams,Kn);return Re(h),new z(d._repo,d._path,h,!0)}}function Vd(){return new Nt}class Fl extends ws{_apply(d){ee(d,"orderByValue");const h=zo(d._queryParams,mn);return Re(h),new z(d._repo,d._path,h,!0)}}function pf(){return new Fl}class sd extends ws{constructor(d,h){super(),this._value=d,this._key=h}_apply(d){if(ci("equalTo",this._value,d._path,!1),d._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(d._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Pi(this._value,this._key)._apply(new os(this._value,this._key)._apply(d))}}function pc(m,d){return Jl("equalTo","key",d,!0),new sd(m,d)}function Sp(m,...d){let h=(0,K.m9)(m);for(const b of d)h=b._apply(h);return h}(function(m){(0,K.hu)(!Cn,"__referenceConstructor has already been defined"),Cn=m})(qt),function(m){(0,K.hu)(!xi,"__referenceConstructor has already been defined"),xi=m}(qt);const $a={};function na(m,d,h,b,A){let L=b||m.options.databaseURL;void 0===L&&(m.options.projectId||Ct("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_t("Using default host for project ",m.options.projectId),L=`${m.options.projectId}-default-rtdb.firebaseio.com`);let pe,Ce,G=Ol(L,A),se=G.repoInfo;"undefined"!=typeof process&&(Ce=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ce?(pe=!0,L=`http://${Ce}?ns=${se.namespace}`,G=Ol(L,A),se=G.repoInfo):pe=!G.repoInfo.secure;const st=A&&pe?new Gn(Gn.OWNER):new wt(m.name,m.options,d);ma("Invalid Firebase Database URL",G),Ft(G.path)||Ct("Database URL must point to the root of a Firebase Database (not including a child path).");const nt=function(m,d,h,b){let A=$a[d.name];A||(A={},$a[d.name]=A);let L=A[m.toURLString()];return L&&Ct("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),L=new Lc(m,false,h,b),A[m.toURLString()]=L,L}(se,m,st,new Xr(m.name,h));return new Ud(nt,m)}class Ud{constructor(d,h){this._repoInternal=d,this.app=h,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(m,d,h){if(m.stats_=ye(m.repoInfo_),m.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)m.server_=new ys(m.repoInfo_,(b,A,L,G)=>{Ks(m,b,A,L,G)},m.authTokenProvider_,m.appCheckProvider_),setTimeout(()=>Oi(m,!0),0);else{if(null!=h){if("object"!=typeof h)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,K.Pz)(h)}catch(b){throw new Error("Invalid authOverride provided: "+b)}}m.persistentConnection_=new ps(m.repoInfo_,d,(b,A,L,G)=>{Ks(m,b,A,L,G)},b=>{Oi(m,b)},b=>{!function(m,d){It(d,(h,b)=>{ed(m,h,b)})}(m,b)},m.authTokenProvider_,m.appCheckProvider_,h),m.server_=m.persistentConnection_}m.authTokenProvider_.addTokenChangeListener(b=>{m.server_.refreshAuthToken(b)}),m.appCheckProvider_.addTokenChangeListener(b=>{m.server_.refreshAppCheckToken(b.token)}),m.statsReporter_=function(m,d){const h=m.toString();return We[h]||(We[h]=d()),We[h]}(m.repoInfo_,()=>new Na(m.stats_,m.server_)),m.infoData_=new Gi,m.infoSyncTree_=new uu({startListening:(b,A,L,G)=>{let se=[];const pe=m.infoData_.getNode(b._path);return pe.isEmpty()||(se=Xi(m.infoSyncTree_,b._path,pe),setTimeout(()=>{G("ok")},0)),se},stopListening:()=>{}}),ed(m,"connected",!1),m.serverSyncTree_=new uu({startListening:(b,A,L,G)=>(m.server_.listen(b,L,A,(se,pe)=>{const Ce=G(se,pe);Zs(m.eventQueue_,b._path,Ce)}),[]),stopListening:(b,A)=>{m.server_.unlisten(b,A)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qt(this._repo,Wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(m,d){const h=$a[d];(!h||h[m.key]!==m)&&Ct(`Database ${d}(${m.repoInfo_}) has already been deleted.`),Rl(m),delete h[m.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(d){null===this._rootInternal&&Ct("Cannot call "+d+" on a deleted database.")}}function vh(m=(0,_.getApp)(),d){return(0,_._getProvider)(m,"database").getImmediate({identifier:d})}function jd(m,d,h,b={}){(m=(0,K.m9)(m))._checkNotDeleted("useEmulator"),m._instanceStarted&&Ct("Cannot call useEmulator() after instance has already been initialized.");const A=m._repoInternal;let L;if(A.repoInfo_.nodeAdmin)b.mockUserToken&&Ct('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),L=new Gn(Gn.OWNER);else if(b.mockUserToken){const G="string"==typeof b.mockUserToken?b.mockUserToken:(0,K.Sg)(b.mockUserToken,m.app.options.projectId);L=new Gn(G)}!function(m,d,h,b){m.repoInfo_=new An(`${d}:${h}`,!1,m.repoInfo_.namespace,m.repoInfo_.webSocketOnly,m.repoInfo_.nodeAdmin,m.repoInfo_.persistenceKey,m.repoInfo_.includeNamespaceInQueryParams),b&&(m.authTokenProvider_=b)}(A,d,h,L)}function gc(m){(m=(0,K.m9)(m))._checkNotDeleted("goOffline"),Rl(m._repo)}function bh(m){(m=(0,K.m9)(m))._checkNotDeleted("goOnline"),function(m){m.persistentConnection_&&m.persistentConnection_.resume(cs)}(m._repo)}function mc(m,d){me(m,d)}const $u={".sv":"timestamp"};function _c(){return $u}function Np(m){return{".sv":{increment:m}}}class Hu{constructor(d,h){this.committed=d,this.snapshot=h}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function wh(m,d,h){var b;if(m=(0,K.m9)(m),Ms("Reference.transaction",m._path),".length"===m.key||".keys"===m.key)throw"Reference.transaction failed: "+m.key+" is a read-only object.";const A=null===(b=null==h?void 0:h.applyLocally)||void 0===b||b,L=new K.BH,se=ea(m,()=>{});return function(m,d,h,b,A,L){eu(m,"transaction on "+d);const G={path:d,update:h,onComplete:b,status:null,order:dt(),applyLocally:L,retryCount:0,unwatcher:A,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},se=ja(m,d,void 0);G.currentInputSnapshot=se;const pe=G.update(se.val());if(void 0===pe)G.unwatcher(),G.currentOutputSnapshotRaw=null,G.currentOutputSnapshotResolved=null,G.onComplete&&G.onComplete(null,!1,G.currentInputSnapshot);else{nl("transaction failed: Data returned ",pe,G.path),G.status=0;const Ce=ri(m.transactionQueueTree_,d),st=Vo(Ce)||[];let nt;st.push(G),ro(Ce,st),"object"==typeof pe&&null!==pe&&(0,K.r3)(pe,".priority")?(nt=(0,K.DV)(pe,".priority"),(0,K.hu)(Fu(nt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):nt=(Qo(m.serverSyncTree_,d)||Z.EMPTY_NODE).getPriority().val();const Dt=vl(m),pn=Je(pe,nt),zn=Pr(pn,se,Dt);G.currentOutputSnapshotRaw=pn,G.currentOutputSnapshotResolved=zn,G.currentWriteId=Bo(m);const Fr=Ja(m.serverSyncTree_,d,zn,G.currentWriteId,G.applyLocally);Zs(m.eventQueue_,d,Fr),xl(m,m.transactionQueueTree_)}}(m._repo,m._path,d,(pe,Ce,st)=>{let nt=null;pe?L.reject(pe):(nt=new Bt(st,new qt(m._repo,m._path),Kn),L.resolve(new Hu(Ce,nt)))},se,A),L.promise}ps.prototype.simpleListen=function(m,d){this.sendRequest("q",{p:m},d)},ps.prototype.echo=function(m,d){this.sendRequest("echo",{d:m},d)},$e(_.SDK_VERSION),(0,_._registerComponent)(new Y.wA("database",(d,{instanceIdentifier:h})=>na(d.getProvider("app").getImmediate(),d.getProvider("auth-internal"),d.getProvider("app-check-internal"),h),"PUBLIC").setMultipleInstances(!0)),(0,_.registerVersion)(xe,"0.12.4",void 0),(0,_.registerVersion)(xe,"0.12.4","esm2017")},5525:(Zt,Ye,H)=>{"use strict";H.d(Ye,{u7:()=>gp,Jj:()=>Mc,IX:()=>bd,my:()=>hs,xU:()=>ec,Lz:()=>Xu,WA:()=>Tt,F8:()=>ip,$q:()=>Id,W:()=>Zc,EK:()=>Yn,PU:()=>kg,l7:()=>Gc,Ky:()=>Cn,Xb:()=>pi,Cf:()=>Jr,K9:()=>xa,Me:()=>pl,yq:()=>Qi,Wi:()=>Nm,ET:()=>e_,Ab:()=>s_,vr:()=>ay,Fc:()=>Pm,hJ:()=>_d,B$:()=>ba,at:()=>Om,oe:()=>Lg,AK:()=>_v,TF:()=>Vm,JU:()=>Wc,ST:()=>sh,fH:()=>km,Ix:()=>Lm,Wu:()=>Zm,Lx:()=>iy,qY:()=>Ds,GL:()=>Sd,QT:()=>Ym,kl:()=>Pg,Xk:()=>Qm,PL:()=>sy,UQ:()=>Jm,zN:()=>Xm,ad:()=>ih,nP:()=>ly,b9:()=>Ng,vh:()=>ny,Pb:()=>Bm,L$:()=>Um,cf:()=>t_,sc:()=>n_,Xo:()=>zm,IO:()=>Ag,iE:()=>Cl,Eo:()=>yd,i3:()=>i_,Bt:()=>oy,pl:()=>Fg,Ub:()=>ic,qK:()=>Sg,TQ:()=>qm,e0:()=>Mg,r7:()=>mp,Mx:()=>Fm,ar:()=>mv});var de,T=H(5861),_=H(9681),Y=H(4859),K=H(1877),ge=H(2090),xe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Be={},$e=$e||{},le=xe||self;function ue(){}function Oe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function tt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ut="closure_uid_"+(1e9*Math.random()>>>0),dt=0;function ze(i,e,r){return i.call.apply(i.bind,arguments)}function Ae(i,e,r){if(!i)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,l),i.apply(e,g)}}return function(){return i.apply(e,arguments)}}function Le(i,e,r){return(Le=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ze:Ae).apply(null,arguments)}function Pe(i,e){var r=Array.prototype.slice.call(arguments,1);return function(){var l=r.slice();return l.push.apply(l,arguments),i.apply(this,l)}}function me(i,e){function r(){}r.prototype=e.prototype,i.Z=e.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(l,g,D){for(var M=Array(arguments.length-2),U=2;U<arguments.length;U++)M[U-2]=arguments[U];return e.prototype[g].apply(l,M)}}function _t(){this.s=this.s,this.o=this.o}var Ut={};_t.prototype.s=!1,_t.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,ut)&&i[ut]||(i[ut]=++dt)}(this);delete Ut[i]}},_t.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ct=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===e)return r;return-1},zt=Array.prototype.forEach?function(i,e,r){Array.prototype.forEach.call(i,e,r)}:function(i,e,r){const l=i.length,g="string"==typeof i?i.split(""):i;for(let D=0;D<l;D++)D in g&&e.call(r,g[D],D,i)};function et(i){return Array.prototype.concat.apply([],arguments)}function Qe(i){const e=i.length;if(0<e){const r=Array(e);for(let l=0;l<e;l++)r[l]=i[l];return r}return[]}function rt(i){return/^[\s\xa0]*$/.test(i)}var xt,gt=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ge(i,e){return-1!=i.indexOf(e)}function nn(i,e){return i<e?-1:i>e?1:0}e:{var an=le.navigator;if(an){var Qt=an.userAgent;if(Qt){xt=Qt;break e}}xt=""}function It(i,e,r){for(const l in i)e.call(r,i[l],l,i)}function Kt(i){const e={};for(const r in i)e[r]=i[r];return e}var dn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mn(i,e){let r,l;for(let g=1;g<arguments.length;g++){for(r in l=arguments[g],l)i[r]=l[r];for(let D=0;D<dn.length;D++)r=dn[D],Object.prototype.hasOwnProperty.call(l,r)&&(i[r]=l[r])}}function ur(i){return ur[" "](i),i}ur[" "]=ue;var wt,i,Ti=Ge(xt,"Opera"),Zn=Ge(xt,"Trident")||Ge(xt,"MSIE"),cr=Ge(xt,"Edge"),Hn=cr||Zn,Ni=Ge(xt,"Gecko")&&!(Ge(xt.toLowerCase(),"webkit")&&!Ge(xt,"Edge"))&&!(Ge(xt,"Trident")||Ge(xt,"MSIE"))&&!Ge(xt,"Edge"),Lr=Ge(xt.toLowerCase(),"webkit")&&!Ge(xt,"Edge");function Xr(){var i=le.document;return i?i.documentMode:void 0}e:{var Gn="",Mr=(i=xt,Ni?/rv:([^\);]+)(\)|;)/.exec(i):cr?/Edge\/([\d\.]+)/.exec(i):Zn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Lr?/WebKit\/(\S+)/.exec(i):Ti?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Mr&&(Gn=Mr?Mr[1]:""),Zn){var Yr=Xr();if(null!=Yr&&Yr>parseFloat(Gn)){wt=String(Yr);break e}}wt=Gn}var Lt={};function jt(){return e=Lt,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let i=0;const e=gt(String(wt)).split("."),r=gt("9").split("."),l=Math.max(e.length,r.length);for(let M=0;0==i&&M<l;M++){var g=e[M]||"",D=r[M]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],D=/(\d*)(\D*)(.*)/.exec(D)||["","","",""],0==g[0].length&&0==D[0].length)break;i=nn(0==g[1].length?0:parseInt(g[1],10),0==D[1].length?0:parseInt(D[1],10))||nn(0==g[2].length,0==D[2].length)||nn(g[2],D[2]),g=g[3],D=D[3]}while(0==i)}return 0<=i}();var e}var vn=le.document&&Zn&&(Xr()||parseInt(wt,10))||void 0,_n=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{le.addEventListener("test",ue,e),le.removeEventListener("test",ue,e)}catch(r){}return i}();function bn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Vn(i,e){if(bn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,l=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ni){e:{try{ur(e.nodeName);var g=!0;break e}catch(D){}g=!1}g||(e=null)}}else"mouseover"==r?e=i.fromElement:"mouseout"==r&&(e=i.toElement);this.relatedTarget=e,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Dr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Vn.Z.h.call(this)}}bn.prototype.h=function(){this.defaultPrevented=!0},me(Vn,bn);var Dr={2:"touch",3:"pen",4:"mouse"};Vn.prototype.h=function(){Vn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),Ht=0;function ln(i,e,r,l,g){this.listener=i,this.proxy=null,this.src=e,this.type=r,this.capture=!!l,this.ia=g,this.key=++Ht,this.ca=this.fa=!1}function Li(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function dr(i){this.src=i,this.g={},this.h=0}function We(i,e){var r=e.type;if(r in i.g){var D,l=i.g[r],g=Ct(l,e);(D=0<=g)&&Array.prototype.splice.call(l,g,1),D&&(Li(e),0==i.g[r].length&&(delete i.g[r],i.h--))}}function ye(i,e,r,l){for(var g=0;g<i.length;++g){var D=i[g];if(!D.ca&&D.listener==e&&D.capture==!!r&&D.ia==l)return g}return-1}dr.prototype.add=function(i,e,r,l,g){var D=i.toString();(i=this.g[D])||(i=this.g[D]=[],this.h++);var M=ye(i,e,l,g);return-1<M?(e=i[M],r||(e.fa=!1)):((e=new ln(e,this.src,D,!!l,g)).fa=r,i.push(e)),e};var Se="closure_lm_"+(1e6*Math.random()|0),yt={};function ie(i,e,r,l,g){if(l&&l.once)return Ze(i,e,r,l,g);if(Array.isArray(e)){for(var D=0;D<e.length;D++)ie(i,e[D],r,l,g);return null}return r=zr(r),i&&i[An]?i.N(e,r,tt(l)?!!l.capture:!!l,g):oe(i,e,r,!1,l,g)}function oe(i,e,r,l,g,D){if(!e)throw Error("Invalid event type");var M=tt(g)?!!g.capture:!!g,U=xr(i);if(U||(i[Se]=U=new dr(i)),(r=U.add(e,r,l,M,D)).proxy)return r;if(l=function(){var e=or;return function i(r){return e.call(i.src,i.listener,r)}}(),r.proxy=l,l.src=i,l.listener=r,i.addEventListener)_n||(g=M),void 0===g&&(g=!1),i.addEventListener(e.toString(),l,g);else if(i.attachEvent)i.attachEvent(rn(e.toString()),l);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(l)}return r}function Ze(i,e,r,l,g){if(Array.isArray(e)){for(var D=0;D<e.length;D++)Ze(i,e[D],r,l,g);return null}return r=zr(r),i&&i[An]?i.O(e,r,tt(l)?!!l.capture:!!l,g):oe(i,e,r,!0,l,g)}function Ue(i,e,r,l,g){if(Array.isArray(e))for(var D=0;D<e.length;D++)Ue(i,e[D],r,l,g);else l=tt(l)?!!l.capture:!!l,r=zr(r),i&&i[An]?(i=i.i,(e=String(e).toString())in i.g&&-1<(r=ye(D=i.g[e],r,l,g))&&(Li(D[r]),Array.prototype.splice.call(D,r,1),0==D.length&&(delete i.g[e],i.h--))):i&&(i=xr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ye(e,r,l,g)),(r=-1<i?e[i]:null)&&Gt(r))}function Gt(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[An])We(e.i,i);else{var r=i.type,l=i.proxy;e.removeEventListener?e.removeEventListener(r,l,i.capture):e.detachEvent?e.detachEvent(rn(r),l):e.addListener&&e.removeListener&&e.removeListener(l),(r=xr(e))?(We(r,i),0==r.h&&(r.src=null,e[Se]=null)):Li(i)}}}function rn(i){return i in yt?yt[i]:yt[i]="on"+i}function or(i,e){if(i.ca)i=!0;else{e=new Vn(e,this);var r=i.listener,l=i.ia||i.src;i.fa&&Gt(i),i=r.call(l,e)}return i}function xr(i){return(i=i[Se])instanceof dr?i:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zr(i){return"function"==typeof i?i:(i[hn]||(i[hn]=function(e){return i.handleEvent(e)}),i[hn])}function Ve(){_t.call(this),this.i=new dr(this),this.P=this,this.I=null}function be(i,e){var r,l=i.I;if(l)for(r=[];l;l=l.I)r.push(l);if(i=i.P,l=e.type||e,"string"==typeof e)e=new bn(e,i);else if(e instanceof bn)e.target=e.target||i;else{var g=e;Mn(e=new bn(l,i),g)}if(g=!0,r)for(var D=r.length-1;0<=D;D--){var M=e.g=r[D];g=Ie(M,l,!0,e)&&g}if(g=Ie(M=e.g=i,l,!0,e)&&g,g=Ie(M,l,!1,e)&&g,r)for(D=0;D<r.length;D++)g=Ie(M=e.g=r[D],l,!1,e)&&g}function Ie(i,e,r,l){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var g=!0,D=0;D<e.length;++D){var M=e[D];if(M&&!M.ca&&M.capture==r){var U=M.listener,Q=M.ia||M.src;M.fa&&We(i.i,M),g=!1!==U.call(Q,l)&&g}}return g&&!l.defaultPrevented}me(Ve,_t),Ve.prototype[An]=!0,Ve.prototype.removeEventListener=function(i,e,r,l){Ue(this,i,e,r,l)},Ve.prototype.M=function(){if(Ve.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var r=i.g[e],l=0;l<r.length;l++)Li(r[l]);delete i.g[e],i.h--}}this.I=null},Ve.prototype.N=function(i,e,r,l){return this.i.add(String(i),e,!1,r,l)},Ve.prototype.O=function(i,e,r,l){return this.i.add(String(i),e,!0,r,l)};var ht=le.JSON.stringify;function Pt(){var i=Mi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Or,Bn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new On,i=>i.reset());class On{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Jn(i){le.setTimeout(()=>{throw i},0)}function mr(i,e){Or||function(){var i=le.Promise.resolve(void 0);Or=function(){i.then(Cs)}}(),hr||(Or(),hr=!0),Mi.add(i,e)}var hr=!1,Mi=new class{constructor(){this.h=this.g=null}add(e,r){const l=Bn.get();l.set(e,r),this.h?this.h.next=l:this.g=l,this.h=l}};function Cs(){for(var i;i=Pt();){try{i.h.call(i.g)}catch(r){Jn(r)}var e=Bn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}hr=!1}function Js(i,e){Ve.call(this),this.h=i||1,this.g=e||le,this.j=Le(this.kb,this),this.l=Date.now()}function Vi(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function jr(i,e,r){if("function"==typeof i)r&&(i=Le(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Le(i.handleEvent,i)}return 2147483647<Number(e)?-1:le.setTimeout(i,e||0)}function uo(i){i.g=jr(()=>{i.g=null,i.i&&(i.i=!1,uo(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}me(Js,Ve),(de=Js.prototype).da=!1,de.S=null,de.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),be(this,"tick"),this.da&&(Vi(this),this.start()))}},de.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},de.M=function(){Js.Z.M.call(this),Vi(this),delete this.g};class Bi extends _t{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uo(this)}M(){super.M(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(i){_t.call(this),this.h=i,this.g={}}me($t,_t);var fn=[];function Er(i,e,r,l){Array.isArray(r)||(r&&(fn[0]=r.toString()),r=fn);for(var g=0;g<r.length;g++){var D=ie(e,r[g],l||i.handleEvent,!1,i.h||i);if(!D)break;i.g[D.key]=D}}function _i(i){It(i.g,function(e,r){this.g.hasOwnProperty(r)&&Gt(e)},i),i.g={}}function Zi(){this.g=!0}function ir(i,e,r,l){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(i,e){if(!i.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var l=r[i];if(!(2>l.length)){var g=l[1];if(Array.isArray(g)&&!(1>g.length)){var D=g[0];if("noop"!=D&&"stop"!=D&&"close"!=D)for(var M=1;M<g.length;M++)g[M]=""}}}return ht(r)}catch(U){return e}}(i,r)+(l?" "+l:"")})}$t.prototype.M=function(){$t.Z.M.call(this),_i(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zi.prototype.Aa=function(){this.g=!1},Zi.prototype.info=function(){};var Nn={},ks=null;function oi(){return ks=ks||new Ve}function lr(i){bn.call(this,Nn.Ma,i)}function Wn(i){const e=oi();be(e,new lr(e,i))}function on(i,e){bn.call(this,Nn.STAT_EVENT,i),this.stat=e}function $r(i){const e=oi();be(e,new on(e,i))}function Te(i,e){bn.call(this,Nn.Na,i),this.size=e}function Ne(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){i()},e)}Nn.Ma="serverreachability",me(lr,bn),Nn.STAT_EVENT="statevent",me(on,bn),Nn.Na="timingevent",me(Te,bn);var He={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ot(){}function Ft(){}Ot.prototype.h=null;var Xn,sr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Dn(){bn.call(this,"d")}function ei(){bn.call(this,"c")}function gi(){}function oa(i,e,r,l){this.l=i,this.j=e,this.m=r,this.X=l||1,this.V=new $t(this),this.P=Ha,this.W=new Js(i=Hn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new vi}function vi(){this.i=null,this.g="",this.h=!1}me(Dn,bn),me(ei,bn),me(gi,Ot),gi.prototype.g=function(){return new XMLHttpRequest},gi.prototype.i=function(){return{}},Xn=new gi;var Ha=45e3,fs={},Io={};function So(i,e,r){i.K=1,i.v=bi(mi(e)),i.s=r,i.U=!0,jl(i,null)}function jl(i,e){i.F=Date.now(),co(i),i.A=mi(i.v);var r=i.A,l=i.X;Array.isArray(l)||(l=[String(l)]),j(r.h,"t",l),i.C=0,r=i.l.H,i.h=new vi,i.g=Zo(i.l,r?e:null,!i.s),0<i.O&&(i.L=new Bi(Le(i.Ia,i,i.g),i.O)),Er(i.V,i.g,"readystatechange",i.gb),e=i.H?Kt(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Wn(1),function(i,e,r,l,g,D){i.info(function(){if(i.g)if(D)for(var M="",U=D.split("&"),Q=0;Q<U.length;Q++){var ae=U[Q].split("=");if(1<ae.length){var ve=ae[0];ae=ae[1];var je=ve.split("_");M=2<=je.length&&"type"==je[1]?M+(ve+"=")+ae+"&":M+(ve+"=redacted&")}}else M=null;else M=D;return"XMLHTTP REQ ("+l+") [attempt "+g+"]: "+e+"\n"+r+"\n"+M})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Ta(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Ao(i,e,r){let g,l=!0;for(;!i.I&&i.C<r.length;){if(g=No(i,r),g==Io){4==e&&(i.o=4,$r(14),l=!1),ir(i.j,i.m,null,"[Incomplete Response]");break}if(g==fs){i.o=4,$r(15),ir(i.j,i.m,r,"[Invalid Chunk]"),l=!1;break}ir(i.j,i.m,g,null),gs(i,g)}Ta(i)&&g!=Io&&g!=fs&&(i.h.g="",i.C=0),4!=e||0!=r.length||i.h.h||(i.o=1,$r(16),l=!1),i.i=i.i&&l,l?0<r.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),js(e),e.L=!0,$r(11))):(ir(i.j,i.m,r,"[Invalid Chunked Response]"),qn(i),ps(i))}function No(i,e){var r=i.C,l=e.indexOf("\n",r);return-1==l?Io:(r=Number(e.substring(r,l)),isNaN(r)?fs:(l+=1)+r>e.length?Io:(e=e.substr(l,r),i.C=l+r,e))}function co(i){i.Y=Date.now()+i.P,ll(i,i.P)}function ll(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Ne(Le(i.eb,i),e)}function Ia(i){i.B&&(le.clearTimeout(i.B),i.B=null)}function ps(i){0==i.l.G||i.I||$l(i.l,i)}function qn(i){Ia(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Vi(i.W),_i(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function gs(i,e){try{var r=i.l;if(0!=r.G&&(r.g==i||fr(r.i,i)))if(r.I=i.N,!i.J&&fr(r.i,i)&&3==r.G){try{var l=r.Ca.g.parse(e)}catch(ae){l=null}if(Array.isArray(l)&&3==l.length){var g=l;if(0==g[0])e:if(r.u)r.ta=g[1],0<r.ta-r.U&&37500>g[2]&&r.N&&0==r.A&&!r.v&&(r.v=Ne(Le(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;$s(r),dl(r)}is(r),$r(18)}if(1>=Sr(r.i)&&r.ka){try{r.ka()}catch(ae){}r.ka=void 0}}else fi(r,11)}else if((i.J||r.g==i)&&$s(r),!rt(e))for(g=r.Ca.g.parse(e),e=0;e<g.length;e++){let ae=g[e];if(r.U=ae[0],ae=ae[1],2==r.G)if("c"==ae[0]){r.J=ae[1],r.la=ae[2];const ve=ae[3];null!=ve&&(r.ma=ve,r.h.info("VER="+r.ma));const je=ae[4];null!=je&&(r.za=je,r.h.info("SVER="+r.za));const lt=ae[5];null!=lt&&"number"==typeof lt&&0<lt&&(r.K=l=1.5*lt,r.h.info("backChannelRequestTimeoutMs_="+l)),l=r;const Mt=i.g;if(Mt){const Wt=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wt){var D=l.i;!D.g&&(Ge(Wt,"spdy")||Ge(Wt,"quic")||Ge(Wt,"h2"))&&(D.j=D.l,D.g=new Set,D.h&&(pr(D,D.h),D.h=null))}if(l.D){const jn=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;jn&&(l.sa=jn,Tr(l.F,l.D,jn))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var M=i;if((l=r).oa=Ur(l,l.H?l.la:null,l.W),M.J){Br(l.i,M);var U=M,Q=l.K;Q&&U.setTimeout(Q),U.B&&(Ia(U),co(U)),l.g=M}else ko(l);0<r.l.length&&Di(r)}else"stop"!=ae[0]&&"close"!=ae[0]||fi(r,7);else 3==r.G&&("stop"==ae[0]||"close"==ae[0]?"stop"==ae[0]?fi(r,7):go(r):"noop"!=ae[0]&&r.j&&r.j.wa(ae),r.A=0)}Wn(4)}catch(ae){}}function Ps(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Oe(i)||"string"==typeof i)zt(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(Oe(i)||"string"==typeof i){r=[];for(var l=i.length,g=0;g<l;g++)r.push(g)}else for(g in r=[],l=0,i)r[l++]=g;l=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Oe(i)){for(var e=[],r=i.length,l=0;l<r;l++)e.push(i[l]);return e}for(l in e=[],r=0,i)e[r++]=i[l];return e}(i),g=l.length;for(var D=0;D<g;D++)e.call(void 0,l[D],r&&r[D],i)}}function ti(i,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var l=0;l<r;l+=2)this.set(arguments[l],arguments[l+1])}else if(i)if(i instanceof ti)for(r=i.T(),l=0;l<r.length;l++)this.set(r[l],i.get(r[l]));else for(l in i)this.set(l,i[l])}function Xs(i){if(i.i!=i.g.length){for(var e=0,r=0;e<i.g.length;){var l=i.g[e];hi(i.h,l)&&(i.g[r++]=l),e++}i.g.length=r}if(i.i!=i.g.length){var g={};for(r=e=0;e<i.g.length;)hi(g,l=i.g[e])||(i.g[r++]=l,g[l]=1),e++;i.g.length=r}}function hi(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(de=oa.prototype).setTimeout=function(i){this.P=i},de.gb=function(i){i=i.target;const e=this.L;e&&3==wi(i)?e.l():this.Ia(i)},de.Ia=function(i){try{if(i==this.g)e:{const ve=wi(this.g);var e=this.g.Da();const je=this.g.ba();if(!(3>ve)&&(3!=ve||Hn||this.g&&(this.h.h||this.g.ga()||vs(this.g)))){this.I||4!=ve||7==e||Wn(8==e||0>=je?3:2),Ia(this);var r=this.g.ba();this.N=r;t:if(Ta(this)){var l=vs(this.g);i="";var g=l.length,D=4==wi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qn(this),ps(this);var M="";break t}this.h.i=new le.TextDecoder}for(e=0;e<g;e++)this.h.h=!0,i+=this.h.i.decode(l[e],{stream:D&&e==g-1});l.splice(0,g),this.h.g+=i,this.C=0,M=this.h.g}else M=this.g.ga();if(this.i=200==r,function(i,e,r,l,g,D,M){i.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+g+"]: "+e+"\n"+r+"\n"+D+" "+M})}(this.j,this.u,this.A,this.m,this.X,ve,r),this.i){if(this.$&&!this.J){t:{if(this.g){var U,Q=this.g;if((U=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rt(U)){var ae=U;break t}}ae=null}if(!(r=ae)){this.i=!1,this.o=3,$r(12),qn(this),ps(this);break e}ir(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gs(this,r)}this.U?(Ao(this,ve,M),Hn&&this.i&&3==ve&&(Er(this.V,this.W,"tick",this.fb),this.W.start())):(ir(this.j,this.m,M,null),gs(this,M)),4==ve&&qn(this),this.i&&!this.I&&(4==ve?$l(this.l,this):(this.i=!1,co(this)))}else 400==r&&0<M.indexOf("Unknown SID")?(this.o=3,$r(12)):(this.o=0,$r(13)),qn(this),ps(this)}}}catch(ve){}},de.fb=function(){if(this.g){var i=wi(this.g),e=this.g.ga();this.C<e.length&&(Ia(this),Ao(this,i,e),this.i&&4!=i&&co(this))}},de.cancel=function(){this.I=!0,qn(this)},de.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Wn(3),$r(17)),qn(this),this.o=2,ps(this)):ll(this,this.Y-i)},(de=ti.prototype).R=function(){Xs(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},de.T=function(){return Xs(this),this.g.concat()},de.get=function(i,e){return hi(this.h,i)?this.h[i]:e},de.set=function(i,e){hi(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},de.forEach=function(i,e){for(var r=this.T(),l=0;l<r.length;l++){var g=r[l],D=this.get(g);i.call(e,D,g,this)}};var ul=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ri(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Ri){this.g=void 0!==e?e:i.g,Cr(this,i.j),this.s=i.s,Ki(this,i.i),Sa(this,i.m),this.l=i.l,e=i.h;var r=new ji;r.i=e.i,e.g&&(r.g=new ti(e.g),r.h=e.h),Yi(this,r),this.o=i.o}else i&&(r=String(i).match(ul))?(this.g=!!e,Cr(this,r[1]||"",!0),this.s=Ui(r[2]||""),Ki(this,r[3]||"",!0),Sa(this,r[4]),this.l=Ui(r[5]||"",!0),Yi(this,r[6]||"",!0),this.o=Ui(r[7]||"")):(this.g=!!e,this.h=new ji(null,this.g))}function mi(i){return new Ri(i)}function Cr(i,e,r){i.j=r?Ui(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ki(i,e,r){i.i=r?Ui(e,!0):e}function Sa(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Yi(i,e,r){e instanceof ji?(i.h=e,function(i,e){e&&!i.j&&($i(i),i.i=null,i.g.forEach(function(r,l){var g=l.toLowerCase();l!=g&&(V(this,l),j(this,g,r))},i)),i.j=e}(i.h,i.g)):(r||(e=ho(e,xo)),i.h=new ji(e,i.g))}function Tr(i,e,r){i.h.set(e,r)}function bi(i){return Tr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ui(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ho(i,e,r){return"string"==typeof i?(i=encodeURI(i).replace(e,Ga),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ga(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ri.prototype.toString=function(){var i=[],e=this.j;e&&i.push(ho(e,Kn,!0),":");var r=this.i;return(r||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(ho(e,Kn,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(ho(r,"/"==r.charAt(0)?Fs:Ro,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",ho(r,Ir)),i.join("")};var Kn=/[#\/\?@]/g,Ro=/[#\?:]/g,Fs=/[#\?]/g,xo=/[#\?@]/g,Ir=/#/g;function ji(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function $i(i){i.g||(i.g=new ti,i.h=0,i.i&&function(i,e){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var l=i[r].indexOf("="),g=null;if(0<=l){var D=i[r].substring(0,l);g=i[r].substring(l+1)}else D=i[r];e(D,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}(i.i,function(e,r){i.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function V(i,e){$i(i),e=ne(i,e),hi(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,hi((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Xs(i)))}function Z(i,e){return $i(i),e=ne(i,e),hi(i.g.h,e)}function j(i,e,r){V(i,e),0<r.length&&(i.i=null,i.g.set(ne(i,e),Qe(r)),i.h+=r.length)}function ne(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Et(i){this.l=i||sn,i=le.PerformanceNavigationTiming?0<(i=le.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(le.g&&le.g.Ea&&le.g.Ea()&&le.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(de=ji.prototype).add=function(i,e){$i(this),this.i=null,i=ne(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(e),this.h+=1,this},de.forEach=function(i,e){$i(this),this.g.forEach(function(r,l){zt(r,function(g){i.call(e,g,l,this)},this)},this)},de.T=function(){$i(this);for(var i=this.g.R(),e=this.g.T(),r=[],l=0;l<e.length;l++)for(var g=i[l],D=0;D<g.length;D++)r.push(e[l]);return r},de.R=function(i){$i(this);var e=[];if("string"==typeof i)Z(this,i)&&(e=et(e,this.g.get(ne(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)e=et(e,i[r])}return e},de.set=function(i,e){return $i(this),this.i=null,Z(this,i=ne(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},de.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},de.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),r=0;r<e.length;r++){var l=e[r],g=encodeURIComponent(String(l));l=this.R(l);for(var D=0;D<l.length;D++){var M=g;""!==l[D]&&(M+="="+encodeURIComponent(String(l[D]))),i.push(M)}}return this.i=i.join("&")};var sn=10;function mn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Sr(i){return i.h?1:i.g?i.g.size:0}function fr(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function pr(i,e){i.g?i.g.add(e):i.h=e}function Br(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function _r(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const r of i.g.values())e=e.concat(r.D);return e}return Qe(i.i)}function kn(){}function Sn(){this.g=new kn}function fo(i,e,r){const l=r||"";try{Ps(i,function(g,D){let M=g;tt(g)&&(M=ht(g)),e.push(l+D+"="+encodeURIComponent(M))})}catch(g){throw e.push(l+"type="+encodeURIComponent("_badmap")),g}}function Hi(i,e,r,l,g){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,g(l)}catch(D){}}function Ls(i){this.l=i.$b||null,this.j=i.ib||!1}function _s(i,e){Ve.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Et.prototype.cancel=function(){if(this.i=_r(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},kn.prototype.stringify=function(i){return le.JSON.stringify(i,void 0)},kn.prototype.parse=function(i){return le.JSON.parse(i,void 0)},me(Ls,Ot),Ls.prototype.g=function(){return new _s(this.l,this.j)},Ls.prototype.i=function(i){return function(){return i}}({}),me(_s,Ve);var Vs=0;function Bs(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function bt(i){i.readyState=4,i.l=null,i.j=null,i.A=null,er(i)}function er(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(de=_s.prototype).open=function(i,e){if(this.readyState!=Vs)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,er(this)},de.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||le).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},de.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bt(this)),this.readyState=Vs},de.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==le.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bs(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},de.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?bt(this):er(this),3==this.readyState&&Bs(this)}},de.Ua=function(i){this.g&&(this.response=this.responseText=i,bt(this))},de.Ta=function(i){this.g&&(this.response=i,bt(this))},de.ha=function(){this.g&&bt(this)},de.setRequestHeader=function(i,e){this.v.append(i,e)},de.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},de.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var r=e.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=e.next();return i.join("\r\n")},Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Oo=le.JSON.parse;function ar(i){Ve.call(this),this.headers=new ti,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cl,this.K=this.L=!1}me(ar,Ve);var cl="",la=/^https?$/i,eo=["POST","PUT"];function Aa(i){return"content-type"==i.toLowerCase()}function zo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ua(i),ys(i)}function ua(i){i.D||(i.D=!0,be(i,"complete"),be(i,"error"))}function po(i){if(i.h&&void 0!==$e&&(!i.C[1]||4!=wi(i)||2!=i.ba()))if(i.v&&4==wi(i))jr(i.Fa,0,i);else if(be(i,"readystatechange"),4==wi(i)){i.h=!1;try{const U=i.ba();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var l;if(l=0===U){var g=String(i.H).match(ul)[1]||null;if(!g&&le.self&&le.self.location){var D=le.self.location.protocol;g=D.substr(0,D.length-1)}l=!la.test(g?g.toLowerCase():"")}r=l}if(r)be(i,"complete"),be(i,"success");else{i.m=6;try{var M=2<wi(i)?i.g.statusText:""}catch(Q){M=""}i.j=M+" ["+i.ba()+"]",ua(i)}}finally{ys(i)}}}function ys(i,e){if(i.g){Gi(i);const r=i.g,l=i.C[0]?ue:null;i.g=null,i.C=null,e||be(i,"ready");try{r.onreadystatechange=l}catch(g){}}}function Gi(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(le.clearTimeout(i.A),i.A=null)}function wi(i){return i.g?i.g.readyState:0}function vs(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case cl:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ls(i,e,r){e:{for(l in r){var l=!1;break e}l=!0}l||(r=function(i){let e="";return It(i,function(r,l){e+=l,e+=":",e+=r,e+="\r\n"}),e}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):Tr(i,e,r))}function to(i,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||e}function Tl(i){this.za=0,this.l=[],this.h=new Zi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=to("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=to("baseRetryDelayMs",5e3,i),this.$a=to("retryDelaySeedMs",1e4,i),this.Ya=to("forwardChannelMaxRetries",2,i),this.ra=to("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Et(i&&i.concurrentRequestLimit),this.Ca=new Sn,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function go(i){if(da(i),3==i.G){var e=i.V++,r=mi(i.F);Tr(r,"SID",i.J),Tr(r,"RID",e),Tr(r,"TYPE","terminate"),mo(i,r),(e=new oa(i,i.h,e,void 0)).K=2,e.v=bi(mi(r)),r=!1,le.navigator&&le.navigator.sendBeacon&&(r=le.navigator.sendBeacon(e.v.toString(),"")),!r&&le.Image&&((new Image).src=e.v,r=!0),r||(e.g=Zo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),co(e)}yo(i)}function dl(i){i.g&&(js(i),i.g.cancel(),i.g=null)}function da(i){dl(i),i.u&&(le.clearTimeout(i.u),i.u=null),$s(i),i.i.cancel(),i.m&&("number"==typeof i.m&&le.clearTimeout(i.m),i.m=null)}function Na(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Di(i)}function Di(i){mn(i.i)||i.m||(i.m=!0,mr(i.Ha,i),i.C=0)}function qo(i,e){var r;r=e?e.m:i.V++;const l=mi(i.F);Tr(l,"SID",i.J),Tr(l,"RID",r),Tr(l,"AID",i.U),mo(i,l),i.o&&i.s&&ls(l,i.o,i.s),r=new oa(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Us(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),pr(i.i,r),So(r,l,e)}function mo(i,e){i.j&&Ps({},function(r,l){Tr(e,l,r)})}function Us(i,e,r){r=Math.min(i.l.length,r);var l=i.j?Le(i.j.Oa,i.j,i):null;e:{var g=i.l;let D=-1;for(;;){const M=["count="+r];-1==D?0<r?(D=g[0].h,M.push("ofs="+D)):D=0:M.push("ofs="+D);let U=!0;for(let Q=0;Q<r;Q++){let ae=g[Q].h;const ve=g[Q].g;if(ae-=D,0>ae)D=Math.max(0,g[Q].h-100),U=!1;else try{fo(ve,M,"req"+ae+"_")}catch(je){l&&l(ve)}}if(U){l=M.join("&");break e}}}return i=i.l.splice(0,r),e.D=i,l}function ko(i){i.g||i.u||(i.Y=1,mr(i.Ga,i),i.A=0)}function is(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Ne(Le(i.Ga,i),_o(i,i.A)),i.A++,0))}function js(i){null!=i.B&&(le.clearTimeout(i.B),i.B=null)}function ss(i){i.g=new oa(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=mi(i.oa);Tr(e,"RID","rpc"),Tr(e,"SID",i.J),Tr(e,"CI",i.N?"0":"1"),Tr(e,"AID",i.U),mo(i,e),Tr(e,"TYPE","xmlhttp"),i.o&&i.s&&ls(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=bi(mi(e)),r.s=null,r.U=!0,jl(r,i)}function $s(i){null!=i.v&&(le.clearTimeout(i.v),i.v=null)}function $l(i,e){var r=null;if(i.g==e){$s(i),js(i),i.g=null;var l=2}else{if(!fr(i.i,e))return;r=e.D,Br(i.i,e),l=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==l){r=e.s?e.s.length:0,e=Date.now()-e.F;var g=i.C;be(l=oi(),new Te(l,r,e,g)),Di(i)}else ko(i);else if(3==(g=e.o)||0==g&&0<i.I||!(1==l&&function(i,e){return!(Sr(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Ne(Le(i.Ha,i,e),_o(i,i.C)),i.C++,0)))}(i,e)||2==l&&is(i)))switch(r&&0<r.length&&(e=i.i,e.i=e.i.concat(r)),g){case 1:fi(i,5);break;case 4:fi(i,10);break;case 3:fi(i,6);break;default:fi(i,2)}}function _o(i,e){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*e}function fi(i,e){if(i.h.info("Error code "+e),2==e){var r=null;i.j&&(r=null);var l=Le(i.jb,i);r||(r=new Ri("//www.google.com/images/cleardot.gif"),le.location&&"http"==le.location.protocol||Cr(r,"https"),bi(r)),function(i,e){const r=new Zi;if(le.Image){const l=new Image;l.onload=Pe(Hi,r,l,"TestLoadImage: loaded",!0,e),l.onerror=Pe(Hi,r,l,"TestLoadImage: error",!1,e),l.onabort=Pe(Hi,r,l,"TestLoadImage: abort",!1,e),l.ontimeout=Pe(Hi,r,l,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=i}else e(!1)}(r.toString(),l)}else $r(2);i.G=0,i.j&&i.j.va(e),yo(i),da(i)}function yo(i){i.G=0,i.I=-1,i.j&&((0!=_r(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Qe(i.l),i.l.length=0),i.j.ua())}function Ur(i,e,r){let l=function(i){return i instanceof Ri?mi(i):new Ri(i,void 0)}(r);if(""!=l.i)e&&Ki(l,e+"."+l.i),Sa(l,l.m);else{const g=le.location;l=function(i,e,r,l){var g=new Ri(null,void 0);return i&&Cr(g,i),e&&Ki(g,e),r&&Sa(g,r),l&&(g.l=l),g}(g.protocol,e?e+"."+g.hostname:g.hostname,+g.port,r)}return i.aa&&It(i.aa,function(g,D){Tr(l,D,g)}),r=i.sa,(e=i.D)&&r&&Tr(l,e,r),Tr(l,"VER",i.ma),mo(i,l),l}function Zo(i,e,r){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ar(r&&i.Ba&&!i.qa?new Ls({ib:!0}):i.qa)).L=i.H,e}function za(){}function Ko(){if(Zn&&!(10<=Number(vn)))throw Error("Environmental error: no available transport.")}function gr(i,e){Ve.call(this),this.g=new Tl(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!rt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new tr(this)}function Hl(i){Dn.call(this);var e=i.__sm__;if(e){e:{for(const r in e){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function qa(){ei.call(this),this.status=1}function tr(i){this.g=i}(de=ar.prototype).ea=function(i,e,r,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xn.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Xn),this.g.onreadystatechange=Le(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(D){return void zo(this,D)}i=r||"";const g=new ti(this.headers);l&&Ps(l,function(D,M){g.set(M,D)}),l=function(i){e:{var e=Aa;const r=i.length,l="string"==typeof i?i.split(""):i;for(let g=0;g<r;g++)if(g in l&&e.call(void 0,l[g],g,i)){e=g;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(g.T()),r=le.FormData&&i instanceof le.FormData,!(0<=Ct(eo,e))||l||r||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),g.forEach(function(D,M){this.g.setRequestHeader(M,D)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gi(this),0<this.B&&((this.K=function(i){return Zn&&jt()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Le(this.pa,this)):this.A=jr(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(D){zo(this,D)}},de.pa=function(){void 0!==$e&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,be(this,"timeout"),this.abort(8))},de.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,be(this,"complete"),be(this,"abort"),ys(this))},de.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ys(this,!0)),ar.Z.M.call(this)},de.Fa=function(){this.s||(this.F||this.v||this.l?po(this):this.cb())},de.cb=function(){po(this)},de.ba=function(){try{return 2<wi(this)?this.g.status:-1}catch(i){return-1}},de.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},de.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Oo(e)}},de.Da=function(){return this.m},de.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(de=Tl.prototype).ma=8,de.G=1,de.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},de.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const g=new oa(this,this.h,i,void 0);let D=this.s;if(this.P&&(D?(D=Kt(D),Mn(D,this.P)):D=this.P),null===this.o&&(g.H=D),this.ja)e:{for(var e=0,r=0;r<this.l.length;r++){var l=this.l[r];if(void 0===(l="__data__"in l.g&&"string"==typeof(l=l.g.__data__)?l.length:void 0))break;if(4096<(e+=l)){e=r;break e}if(4096===e||r===this.l.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=Us(this,g,e),Tr(r=mi(this.F),"RID",i),Tr(r,"CVER",22),this.D&&Tr(r,"X-HTTP-Session-Id",this.D),mo(this,r),this.o&&D&&ls(r,this.o,D),pr(this.i,g),this.Ra&&Tr(r,"TYPE","init"),this.ja?(Tr(r,"$req",e),Tr(r,"SID","null"),g.$=!0,So(g,r,null)):So(g,r,e),this.G=2}}else 3==this.G&&(i?qo(this,i):0==this.l.length||mn(this.i)||qo(this))},de.Ga=function(){if(this.u=null,ss(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Ne(Le(this.bb,this),i)}},de.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,$r(10),dl(this),ss(this))},de.ab=function(){null!=this.v&&(this.v=null,dl(this),is(this),$r(19))},de.jb=function(i){i?(this.h.info("Successfully pinged google.com"),$r(2)):(this.h.info("Failed to ping google.com"),$r(1))},(de=za.prototype).xa=function(){},de.wa=function(){},de.va=function(){},de.ua=function(){},de.Oa=function(){},Ko.prototype.g=function(i,e){return new gr(i,e)},me(gr,Ve),gr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),mr(Le(i.hb,i,e))),$r(0),i.W=e,i.aa=r||{},i.N=i.X,i.F=Ur(i,null,i.W),Di(i)},gr.prototype.close=function(){go(this.g)},gr.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Na(this.g,e)}else this.v?((e={}).__data__=ht(i),Na(this.g,e)):Na(this.g,i)},gr.prototype.M=function(){this.g.j=null,delete this.j,go(this.g),delete this.g,gr.Z.M.call(this)},me(Hl,Dn),me(qa,ei),me(tr,za),tr.prototype.xa=function(){be(this.g,"a")},tr.prototype.wa=function(i){be(this.g,new Hl(i))},tr.prototype.va=function(i){be(this.g,new qa(i))},tr.prototype.ua=function(){be(this.g,"b")},Ko.prototype.createWebChannel=Ko.prototype.g,gr.prototype.send=gr.prototype.u,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,He.NO_ERROR=0,He.TIMEOUT=8,He.HTTP_ERROR=6,mt.COMPLETE="complete",Ft.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",Ve.prototype.listen=Ve.prototype.N,ar.prototype.listenOnce=ar.prototype.O,ar.prototype.getLastError=ar.prototype.La,ar.prototype.getLastErrorCode=ar.prototype.Da,ar.prototype.getStatus=ar.prototype.ba,ar.prototype.getResponseJson=ar.prototype.Qa,ar.prototype.getResponseText=ar.prototype.ga,ar.prototype.send=ar.prototype.ea;var Ii=Be.createWebChannelTransport=function(){return new Ko},Is=Be.getStatEventTarget=function(){return oi()},ha=Be.ErrorCode=He,lu=Be.EventType=mt,Za=Be.Event=Nn,Hr=Be.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},fa=Be.FetchXmlHttpFactory=Ls,Ss=Be.WebChannel=Ft,Ma=Be.XhrIo=ar;const vo="@firebase/firestore";class Rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let bo="9.6.1";const Po=new K.Yd("@firebase/firestore");function Gl(){return Po.logLevel}function ic(i){Po.setLogLevel(i)}function Vt(i,...e){if(Po.logLevel<=K.in.DEBUG){const r=e.map(Ra);Po.debug(`Firestore (${bo}): ${i}`,...r)}}function Ei(i,...e){if(Po.logLevel<=K.in.ERROR){const r=e.map(Ra);Po.error(`Firestore (${bo}): ${i}`,...r)}}function Qi(i,...e){if(Po.logLevel<=K.in.WARN){const r=e.map(Ra);Po.warn(`Firestore (${bo}): ${i}`,...r)}}function Ra(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function Tn(i="Unexpected state"){const e=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: `+i;throw Ei(e),new Error(e)}function Pn(i,e){i||Tn()}function xa(i,e){i||Tn()}function Jt(i,e){return i}const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends Error{constructor(e,r){super(r),this.code=e,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class fl{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Oa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Rr.UNAUTHENTICATED))}shutdown(){}}class k{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class N{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var l=this;let g=this.i;const D=ae=>this.i!==g?(g=this.i,r(ae)):Promise.resolve();let M=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),M.resolve(),M=new Gr,e.enqueueRetryable(()=>D(this.currentUser))};const U=()=>{const ae=M;e.enqueueRetryable((0,T.Z)(function*(){yield ae.promise,yield D(l.currentUser)}))},Q=ae=>{Vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ae,this.auth.addAuthTokenListener(this.o),U()};this.t.onInit(ae=>Q(ae)),setTimeout(()=>{if(!this.auth){const ae=this.t.getImmediate({optional:!0});ae?Q(ae):(Vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),M.resolve(),M=new Gr)}},0),U()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(l=>this.i!==e?(Vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(Pn("string"==typeof l.accessToken),new fl(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pn(null===e||"string"==typeof e),new Rr(e)}}class S{constructor(e,r,l){this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);const g=e.auth.getAuthHeaderValueForFirstParty([]);g&&this.headers.set("Authorization",g),l&&this.headers.set("X-Goog-Iam-Authorization-Token",l)}}class B{constructor(e,r,l){this.h=e,this.l=r,this.m=l}getToken(){return Promise.resolve(new S(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class te{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,r){this.o=g=>{e.enqueueRetryable(()=>{return null!=(D=g).error&&Vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${D.error.message}`),r(D.token);var D})};const l=g=>{Vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.g.onInit(g=>l(g)),setTimeout(()=>{if(!this.appCheck){const g=this.g.getImmediate({optional:!0});g?l(g):Vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Pn("string"==typeof r.token),new W(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class we{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=l=>this.p(l),this.T=l=>r.writeSequenceNumber(l))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ct(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let l=0;l<i;l++)r[l]=Math.floor(256*Math.random());return r}we.I=-1;class Xt{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let l="";for(;l.length<20;){const g=ct(40);for(let D=0;D<g.length;++D)l.length<20&&g[D]<r&&(l+=e.charAt(g[D]%e.length))}return l}}function en(i,e){return i<e?-1:i>e?1:0}function En(i,e,r){return i.length===e.length&&i.every((l,g)=>r(l,e[g]))}function Nr(i){return i+"\0"}class Yn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Tt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Tt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Tt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),l=Math.floor(1e6*(e-1e3*r));return new Yn(r,l)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fn(e)}static min(){return new Fn(new Yn(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ji(i){let e=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e++;return e}function ui(i,e){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e(r,i[r])}function bs(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Hs{constructor(e,r,l){void 0===r?r=0:r>e.length&&Tn(),void 0===l?l=e.length-r:l>e.length-r&&Tn(),this.segments=e,this.offset=r,this.len=l}get length(){return this.len}isEqual(e){return 0===Hs.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Hs?e.forEach(l=>{r.push(l)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,l=this.limit();r<l;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const l=Math.min(e.length,r.length);for(let g=0;g<l;g++){const D=e.get(g),M=r.get(g);if(D<M)return-1;if(D>M)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class In extends Hs{construct(e,r,l){return new In(e,r,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const l of e){if(l.indexOf("//")>=0)throw new Tt(ot.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);r.push(...l.split("/").filter(g=>g.length>0))}return new In(r)}static emptyPath(){return new In([])}}const Gs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends Hs{construct(e,r,l){return new pi(e,r,l)}static isValidIdentifier(e){return Gs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const r=[];let l="",g=0;const D=()=>{if(0===l.length)throw new Tt(ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(l),l=""};let M=!1;for(;g<e.length;){const U=e[g];if("\\"===U){if(g+1===e.length)throw new Tt(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Q=e[g+1];if("\\"!==Q&&"."!==Q&&"`"!==Q)throw new Tt(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);l+=Q,g+=2}else"`"===U?(M=!M,g++):"."!==U||M?(l+=U,g++):(D(),g++)}if(D(),M)throw new Tt(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(r)}static emptyPath(){return new pi([])}}class ka{constructor(e){this.fields=e,e.sort(pi.comparator)}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return En(this.fields,e.fields,(r,l)=>r.isEqual(l))}}function pl(){return"undefined"!=typeof atob}class Si{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new Si(r)}static fromUint8Array(e){const r=function(l){let g="";for(let D=0;D<l.length;++D)g+=String.fromCharCode(l[D]);return g}(e);return new Si(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let l=0;l<e.length;l++)r[l]=e.charCodeAt(l);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Si.EMPTY_BYTE_STRING=new Si("");const pa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(i){if(Pn(!!i),"string"==typeof i){let e=0;const r=pa.exec(i);if(Pn(!!r),r[1]){let g=r[1];g=(g+"000000000").substr(0,9),e=Number(g)}const l=new Date(i);return{seconds:Math.floor(l.getTime()/1e3),nanos:e}}return{seconds:Ai(i.seconds),nanos:Ai(i.nanos)}}function Ai(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Fo(i){return"string"==typeof i?Si.fromBase64String(i):Si.fromUint8Array(i)}function Lo(i){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Wl(i){const e=i.mapValue.fields.__previous_value__;return Lo(e)?Wl(e):e}function Pa(i){const e=Ws(i.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}function Qr(i){return null==i}function Ka(i){return 0===i&&1/i==-1/0}function Ru(i){return"number"==typeof i&&Number.isInteger(i)&&!Ka(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Cn{constructor(e){this.path=e}static fromPath(e){return new Cn(In.fromString(e))}static fromName(e){return new Cn(In.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return In.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Cn(new In(e.slice()))}}function zl(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Lo(i)?4:10:Tn()}function Fa(i,e){const r=zl(i);if(r!==zl(e))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pa(i).isEqual(Pa(e));case 3:return function(l,g){if("string"==typeof l.timestampValue&&"string"==typeof g.timestampValue&&l.timestampValue.length===g.timestampValue.length)return l.timestampValue===g.timestampValue;const D=Ws(l.timestampValue),M=Ws(g.timestampValue);return D.seconds===M.seconds&&D.nanos===M.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return g=e,Fo(i.bytesValue).isEqual(Fo(g.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(l,g){return Ai(l.geoPointValue.latitude)===Ai(g.geoPointValue.latitude)&&Ai(l.geoPointValue.longitude)===Ai(g.geoPointValue.longitude)}(i,e);case 2:return function(l,g){if("integerValue"in l&&"integerValue"in g)return Ai(l.integerValue)===Ai(g.integerValue);if("doubleValue"in l&&"doubleValue"in g){const D=Ai(l.doubleValue),M=Ai(g.doubleValue);return D===M?Ka(D)===Ka(M):isNaN(D)&&isNaN(M)}return!1}(i,e);case 9:return En(i.arrayValue.values||[],e.arrayValue.values||[],Fa);case 10:return function(l,g){const D=l.mapValue.fields||{},M=g.mapValue.fields||{};if(Ji(D)!==Ji(M))return!1;for(const U in D)if(D.hasOwnProperty(U)&&(void 0===M[U]||!Fa(D[U],M[U])))return!1;return!0}(i,e);default:return Tn()}var g}function ql(i,e){return void 0!==(i.values||[]).find(r=>Fa(r,e))}function Il(i,e){const r=zl(i),l=zl(e);if(r!==l)return en(r,l);switch(r){case 0:return 0;case 1:return en(i.booleanValue,e.booleanValue);case 2:return function(g,D){const M=Ai(g.integerValue||g.doubleValue),U=Ai(D.integerValue||D.doubleValue);return M<U?-1:M>U?1:M===U?0:isNaN(M)?isNaN(U)?0:-1:1}(i,e);case 3:return Ya(i.timestampValue,e.timestampValue);case 4:return Ya(Pa(i),Pa(e));case 5:return en(i.stringValue,e.stringValue);case 6:return function(g,D){const M=Fo(g),U=Fo(D);return M.compareTo(U)}(i.bytesValue,e.bytesValue);case 7:return function(g,D){const M=g.split("/"),U=D.split("/");for(let Q=0;Q<M.length&&Q<U.length;Q++){const ae=en(M[Q],U[Q]);if(0!==ae)return ae}return en(M.length,U.length)}(i.referenceValue,e.referenceValue);case 8:return function(g,D){const M=en(Ai(g.latitude),Ai(D.latitude));return 0!==M?M:en(Ai(g.longitude),Ai(D.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(g,D){const M=g.values||[],U=D.values||[];for(let Q=0;Q<M.length&&Q<U.length;++Q){const ae=Il(M[Q],U[Q]);if(ae)return ae}return en(M.length,U.length)}(i.arrayValue,e.arrayValue);case 10:return function(g,D){const M=g.fields||{},U=Object.keys(M),Q=D.fields||{},ae=Object.keys(Q);U.sort(),ae.sort();for(let ve=0;ve<U.length&&ve<ae.length;++ve){const je=en(U[ve],ae[ve]);if(0!==je)return je;const lt=Il(M[U[ve]],Q[ae[ve]]);if(0!==lt)return lt}return en(U.length,ae.length)}(i.mapValue,e.mapValue);default:throw Tn()}}function Ya(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return en(i,e);const r=Ws(i),l=Ws(e),g=en(r.seconds,l.seconds);return 0!==g?g:en(r.nanos,l.nanos)}function Oc(i){return Wi(i)}function Wi(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(l){const g=Ws(l);return`time(${g.seconds},${g.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Fo(i.bytesValue).toBase64():"referenceValue"in i?Cn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(l){let g="[",D=!0;for(const M of l.values||[])D?D=!1:g+=",",g+=Wi(M);return g+"]"}(i.arrayValue):"mapValue"in i?function(l){const g=Object.keys(l.fields||{}).sort();let D="{",M=!0;for(const U of g)M?M=!1:D+=",",D+=`${U}:${Wi(l.fields[U])}`;return D+"}"}(i.mapValue):Tn();var e}function Zl(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Qa(i){return!!i&&"integerValue"in i}function La(i){return!!i&&"arrayValue"in i}function Kl(i){return!!i&&"nullValue"in i}function wo(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function zi(i){return!!i&&"mapValue"in i}function Yo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ui(i.mapValue.fields,(r,l)=>e.mapValue.fields[r]=Yo(l)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Yo(i.arrayValue.values[r]);return e}return Object.assign({},i)}class xi{constructor(e){this.value=e}static empty(){return new xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let l=0;l<e.length-1;++l)if(r=(r.mapValue.fields||{})[e.get(l)],!zi(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(r)}setAll(e){let r=pi.emptyPath(),l={},g=[];e.forEach((M,U)=>{if(!r.isImmediateParentOf(U)){const Q=this.getFieldsMap(r);this.applyChanges(Q,l,g),l={},g=[],r=U.popLast()}M?l[U.lastSegment()]=Yo(M):g.push(U.lastSegment())});const D=this.getFieldsMap(r);this.applyChanges(D,l,g)}delete(e){const r=this.field(e.popLast());zi(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Fa(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let l=0;l<e.length;++l){let g=r.mapValue.fields[e.get(l)];zi(g)&&g.mapValue.fields||(g={mapValue:{fields:{}}},r.mapValue.fields[e.get(l)]=g),r=g}return r.mapValue.fields}applyChanges(e,r,l){ui(r,(g,D)=>e[g]=D);for(const g of l)delete e[g]}clone(){return new xi(Yo(this.value))}}function Sl(i){const e=[];return ui(i.fields,(r,l)=>{const g=new pi([r]);if(zi(l)){const D=Sl(l.mapValue).fields;if(0===D.length)e.push(g);else for(const M of D)e.push(g.child(M))}else e.push(g)}),new ka(e)}class ni{constructor(e,r,l,g,D){this.key=e,this.documentType=r,this.version=l,this.data=g,this.documentState=D}static newInvalidDocument(e){return new ni(e,0,Fn.min(),xi.empty(),0)}static newFoundDocument(e,r,l){return new ni(e,1,r,l,0)}static newNoDocument(e,r){return new ni(e,2,r,xi.empty(),0)}static newUnknownDocument(e,r){return new ni(e,3,r,xi.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new ni(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kc{constructor(e,r=null,l=[],g=[],D=null,M=null,U=null){this.path=e,this.collectionGroup=r,this.orderBy=l,this.filters=g,this.limit=D,this.startAt=M,this.endAt=U,this.R=null}}function uu(i,e=null,r=[],l=[],g=null,D=null,M=null){return new kc(i,e,r,l,g,D,M)}function Ja(i){const e=Jt(i);if(null===e.R){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(l=>function(i){return i.field.canonicalString()+i.op.toString()+Oc(i.value)}(l)).join(","),r+="|ob:",r+=e.orderBy.map(l=>{return(g=l).field.canonicalString()+g.dir;var g}).join(","),Qr(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=zs(e.startAt)),e.endAt&&(r+="|ub:",r+=zs(e.endAt)),e.R=r}return e.R}function no(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let g=0;g<i.orderBy.length;g++)if(!As(i.orderBy[g],e.orderBy[g]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let g=0;g<i.filters.length;g++)if((r=i.filters[g]).op!==(l=e.filters[g]).op||!r.field.isEqual(l.field)||!Fa(r.value,l.value))return!1;var r,l;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!_l(i.startAt,e.startAt)&&_l(i.endAt,e.endAt)}function Xi(i){return Cn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class us extends class{}{constructor(e,r,l){super(),this.field=e,this.op=r,this.value=l}static create(e,r,l){return e.isKeyField()?"in"===r||"not-in"===r?this.P(e,r,l):new fh(e,r,l):"array-contains"===r?new oc(e,l):"in"===r?new Qo(e,l):"not-in"===r?new Pc(e,l):"array-contains-any"===r?new Xa(e,l):new us(e,r,l)}static P(e,r,l){return"in"===r?new Ou(e,l):new Md(e,l)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.v(Il(r,this.value)):null!==r&&zl(this.value)===zl(r)&&this.v(Il(r,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Tn()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fh extends us{constructor(e,r,l){super(e,r,l),this.key=Cn.fromName(l.referenceValue)}matches(e){const r=Cn.comparator(e.key,this.key);return this.v(r)}}class Ou extends us{constructor(e,r){super(e,"in",r),this.keys=sc(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Md extends us{constructor(e,r){super(e,"not-in",r),this.keys=sc(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function sc(i,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(l=>Cn.fromName(l.referenceValue))}class oc extends us{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return La(r)&&ql(r.arrayValue,this.value)}}class Qo extends us{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&ql(this.value.arrayValue,r)}}class Pc extends us{constructor(e,r){super(e,"not-in",r)}matches(e){if(ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!ql(this.value.arrayValue,r)}}class Xa extends us{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!La(r)||!r.arrayValue.values)&&r.arrayValue.values.some(l=>ql(this.value.arrayValue,l))}}class ml{constructor(e,r){this.position=e,this.before=r}}function zs(i){return`${i.before?"b":"a"}:${i.position.map(e=>Oc(e)).join(",")}`}class Al{constructor(e,r="asc"){this.field=e,this.dir=r}}function As(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function el(i,e,r){let l=0;for(let g=0;g<i.position.length;g++){const D=e[g],M=i.position[g];if(l=D.field.isKeyField()?Cn.comparator(Cn.fromName(M.referenceValue),r.key):Il(M,r.data.field(D.field)),"desc"===D.dir&&(l*=-1),0!==l)break}return i.before?l<=0:l<0}function _l(i,e){if(null===i)return null===e;if(null===e||i.before!==e.before||i.position.length!==e.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Fa(i.position[r],e.position[r]))return!1;return!0}class Jo{constructor(e,r=null,l=[],g=[],D=null,M="F",U=null,Q=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=l,this.filters=g,this.limit=D,this.limitType=M,this.startAt=U,this.endAt=Q,this.S=null,this.D=null}}function Yl(i,e,r,l,g,D,M,U){return new Jo(i,e,r,l,g,D,M,U)}function Nl(i){return new Jo(i)}function qs(i){return!Qr(i.limit)&&"F"===i.limitType}function F(i){return!Qr(i.limit)&&"L"===i.limitType}function $(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function X(i){for(const e of i.filters)if(e.V())return e.field;return null}function fe(i){return null!==i.collectionGroup}function Fe(i){const e=Jt(i);if(null===e.S){e.S=[];const r=X(e),l=$(e);if(null!==r&&null===l)r.isKeyField()||e.S.push(new Al(r)),e.S.push(new Al(pi.keyField(),"asc"));else{let g=!1;for(const D of e.explicitOrderBy)e.S.push(D),D.field.isKeyField()&&(g=!0);if(!g){const D=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Al(pi.keyField(),D))}}}return e.S}function it(i){const e=Jt(i);if(!e.D)if("F"===e.limitType)e.D=uu(e.path,e.collectionGroup,Fe(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const D of Fe(e))r.push(new Al(D.field,"desc"===D.dir?"asc":"desc"));const l=e.endAt?new ml(e.endAt.position,!e.endAt.before):null,g=e.startAt?new ml(e.startAt.position,!e.startAt.before):null;e.D=uu(e.path,e.collectionGroup,r,e.filters,e.limit,l,g)}return e.D}function Rt(i,e,r){return new Jo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,r,i.startAt,i.endAt)}function un(i,e){return no(it(i),it(e))&&i.limitType===e.limitType}function tn(i){return`${Ja(it(i))}|lt:${i.limitType}`}function kr(i){return`Query(target=${function(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(r=>{return`${(l=r).field.canonicalString()} ${l.op} ${Oc(l.value)}`;var l}).join(", ")}]`),Qr(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(r=>{return`${(l=r).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),i.startAt&&(e+=", startAt: "+zs(i.startAt)),i.endAt&&(e+=", endAt: "+zs(i.endAt)),`Target(${e})`}(it(i))}; limitType=${i.limitType})`}function Pr(i,e){return e.isFoundDocument()&&function(r,l){const g=l.key.path;return null!==r.collectionGroup?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(g):Cn.isDocumentKey(r.path)?r.path.isEqual(g):r.path.isImmediateParentOf(g)}(i,e)&&function(r,l){for(const g of r.explicitOrderBy)if(!g.field.isKeyField()&&null===l.data.field(g.field))return!1;return!0}(i,e)&&function(r,l){for(const g of r.filters)if(!g.matches(l))return!1;return!0}(i,e)&&(l=e,!((r=i).startAt&&!el(r.startAt,Fe(r),l)||r.endAt&&el(r.endAt,Fe(r),l)));var r,l}function Ns(i){return(e,r)=>{let l=!1;for(const g of Fe(i)){const D=es(g,e,r);if(0!==D)return D;l=l||g.field.isKeyField()}return 0}}function es(i,e,r){const l=i.field.isKeyField()?Cn.comparator(e.key,r.key):function(g,D,M){const U=D.data.field(g),Q=M.data.field(g);return null!==U&&null!==Q?Il(U,Q):Tn()}(i.field,e,r);switch(i.dir){case"asc":return l;case"desc":return-1*l;default:return Tn()}}function ri(i,e){if(i.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ka(e)?"-0":e}}function Vo(i){return{integerValue:""+i}}function ro(i,e){return Ru(e)?Vo(e):ri(i,e)}class Va{constructor(){this._=void 0}}function tl(i,e,r){return i instanceof yl?function(l,g){const D={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return g&&(D.fields.__previous_value__=g),{mapValue:D}}(r,e):i instanceof Ua?ku(i,e):i instanceof Xo?cu(i,e):function(l,g){const D=Ba(l,g),M=Pu(D)+Pu(l.N);return Qa(D)&&Qa(l.N)?Vo(M):ri(l.k,M)}(i,e)}function Do(i,e,r){return i instanceof Ua?ku(i,e):i instanceof Xo?cu(i,e):r}function Ba(i,e){return i instanceof du?Qa(r=e)||(l=r)&&"doubleValue"in l?e:{integerValue:0}:null;var l,r}class yl extends Va{}class Ua extends Va{constructor(e){super(),this.elements=e}}function ku(i,e){const r=hu(e);for(const l of i.elements)r.some(g=>Fa(g,l))||r.push(l);return{arrayValue:{values:r}}}class Xo extends Va{constructor(e){super(),this.elements=e}}function cu(i,e){let r=hu(e);for(const l of i.elements)r=r.filter(g=>!Fa(g,l));return{arrayValue:{values:r}}}class du extends Va{constructor(e,r){super(),this.k=e,this.N=r}}function Pu(i){return Ai(i.integerValue||i.doubleValue)}function hu(i){return La(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class fu{constructor(e,r){this.field=e,this.transform=r}}class Fu{constructor(e,r){this.version=e,this.transformResults=r}}class ci{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ci}static exists(e){return new ci(void 0,e)}static updateTime(e){return new ci(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Ql{}function pu(i,e,r){i instanceof Ms?function(l,g,D){const M=l.value.clone(),U=mu(l.fieldTransforms,g,D.transformResults);M.setAll(U),g.convertToFoundDocument(D.version,M).setHasCommittedMutations()}(i,e,r):i instanceof ma?function(l,g,D){if(!nl(l.precondition,g))return void g.convertToUnknownDocument(D.version);const M=mu(l.fieldTransforms,g,D.transformResults),U=g.data;U.setAll(lc(l)),U.setAll(M),g.convertToFoundDocument(D.version,U).setHasCommittedMutations()}(i,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function ga(i,e,r){var g;i instanceof Ms?function(l,g,D){if(!nl(l.precondition,g))return;const M=l.value.clone(),U=uc(l.fieldTransforms,D,g);M.setAll(U),g.convertToFoundDocument(Fc(g),M).setHasLocalMutations()}(i,e,r):i instanceof ma?function(l,g,D){if(!nl(l.precondition,g))return;const M=uc(l.fieldTransforms,D,g),U=g.data;U.setAll(lc(l)),U.setAll(M),g.convertToFoundDocument(Fc(g),U).setHasLocalMutations()}(i,e,r):nl(i.precondition,g=e)&&g.convertToNoDocument(Fn.min())}function Jl(i,e){let r=null;for(const l of i.fieldTransforms){const g=e.data.field(l.field),D=Ba(l.transform,g||null);null!=D&&(null==r&&(r=xi.empty()),r.set(l.field,D))}return r||null}function gu(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(l=e.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===l||r&&l&&En(r,l,(g,D)=>function(i,e){return i.field.isEqual(e.field)&&(l=e.transform,(r=i.transform)instanceof Ua&&l instanceof Ua||r instanceof Xo&&l instanceof Xo?En(r.elements,l.elements,Fa):r instanceof du&&l instanceof du?Fa(r.N,l.N):r instanceof yl&&l instanceof yl);var r,l}(g,D))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var r,l}function Fc(i){return i.isFoundDocument()?i.version:Fn.min()}class Ms extends Ql{constructor(e,r,l,g=[]){super(),this.key=e,this.value=r,this.precondition=l,this.fieldTransforms=g,this.type=0}}class ma extends Ql{constructor(e,r,l,g,D=[]){super(),this.key=e,this.data=r,this.fieldMask=l,this.precondition=g,this.fieldTransforms=D,this.type=1}}function lc(i){const e=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const l=i.data.field(r);e.set(r,l)}}),e}function mu(i,e,r){const l=new Map;Pn(i.length===r.length);for(let g=0;g<r.length;g++){const D=i[g],M=D.transform,U=e.data.field(D.field);l.set(D.field,Do(M,U,r[g]))}return l}function uc(i,e,r){const l=new Map;for(const g of i){const D=g.transform,M=r.data.field(g.field);l.set(g.field,tl(D,M,e))}return l}class Zs extends Ql{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class _u extends Ql{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class ph{constructor(e){this.count=e}}var cs,Zr;function Lc(i){switch(i){default:return Tn();case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0}}function Ml(i){if(void 0===i)return Ei("GRPC error has no .code"),ot.UNKNOWN;switch(i){case cs.OK:return ot.OK;case cs.CANCELLED:return ot.CANCELLED;case cs.UNKNOWN:return ot.UNKNOWN;case cs.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case cs.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case cs.INTERNAL:return ot.INTERNAL;case cs.UNAVAILABLE:return ot.UNAVAILABLE;case cs.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case cs.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case cs.NOT_FOUND:return ot.NOT_FOUND;case cs.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case cs.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case cs.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case cs.ABORTED:return ot.ABORTED;case cs.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case cs.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case cs.DATA_LOSS:return ot.DATA_LOSS;default:return Tn()}}(Zr=cs||(cs={}))[Zr.OK=0]="OK",Zr[Zr.CANCELLED=1]="CANCELLED",Zr[Zr.UNKNOWN=2]="UNKNOWN",Zr[Zr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zr[Zr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zr[Zr.NOT_FOUND=5]="NOT_FOUND",Zr[Zr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zr[Zr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zr[Zr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zr[Zr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zr[Zr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zr[Zr.ABORTED=10]="ABORTED",Zr[Zr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zr[Zr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zr[Zr.INTERNAL=13]="INTERNAL",Zr[Zr.UNAVAILABLE=14]="UNAVAILABLE",Zr[Zr.DATA_LOSS=15]="DATA_LOSS";class qi{constructor(e,r){this.comparator=e,this.root=r||Ks.EMPTY}insert(e,r){return new qi(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ks.BLACK,null,null))}remove(e){return new qi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ks.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(0===l)return r.value;l<0?r=r.left:l>0&&(r=r.right)}return null}indexOf(e){let r=0,l=this.root;for(;!l.isEmpty();){const g=this.comparator(e,l.key);if(0===g)return r+l.left.size;g<0?l=l.left:(r+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,l)=>(e(r,l),!1))}toString(){const e=[];return this.inorderTraversal((r,l)=>(e.push(`${r}:${l}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vl(this.root,e,this.comparator,!0)}}class vl{constructor(e,r,l,g){this.isReverse=g,this.nodeStack=[];let D=1;for(;!e.isEmpty();)if(D=r?l(e.key,r):1,g&&(D*=-1),D<0)e=this.isReverse?e.left:e.right;else{if(0===D){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ks{constructor(e,r,l,g,D){this.key=e,this.value=r,this.color=null!=l?l:Ks.RED,this.left=null!=g?g:Ks.EMPTY,this.right=null!=D?D:Ks.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,l,g,D){return new Ks(null!=e?e:this.key,null!=r?r:this.value,null!=l?l:this.color,null!=g?g:this.left,null!=D?D:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,l){let g=this;const D=l(e,g.key);return g=D<0?g.copy(null,null,null,g.left.insert(e,r,l),null):0===D?g.copy(null,r,null,null,null):g.copy(null,null,null,null,g.right.insert(e,r,l)),g.fixUp()}removeMin(){if(this.left.isEmpty())return Ks.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let l,g=this;if(r(e,g.key)<0)g.left.isEmpty()||g.left.isRed()||g.left.left.isRed()||(g=g.moveRedLeft()),g=g.copy(null,null,null,g.left.remove(e,r),null);else{if(g.left.isRed()&&(g=g.rotateRight()),g.right.isEmpty()||g.right.isRed()||g.right.left.isRed()||(g=g.moveRedRight()),0===r(e,g.key)){if(g.right.isEmpty())return Ks.EMPTY;l=g.right.min(),g=g.copy(l.key,l.value,null,null,g.right.removeMin())}g=g.copy(null,null,null,null,g.right.remove(e,r))}return g.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Tn();const e=this.left.check();if(e!==this.right.check())throw Tn();return e+(this.isRed()?0:1)}}Ks.EMPTY=null,Ks.RED=!0,Ks.BLACK=!1,Ks.EMPTY=new class{constructor(){this.size=0}get key(){throw Tn()}get value(){throw Tn()}get color(){throw Tn()}get left(){throw Tn()}get right(){throw Tn()}copy(i,e,r,l,g){return this}insert(i,e,r){return new Ks(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Oi{constructor(e){this.comparator=e,this.data=new qi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,l)=>(e(r),!1))}forEachInRange(e,r){const l=this.data.getIteratorFrom(e[0]);for(;l.hasNext();){const g=l.getNext();if(this.comparator(g.key,e[1])>=0)return;r(g.key)}}forEachWhile(e,r){let l;for(l=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();l.hasNext();)if(!e(l.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new gh(this.data.getIterator())}getIteratorFrom(e){return new gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(l=>{r=r.add(l)}),r}isEqual(e){if(!(e instanceof Oi)||this.size!==e.size)return!1;const r=this.data.getIterator(),l=e.data.getIterator();for(;r.hasNext();){const g=r.getNext().key,D=l.getNext().key;if(0!==this.comparator(g,D))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Oi(this.comparator);return r.data=e,r}}class gh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const ed=new qi(Cn.comparator);function Bo(){return ed}const Rd=new qi(Cn.comparator);function cc(){return Rd}const xd=new qi(Cn.comparator);function Od(){return xd}const kd=new Oi(Cn.comparator);function ii(...i){let e=kd;for(const r of i)e=e.add(r);return e}const mh=new Oi(en);function yu(){return mh}class vu{constructor(e,r,l,g,D){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=l,this.documentUpdates=g,this.resolvedLimboDocuments=D}static createSynthesizedRemoteEventForCurrentChange(e,r){const l=new Map;return l.set(e,io.createSynthesizedTargetChangeForCurrentChange(e,r)),new vu(Fn.min(),l,yu(),Bo(),ii())}}class io{constructor(e,r,l,g,D){this.resumeToken=e,this.current=r,this.addedDocuments=l,this.modifiedDocuments=g,this.removedDocuments=D}static createSynthesizedTargetChangeForCurrentChange(e,r){return new io(Si.EMPTY_BYTE_STRING,r,ii(),ii(),ii())}}class Rl{constructor(e,r,l,g){this.$=e,this.removedTargetIds=r,this.key=l,this.F=g}}class Xl{constructor(e,r){this.targetId=e,this.O=r}}class eu{constructor(e,r,l=Si.EMPTY_BYTE_STRING,g=null){this.state=e,this.targetIds=r,this.resumeToken=l,this.cause=g}}class rl{constructor(){this.M=0,this.L=xl(),this.B=Si.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=ii(),r=ii(),l=ii();return this.L.forEach((g,D)=>{switch(D){case 0:e=e.add(g);break;case 2:r=r.add(g);break;case 1:l=l.add(g);break;default:Tn()}}),new io(this.B,this.U,e,r,l)}H(){this.q=!1,this.L=xl()}J(e,r){this.q=!0,this.L=this.L.insert(e,r)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Pd{constructor(e){this.et=e,this.nt=new Map,this.st=Bo(),this.it=ja(),this.rt=new Oi(en)}ot(e){for(const r of e.$)e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F);for(const r of e.removedTargetIds)this.ct(r,e.key,e.F)}ut(e){this.forEachTarget(e,r=>{const l=this.ht(r);switch(e.state){case 0:this.lt(r)&&l.W(e.resumeToken);break;case 1:l.Z(),l.K||l.H(),l.W(e.resumeToken);break;case 2:l.Z(),l.K||this.removeTarget(r);break;case 3:this.lt(r)&&(l.tt(),l.W(e.resumeToken));break;case 4:this.lt(r)&&(this.ft(r),l.W(e.resumeToken));break;default:Tn()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.nt.forEach((l,g)=>{this.lt(g)&&r(g)})}dt(e){const r=e.targetId,l=e.O.count,g=this.wt(r);if(g){const D=g.target;if(Xi(D))if(0===l){const M=new Cn(D.path);this.ct(r,M,ni.newNoDocument(M,Fn.min()))}else Pn(1===l);else this._t(r)!==l&&(this.ft(r),this.rt=this.rt.add(r))}}gt(e){const r=new Map;this.nt.forEach((D,M)=>{const U=this.wt(M);if(U){if(D.current&&Xi(U.target)){const Q=new Cn(U.target.path);null!==this.st.get(Q)||this.yt(M,Q)||this.ct(M,Q,ni.newNoDocument(Q,e))}D.j&&(r.set(M,D.G()),D.H())}});let l=ii();this.it.forEach((D,M)=>{let U=!0;M.forEachWhile(Q=>{const ae=this.wt(Q);return!ae||2===ae.purpose||(U=!1,!1)}),U&&(l=l.add(D))});const g=new vu(e,r,this.rt,this.st,l);return this.st=Bo(),this.it=ja(),this.rt=new Oi(en),g}at(e,r){if(!this.lt(e))return;const l=this.yt(e,r.key)?2:0;this.ht(e).J(r.key,l),this.st=this.st.insert(r.key,r),this.it=this.it.insert(r.key,this.Tt(r.key).add(e))}ct(e,r,l){if(!this.lt(e))return;const g=this.ht(e);this.yt(e,r)?g.J(r,1):g.Y(r),this.it=this.it.insert(r,this.Tt(r).delete(e)),l&&(this.st=this.st.insert(r,l))}removeTarget(e){this.nt.delete(e)}_t(e){const r=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let r=this.nt.get(e);return r||(r=new rl,this.nt.set(e,r)),r}Tt(e){let r=this.it.get(e);return r||(r=new Oi(en),this.it=this.it.insert(e,r)),r}lt(e){const r=null!==this.wt(e);return r||Vt("WatchChangeAggregator","Detected inactive target",e),r}wt(e){const r=this.nt.get(e);return r&&r.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new rl),this.et.getRemoteKeysForTarget(e).forEach(r=>{this.ct(e,r,null)})}yt(e,r){return this.et.getRemoteKeysForTarget(e).has(r)}}function ja(){return new qi(Cn.comparator)}function xl(){return new qi(Cn.comparator)}const bl={asc:"ASCENDING",desc:"DESCENDING"},il={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class td{constructor(e,r){this.databaseId=e,this.C=r}}function Lu(i,e){return i.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fd(i,e){return i.C?e.toBase64():e.toUint8Array()}function Vu(i,e){return Lu(i,e.toTimestamp())}function Ci(i){return Pn(!!i),Fn.fromTimestamp(function(e){const r=Ws(e);return new Yn(r.seconds,r.nanos)}(i))}function bu(i,e){return(r=i,new In(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function dc(i){const e=In.fromString(i);return Pn(Pl(e)),e}function Bu(i,e){return bu(i.databaseId,e.path)}function _a(i,e){const r=dc(e);if(r.get(1)!==i.databaseId.projectId)throw new Tt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new Tt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Cn(y(r))}function Ol(i,e){return bu(i.databaseId,e)}function nd(i){const e=dc(i);return 4===e.length?In.emptyPath():y(e)}function C(i){return new In(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function y(i){return Pn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function w(i,e,r){return{name:Bu(i,e),fields:r.value.mapValue.fields}}function R(i,e,r){const l=_a(i,e.name),g=Ci(e.updateTime),D=new xi({mapValue:{fields:e.fields}}),M=ni.newFoundDocument(l,g,D);return r&&M.setHasCommittedMutations(),r?M.setHasCommittedMutations():M}function Re(i,e){let r;if(e instanceof Ms)r={update:w(i,e.key,e.value)};else if(e instanceof Zs)r={delete:Bu(i,e.key)};else if(e instanceof ma)r={update:w(i,e.key,e.data),updateMask:Du(e.fieldMask)};else{if(!(e instanceof _u))return Tn();r={verify:Bu(i,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(l=>function(g,D){const M=D.transform;if(M instanceof yl)return{fieldPath:D.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(M instanceof Ua)return{fieldPath:D.field.canonicalString(),appendMissingElements:{values:M.elements}};if(M instanceof Xo)return{fieldPath:D.field.canonicalString(),removeAllFromArray:{values:M.elements}};if(M instanceof du)return{fieldPath:D.field.canonicalString(),increment:M.N};throw Tn()}(0,l))),e.precondition.isNone||(r.currentDocument=void 0!==(g=e.precondition).updateTime?{updateTime:Vu(i,g.updateTime)}:void 0!==g.exists?{exists:g.exists}:Tn()),r;var g}function ft(i,e){const r=e.currentDocument?void 0!==(g=e.currentDocument).updateTime?ci.updateTime(Ci(g.updateTime)):void 0!==g.exists?ci.exists(g.exists):ci.none():ci.none(),l=e.updateTransforms?e.updateTransforms.map(g=>function(D,M){let U=null;"setToServerValue"in M?(Pn("REQUEST_TIME"===M.setToServerValue),U=new yl):"appendMissingElements"in M?U=new Ua(M.appendMissingElements.values||[]):"removeAllFromArray"in M?U=new Xo(M.removeAllFromArray.values||[]):"increment"in M?U=new du(D,M.increment):Tn();const Q=pi.fromServerFormat(M.fieldPath);return new fu(Q,U)}(i,g)):[];var g;if(e.update){const g=_a(i,e.update.name),D=new xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const M=new ka((e.updateMask.fieldPaths||[]).map(ae=>pi.fromServerFormat(ae)));return new ma(g,D,M,r,l)}return new Ms(g,D,r,l)}if(e.delete){const g=_a(i,e.delete);return new Zs(g,r)}if(e.verify){const g=_a(i,e.verify);return new _u(g,r)}return Tn()}function Bt(i,e){return{documents:[Ol(i,e.path)]}}function Un(i,e){const r={structuredQuery:{}},l=e.path;null!==e.collectionGroup?(r.parent=Ol(i,l),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=Ol(i,l.popLast()),r.structuredQuery.from=[{collectionId:l.lastSegment()}]);const g=function(U){if(0===U.length)return;const Q=U.map(ae=>function(ve){if("=="===ve.op){if(wo(ve.value))return{unaryFilter:{field:tu(ve.field),op:"IS_NAN"}};if(Kl(ve.value))return{unaryFilter:{field:tu(ve.field),op:"IS_NULL"}}}else if("!="===ve.op){if(wo(ve.value))return{unaryFilter:{field:tu(ve.field),op:"IS_NOT_NAN"}};if(Kl(ve.value))return{unaryFilter:{field:tu(ve.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tu(ve.field),op:rd(ve.op),value:ve.value}}}(ae));return 1===Q.length?Q[0]:{compositeFilter:{op:"AND",filters:Q}}}(e.filters);g&&(r.structuredQuery.where=g);const D=function(U){if(0!==U.length)return U.map(Q=>{return{field:tu((ae=Q).field),direction:wu(ae.dir)};var ae})}(e.orderBy);D&&(r.structuredQuery.orderBy=D);const M=(Q=e.limit,i.C||Qr(Q)?Q:{value:Q});var Q;return null!==M&&(r.structuredQuery.limit=M),e.startAt&&(r.structuredQuery.startAt=ya(e.startAt)),e.endAt&&(r.structuredQuery.endAt=ya(e.endAt)),r}function Wr(i){let e=nd(i.parent);const r=i.structuredQuery,l=r.from?r.from.length:0;let g=null;if(l>0){Pn(1===l);const ve=r.from[0];ve.allDescendants?g=ve.collectionId:e=e.child(ve.collectionId)}let D=[];r.where&&(D=Eo(r.where));let M=[];r.orderBy&&(M=r.orderBy.map(ve=>{return new Al(ki((je=ve).field),function(lt){switch(lt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(je.direction));var je}));let U=null;r.limit&&(U=function(ve){let je;return je="object"==typeof ve?ve.value:ve,Qr(je)?null:je}(r.limit));let Q=null;r.startAt&&(Q=ds(r.startAt));let ae=null;return r.endAt&&(ae=ds(r.endAt)),Yl(e,g,M,D,U,"F",Q,ae)}function Eo(i){return i?void 0!==i.unaryFilter?[nu(i)]:void 0!==i.fieldFilter?[kl(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Eo(e)).reduce((e,r)=>e.concat(r)):Tn():[]}function ya(i){return{before:i.before,values:i.position}}function ds(i){return new ml(i.values||[],!!i.before)}function wu(i){return bl[i]}function rd(i){return il[i]}function tu(i){return{fieldPath:i.canonicalString()}}function ki(i){return pi.fromServerFormat(i.fieldPath)}function kl(i){return us.create(ki(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tn()}}(i.fieldFilter.op),i.fieldFilter.value)}function nu(i){switch(i.unaryFilter.op){case"IS_NAN":const e=ki(i.unaryFilter.field);return us.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=ki(i.unaryFilter.field);return us.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ki(i.unaryFilter.field);return us.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=ki(i.unaryFilter.field);return us.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Tn()}}function Du(i){const e=[];return i.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Pl(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function ea(i){let e="";for(let r=0;r<i.length;r++)e.length>0&&(e=hc(e)),e=id(i.get(r),e);return hc(e)}function id(i,e){let r=e;const l=i.length;for(let g=0;g<l;g++){const D=i.charAt(g);switch(D){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=D}}return r}function hc(i){return i+"\x01\x01"}function Uo(i){const e=i.length;if(Pn(e>=2),2===e)return Pn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),In.emptyPath();const r=e-2,l=[];let g="";for(let D=0;D<e;){const M=i.indexOf("\x01",D);switch((M<0||M>r)&&Tn(),i.charAt(M+1)){case"\x01":const U=i.substring(D,M);let Q;0===g.length?Q=U:(g+=U,Q=g,g=""),l.push(Q);break;case"\x10":g+=i.substring(D,M),g+="\0";break;case"\x11":g+=i.substring(D,M+1);break;default:Tn()}D=M+2}return new In(l)}class Ld{constructor(e,r){this.seconds=e,this.nanoseconds=r}}class Co{constructor(e,r,l){this.ownerId=e,this.allowTabSynchronization=r,this.leaseTimestampMs=l}}Co.store="owner",Co.key="owner";class ws{constructor(e,r,l){this.userId=e,this.lastAcknowledgedBatchId=r,this.lastStreamToken=l}}ws.store="mutationQueues",ws.keyPath="userId";class Pi{constructor(e,r,l,g,D){this.userId=e,this.batchId=r,this.localWriteTimeMs=l,this.baseMutations=g,this.mutations=D}}Pi.store="mutations",Pi.keyPath="batchId",Pi.userMutationsIndex="userMutationsIndex",Pi.userMutationsKeyPath=["userId","batchId"];class so{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,r){return[e,ea(r)]}static key(e,r,l){return[e,ea(r),l]}}so.store="documentMutations",so.PLACEHOLDER=new so;class hf{constructor(e,r){this.path=e,this.readTime=r}}class ff{constructor(e,r){this.path=e,this.version=r}}class os{constructor(e,r,l,g,D,M){this.unknownDocument=e,this.noDocument=r,this.document=l,this.hasCommittedMutations=g,this.readTime=D,this.parentPath=M}}os.store="remoteDocuments",os.readTimeIndex="readTimeIndex",os.readTimeIndexPath="readTime",os.collectionReadTimeIndex="collectionReadTimeIndex",os.collectionReadTimeIndexPath=["parentPath","readTime"];class sl{constructor(e){this.byteSize=e}}sl.store="remoteDocumentGlobal",sl.key="remoteDocumentGlobalKey";class Rs{constructor(e,r,l,g,D,M,U){this.targetId=e,this.canonicalId=r,this.readTime=l,this.resumeToken=g,this.lastListenSequenceNumber=D,this.lastLimboFreeSnapshotVersion=M,this.query=U}}Rs.store="targets",Rs.keyPath="targetId",Rs.queryTargetsIndexName="queryTargetsIndex",Rs.queryTargetsKeyPath=["canonicalId","targetId"];class jo{constructor(e,r,l){this.targetId=e,this.path=r,this.sequenceNumber=l}}jo.store="targetDocuments",jo.keyPath=["targetId","path"],jo.documentTargetsIndex="documentTargetsIndex",jo.documentTargetsKeyPath=["path","targetId"];class oo{constructor(e,r,l,g){this.highestTargetId=e,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=l,this.targetCount=g}}oo.key="targetGlobalKey",oo.store="targetGlobal";class fc{constructor(e,r){this.collectionId=e,this.parent=r}}fc.store="collectionParents",fc.keyPath=["collectionId","parent"];class Eu{constructor(e,r,l,g){this.clientId=e,this.updateTimeMs=r,this.networkEnabled=l,this.inForeground=g}}Eu.store="clientMetadata",Eu.keyPath="clientId";class Uu{constructor(e,r,l){this.bundleId=e,this.createTime=r,this.version=l}}Uu.store="bundles",Uu.keyPath="bundleId";class ta{constructor(e,r,l){this.name=e,this.readTime=r,this.bundledQuery=l}}ta.store="namedQueries",ta.keyPath="name";const Ip=[ws.store,Pi.store,so.store,os.store,Rs.store,Co.store,oo.store,jo.store,Eu.store,sl.store,fc.store,Uu.store,ta.store],_h="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Nt((l,g)=>{this.nextCallback=D=>{this.wrapSuccess(e,D).next(l,g)},this.catchCallback=D=>{this.wrapFailure(r,D).next(l,g)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Nt?r:Nt.resolve(r)}catch(r){return Nt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Nt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Nt.reject(r)}static resolve(e){return new Nt((r,l)=>{r(e)})}static reject(e){return new Nt((r,l)=>{l(e)})}static waitFor(e){return new Nt((r,l)=>{let g=0,D=0,M=!1;e.forEach(U=>{++g,U.next(()=>{++D,M&&D===g&&r()},Q=>l(Q))}),M=!0,D===g&&r()})}static or(e){let r=Nt.resolve(!1);for(const l of e)r=r.next(g=>g?Nt.resolve(g):l());return r}static forEach(e,r){const l=[];return e.forEach((g,D)=>{l.push(r.call(this,g,D))}),this.waitFor(l)}}class Vd{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.It=new Gr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{r.error?this.It.reject(new sd(e,r.error)):this.It.resolve()},this.transaction.onerror=l=>{const g=Bd(l.target.error);this.It.reject(new sd(e,g))}}static open(e,r,l,g){try{return new Vd(r,e.transaction(g,l))}catch(D){throw new sd(r,D)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Vt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const r=this.transaction.objectStore(e);return new Sp(r)}}class Fl{constructor(e,r,l){this.name=e,this.version=r,this.Rt=l,12.2===Fl.Pt((0,ge.z$)())&&Ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Vt("SimpleDb","Removing database:",e),wl(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,ge.hl)())return!1;if(Fl.vt())return!0;const e=(0,ge.z$)(),r=Fl.Pt(e),l=0<r&&r<10,g=Fl.Vt(e),D=0<g&&g<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||l||D)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,r){return e.store(r)}static Pt(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(l)}static Vt(e){const r=e.match(/Android ([\d.]+)/i),l=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(l)}Ct(e){var r=this;return(0,T.Z)(function*(){return r.db||(Vt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((l,g)=>{const D=indexedDB.open(r.name,r.version);D.onsuccess=M=>{l(M.target.result)},D.onblocked=()=>{g(new sd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},D.onerror=M=>{const U=M.target.error;g("VersionError"===U.name?new Tt(ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===U.name?new Tt(ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+U):new sd(e,U))},D.onupgradeneeded=M=>{Vt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',M.oldVersion),r.Rt.Nt(M.target.result,D.transaction,M.oldVersion,r.version).next(()=>{Vt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.kt&&(r.db.onversionchange=l=>r.kt(l)),r.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,l,g){var D=this;return(0,T.Z)(function*(){const M="readonly"===r;let U=0;for(;;){++U;try{D.db=yield D.Ct(e);const Q=Vd.open(D.db,e,M?"readonly":"readwrite",l),ae=g(Q).catch(ve=>(Q.abort(ve),Nt.reject(ve))).toPromise();return ae.catch(()=>{}),yield Q.At,ae}catch(Q){const ae="FirebaseError"!==Q.name&&U<3;if(Vt("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",ae),D.close(),!ae)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pf{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return wl(this.$t.delete())}}class sd extends Tt{constructor(e,r){super(ot.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function pc(i){return"IndexedDbTransactionError"===i.name}class Sp{constructor(e){this.store=e}put(e,r){let l;return void 0!==r?(Vt("SimpleDb","PUT",this.store.name,e,r),l=this.store.put(r,e)):(Vt("SimpleDb","PUT",this.store.name,"<auto-key>",e),l=this.store.put(e)),wl(l)}add(e){return Vt("SimpleDb","ADD",this.store.name,e,e),wl(this.store.add(e))}get(e){return wl(this.store.get(e)).next(r=>(void 0===r&&(r=null),Vt("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Vt("SimpleDb","DELETE",this.store.name,e),wl(this.store.delete(e))}count(){return Vt("SimpleDb","COUNT",this.store.name),wl(this.store.count())}Bt(e,r){const l=this.cursor(this.options(e,r)),g=[];return this.Ut(l,(D,M)=>{g.push(M)}).next(()=>g)}qt(e,r){Vt("SimpleDb","DELETE ALL",this.store.name);const l=this.options(e,r);l.Kt=!1;const g=this.cursor(l);return this.Ut(g,(D,M,U)=>U.delete())}jt(e,r){let l;r?l=e:(l={},r=e);const g=this.cursor(l);return this.Ut(g,r)}Qt(e){const r=this.cursor({});return new Nt((l,g)=>{r.onerror=D=>{const M=Bd(D.target.error);g(M)},r.onsuccess=D=>{const M=D.target.result;M?e(M.primaryKey,M.value).next(U=>{U?M.continue():l()}):l()}})}Ut(e,r){const l=[];return new Nt((g,D)=>{e.onerror=M=>{D(M.target.error)},e.onsuccess=M=>{const U=M.target.result;if(!U)return void g();const Q=new pf(U),ae=r(U.primaryKey,U.value,Q);if(ae instanceof Nt){const ve=ae.catch(je=>(Q.done(),Nt.reject(je)));l.push(ve)}Q.isDone?g():null===Q.Mt?U.continue():U.continue(Q.Mt)}}).next(()=>Nt.waitFor(l))}options(e,r){let l;return void 0!==e&&("string"==typeof e?l=e:r=e),{index:l,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const l=this.store.index(e.index);return e.Kt?l.openKeyCursor(e.range,r):l.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function wl(i){return new Nt((e,r)=>{i.onsuccess=l=>{e(l.target.result)},i.onerror=l=>{const g=Bd(l.target.error);r(g)}})}let $a=!1;function Bd(i){const e=Fl.Pt((0,ge.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const l=new Tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $a||($a=!0,setTimeout(()=>{throw l},0)),l}}return i}class Ap extends yh{constructor(e,r){super(),this.Wt=e,this.currentSequenceNumber=r}}function na(i,e){const r=Jt(i);return Fl.Dt(r.Wt,e)}class gf{constructor(e,r,l,g){this.batchId=e,this.localWriteTime=r,this.baseMutations=l,this.mutations=g}applyToRemoteDocument(e,r){const l=r.mutationResults;for(let g=0;g<this.mutations.length;g++){const D=this.mutations[g];D.key.isEqual(e.key)&&pu(D,e,l[g])}}applyToLocalView(e){for(const r of this.baseMutations)r.key.isEqual(e.key)&&ga(r,e,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(e.key)&&ga(r,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(r=>{const l=e.get(r.key),g=l;this.applyToLocalView(g),l.isValidDocument()||g.convertToNoDocument(Fn.min())})}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ii())}isEqual(e){return this.batchId===e.batchId&&En(this.mutations,e.mutations,(r,l)=>gu(r,l))&&En(this.baseMutations,e.baseMutations,(r,l)=>gu(r,l))}}class Dl{constructor(e,r,l,g){this.batch=e,this.commitVersion=r,this.mutationResults=l,this.docVersions=g}static from(e,r,l){Pn(e.mutations.length===l.length);let g=Od();const D=e.mutations;for(let M=0;M<D.length;M++)g=g.insert(D[M].key,l[M].version);return new Dl(e,r,l,g)}}class Ll{constructor(e,r,l,g,D=Fn.min(),M=Fn.min(),U=Si.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=l,this.sequenceNumber=g,this.snapshotVersion=D,this.lastLimboFreeSnapshotVersion=M,this.resumeToken=U}withSequenceNumber(e){return new Ll(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new Ll(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ud{constructor(e){this.Gt=e}}function vh(i,e){if(e.document)return R(i.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const r=Cn.fromSegments(e.noDocument.path),l=ju(e.noDocument.readTime),g=ni.newNoDocument(r,l);return e.hasCommittedMutations?g.setHasCommittedMutations():g}if(e.unknownDocument){const r=Cn.fromSegments(e.unknownDocument.path),l=ju(e.unknownDocument.version);return ni.newUnknownDocument(r,l)}return Tn()}function jd(i,e,r){const l=gc(r),g=e.key.path.popLast().toArray();if(e.isFoundDocument()){const D={name:Bu(U=i.Gt,(Q=e).key),fields:Q.data.value.mapValue.fields,updateTime:Lu(U,Q.version.toTimestamp())};return new os(null,null,D,e.hasCommittedMutations,l,g)}var U,Q;if(e.isNoDocument()){const D=e.key.path.toArray(),M=mc(e.version),U=e.hasCommittedMutations;return new os(null,new hf(D,M),null,U,l,g)}if(e.isUnknownDocument()){const D=e.key.path.toArray(),M=mc(e.version);return new os(new ff(D,M),null,null,!0,l,g)}return Tn()}function gc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function bh(i){const e=new Yn(i[0],i[1]);return Fn.fromTimestamp(e)}function mc(i){const e=i.toTimestamp();return new Ld(e.seconds,e.nanoseconds)}function ju(i){const e=new Yn(i.seconds,i.nanoseconds);return Fn.fromTimestamp(e)}function $u(i,e){const r=(e.baseMutations||[]).map(D=>ft(i.Gt,D));for(let D=0;D<e.mutations.length-1;++D){const M=e.mutations[D];D+1<e.mutations.length&&void 0!==e.mutations[D+1].transform&&(M.updateTransforms=e.mutations[D+1].transform.fieldTransforms,e.mutations.splice(D+1,1),++D)}const l=e.mutations.map(D=>ft(i.Gt,D)),g=Yn.fromMillis(e.localWriteTimeMs);return new gf(e.batchId,g,r,l)}function _c(i){const e=ju(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?ju(i.lastLimboFreeSnapshotVersion):Fn.min();let l;var g;return void 0!==i.query.documents?(Pn(1===(g=i.query).documents.length),l=it(Nl(nd(g.documents[0])))):l=it(Wr(i.query)),new Ll(l,i.targetId,0,i.lastListenSequenceNumber,e,r,Si.fromBase64String(i.resumeToken))}function Np(i,e){const r=mc(e.snapshotVersion),l=mc(e.lastLimboFreeSnapshotVersion);let g;g=Xi(e.target)?Bt(i.Gt,e.target):Un(i.Gt,e.target);const D=e.resumeToken.toBase64();return new Rs(e.targetId,Ja(e.target),r,D,e.sequenceNumber,l,g)}function Hu(i){const e=Wr({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Rt(e,e.limit,"L"):e}class wh{getBundleMetadata(e,r){return xs(e).get(r).next(l=>{if(l)return{id:(g=l).bundleId,createTime:ju(g.createTime),version:g.version};var g})}saveBundleMetadata(e,r){return xs(e).put({bundleId:(l=r).id,createTime:mc(Ci(l.createTime)),version:l.version});var l}getNamedQuery(e,r){return Mp(e).get(r).next(l=>{if(l)return{name:(g=l).name,query:Hu(g.bundledQuery),readTime:ju(g.readTime)};var g})}saveNamedQuery(e,r){return Mp(e).put({name:(l=r).name,readTime:mc(Ci(l.readTime)),bundledQuery:l.bundledQuery});var l}}function xs(i){return na(i,Uu.store)}function Mp(i){return na(i,ta.store)}class m{constructor(){this.zt=new d}addToCollectionParentIndex(e,r){return this.zt.add(r),Nt.resolve()}getCollectionParents(e,r){return Nt.resolve(this.zt.getEntries(r))}}class d{constructor(){this.index={}}add(e){const r=e.lastSegment(),l=e.popLast(),g=this.index[r]||new Oi(In.comparator),D=!g.has(l);return this.index[r]=g.add(l),D}has(e){const r=e.lastSegment(),l=e.popLast(),g=this.index[r];return g&&g.has(l)}getEntries(e){return(this.index[e]||new Oi(In.comparator)).toArray()}}class h{constructor(){this.Ht=new d}addToCollectionParentIndex(e,r){if(!this.Ht.has(r)){const l=r.lastSegment(),g=r.popLast();e.addOnCommittedListener(()=>{this.Ht.add(r)});const D={collectionId:l,parent:ea(g)};return b(e).put(D)}return Nt.resolve()}getCollectionParents(e,r){const l=[],g=IDBKeyRange.bound([r,""],[Nr(r),""],!1,!0);return b(e).Bt(g).next(D=>{for(const M of D){if(M.collectionId!==r)break;l.push(Uo(M.parent))}return l})}}function b(i){return na(i,fc.store)}const A={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class L{constructor(e,r,l){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=l}static withCacheSize(e){return new L(e,L.DEFAULT_COLLECTION_PERCENTILE,L.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function G(i,e,r){const l=i.store(Pi.store),g=i.store(so.store),D=[],M=IDBKeyRange.only(r.batchId);let U=0;const Q=l.jt({range:M},(ve,je,lt)=>(U++,lt.delete()));D.push(Q.next(()=>{Pn(1===U)}));const ae=[];for(const ve of r.mutations){const je=so.key(e,ve.key.path,r.batchId);D.push(g.delete(je)),ae.push(ve.key)}return Nt.waitFor(D).next(()=>ae)}function se(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Tn();e=i.noDocument}return JSON.stringify(e).length}L.DEFAULT_COLLECTION_PERCENTILE=10,L.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,L.DEFAULT=new L(41943040,L.DEFAULT_COLLECTION_PERCENTILE,L.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),L.DISABLED=new L(-1,0,0);class pe{constructor(e,r,l,g){this.userId=e,this.k=r,this.Jt=l,this.referenceDelegate=g,this.Yt={}}static Xt(e,r,l,g){Pn(""!==e.uid);const D=e.isAuthenticated()?e.uid:"";return new pe(D,r,l,g)}checkEmpty(e){let r=!0;const l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return st(e).jt({index:Pi.userMutationsIndex,range:l},(g,D,M)=>{r=!1,M.done()}).next(()=>r)}addMutationBatch(e,r,l,g){const D=nt(e),M=st(e);return M.add({}).next(U=>{Pn("number"==typeof U);const Q=new gf(U,r,l,g),ae=function(lt,Mt,Wt){const jn=Wt.baseMutations.map(ia=>Re(lt.Gt,ia)),Qn=Wt.mutations.map(ia=>Re(lt.Gt,ia));return new Pi(Mt,Wt.batchId,Wt.localWriteTime.toMillis(),jn,Qn)}(this.k,this.userId,Q),ve=[];let je=new Oi((lt,Mt)=>en(lt.canonicalString(),Mt.canonicalString()));for(const lt of g){const Mt=so.key(this.userId,lt.key.path,U);je=je.add(lt.key.path.popLast()),ve.push(M.put(ae)),ve.push(D.put(Mt,so.PLACEHOLDER))}return je.forEach(lt=>{ve.push(this.Jt.addToCollectionParentIndex(e,lt))}),e.addOnCommittedListener(()=>{this.Yt[U]=Q.keys()}),Nt.waitFor(ve).next(()=>Q)})}lookupMutationBatch(e,r){return st(e).get(r).next(l=>l?(Pn(l.userId===this.userId),$u(this.k,l)):null)}Zt(e,r){return this.Yt[r]?Nt.resolve(this.Yt[r]):this.lookupMutationBatch(e,r).next(l=>{if(l){const g=l.keys();return this.Yt[r]=g,g}return null})}getNextMutationBatchAfterBatchId(e,r){const l=r+1,g=IDBKeyRange.lowerBound([this.userId,l]);let D=null;return st(e).jt({index:Pi.userMutationsIndex,range:g},(M,U,Q)=>{U.userId===this.userId&&(Pn(U.batchId>=l),D=$u(this.k,U)),Q.done()}).next(()=>D)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let l=-1;return st(e).jt({index:Pi.userMutationsIndex,range:r,reverse:!0},(g,D,M)=>{l=D.batchId,M.done()}).next(()=>l)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return st(e).Bt(Pi.userMutationsIndex,r).next(l=>l.map(g=>$u(this.k,g)))}getAllMutationBatchesAffectingDocumentKey(e,r){const l=so.prefixForPath(this.userId,r.path),g=IDBKeyRange.lowerBound(l),D=[];return nt(e).jt({range:g},(M,U,Q)=>{const[ae,ve,je]=M,lt=Uo(ve);if(ae===this.userId&&r.path.isEqual(lt))return st(e).get(je).next(Mt=>{if(!Mt)throw Tn();Pn(Mt.userId===this.userId),D.push($u(this.k,Mt))});Q.done()}).next(()=>D)}getAllMutationBatchesAffectingDocumentKeys(e,r){let l=new Oi(en);const g=[];return r.forEach(D=>{const M=so.prefixForPath(this.userId,D.path),U=IDBKeyRange.lowerBound(M),Q=nt(e).jt({range:U},(ae,ve,je)=>{const[lt,Mt,Wt]=ae,jn=Uo(Mt);lt===this.userId&&D.path.isEqual(jn)?l=l.add(Wt):je.done()});g.push(Q)}),Nt.waitFor(g).next(()=>this.te(e,l))}getAllMutationBatchesAffectingQuery(e,r){const l=r.path,g=l.length+1,D=so.prefixForPath(this.userId,l),M=IDBKeyRange.lowerBound(D);let U=new Oi(en);return nt(e).jt({range:M},(Q,ae,ve)=>{const[je,lt,Mt]=Q,Wt=Uo(lt);je===this.userId&&l.isPrefixOf(Wt)?Wt.length===g&&(U=U.add(Mt)):ve.done()}).next(()=>this.te(e,U))}te(e,r){const l=[],g=[];return r.forEach(D=>{g.push(st(e).get(D).next(M=>{if(null===M)throw Tn();Pn(M.userId===this.userId),l.push($u(this.k,M))}))}),Nt.waitFor(g).next(()=>l)}removeMutationBatch(e,r){return G(e.Wt,this.userId,r).next(l=>(e.addOnCommittedListener(()=>{this.ee(r.batchId)}),Nt.forEach(l,g=>this.referenceDelegate.markPotentiallyOrphaned(e,g))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Nt.resolve();const l=IDBKeyRange.lowerBound(so.prefixForUser(this.userId)),g=[];return nt(e).jt({range:l},(D,M,U)=>{if(D[0]===this.userId){const Q=Uo(D[1]);g.push(Q)}else U.done()}).next(()=>{Pn(0===g.length)})})}containsKey(e,r){return Ce(e,this.userId,r)}ne(e){return Dt(e).get(this.userId).next(r=>r||new ws(this.userId,-1,""))}}function Ce(i,e,r){const l=so.prefixForPath(e,r.path),g=l[1],D=IDBKeyRange.lowerBound(l);let M=!1;return nt(i).jt({range:D,Kt:!0},(U,Q,ae)=>{const[ve,je,lt]=U;ve===e&&je===g&&(M=!0),ae.done()}).next(()=>M)}function st(i){return na(i,Pi.store)}function nt(i){return na(i,so.store)}function Dt(i){return na(i,ws.store)}class pn{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new pn(0)}static re(){return new pn(-1)}}class zn{constructor(e,r){this.referenceDelegate=e,this.k=r}allocateTargetId(e){return this.oe(e).next(r=>{const l=new pn(r.highestTargetId);return r.highestTargetId=l.next(),this.ae(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(r=>Fn.fromTimestamp(new Yn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,l){return this.oe(e).next(g=>(g.highestListenSequenceNumber=r,l&&(g.lastRemoteSnapshotVersion=l.toTimestamp()),r>g.highestListenSequenceNumber&&(g.highestListenSequenceNumber=r),this.ae(e,g)))}addTargetData(e,r){return this.ce(e,r).next(()=>this.oe(e).next(l=>(l.targetCount+=1,this.ue(r,l),this.ae(e,l))))}updateTargetData(e,r){return this.ce(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Fr(e).delete(r.targetId)).next(()=>this.oe(e)).next(l=>(Pn(l.targetCount>0),l.targetCount-=1,this.ae(e,l)))}removeTargets(e,r,l){let g=0;const D=[];return Fr(e).jt((M,U)=>{const Q=_c(U);Q.sequenceNumber<=r&&null===l.get(Q.targetId)&&(g++,D.push(this.removeTargetData(e,Q)))}).next(()=>Nt.waitFor(D)).next(()=>g)}forEachTarget(e,r){return Fr(e).jt((l,g)=>{const D=_c(g);r(D)})}oe(e){return ao(e).get(oo.key).next(r=>(Pn(null!==r),r))}ae(e,r){return ao(e).put(oo.key,r)}ce(e,r){return Fr(e).put(Np(this.k,r))}ue(e,r){let l=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,l=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,l=!0),l}getTargetCount(e){return this.oe(e).next(r=>r.targetCount)}getTargetData(e,r){const l=Ja(r),g=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]);let D=null;return Fr(e).jt({range:g,index:Rs.queryTargetsIndexName},(M,U,Q)=>{const ae=_c(U);no(r,ae.target)&&(D=ae,Q.done())}).next(()=>D)}addMatchingKeys(e,r,l){const g=[],D=Vl(e);return r.forEach(M=>{const U=ea(M.path);g.push(D.put(new jo(l,U))),g.push(this.referenceDelegate.addReference(e,l,M))}),Nt.waitFor(g)}removeMatchingKeys(e,r,l){const g=Vl(e);return Nt.forEach(r,D=>{const M=ea(D.path);return Nt.waitFor([g.delete([l,M]),this.referenceDelegate.removeReference(e,l,D)])})}removeMatchingKeysForTargetId(e,r){const l=Vl(e),g=IDBKeyRange.bound([r],[r+1],!1,!0);return l.delete(g)}getMatchingKeysForTargetId(e,r){const l=IDBKeyRange.bound([r],[r+1],!1,!0),g=Vl(e);let D=ii();return g.jt({range:l,Kt:!0},(M,U,Q)=>{const ae=Uo(M[1]),ve=new Cn(ae);D=D.add(ve)}).next(()=>D)}containsKey(e,r){const l=ea(r.path),g=IDBKeyRange.bound([l],[Nr(l)],!1,!0);let D=0;return Vl(e).jt({index:jo.documentTargetsIndex,Kt:!0,range:g},([M,U],Q,ae)=>{0!==M&&(D++,ae.done())}).next(()=>D>0)}Et(e,r){return Fr(e).get(r).next(l=>l?_c(l):null)}}function Fr(i){return na(i,Rs.store)}function ao(i){return na(i,oo.store)}function Vl(i){return na(i,jo.store)}function Bl(i){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,T.Z)(function*(i){if(i.code!==ot.FAILED_PRECONDITION||i.message!==_h)throw i;Vt("LocalStore","Unexpectedly lost primary lease")}),Gu.apply(this,arguments)}function mf([i,e],[r,l]){const g=en(i,r);return 0===g?en(e,l):g}class em{constructor(e){this.he=e,this.buffer=new Oi(mf),this.le=0}fe(){return++this.le}de(e){const r=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(r);else{const l=this.buffer.last();mf(r,l)<0&&(this.buffer=this.buffer.delete(l).add(r))}}get maxValue(){return this.buffer.last()[0]}}class tm{constructor(e,r){this.garbageCollector=e,this.asyncQueue=r,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var r=this;const l=this.we?3e5:6e4;Vt("LruGarbageCollector",`Garbage collection scheduled in ${l}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",l,(0,T.Z)(function*(){r._e=null,r.we=!0;try{yield e.collectGarbage(r.garbageCollector)}catch(g){pc(g)?Vt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",g):yield Bl(g)}yield r.me(e)}))}}class nm{constructor(e,r){this.ge=e,this.params=r}calculateTargetCount(e,r){return this.ge.ye(e).next(l=>Math.floor(r/100*l))}nthSequenceNumber(e,r){if(0===r)return Nt.resolve(we.I);const l=new em(r);return this.ge.forEachTarget(e,g=>l.de(g.sequenceNumber)).next(()=>this.ge.pe(e,g=>l.de(g))).next(()=>l.maxValue)}removeTargets(e,r,l){return this.ge.removeTargets(e,r,l)}removeOrphanedDocuments(e,r){return this.ge.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector","Garbage collection skipped; disabled"),Nt.resolve(A)):this.getCacheSize(e).next(l=>l<this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A):this.Te(e,r))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,r){let l,g,D,M,U,Q,ae;const ve=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(je=>(je>this.params.maximumSequenceNumbersToCollect?(Vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${je}`),g=this.params.maximumSequenceNumbersToCollect):g=je,M=Date.now(),this.nthSequenceNumber(e,g))).next(je=>(l=je,U=Date.now(),this.removeTargets(e,l,r))).next(je=>(D=je,Q=Date.now(),this.removeOrphanedDocuments(e,l))).next(je=>(ae=Date.now(),Gl()<=K.in.DEBUG&&Vt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${M-ve}ms\n\tDetermined least recently used ${g} in `+(U-M)+`ms\n\tRemoved ${D} targets in `+(Q-U)+`ms\n\tRemoved ${je} documents in `+(ae-Q)+`ms\nTotal Duration: ${ae-ve}ms`),Nt.resolve({didRun:!0,sequenceNumbersCollected:g,targetsRemoved:D,documentsRemoved:je})))}}class Rp{constructor(e,r){this.db=e,this.garbageCollector=new nm(this,r)}ye(e){const r=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(l=>r.next(g=>l+g))}Ee(e){let r=0;return this.pe(e,l=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}pe(e,r){return this.Ie(e,(l,g)=>r(g))}addReference(e,r,l){return Dh(e,l)}removeReference(e,r,l){return Dh(e,l)}removeTargets(e,r,l){return this.db.getTargetCache().removeTargets(e,r,l)}markPotentiallyOrphaned(e,r){return Dh(e,r)}Ae(e,r){return function(l,g){let D=!1;return Dt(l).Qt(M=>Ce(l,M,g).next(U=>(U&&(D=!0),Nt.resolve(!U)))).next(()=>D)}(e,r)}removeOrphanedDocuments(e,r){const l=this.db.getRemoteDocumentCache().newChangeBuffer(),g=[];let D=0;return this.Ie(e,(M,U)=>{if(U<=r){const Q=this.Ae(e,M).next(ae=>{if(!ae)return D++,l.getEntry(e,M).next(()=>(l.removeEntry(M),Vl(e).delete([0,ea(M.path)])))});g.push(Q)}}).next(()=>Nt.waitFor(g)).next(()=>l.apply(e)).next(()=>D)}removeTarget(e,r){const l=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,l)}updateLimboDocument(e,r){return Dh(e,r)}Ie(e,r){const l=Vl(e);let g,D=we.I;return l.jt({index:jo.documentTargetsIndex},([M,U],{path:Q,sequenceNumber:ae})=>{0===M?(D!==we.I&&r(new Cn(Uo(g)),D),D=ae,g=Q):D=we.I}).next(()=>{D!==we.I&&r(new Cn(Uo(g)),D)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dh(i,e){return Vl(i).put((l=i.currentSequenceNumber,new jo(0,ea(e.path),l)));var l}class yc{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={}}get(e){const r=this.mapKeyFn(e),l=this.inner[r];if(void 0!==l)for(const[g,D]of l)if(this.equalsFn(g,e))return D}has(e){return void 0!==this.get(e)}set(e,r){const l=this.mapKeyFn(e),g=this.inner[l];if(void 0!==g){for(let D=0;D<g.length;D++)if(this.equalsFn(g[D][0],e))return void(g[D]=[e,r]);g.push([e,r])}else this.inner[l]=[[e,r]]}delete(e){const r=this.mapKeyFn(e),l=this.inner[r];if(void 0===l)return!1;for(let g=0;g<l.length;g++)if(this.equalsFn(l[g][0],e))return 1===l.length?delete this.inner[r]:l.splice(g,1),!0;return!1}forEach(e){ui(this.inner,(r,l)=>{for(const[g,D]of l)e(g,D)})}isEmpty(){return bs(this.inner)}}class Eh{constructor(){this.changes=new yc(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}getReadTime(e){const r=this.changes.get(e);return r?r.readTime:Fn.min()}addEntry(e,r){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:r})}removeEntry(e,r=null){this.assertNotApplied(),this.changes.set(e,{document:ni.newInvalidDocument(e),readTime:r})}getEntry(e,r){this.assertNotApplied();const l=this.changes.get(r);return void 0!==l?Nt.resolve(l.document):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rm{constructor(e,r){this.k=e,this.Jt=r}addEntry(e,r,l){return Wu(e).put(Vc(r),l)}removeEntry(e,r){const l=Wu(e),g=Vc(r);return l.delete(g)}updateMetadata(e,r){return this.getMetadata(e).next(l=>(l.byteSize+=r,this.Re(e,l)))}getEntry(e,r){return Wu(e).get(Vc(r)).next(l=>this.Pe(r,l))}be(e,r){return Wu(e).get(Vc(r)).next(l=>({document:this.Pe(r,l),size:se(l)}))}getEntries(e,r){let l=Bo();return this.ve(e,r,(g,D)=>{const M=this.Pe(g,D);l=l.insert(g,M)}).next(()=>l)}Ve(e,r){let l=Bo(),g=new qi(Cn.comparator);return this.ve(e,r,(D,M)=>{const U=this.Pe(D,M);l=l.insert(D,U),g=g.insert(D,se(M))}).next(()=>({documents:l,Se:g}))}ve(e,r,l){if(r.isEmpty())return Nt.resolve();const g=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),D=r.getIterator();let M=D.getNext();return Wu(e).jt({range:g},(U,Q,ae)=>{const ve=Cn.fromSegments(U);for(;M&&Cn.comparator(M,ve)<0;)l(M,null),M=D.getNext();M&&M.isEqual(ve)&&(l(M,Q),M=D.hasNext()?D.getNext():null),M?ae.Lt(M.path.toArray()):ae.done()}).next(()=>{for(;M;)l(M,null),M=D.hasNext()?D.getNext():null})}getDocumentsMatchingQuery(e,r,l){let g=Bo();const D=r.path.length+1,M={};if(l.isEqual(Fn.min())){const U=r.path.toArray();M.range=IDBKeyRange.lowerBound(U)}else{const U=r.path.toArray(),Q=gc(l);M.range=IDBKeyRange.lowerBound([U,Q],!0),M.index=os.collectionReadTimeIndex}return Wu(e).jt(M,(U,Q,ae)=>{if(U.length!==D)return;const ve=vh(this.k,Q);r.path.isPrefixOf(ve.key.path)?Pr(r,ve)&&(g=g.insert(ve.key,ve)):ae.done()}).next(()=>g)}newChangeBuffer(e){return new xp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Op(e).get(sl.key).next(r=>(Pn(!!r),r))}Re(e,r){return Op(e).put(sl.key,r)}Pe(e,r){if(r){const l=vh(this.k,r);if(!l.isNoDocument()||!l.version.isEqual(Fn.min()))return l}return ni.newInvalidDocument(e)}}class xp extends Eh{constructor(e,r){super(),this.De=e,this.trackRemovals=r,this.Ce=new yc(l=>l.toString(),(l,g)=>l.isEqual(g))}applyChanges(e){const r=[];let l=0,g=new Oi((D,M)=>en(D.canonicalString(),M.canonicalString()));return this.changes.forEach((D,M)=>{const U=this.Ce.get(D);if(M.document.isValidDocument()){const Q=jd(this.De.k,M.document,this.getReadTime(D));g=g.add(D.path.popLast()),l+=se(Q)-U,r.push(this.De.addEntry(e,D,Q))}else if(l-=U,this.trackRemovals){const Q=jd(this.De.k,ni.newNoDocument(D,Fn.min()),this.getReadTime(D));r.push(this.De.addEntry(e,D,Q))}else r.push(this.De.removeEntry(e,D))}),g.forEach(D=>{r.push(this.De.Jt.addToCollectionParentIndex(e,D))}),r.push(this.De.updateMetadata(e,l)),Nt.waitFor(r)}getFromCache(e,r){return this.De.be(e,r).next(l=>(this.Ce.set(r,l.size),l.document))}getAllFromCache(e,r){return this.De.Ve(e,r).next(({documents:l,Se:g})=>(g.forEach((D,M)=>{this.Ce.set(D,M)}),l))}}function Op(i){return na(i,sl.store)}function Wu(i){return na(i,os.store)}function Vc(i){return i.path.toArray()}class im{constructor(e){this.k=e}Nt(e,r,l,g){Pn(l<g&&l>=0&&g<=11);const D=new Vd("createOrUpgrade",r);var U;l<1&&g>=1&&(e.createObjectStore(Co.store),(U=e).createObjectStore(ws.store,{keyPath:ws.keyPath}),U.createObjectStore(Pi.store,{keyPath:Pi.keyPath,autoIncrement:!0}).createIndex(Pi.userMutationsIndex,Pi.userMutationsKeyPath,{unique:!0}),U.createObjectStore(so.store),kp(e),function(U){U.createObjectStore(os.store)}(e));let M=Nt.resolve();return l<3&&g>=3&&(0!==l&&(function(U){U.deleteObjectStore(jo.store),U.deleteObjectStore(Rs.store),U.deleteObjectStore(oo.store)}(e),kp(e)),M=M.next(()=>function(U){const Q=U.store(oo.store),ae=new oo(0,0,Fn.min().toTimestamp(),0);return Q.put(oo.key,ae)}(D))),l<4&&g>=4&&(0!==l&&(M=M.next(()=>function(U,Q){return Q.store(Pi.store).Bt().next(ae=>{U.deleteObjectStore(Pi.store),U.createObjectStore(Pi.store,{keyPath:Pi.keyPath,autoIncrement:!0}).createIndex(Pi.userMutationsIndex,Pi.userMutationsKeyPath,{unique:!0});const ve=Q.store(Pi.store),je=ae.map(lt=>ve.put(lt));return Nt.waitFor(je)})}(e,D))),M=M.next(()=>{!function(U){U.createObjectStore(Eu.store,{keyPath:Eu.keyPath})}(e)})),l<5&&g>=5&&(M=M.next(()=>this.Ne(D))),l<6&&g>=6&&(M=M.next(()=>(function(U){U.createObjectStore(sl.store)}(e),this.ke(D)))),l<7&&g>=7&&(M=M.next(()=>this.xe(D))),l<8&&g>=8&&(M=M.next(()=>this.$e(e,D))),l<9&&g>=9&&(M=M.next(()=>{(function(U){U.objectStoreNames.contains("remoteDocumentChanges")&&U.deleteObjectStore("remoteDocumentChanges")})(e),function(U){const Q=U.objectStore(os.store);Q.createIndex(os.readTimeIndex,os.readTimeIndexPath,{unique:!1}),Q.createIndex(os.collectionReadTimeIndex,os.collectionReadTimeIndexPath,{unique:!1})}(r)})),l<10&&g>=10&&(M=M.next(()=>this.Fe(D))),l<11&&g>=11&&(M=M.next(()=>{(function(U){U.createObjectStore(Uu.store,{keyPath:Uu.keyPath})})(e),function(U){U.createObjectStore(ta.store,{keyPath:ta.keyPath})}(e)})),M}ke(e){let r=0;return e.store(os.store).jt((l,g)=>{r+=se(g)}).next(()=>{const l=new sl(r);return e.store(sl.store).put(sl.key,l)})}Ne(e){const r=e.store(ws.store),l=e.store(Pi.store);return r.Bt().next(g=>Nt.forEach(g,D=>{const M=IDBKeyRange.bound([D.userId,-1],[D.userId,D.lastAcknowledgedBatchId]);return l.Bt(Pi.userMutationsIndex,M).next(U=>Nt.forEach(U,Q=>{Pn(Q.userId===D.userId);const ae=$u(this.k,Q);return G(e,D.userId,ae).next(()=>{})}))}))}xe(e){const r=e.store(jo.store),l=e.store(os.store);return e.store(oo.store).get(oo.key).next(g=>{const D=[];return l.jt((M,U)=>{const Q=new In(M),ae=[0,ea(Q)];D.push(r.get(ae).next(ve=>ve?Nt.resolve():r.put(new jo(0,ea(Q),g.highestListenSequenceNumber))))}).next(()=>Nt.waitFor(D))})}$e(e,r){e.createObjectStore(fc.store,{keyPath:fc.keyPath});const l=r.store(fc.store),g=new d,D=M=>{if(g.add(M)){const U=M.lastSegment(),Q=M.popLast();return l.put({collectionId:U,parent:ea(Q)})}};return r.store(os.store).jt({Kt:!0},(M,U)=>{const Q=new In(M);return D(Q.popLast())}).next(()=>r.store(so.store).jt({Kt:!0},([M,U,Q],ae)=>{const ve=Uo(U);return D(ve.popLast())}))}Fe(e){const r=e.store(Rs.store);return r.jt((l,g)=>{const D=_c(g),M=Np(this.k,D);return r.put(M)})}}function kp(i){i.createObjectStore(jo.store,{keyPath:jo.keyPath}).createIndex(jo.documentTargetsIndex,jo.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(Rs.store,{keyPath:Rs.keyPath}).createIndex(Rs.queryTargetsIndexName,Rs.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(oo.store)}const Pp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fp{constructor(e,r,l,g,D,M,U,Q,ae,ve){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=l,this.Oe=D,this.window=M,this.document=U,this.Me=ae,this.Le=ve,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=je=>Promise.resolve(),!Fp.bt())throw new Tt(ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rp(this,g),this.Ge=r+"main",this.k=new Ud(Q),this.ze=new Fl(this.Ge,11,new im(this.k)),this.He=new zn(this.referenceDelegate,this.k),this.Jt=new h,this.Je=new rm(this.k,this.Jt),this.Ye=new wh,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===ve&&Ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tt(ot.FAILED_PRECONDITION,Pp);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new we(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var r=this;return this.We=function(){var l=(0,T.Z)(function*(g){if(r.started)return e(g)});return function(g){return l.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var r=(0,T.Z)(function*(l){null===l.newVersion&&(yield e())});return function(l){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,T.Z)(function*(){r.started&&(yield r.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hd(e).put(new Eu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(r=>this.isPrimary&&!r?this.an(e).next(()=>!1):!!r&&this.cn(e).next(()=>!0))).catch(e=>{if(pc(e))return Vt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Vt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return $d(e).get(Co.key).next(r=>Nt.resolve(this.un(r)))}hn(e){return Hd(e).delete(this.clientId)}ln(){var e=this;return(0,T.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",l=>{const g=na(l,Eu.store);return g.Bt().next(D=>{const M=e.dn(D,18e5),U=D.filter(Q=>-1===M.indexOf(Q));return Nt.forEach(U,Q=>g.delete(Q.clientId)).next(()=>U)})}).catch(()=>[]);if(e.Xe)for(const l of r)e.Xe.removeItem(e.wn(l.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Nt.resolve(!0):$d(e).get(Co.key).next(r=>{if(null!==r&&this.fn(r.leaseTimestampMs,5e3)&&!this._n(r.ownerId)){if(this.un(r)&&this.networkEnabled)return!0;if(!this.un(r)){if(!r.allowTabSynchronization)throw new Tt(ot.FAILED_PRECONDITION,Pp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hd(e).Bt().next(l=>void 0===this.dn(l,5e3).find(g=>{if(this.clientId!==g.clientId){const M=!this.inForeground&&g.inForeground,U=this.networkEnabled===g.networkEnabled;if(!this.networkEnabled&&g.networkEnabled||M&&U)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Vt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,T.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Co.store,Eu.store],r=>{const l=new Ap(r,we.I);return e.an(l).next(()=>e.hn(l))}),e.ze.close(),e.pn()})()}dn(e,r){return e.filter(l=>this.fn(l.updateTimeMs,r)&&!this._n(l.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Hd(e).Bt().next(r=>this.dn(r,18e5).map(l=>l.clientId)))}get started(){return this.Ue}getMutationQueue(e){return pe.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,r,l){let D;return Vt("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===r?"readonly":"readwrite",Ip,M=>(D=new Ap(M,this.Be?this.Be.next():we.I),"readwrite-primary"===r?this.rn(D).next(U=>!!U||this.on(D)).next(U=>{if(!U)throw Ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Tt(ot.FAILED_PRECONDITION,_h);return l(D)}).next(U=>this.cn(D).next(()=>U)):this.En(D).next(()=>l(D)))).then(M=>(D.raiseOnCommittedEvent(),M))}En(e){return $d(e).get(Co.key).next(r=>{if(null!==r&&this.fn(r.leaseTimestampMs,5e3)&&!this._n(r.ownerId)&&!this.un(r)&&!(this.Le||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Tt(ot.FAILED_PRECONDITION,Pp)})}cn(e){const r=new Co(this.clientId,this.allowTabSynchronization,Date.now());return $d(e).put(Co.key,r)}static bt(){return Fl.bt()}an(e){const r=$d(e);return r.get(Co.key).next(l=>this.un(l)?(Vt("IndexedDbPersistence","Releasing primary lease."),r.delete(Co.key)):Nt.resolve())}fn(e,r){const l=Date.now();return!(e<l-r||e>l&&(Ei(`Detected an update time that is in the future: ${e} > ${l}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,ge.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var r;try{const l=null!==(null===(r=this.Xe)||void 0===r?void 0:r.getItem(this.wn(e)));return Vt("IndexedDbPersistence",`Client '${e}' ${l?"is":"is not"} zombied in LocalStorage`),l}catch(l){return Ei("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Ei("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $d(i){return na(i,Co.store)}function Hd(i){return na(i,Eu.store)}function _f(i,e){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+e+"/"+r+"/"}class sm{constructor(e,r){this.progress=e,this.In=r}}class Lp{constructor(e,r,l){this.Je=e,this.An=r,this.Jt=l}Rn(e,r){return this.An.getAllMutationBatchesAffectingDocumentKey(e,r).next(l=>this.Pn(e,r,l))}Pn(e,r,l){return this.Je.getEntry(e,r).next(g=>{for(const D of l)D.applyToLocalView(g);return g})}bn(e,r){e.forEach((l,g)=>{for(const D of r)D.applyToLocalView(g)})}vn(e,r){return this.Je.getEntries(e,r).next(l=>this.Vn(e,l).next(()=>l))}Vn(e,r){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,r).next(l=>this.bn(r,l))}getDocumentsMatchingQuery(e,r,l){return Cn.isDocumentKey((g=r).path)&&null===g.collectionGroup&&0===g.filters.length?this.Sn(e,r.path):fe(r)?this.Dn(e,r,l):this.Cn(e,r,l);var g}Sn(e,r){return this.Rn(e,new Cn(r)).next(l=>{let g=cc();return l.isFoundDocument()&&(g=g.insert(l.key,l)),g})}Dn(e,r,l){const g=r.collectionGroup;let D=cc();return this.Jt.getCollectionParents(e,g).next(M=>Nt.forEach(M,U=>{const Q=(ae=r,ve=U.child(g),new Jo(ve,null,ae.explicitOrderBy.slice(),ae.filters.slice(),ae.limit,ae.limitType,ae.startAt,ae.endAt));var ae,ve;return this.Cn(e,Q,l).next(ae=>{ae.forEach((ve,je)=>{D=D.insert(ve,je)})})}).next(()=>D))}Cn(e,r,l){let g,D;return this.Je.getDocumentsMatchingQuery(e,r,l).next(M=>(g=M,this.An.getAllMutationBatchesAffectingQuery(e,r))).next(M=>(D=M,this.Nn(e,D,g).next(U=>{g=U;for(const Q of D)for(const ae of Q.mutations){const ve=ae.key;let je=g.get(ve);null==je&&(je=ni.newInvalidDocument(ve),g=g.insert(ve,je)),ga(ae,je,Q.localWriteTime),je.isFoundDocument()||(g=g.remove(ve))}}))).next(()=>(g.forEach((M,U)=>{Pr(r,U)||(g=g.remove(M))}),g))}Nn(e,r,l){let g=ii();for(const M of r)for(const U of M.mutations)U instanceof ma&&null===l.get(U.key)&&(g=g.add(U.key));let D=l;return this.Je.getEntries(e,g).next(M=>(M.forEach((U,Q)=>{Q.isFoundDocument()&&(D=D.insert(U,Q))}),D))}}class El{constructor(e,r,l,g){this.targetId=e,this.fromCache=r,this.kn=l,this.xn=g}static $n(e,r){let l=ii(),g=ii();for(const D of r.docChanges)switch(D.type){case 0:l=l.add(D.doc.key);break;case 1:g=g.add(D.doc.key)}return new El(e,r.fromCache,l,g)}}class ts{Fn(e){this.On=e}getDocumentsMatchingQuery(e,r,l,g){return 0===(D=r).filters.length&&null===D.limit&&null==D.startAt&&null==D.endAt&&(0===D.explicitOrderBy.length||1===D.explicitOrderBy.length&&D.explicitOrderBy[0].field.isKeyField())||l.isEqual(Fn.min())?this.Mn(e,r):this.On.vn(e,g).next(D=>{const M=this.Ln(r,D);return(qs(r)||F(r))&&this.Bn(r.limitType,M,g,l)?this.Mn(e,r):(Gl()<=K.in.DEBUG&&Vt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),kr(r)),this.On.getDocumentsMatchingQuery(e,r,l).next(U=>(M.forEach(Q=>{U=U.insert(Q.key,Q)}),U)))});var D}Ln(e,r){let l=new Oi(Ns(e));return r.forEach((g,D)=>{Pr(e,D)&&(l=l.add(D))}),l}Bn(e,r,l,g){if(l.size!==r.size)return!0;const D="F"===e?r.last():r.first();return!!D&&(D.hasPendingWrites||D.version.compareTo(g)>0)}Mn(e,r){return Gl()<=K.in.DEBUG&&Vt("QueryEngine","Using full collection scan to execute query:",kr(r)),this.On.getDocumentsMatchingQuery(e,r,Fn.min())}}class yf{constructor(e,r,l,g){this.persistence=e,this.Un=r,this.k=g,this.qn=new qi(en),this.Kn=new yc(D=>Ja(D),no),this.jn=Fn.min(),this.An=e.getMutationQueue(l),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Lp(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.qn))}}function vf(i,e,r,l){return new yf(i,e,r,l)}function ol(i,e){return bf.apply(this,arguments)}function bf(){return bf=(0,T.Z)(function*(i,e){const r=Jt(i);let l=r.An,g=r.Wn;const D=yield r.persistence.runTransaction("Handle user change","readonly",M=>{let U;return r.An.getAllMutationBatches(M).next(Q=>(U=Q,l=r.persistence.getMutationQueue(e),g=new Lp(r.Qn,l,r.persistence.getIndexManager()),l.getAllMutationBatches(M))).next(Q=>{const ae=[],ve=[];let je=ii();for(const lt of U){ae.push(lt.batchId);for(const Mt of lt.mutations)je=je.add(Mt.key)}for(const lt of Q){ve.push(lt.batchId);for(const Mt of lt.mutations)je=je.add(Mt.key)}return g.vn(M,je).next(lt=>({Gn:lt,removedBatchIds:ae,addedBatchIds:ve}))})});return r.An=l,r.Wn=g,r.Un.Fn(r.Wn),D}),bf.apply(this,arguments)}function Vp(i,e){const r=Jt(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const g=e.batch.keys(),D=r.Qn.newChangeBuffer({trackRemovals:!0});return function(M,U,Q,ae){const ve=Q.batch,je=ve.keys();let lt=Nt.resolve();return je.forEach(Mt=>{lt=lt.next(()=>ae.getEntry(U,Mt)).next(Wt=>{const jn=Q.docVersions.get(Mt);Pn(null!==jn),Wt.version.compareTo(jn)<0&&(ve.applyToRemoteDocument(Wt,Q),Wt.isValidDocument()&&ae.addEntry(Wt,Q.commitVersion))})}),lt.next(()=>M.An.removeMutationBatch(U,ve))}(r,l,e,D).next(()=>D.apply(l)).next(()=>r.An.performConsistencyCheck(l)).next(()=>r.Wn.vn(l,g))})}function Ch(i){const e=Jt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.He.getLastRemoteSnapshotVersion(r))}function O_(i,e){const r=Jt(i),l=e.snapshotVersion;let g=r.qn;return r.persistence.runTransaction("Apply remote event","readwrite-primary",D=>{const M=r.Qn.newChangeBuffer({trackRemovals:!0});g=r.qn;const U=[];e.targetChanges.forEach((ae,ve)=>{const je=g.get(ve);if(!je)return;U.push(r.He.removeMatchingKeys(D,ae.removedDocuments,ve).next(()=>r.He.addMatchingKeys(D,ae.addedDocuments,ve)));const lt=ae.resumeToken;if(lt.approximateByteSize()>0){const Mt=je.withResumeToken(lt,l).withSequenceNumber(D.currentSequenceNumber);g=g.insert(ve,Mt),Wt=je,Qn=ae,Pn((jn=Mt).resumeToken.approximateByteSize()>0),(0===Wt.resumeToken.approximateByteSize()||jn.snapshotVersion.toMicroseconds()-Wt.snapshotVersion.toMicroseconds()>=3e8||Qn.addedDocuments.size+Qn.modifiedDocuments.size+Qn.removedDocuments.size>0)&&U.push(r.He.updateTargetData(D,Mt))}var Wt,jn,Qn});let Q=Bo();if(e.documentUpdates.forEach((ae,ve)=>{e.resolvedLimboDocuments.has(ae)&&U.push(r.persistence.referenceDelegate.updateLimboDocument(D,ae))}),U.push(od(D,M,e.documentUpdates,l,void 0).next(ae=>{Q=ae})),!l.isEqual(Fn.min())){const ae=r.He.getLastRemoteSnapshotVersion(D).next(ve=>r.He.setTargetsMetadata(D,D.currentSequenceNumber,l));U.push(ae)}return Nt.waitFor(U).next(()=>M.apply(D)).next(()=>r.Wn.Vn(D,Q)).next(()=>Q)}).then(D=>(r.qn=g,D))}function od(i,e,r,l,g){let D=ii();return r.forEach(M=>D=D.add(M)),e.getEntries(i,D).next(M=>{let U=Bo();return r.forEach((Q,ae)=>{const ve=M.get(Q),je=(null==g?void 0:g.get(Q))||l;ae.isNoDocument()&&ae.version.isEqual(Fn.min())?(e.removeEntry(Q,je),U=U.insert(Q,ae)):!ve.isValidDocument()||ae.version.compareTo(ve.version)>0||0===ae.version.compareTo(ve.version)&&ve.hasPendingWrites?(e.addEntry(ae,je),U=U.insert(Q,ae)):Vt("LocalStore","Ignoring outdated watch update for ",Q,". Current version:",ve.version," Watch version:",ae.version)}),U})}function Th(i,e){const r=Jt(i);return r.persistence.runTransaction("Get next mutation batch","readonly",l=>(void 0===e&&(e=-1),r.An.getNextMutationBatchAfterBatchId(l,e)))}function vc(i,e){const r=Jt(i);return r.persistence.runTransaction("Allocate target","readwrite",l=>{let g;return r.He.getTargetData(l,e).next(D=>D?(g=D,Nt.resolve(g)):r.He.allocateTargetId(l).next(M=>(g=new Ll(e,M,0,l.currentSequenceNumber),r.He.addTargetData(l,g).next(()=>g))))}).then(l=>{const g=r.qn.get(l.targetId);return(null===g||l.snapshotVersion.compareTo(g.snapshotVersion)>0)&&(r.qn=r.qn.insert(l.targetId,l),r.Kn.set(e,l.targetId)),l})}function ad(i,e,r){return wf.apply(this,arguments)}function wf(){return wf=(0,T.Z)(function*(i,e,r){const l=Jt(i),g=l.qn.get(e),D=r?"readwrite":"readwrite-primary";try{r||(yield l.persistence.runTransaction("Release target",D,M=>l.persistence.referenceDelegate.removeTarget(M,g)))}catch(M){if(!pc(M))throw M;Vt("LocalStore",`Failed to update sequence numbers for target ${e}: ${M}`)}l.qn=l.qn.remove(e),l.Kn.delete(g.target)}),wf.apply(this,arguments)}function Ih(i,e,r){const l=Jt(i);let g=Fn.min(),D=ii();return l.persistence.runTransaction("Execute query","readonly",M=>function(U,Q,ae){const ve=Jt(U),je=ve.Kn.get(ae);return void 0!==je?Nt.resolve(ve.qn.get(je)):ve.He.getTargetData(Q,ae)}(l,M,it(e)).next(U=>{if(U)return g=U.lastLimboFreeSnapshotVersion,l.He.getMatchingKeysForTargetId(M,U.targetId).next(Q=>{D=Q})}).next(()=>l.Un.getDocumentsMatchingQuery(M,e,r?g:Fn.min(),r?D:ii())).next(U=>({documents:U,zn:D})))}function yr(i,e){const r=Jt(i),l=Jt(r.He),g=r.qn.get(e);return g?Promise.resolve(g.target):r.persistence.runTransaction("Get target data","readonly",D=>l.Et(D,e).next(M=>M?M.target:null))}function bc(i){const e=Jt(i);return e.persistence.runTransaction("Get new document changes","readonly",r=>function(l,g,D){const M=Jt(l);let U=Bo(),Q=gc(D);const ae=Wu(g),ve=IDBKeyRange.lowerBound(Q,!0);return ae.jt({index:os.readTimeIndex,range:ve},(je,lt)=>{const Mt=vh(M.k,lt);U=U.insert(Mt.key,Mt),Q=lt.readTime}).next(()=>({In:U,readTime:bh(Q)}))}(e.Qn,r,e.jn)).then(({In:r,readTime:l})=>(e.jn=l,r))}function Dc(){return Dc=(0,T.Z)(function*(i){const e=Jt(i);return e.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(l){const g=Wu(l);let D=Fn.min();return g.jt({index:os.readTimeIndex,reverse:!0},(M,U,Q)=>{U.readTime&&(D=bh(U.readTime)),Q.done()}).next(()=>D)}(r)).then(r=>{e.jn=r})}),Dc.apply(this,arguments)}function al(){return al=(0,T.Z)(function*(i,e,r,l){const g=Jt(i);let D=ii(),M=Bo(),U=Od();for(const ve of r){const je=e.Hn(ve.metadata.name);ve.document&&(D=D.add(je)),M=M.insert(je,e.Jn(ve)),U=U.insert(je,e.Yn(ve.metadata.readTime))}const Q=g.Qn.newChangeBuffer({trackRemovals:!0}),ae=yield vc(g,(ve=l,it(Nl(In.fromString(`__bundle__/docs/${ve}`)))));var ve;return g.persistence.runTransaction("Apply bundle documents","readwrite",ve=>od(ve,Q,M,Fn.min(),U).next(je=>(Q.apply(ve),je)).next(je=>g.He.removeMatchingKeysForTargetId(ve,ae.targetId).next(()=>g.He.addMatchingKeys(ve,D,ae.targetId)).next(()=>g.Wn.Vn(ve,je)).next(()=>je)))}),al.apply(this,arguments)}function Gd(i,e){return zu.apply(this,arguments)}function zu(){return zu=(0,T.Z)(function*(i,e,r=ii()){const l=yield vc(i,it(Hu(e.bundledQuery))),g=Jt(i);return g.persistence.runTransaction("Save named query","readwrite",D=>{const M=Ci(e.readTime);if(l.snapshotVersion.compareTo(M)>=0)return g.Ye.saveNamedQuery(D,e);const U=l.withResumeToken(Si.EMPTY_BYTE_STRING,M);return g.qn=g.qn.insert(U.targetId,U),g.He.updateTargetData(D,U).next(()=>g.He.removeMatchingKeysForTargetId(D,l.targetId)).next(()=>g.He.addMatchingKeys(D,r,l.targetId)).next(()=>g.Ye.saveNamedQuery(D,e))})}),zu.apply(this,arguments)}class Sh{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,r){return Nt.resolve(this.Xn.get(r))}saveBundleMetadata(e,r){var l;return this.Xn.set(r.id,{id:(l=r).id,version:l.version,createTime:Ci(l.createTime)}),Nt.resolve()}getNamedQuery(e,r){return Nt.resolve(this.Zn.get(r))}saveNamedQuery(e,r){return this.Zn.set(r.name,{name:(l=r).name,query:Hu(l.bundledQuery),readTime:Ci(l.readTime)}),Nt.resolve();var l}}class Cu{constructor(){this.ts=new Oi(To.es),this.ns=new Oi(To.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,r){const l=new To(e,r);this.ts=this.ts.add(l),this.ns=this.ns.add(l)}rs(e,r){e.forEach(l=>this.addReference(l,r))}removeReference(e,r){this.os(new To(e,r))}cs(e,r){e.forEach(l=>this.removeReference(l,r))}us(e){const r=new Cn(new In([])),l=new To(r,e),g=new To(r,e+1),D=[];return this.ns.forEachInRange([l,g],M=>{this.os(M),D.push(M.key)}),D}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const r=new Cn(new In([])),l=new To(r,e),g=new To(r,e+1);let D=ii();return this.ns.forEachInRange([l,g],M=>{D=D.add(M.key)}),D}containsKey(e){const r=new To(e,0),l=this.ts.firstAfterOrEqual(r);return null!==l&&e.isEqual(l.key)}}class To{constructor(e,r){this.key=e,this.fs=r}static es(e,r){return Cn.comparator(e.key,r.key)||en(e.fs,r.fs)}static ss(e,r){return en(e.fs,r.fs)||Cn.comparator(e.key,r.key)}}class om{constructor(e,r){this.Jt=e,this.referenceDelegate=r,this.An=[],this.ds=1,this.ws=new Oi(To.es)}checkEmpty(e){return Nt.resolve(0===this.An.length)}addMutationBatch(e,r,l,g){const D=this.ds;this.ds++;const M=new gf(D,r,l,g);this.An.push(M);for(const U of g)this.ws=this.ws.add(new To(U.key,D)),this.Jt.addToCollectionParentIndex(e,U.key.path.popLast());return Nt.resolve(M)}lookupMutationBatch(e,r){return Nt.resolve(this._s(r))}getNextMutationBatchAfterBatchId(e,r){const g=this.gs(r+1),D=g<0?0:g;return Nt.resolve(this.An.length>D?this.An[D]:null)}getHighestUnacknowledgedBatchId(){return Nt.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Nt.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const l=new To(r,0),g=new To(r,Number.POSITIVE_INFINITY),D=[];return this.ws.forEachInRange([l,g],M=>{const U=this._s(M.fs);D.push(U)}),Nt.resolve(D)}getAllMutationBatchesAffectingDocumentKeys(e,r){let l=new Oi(en);return r.forEach(g=>{const D=new To(g,0),M=new To(g,Number.POSITIVE_INFINITY);this.ws.forEachInRange([D,M],U=>{l=l.add(U.fs)})}),Nt.resolve(this.ys(l))}getAllMutationBatchesAffectingQuery(e,r){const l=r.path,g=l.length+1;let D=l;Cn.isDocumentKey(D)||(D=D.child(""));const M=new To(new Cn(D),0);let U=new Oi(en);return this.ws.forEachWhile(Q=>{const ae=Q.key.path;return!!l.isPrefixOf(ae)&&(ae.length===g&&(U=U.add(Q.fs)),!0)},M),Nt.resolve(this.ys(U))}ys(e){const r=[];return e.forEach(l=>{const g=this._s(l);null!==g&&r.push(g)}),r}removeMutationBatch(e,r){Pn(0===this.ps(r.batchId,"removed")),this.An.shift();let l=this.ws;return Nt.forEach(r.mutations,g=>{const D=new To(g.key,r.batchId);return l=l.delete(D),this.referenceDelegate.markPotentiallyOrphaned(e,g.key)}).next(()=>{this.ws=l})}ee(e){}containsKey(e,r){const l=new To(r,0),g=this.ws.firstAfterOrEqual(l);return Nt.resolve(r.isEqual(g&&g.key))}performConsistencyCheck(e){return Nt.resolve()}ps(e,r){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const r=this.gs(e);return r<0||r>=this.An.length?null:this.An[r]}}class Bp{constructor(e,r){this.Jt=e,this.Ts=r,this.docs=new qi(Cn.comparator),this.size=0}addEntry(e,r,l){const g=r.key,D=this.docs.get(g),M=D?D.size:0,U=this.Ts(r);return this.docs=this.docs.insert(g,{document:r.clone(),size:U,readTime:l}),this.size+=U-M,this.Jt.addToCollectionParentIndex(e,g.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const l=this.docs.get(r);return Nt.resolve(l?l.document.clone():ni.newInvalidDocument(r))}getEntries(e,r){let l=Bo();return r.forEach(g=>{const D=this.docs.get(g);l=l.insert(g,D?D.document.clone():ni.newInvalidDocument(g))}),Nt.resolve(l)}getDocumentsMatchingQuery(e,r,l){let g=Bo();const D=new Cn(r.path.child("")),M=this.docs.getIteratorFrom(D);for(;M.hasNext();){const{key:U,value:{document:Q,readTime:ae}}=M.getNext();if(!r.path.isPrefixOf(U.path))break;ae.compareTo(l)<=0||Pr(r,Q)&&(g=g.insert(Q.key,Q.clone()))}return Nt.resolve(g)}Es(e,r){return Nt.forEach(this.docs,l=>r(l))}newChangeBuffer(e){return new ov(this)}getSize(e){return Nt.resolve(this.size)}}class ov extends Eh{constructor(e){super(),this.De=e}applyChanges(e){const r=[];return this.changes.forEach((l,g)=>{g.document.isValidDocument()?r.push(this.De.addEntry(e,g.document,this.getReadTime(l))):this.De.removeEntry(l)}),Nt.waitFor(r)}getFromCache(e,r){return this.De.getEntry(e,r)}getAllFromCache(e,r){return this.De.getEntries(e,r)}}class am{constructor(e){this.persistence=e,this.Is=new yc(r=>Ja(r),no),this.lastRemoteSnapshotVersion=Fn.min(),this.highestTargetId=0,this.As=0,this.Rs=new Cu,this.targetCount=0,this.Ps=pn.ie()}forEachTarget(e,r){return this.Is.forEach((l,g)=>r(g)),Nt.resolve()}getLastRemoteSnapshotVersion(e){return Nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Nt.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Nt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,l){return l&&(this.lastRemoteSnapshotVersion=l),r>this.As&&(this.As=r),Nt.resolve()}ce(e){this.Is.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ps=new pn(r),this.highestTargetId=r),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,r){return this.ce(r),this.targetCount+=1,Nt.resolve()}updateTargetData(e,r){return this.ce(r),Nt.resolve()}removeTargetData(e,r){return this.Is.delete(r.target),this.Rs.us(r.targetId),this.targetCount-=1,Nt.resolve()}removeTargets(e,r,l){let g=0;const D=[];return this.Is.forEach((M,U)=>{U.sequenceNumber<=r&&null===l.get(U.targetId)&&(this.Is.delete(M),D.push(this.removeMatchingKeysForTargetId(e,U.targetId)),g++)}),Nt.waitFor(D).next(()=>g)}getTargetCount(e){return Nt.resolve(this.targetCount)}getTargetData(e,r){const l=this.Is.get(r)||null;return Nt.resolve(l)}addMatchingKeys(e,r,l){return this.Rs.rs(r,l),Nt.resolve()}removeMatchingKeys(e,r,l){this.Rs.cs(r,l);const g=this.persistence.referenceDelegate,D=[];return g&&r.forEach(M=>{D.push(g.markPotentiallyOrphaned(e,M))}),Nt.waitFor(D)}removeMatchingKeysForTargetId(e,r){return this.Rs.us(r),Nt.resolve()}getMatchingKeysForTargetId(e,r){const l=this.Rs.ls(r);return Nt.resolve(l)}containsKey(e,r){return Nt.resolve(this.Rs.containsKey(r))}}class av{constructor(e,r){this.bs={},this.Be=new we(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new am(this),this.Jt=new m,this.Je=new Bp(this.Jt,l=>this.referenceDelegate.vs(l)),this.k=new Ud(r),this.Ye=new Sh(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let r=this.bs[e.toKey()];return r||(r=new om(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,r,l){Vt("MemoryPersistence","Starting transaction:",e);const g=new Df(this.Be.next());return this.referenceDelegate.Vs(),l(g).next(D=>this.referenceDelegate.Ss(g).next(()=>D)).toPromise().then(D=>(g.raiseOnCommittedEvent(),D))}Ds(e,r){return Nt.or(Object.values(this.bs).map(l=>()=>l.containsKey(e,r)))}}class Df extends yh{constructor(e){super(),this.currentSequenceNumber=e}}class Wd{constructor(e){this.persistence=e,this.Cs=new Cu,this.Ns=null}static ks(e){return new Wd(e)}get xs(){if(this.Ns)return this.Ns;throw Tn()}addReference(e,r,l){return this.Cs.addReference(l,r),this.xs.delete(l.toString()),Nt.resolve()}removeReference(e,r,l){return this.Cs.removeReference(l,r),this.xs.add(l.toString()),Nt.resolve()}markPotentiallyOrphaned(e,r){return this.xs.add(r.toString()),Nt.resolve()}removeTarget(e,r){this.Cs.us(r.targetId).forEach(g=>this.xs.add(g.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(e,r.targetId).next(g=>{g.forEach(D=>this.xs.add(D.toString()))}).next(()=>l.removeTargetData(e,r))}Vs(){this.Ns=new Set}Ss(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Nt.forEach(this.xs,l=>{const g=Cn.fromPath(l);return this.$s(e,g).next(D=>{D||r.removeEntry(g)})}).next(()=>(this.Ns=null,r.apply(e)))}updateLimboDocument(e,r){return this.$s(e,r).next(l=>{l?this.xs.delete(r.toString()):this.xs.add(r.toString())})}vs(e){return 0}$s(e,r){return Nt.or([()=>Nt.resolve(this.Cs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ds(e,r)])}}function Ef(i,e){return`firestore_clients_${i}_${e}`}function Cf(i,e,r){let l=`firestore_mutations_${i}_${r}`;return e.isAuthenticated()&&(l+=`_${e.uid}`),l}function Ah(i,e){return`firestore_targets_${i}_${e}`}class Up{constructor(e,r,l,g){this.user=e,this.batchId=r,this.state=l,this.error=g}static Fs(e,r,l){const g=JSON.parse(l);let D,M="object"==typeof g&&-1!==["pending","acknowledged","rejected"].indexOf(g.state)&&(void 0===g.error||"object"==typeof g.error);return M&&g.error&&(M="string"==typeof g.error.message&&"string"==typeof g.error.code,M&&(D=new Tt(g.error.code,g.error.message))),M?new Up(e,r,g.state,D):(Ei("SharedClientState",`Failed to parse mutation state for ID '${r}': ${l}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,r,l){this.targetId=e,this.state=r,this.error=l}static Fs(e,r){const l=JSON.parse(r);let g,D="object"==typeof l&&-1!==["not-current","current","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return D&&l.error&&(D="string"==typeof l.error.message&&"string"==typeof l.error.code,D&&(g=new Tt(l.error.code,l.error.message))),D?new Nh(e,l.state,g):(Ei("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tf{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Fs(e,r){const l=JSON.parse(r);let g="object"==typeof l&&l.activeTargetIds instanceof Array,D=yu();for(let M=0;g&&M<l.activeTargetIds.length;++M)g=Ru(l.activeTargetIds[M]),D=D.add(l.activeTargetIds[M]);return g?new Tf(e,D):(Ei("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Mh{constructor(e,r){this.clientId=e,this.onlineState=r}static Fs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Mh(r.clientId,r.onlineState):(Ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class If{constructor(){this.activeTargetIds=yu()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ld{constructor(e,r,l,g,D){this.window=e,this.Oe=r,this.persistenceKey=l,this.Bs=g,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new qi(en),this.started=!1,this.js=[];const M=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=D,this.Qs=Ef(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new If),this.Gs=new RegExp(`^firestore_clients_${M}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${M}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${M}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(U){return`firestore_bundle_loaded_${U}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,T.Z)(function*(){const r=yield e.syncEngine.Tn();for(const g of r){if(g===e.Bs)continue;const D=e.getItem(Ef(e.persistenceKey,g));if(D){const M=Tf.Fs(g,D);M&&(e.Ks=e.Ks.insert(M.clientId,M))}}e.Xs();const l=e.storage.getItem(e.Js);if(l){const g=e.Zs(l);g&&e.ti(g)}for(const g of e.js)e.qs(g);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let r=!1;return this.Ks.forEach((l,g)=>{g.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,r,l){this.ni(e,r,l),this.si(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(Ah(this.persistenceKey,e));if(l){const g=Nh.Fs(e,l);g&&(r=g.state)}}return this.ii.Ms(e),this.Xs(),r}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ah(this.persistenceKey,e))}updateQueryState(e,r,l){this.ri(e,r,l)}handleUserChange(e,r,l){r.forEach(g=>{this.si(g)}),this.currentUser=e,l.forEach(g=>{this.addPendingMutation(g)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Vt("SharedClientState","READ",e,r),r}setItem(e,r){Vt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Vt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var r=this;const l=e;if(l.storageArea===this.storage){if(Vt("SharedClientState","EVENT",l.key,l.newValue),l.key===this.Qs)return void Ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,T.Z)(function*(){if(r.started){if(null!==l.key)if(r.Gs.test(l.key)){if(null==l.newValue){const g=r.ci(l.key);return r.ui(g,null)}{const g=r.hi(l.key,l.newValue);if(g)return r.ui(g.clientId,g)}}else if(r.zs.test(l.key)){if(null!==l.newValue){const g=r.li(l.key,l.newValue);if(g)return r.fi(g)}}else if(r.Hs.test(l.key)){if(null!==l.newValue){const g=r.di(l.key,l.newValue);if(g)return r.wi(g)}}else if(l.key===r.Js){if(null!==l.newValue){const g=r.Zs(l.newValue);if(g)return r.ti(g)}}else if(l.key===r.Ws){const g=function(D){let M=we.I;if(null!=D)try{const U=JSON.parse(D);Pn("number"==typeof U),M=U}catch(U){Ei("SharedClientState","Failed to read sequence number from WebStorage",U)}return M}(l.newValue);g!==we.I&&r.sequenceNumberHandler(g)}else if(l.key===r.Ys)return r.syncEngine._i()}else r.js.push(l)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,r,l){const g=new Up(this.currentUser,e,r,l),D=Cf(this.persistenceKey,this.currentUser,e);this.setItem(D,g.Os())}si(e){const r=Cf(this.persistenceKey,this.currentUser,e);this.removeItem(r)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,r,l){const g=Ah(this.persistenceKey,e),D=new Nh(e,r,l);this.setItem(g,D.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const r=this.Gs.exec(e);return r?r[1]:null}hi(e,r){const l=this.ci(e);return Tf.Fs(l,r)}li(e,r){const l=this.zs.exec(e),g=Number(l[1]);return Up.Fs(new Rr(void 0!==l[2]?l[2]:null),g,r)}di(e,r){const l=this.Hs.exec(e),g=Number(l[1]);return Nh.Fs(g,r)}Zs(e){return Mh.Fs(e)}fi(e){var r=this;return(0,T.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.mi(e.batchId,e.state,e.error);Vt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,r){const l=r?this.Ks.insert(e,r):this.Ks.remove(e),g=this.ei(this.Ks),D=this.ei(l),M=[],U=[];return D.forEach(Q=>{g.has(Q)||M.push(Q)}),g.forEach(Q=>{D.has(Q)||U.push(Q)}),this.syncEngine.yi(M,U).then(()=>{this.Ks=l})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let r=yu();return e.forEach((l,g)=>{r=r.unionWith(g.activeTargetIds)}),r}}class Sf{constructor(){this.pi=new If,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,l){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,r,l){this.Ti[e]=r}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new If,Promise.resolve()}handleUserChange(e,r,l){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Af{Ei(e){}shutdown(){}}class Rh{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Vt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Vt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Nf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ud{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class k_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,r,l,g,D){const M=this.Ui(e,r);Vt("RestConnection","Sending: ",M,l);const U={};return this.qi(U,g,D),this.Ki(e,M,U,l).then(Q=>(Vt("RestConnection","Received: ",Q),Q),Q=>{throw Qi("RestConnection",`${e} failed with error: `,Q,"url: ",M,"request:",l),Q})}ji(e,r,l,g,D){return this.Bi(e,r,l,g,D)}qi(e,r,l){e["X-Goog-Api-Client"]="gl-js/ fire/"+bo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((g,D)=>e[D]=g),l&&l.headers.forEach((g,D)=>e[D]=g)}Ui(e,r){return`${this.Mi}/v1/${r}:${Nf[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,r,l,g){return new Promise((D,M)=>{const U=new Ma;U.listenOnce(lu.COMPLETE,()=>{try{switch(U.getLastErrorCode()){case ha.NO_ERROR:const ae=U.getResponseJson();Vt("Connection","XHR received:",JSON.stringify(ae)),D(ae);break;case ha.TIMEOUT:Vt("Connection",'RPC "'+e+'" timed out'),M(new Tt(ot.DEADLINE_EXCEEDED,"Request time out"));break;case ha.HTTP_ERROR:const ve=U.getStatus();if(Vt("Connection",'RPC "'+e+'" failed with status:',ve,"response text:",U.getResponseText()),ve>0){const je=U.getResponseJson().error;if(je&&je.status&&je.message){const lt=function(Mt){const Wt=Mt.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(Wt)>=0?Wt:ot.UNKNOWN}(je.status);M(new Tt(lt,je.message))}else M(new Tt(ot.UNKNOWN,"Server responded with status "+U.getStatus()))}else M(new Tt(ot.UNAVAILABLE,"Connection failed."));break;default:Tn()}}finally{Vt("Connection",'RPC "'+e+'" completed.')}});const Q=JSON.stringify(g);U.send(r,"POST",Q,l,15)})}Qi(e,r,l){const g=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],D=Ii(),M=Is(),U={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(U.xmlHttpFactory=new fa({})),this.qi(U.initMessageHeaders,r,l),(0,ge.uI)()||(0,ge.b$)()||(0,ge.d)()||(0,ge.w1)()||(0,ge.Mn)()||(0,ge.ru)()||(U.httpHeadersOverwriteParam="$httpHeaders");const Q=g.join("");Vt("Connection","Creating WebChannel: "+Q,U);const ae=D.createWebChannel(Q,U);let ve=!1,je=!1;const lt=new ud({Vi:Wt=>{je?Vt("Connection","Not sending because WebChannel is closed:",Wt):(ve||(Vt("Connection","Opening WebChannel transport."),ae.open(),ve=!0),Vt("Connection","WebChannel sending:",Wt),ae.send(Wt))},Si:()=>ae.close()}),Mt=(Wt,jn,Qn)=>{Wt.listen(jn,ia=>{try{Qn(ia)}catch(wa){setTimeout(()=>{throw wa},0)}})};return Mt(ae,Ss.EventType.OPEN,()=>{je||Vt("Connection","WebChannel transport opened.")}),Mt(ae,Ss.EventType.CLOSE,()=>{je||(je=!0,Vt("Connection","WebChannel transport closed"),lt.Fi())}),Mt(ae,Ss.EventType.ERROR,Wt=>{je||(je=!0,Qi("Connection","WebChannel transport errored:",Wt),lt.Fi(new Tt(ot.UNAVAILABLE,"The operation could not be completed")))}),Mt(ae,Ss.EventType.MESSAGE,Wt=>{var jn;if(!je){const Qn=Wt.data[0];Pn(!!Qn);const ia=Qn,wa=ia.error||(null===(jn=ia[0])||void 0===jn?void 0:jn.error);if(wa){Vt("Connection","WebChannel received error:",wa);const ai=wa.status;let Ho=function(Vg){const yp=cs[Vg];if(void 0!==yp)return Ml(yp)}(ai),Da=wa.message;void 0===Ho&&(Ho=ot.INTERNAL,Da="Unknown error status: "+ai+" with message "+wa.message),je=!0,lt.Fi(new Tt(Ho,Da)),ae.close()}else Vt("Connection","WebChannel received:",Qn),lt.Oi(Qn)}}),Mt(M,Za.STAT_EVENT,Wt=>{Wt.stat===Hr.PROXY?Vt("Connection","Detected buffering proxy"):Wt.stat===Hr.NOPROXY&&Vt("Connection","Detected no buffering proxy")}),setTimeout(()=>{lt.$i()},0),lt}}function cd(){return"undefined"!=typeof window?window:null}function qu(){return"undefined"!=typeof document?document:null}function Mf(i){return new td(i,!0)}class jp{constructor(e,r,l=1e3,g=1.5,D=6e4){this.Oe=e,this.timerId=r,this.Wi=l,this.Gi=g,this.zi=D,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const r=Math.floor(this.Hi+this.tr()),l=Math.max(0,Date.now()-this.Yi),g=Math.max(0,r-l);g>0&&Vt("ExponentialBackoff",`Backing off for ${g} ms (base delay: ${this.Hi} ms, delay with jitter: ${r} ms, last attempt: ${l} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,g,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class $p{constructor(e,r,l,g,D,M,U,Q){this.Oe=e,this.nr=l,this.sr=g,this.ir=D,this.authCredentialsProvider=M,this.appCheckCredentialsProvider=U,this.listener=Q,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new jp(e,r)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,T.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,T.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,r){var l=this;return(0,T.Z)(function*(){l.yr(),l.pr(),l.ur.cancel(),l.rr++,4!==e?l.ur.reset():r&&r.code===ot.RESOURCE_EXHAUSTED?(Ei(r.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),l.ur.Xi()):r&&r.code===ot.UNAUTHENTICATED&&3!==l.state&&(l.authCredentialsProvider.invalidateToken(),l.appCheckCredentialsProvider.invalidateToken()),null!==l.stream&&(l.Tr(),l.stream.close(),l.stream=null),l.state=e,yield l.listener.Ni(r)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),r=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([l,g])=>{this.rr===r&&this.Ir(l,g)},l=>{e(()=>{const g=new Tt(ot.UNKNOWN,"Fetching auth token failed: "+l.message);return this.Ar(g)})})}Ir(e,r){const l=this.Er(this.rr);this.stream=this.Rr(e,r),this.stream.Di(()=>{l(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(g=>{l(()=>this.Ar(g))}),this.stream.onMessage(g=>{l(()=>this.onMessage(g))})}dr(){var e=this;this.state=5,this.ur.Zi((0,T.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Vt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return r=>{this.Oe.enqueueAndForget(()=>this.rr===e?r():(Vt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P_ extends $p{constructor(e,r,l,g,D,M){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,l,g,M),this.k=D}Rr(e,r){return this.ir.Qi("Listen",e,r)}onMessage(e){this.ur.reset();const r=function(i,e){let r;if("targetChange"in e){const l="NO_CHANGE"===(Q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Q?1:"REMOVE"===Q?2:"CURRENT"===Q?3:"RESET"===Q?4:Tn(),g=e.targetChange.targetIds||[],D=function(Q,ae){return Q.C?(Pn(void 0===ae||"string"==typeof ae),Si.fromBase64String(ae||"")):(Pn(void 0===ae||ae instanceof Uint8Array),Si.fromUint8Array(ae||new Uint8Array))}(i,e.targetChange.resumeToken),M=e.targetChange.cause,U=M&&function(Q){const ae=void 0===Q.code?ot.UNKNOWN:Ml(Q.code);return new Tt(ae,Q.message||"")}(M);r=new eu(l,g,D,U||null)}else if("documentChange"in e){const l=e.documentChange,g=_a(i,l.document.name),D=Ci(l.document.updateTime),M=new xi({mapValue:{fields:l.document.fields}}),U=ni.newFoundDocument(g,D,M);r=new Rl(l.targetIds||[],l.removedTargetIds||[],U.key,U)}else if("documentDelete"in e){const l=e.documentDelete,g=_a(i,l.document),D=l.readTime?Ci(l.readTime):Fn.min(),M=ni.newNoDocument(g,D);r=new Rl([],l.removedTargetIds||[],M.key,M)}else if("documentRemove"in e){const l=e.documentRemove,g=_a(i,l.document);r=new Rl([],l.removedTargetIds||[],g,null)}else{if(!("filter"in e))return Tn();{const l=e.filter,D=new ph(l.count||0);r=new Xl(l.targetId,D)}}var Q;return r}(this.k,e),l=function(g){if(!("targetChange"in g))return Fn.min();const D=g.targetChange;return D.targetIds&&D.targetIds.length?Fn.min():D.readTime?Ci(D.readTime):Fn.min()}(e);return this.listener.Pr(r,l)}br(e){const r={};r.database=C(this.k),r.addTarget=function(g,D){let M;const U=D.target;return M=Xi(U)?{documents:Bt(g,U)}:{query:Un(g,U)},M.targetId=D.targetId,D.resumeToken.approximateByteSize()>0?M.resumeToken=Fd(g,D.resumeToken):D.snapshotVersion.compareTo(Fn.min())>0&&(M.readTime=Lu(g,D.snapshotVersion.toTimestamp())),M}(this.k,e);const l=function(i,e){const r=function(l,g){switch(g){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tn()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);l&&(r.labels=l),this.gr(r)}vr(e){const r={};r.database=C(this.k),r.removeTarget=e,this.gr(r)}}class dd extends $p{constructor(e,r,l,g,D,M){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,l,g,M),this.k=D,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,r){return this.ir.Qi("Write",e,r)}onMessage(e){if(Pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const r=function(i,e){return i&&i.length>0?(Pn(void 0!==e),i.map(r=>function(l,g){let D=Ci(l.updateTime?l.updateTime:g);return D.isEqual(Fn.min())&&(D=Ci(g)),new Fu(D,l.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),l=Ci(e.commitTime);return this.listener.Cr(l,r)}return Pn(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=C(this.k),this.gr(e)}Dr(e){const r={streamToken:this.lastStreamToken,writes:e.map(l=>Re(this.k,l))};this.gr(r)}}class F_ extends class{}{constructor(e,r,l,g){super(),this.authCredentials=e,this.appCheckCredentials=r,this.ir=l,this.k=g,this.$r=!1}Fr(){if(this.$r)throw new Tt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,r,l){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,D])=>this.ir.Bi(e,r,l,g,D)).catch(g=>{throw"FirebaseError"===g.name?(g.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Tt(ot.UNKNOWN,g.toString())})}ji(e,r,l){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,D])=>this.ir.ji(e,r,l,g,D)).catch(g=>{throw"FirebaseError"===g.name?(g.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Tt(ot.UNKNOWN,g.toString())})}terminate(){this.$r=!0}}class L_{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Ei(r),this.Lr=!1):Vt("OnlineStateTracker",r)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class V_{constructor(e,r,l,g,D){var M=this;this.localStore=e,this.datastore=r,this.asyncQueue=l,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=D,this.Hr.Ei(U=>{l.enqueueAndForget((0,T.Z)(function*(){var Q;Iu(M)&&(Vt("RemoteStore","Restarting streams for network reachability change."),yield(Q=(0,T.Z)(function*(ae){const ve=Jt(ae);ve.Gr.add(4),yield Zu(ve),ve.Jr.set("Unknown"),ve.Gr.delete(4),yield xh(ve)}),function(ae){return Q.apply(this,arguments)})(M))}))}),this.Jr=new L_(l,g)}}function xh(i){return Tu.apply(this,arguments)}function Tu(){return Tu=(0,T.Z)(function*(i){if(Iu(i))for(const e of i.zr)yield e(!0)}),Tu.apply(this,arguments)}function Zu(i){return zd.apply(this,arguments)}function zd(){return zd=(0,T.Z)(function*(i){for(const e of i.zr)yield e(!1)}),zd.apply(this,arguments)}function qd(i,e){const r=Jt(i);r.Wr.has(e.targetId)||(r.Wr.set(e.targetId,e),Ul(r)?Kd(r):Qd(r).lr()&&Oh(r,e))}function Ec(i,e){const r=Jt(i),l=Qd(r);r.Wr.delete(e),l.lr()&&Zd(r,e),0===r.Wr.size&&(l.lr()?l._r():Iu(r)&&r.Jr.set("Unknown"))}function Oh(i,e){i.Yr.X(e.targetId),Qd(i).br(e)}function Zd(i,e){i.Yr.X(e),Qd(i).vr(e)}function Kd(i){i.Yr=new Pd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Wr.get(e)||null}),Qd(i).start(),i.Jr.Br()}function Ul(i){return Iu(i)&&!Qd(i).hr()&&i.Wr.size>0}function Iu(i){return 0===Jt(i).Gr.size}function Hp(i){i.Yr=void 0}function Rf(i){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,T.Z)(function*(i){i.Wr.forEach((e,r)=>{Oh(i,e)})}),Yd.apply(this,arguments)}function Gp(i,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,T.Z)(function*(i,e){Hp(i),Ul(i)?(i.Jr.Kr(e),Kd(i)):i.Jr.set("Unknown")}),Wp.apply(this,arguments)}function zp(i,e,r){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,T.Z)(function*(i,e,r){if(i.Jr.set("Online"),e instanceof eu&&2===e.state&&e.cause)try{yield(l=(0,T.Z)(function*(g,D){const M=D.cause;for(const U of D.targetIds)g.Wr.has(U)&&(yield g.remoteSyncer.rejectListen(U,M),g.Wr.delete(U),g.Yr.removeTarget(U))}),function(g,D){return l.apply(this,arguments)})(i,e)}catch(l){Vt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),l),yield Su(i,l)}else if(e instanceof Rl?i.Yr.ot(e):e instanceof Xl?i.Yr.dt(e):i.Yr.ut(e),!r.isEqual(Fn.min()))try{const l=yield Ch(i.localStore);r.compareTo(l)>=0&&(yield function(g,D){const M=g.Yr.gt(D);return M.targetChanges.forEach((U,Q)=>{if(U.resumeToken.approximateByteSize()>0){const ae=g.Wr.get(Q);ae&&g.Wr.set(Q,ae.withResumeToken(U.resumeToken,D))}}),M.targetMismatches.forEach(U=>{const Q=g.Wr.get(U);if(!Q)return;g.Wr.set(U,Q.withResumeToken(Si.EMPTY_BYTE_STRING,Q.snapshotVersion)),Zd(g,U);const ae=new Ll(Q.target,U,1,Q.sequenceNumber);Oh(g,ae)}),g.remoteSyncer.applyRemoteEvent(M)}(i,r))}catch(l){Vt("RemoteStore","Failed to raise snapshot:",l),yield Su(i,l)}var l}),Uc.apply(this,arguments)}function Su(i,e,r){return hd.apply(this,arguments)}function hd(){return hd=(0,T.Z)(function*(i,e,r){if(!pc(e))throw e;i.Gr.add(1),yield Zu(i),i.Jr.set("Offline"),r||(r=()=>Ch(i.localStore)),i.asyncQueue.enqueueRetryable((0,T.Z)(function*(){Vt("RemoteStore","Retrying IndexedDB access"),yield r(),i.Gr.delete(1),yield xh(i)}))}),hd.apply(this,arguments)}function Cc(i,e){return e().catch(r=>Su(i,r,e))}function ru(i){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,T.Z)(function*(i){const e=Jt(i),r=jc(e);let l=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;qp(e);)try{const g=yield Th(e.localStore,l);if(null===g){0===e.Qr.length&&r._r();break}l=g.batchId,xf(e,g)}catch(g){yield Su(e,g)}Of(e)&&kf(e)}),Ku.apply(this,arguments)}function qp(i){return Iu(i)&&i.Qr.length<10}function xf(i,e){i.Qr.push(e);const r=jc(i);r.lr()&&r.Sr&&r.Dr(e.mutations)}function Of(i){return Iu(i)&&!jc(i).hr()&&i.Qr.length>0}function kf(i){jc(i).start()}function kh(i){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,T.Z)(function*(i){jc(i).kr()}),Ph.apply(this,arguments)}function Fh(i){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,T.Z)(function*(i){const e=jc(i);for(const r of i.Qr)e.Dr(r.mutations)}),Pf.apply(this,arguments)}function Zp(i,e,r){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,T.Z)(function*(i,e,r){const l=i.Qr.shift(),g=Dl.from(l,e,r);yield Cc(i,()=>i.remoteSyncer.applySuccessfulWrite(g)),yield ru(i)}),Ff.apply(this,arguments)}function Kp(i,e){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,T.Z)(function*(i,e){var r;e&&jc(i).Sr&&(yield(r=(0,T.Z)(function*(l,g){if(Lc(D=g.code)&&D!==ot.ABORTED){const M=l.Qr.shift();jc(l).wr(),yield Cc(l,()=>l.remoteSyncer.rejectFailedWrite(M.batchId,g)),yield ru(l)}var D}),function(l,g){return r.apply(this,arguments)})(i,e)),Of(i)&&kf(i)}),Lf.apply(this,arguments)}function Yp(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,T.Z)(function*(i,e){const r=Jt(i);e?(r.Gr.delete(2),yield xh(r)):e||(r.Gr.add(2),yield Zu(r),r.Jr.set("Unknown"))}),Vf.apply(this,arguments)}function Qd(i){return i.Xr||(i.Xr=function(e,r,l){const g=Jt(e);return g.Fr(),new P_(r,g.ir,g.authCredentials,g.appCheckCredentials,g.k,l)}(i.datastore,i.asyncQueue,{Di:Rf.bind(null,i),Ni:Gp.bind(null,i),Pr:zp.bind(null,i)}),i.zr.push(function(){var e=(0,T.Z)(function*(r){r?(i.Xr.wr(),Ul(i)?Kd(i):i.Jr.set("Unknown")):(yield i.Xr.stop(),Hp(i))});return function(r){return e.apply(this,arguments)}}())),i.Xr}function jc(i){return i.Zr||(i.Zr=function(e,r,l){const g=Jt(e);return g.Fr(),new dd(r,g.ir,g.authCredentials,g.appCheckCredentials,g.k,l)}(i.datastore,i.asyncQueue,{Di:kh.bind(null,i),Ni:Kp.bind(null,i),Nr:Fh.bind(null,i),Cr:Zp.bind(null,i)}),i.zr.push(function(){var e=(0,T.Z)(function*(r){r?(i.Zr.wr(),yield ru(i)):(yield i.Zr.stop(),i.Qr.length>0&&(Vt("RemoteStore",`Stopping write stream with ${i.Qr.length} pending writes`),i.Qr=[]))});return function(r){return e.apply(this,arguments)}}())),i.Zr}class va{constructor(e,r,l,g,D){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=l,this.op=g,this.removalCallback=D,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(M=>{})}static createAndSchedule(e,r,l,g,D){const M=Date.now()+l,U=new va(e,r,M,g,D);return U.start(l),U}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tt(ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jd(i,e){if(Ei("AsyncQueue",`${e}: ${i}`),pc(i))return new Tt(ot.UNAVAILABLE,`${e}: ${i}`);throw i}class Xd{constructor(e){this.comparator=e?(r,l)=>e(r,l)||Cn.comparator(r.key,l.key):(r,l)=>Cn.comparator(r.key,l.key),this.keyedMap=cc(),this.sortedSet=new qi(this.comparator)}static emptySet(e){return new Xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,l)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Xd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),l=e.sortedSet.getIterator();for(;r.hasNext();){const g=r.getNext().key,D=l.getNext().key;if(!g.isEqual(D))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const l=new Xd;return l.comparator=this.comparator,l.keyedMap=e,l.sortedSet=r,l}}class Qp{constructor(){this.eo=new qi(Cn.comparator)}track(e){const r=e.doc.key,l=this.eo.get(r);l?0!==e.type&&3===l.type?this.eo=this.eo.insert(r,e):3===e.type&&1!==l.type?this.eo=this.eo.insert(r,{type:l.type,doc:e.doc}):2===e.type&&2===l.type?this.eo=this.eo.insert(r,{type:2,doc:e.doc}):2===e.type&&0===l.type?this.eo=this.eo.insert(r,{type:0,doc:e.doc}):1===e.type&&0===l.type?this.eo=this.eo.remove(r):1===e.type&&2===l.type?this.eo=this.eo.insert(r,{type:1,doc:l.doc}):0===e.type&&1===l.type?this.eo=this.eo.insert(r,{type:2,doc:e.doc}):Tn():this.eo=this.eo.insert(r,e)}no(){const e=[];return this.eo.inorderTraversal((r,l)=>{e.push(l)}),e}}class Lh{constructor(e,r,l,g,D,M,U,Q){this.query=e,this.docs=r,this.oldDocs=l,this.docChanges=g,this.mutatedKeys=D,this.fromCache=M,this.syncStateChanged=U,this.excludesMetadataChanges=Q}static fromInitialDocuments(e,r,l,g){const D=[];return r.forEach(M=>{D.push({type:0,doc:M})}),new Lh(e,r,Xd.emptySet(r),D,l,g,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&un(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,l=e.docChanges;if(r.length!==l.length)return!1;for(let g=0;g<r.length;g++)if(r[g].type!==l[g].type||!r[g].doc.isEqual(l[g].doc))return!1;return!0}}class lm{constructor(){this.so=void 0,this.listeners=[]}}class um{constructor(){this.queries=new yc(e=>tn(e),un),this.onlineState="Unknown",this.io=new Set}}function Jp(i,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,T.Z)(function*(i,e){const r=Jt(i),l=e.query;let g=!1,D=r.queries.get(l);if(D||(g=!0,D=new lm),g)try{D.so=yield r.onListen(l)}catch(M){const U=Jd(M,`Initialization of query '${kr(e.query)}' failed`);return void e.onError(U)}r.queries.set(l,D),D.listeners.push(e),e.ro(r.onlineState),D.so&&e.oo(D.so)&&Uf(r)}),Vh.apply(this,arguments)}function Bf(i,e){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,T.Z)(function*(i,e){const r=Jt(i),l=e.query;let g=!1;const D=r.queries.get(l);if(D){const M=D.listeners.indexOf(e);M>=0&&(D.listeners.splice(M,1),g=0===D.listeners.length)}if(g)return r.queries.delete(l),r.onUnlisten(l)}),Xp.apply(this,arguments)}function cm(i,e){const r=Jt(i);let l=!1;for(const g of e){const M=r.queries.get(g.query);if(M){for(const U of M.listeners)U.oo(g)&&(l=!0);M.so=g}}l&&Uf(r)}function B_(i,e,r){const l=Jt(i),g=l.queries.get(e);if(g)for(const D of g.listeners)D.onError(r);l.queries.delete(e)}function Uf(i){i.io.forEach(e=>{e.next()})}class jf{constructor(e,r,l){this.query=e,this.ao=r,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=l||{}}oo(e){if(!this.options.includeMetadataChanges){const l=[];for(const g of e.docChanges)3!==g.type&&l.push(g);e=new Lh(e.query,e.docs,e.oldDocs,l,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let r=!1;return this.co?this.ho(e)&&(this.ao.next(e),r=!0):this.lo(e,this.onlineState)&&(this.fo(e),r=!0),this.uo=e,r}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let r=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),r=!0),r}lo(e,r){return!e.fromCache||!(this.options.wo&&"Offline"!==r||e.docs.isEmpty()&&"Offline"!==r)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Lh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class dm{constructor(e,r){this.payload=e,this.byteLength=r}_o(){return"metadata"in this.payload}}class hm{constructor(e){this.k=e}Hn(e){return _a(this.k,e)}Jn(e){return e.metadata.exists?R(this.k,e.document,!1):ni.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Ci(e)}}class eg{constructor(e,r,l){this.mo=e,this.localStore=r,this.k=l,this.queries=[],this.documents=[],this.progress=tg(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}po(e){const r=new Map,l=new hm(this.k);for(const g of e)if(g.metadata.queries){const D=l.Hn(g.metadata.name);for(const M of g.metadata.queries){const U=(r.get(M)||ii()).add(D);r.set(M,U)}}return r}complete(){var e=this;return(0,T.Z)(function*(){const r=yield function(i,e,r,l){return al.apply(this,arguments)}(e.localStore,new hm(e.k),e.documents,e.mo.id),l=e.po(e.documents);for(const g of e.queries)yield Gd(e.localStore,g,l.get(g.name));return e.progress.taskState="Success",new sm(Object.assign({},e.progress),r)})()}}function tg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class ng{constructor(e){this.key=e}}class fm{constructor(e){this.key=e}}class Au{constructor(e,r){this.query=e,this.To=r,this.Eo=null,this.current=!1,this.Io=ii(),this.mutatedKeys=ii(),this.Ao=Ns(e),this.Ro=new Xd(this.Ao)}get Po(){return this.To}bo(e,r){const l=r?r.vo:new Qp,g=r?r.Ro:this.Ro;let D=r?r.mutatedKeys:this.mutatedKeys,M=g,U=!1;const Q=qs(this.query)&&g.size===this.query.limit?g.last():null,ae=F(this.query)&&g.size===this.query.limit?g.first():null;if(e.inorderTraversal((ve,je)=>{const lt=g.get(ve),Mt=Pr(this.query,je)?je:null,Wt=!!lt&&this.mutatedKeys.has(lt.key),jn=!!Mt&&(Mt.hasLocalMutations||this.mutatedKeys.has(Mt.key)&&Mt.hasCommittedMutations);let Qn=!1;lt&&Mt?lt.data.isEqual(Mt.data)?Wt!==jn&&(l.track({type:3,doc:Mt}),Qn=!0):this.Vo(lt,Mt)||(l.track({type:2,doc:Mt}),Qn=!0,(Q&&this.Ao(Mt,Q)>0||ae&&this.Ao(Mt,ae)<0)&&(U=!0)):!lt&&Mt?(l.track({type:0,doc:Mt}),Qn=!0):lt&&!Mt&&(l.track({type:1,doc:lt}),Qn=!0,(Q||ae)&&(U=!0)),Qn&&(Mt?(M=M.add(Mt),D=jn?D.add(ve):D.delete(ve)):(M=M.delete(ve),D=D.delete(ve)))}),qs(this.query)||F(this.query))for(;M.size>this.query.limit;){const ve=qs(this.query)?M.last():M.first();M=M.delete(ve.key),D=D.delete(ve.key),l.track({type:1,doc:ve})}return{Ro:M,vo:l,Bn:U,mutatedKeys:D}}Vo(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,l){const g=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const D=e.vo.no();D.sort((ae,ve)=>function(je,lt){const Mt=Wt=>{switch(Wt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tn()}};return Mt(je)-Mt(lt)}(ae.type,ve.type)||this.Ao(ae.doc,ve.doc)),this.So(l);const M=r?this.Do():[],U=0===this.Io.size&&this.current?1:0,Q=U!==this.Eo;return this.Eo=U,0!==D.length||Q?{snapshot:new Lh(this.query,e.Ro,g,D,e.mutatedKeys,0===U,Q,!1),Co:M}:{Co:M}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Qp,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(r=>this.To=this.To.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.To=this.To.delete(r)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=ii(),this.Ro.forEach(l=>{this.No(l.key)&&(this.Io=this.Io.add(l.key))});const r=[];return e.forEach(l=>{this.Io.has(l)||r.push(new fm(l))}),this.Io.forEach(l=>{e.has(l)||r.push(new ng(l))}),r}ko(e){this.To=e.zn,this.Io=ii();const r=this.bo(e.documents);return this.applyChanges(r,!0)}xo(){return Lh.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class rg{constructor(e,r,l){this.query=e,this.targetId=r,this.view=l}}class ig{constructor(e){this.key=e,this.$o=!1}}class U_{constructor(e,r,l,g,D,M){this.localStore=e,this.remoteStore=r,this.eventManager=l,this.sharedClientState=g,this.currentUser=D,this.maxConcurrentLimboResolutions=M,this.Fo={},this.Oo=new yc(U=>tn(U),un),this.Mo=new Map,this.Lo=new Set,this.Bo=new qi(Cn.comparator),this.Uo=new Map,this.qo=new Cu,this.Ko={},this.jo=new Map,this.Qo=pn.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function lv(i,e){return $f.apply(this,arguments)}function $f(){return $f=(0,T.Z)(function*(i,e){const r=Hc(i);let l,g;const D=r.Oo.get(e);if(D)l=D.targetId,r.sharedClientState.addLocalQueryTarget(l),g=D.view.xo();else{const M=yield vc(r.localStore,it(e)),U=r.sharedClientState.addLocalQueryTarget(M.targetId);l=M.targetId,g=yield sg(r,e,l,"current"===U),r.isPrimaryClient&&qd(r.remoteStore,M)}return g}),$f.apply(this,arguments)}function sg(i,e,r,l){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,T.Z)(function*(i,e,r,l){i.Go=(ve,je,lt)=>{return(Mt=(0,T.Z)(function*(Wt,jn,Qn,ia){let wa=jn.view.bo(Qn);wa.Bn&&(wa=yield Ih(Wt.localStore,jn.query,!1).then(({documents:Da})=>jn.view.bo(Da,wa)));const ai=ia&&ia.targetChanges.get(jn.targetId),Ho=jn.view.applyChanges(wa,Wt.isPrimaryClient,ai);return Wh(Wt,jn.targetId,Ho.Co),Ho.snapshot}),function(Wt,jn,Qn,ia){return Mt.apply(this,arguments)})(i,ve,je,lt);var Mt};const g=yield Ih(i.localStore,e,!0),D=new Au(e,g.zn),M=D.bo(g.documents),U=io.createSynthesizedTargetChangeForCurrentChange(r,l&&"Offline"!==i.onlineState),Q=D.applyChanges(M,i.isPrimaryClient,U);Wh(i,r,Q.Co);const ae=new rg(e,r,D);return i.Oo.set(e,ae),i.Mo.has(r)?i.Mo.get(r).push(e):i.Mo.set(r,[e]),Q.snapshot}),Bh.apply(this,arguments)}function j_(i,e){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,T.Z)(function*(i,e){const r=Jt(i),l=r.Oo.get(e),g=r.Mo.get(l.targetId);if(g.length>1)return r.Mo.set(l.targetId,g.filter(D=>!un(D,e))),void r.Oo.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||(yield ad(r.localStore,l.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(l.targetId),Ec(r.remoteStore,l.targetId),$c(r,l.targetId)}).catch(Bl))):($c(r,l.targetId),yield ad(r.localStore,l.targetId,!0))}),Uh.apply(this,arguments)}function og(){return og=(0,T.Z)(function*(i,e,r){const l=hg(i);try{const g=yield function(D,M){const U=Jt(D),Q=Yn.now(),ae=M.reduce((je,lt)=>je.add(lt.key),ii());let ve;return U.persistence.runTransaction("Locally write mutations","readwrite",je=>U.Wn.vn(je,ae).next(lt=>{ve=lt;const Mt=[];for(const Wt of M){const jn=Jl(Wt,ve.get(Wt.key));null!=jn&&Mt.push(new ma(Wt.key,jn,Sl(jn.value.mapValue),ci.exists(!0)))}return U.An.addMutationBatch(je,Q,Mt,M)})).then(je=>(je.applyToLocalDocumentSet(ve),{batchId:je.batchId,changes:ve}))}(l.localStore,e);l.sharedClientState.addPendingMutation(g.batchId),function(D,M,U){let Q=D.Ko[D.currentUser.toKey()];Q||(Q=new qi(en)),Q=Q.insert(M,U),D.Ko[D.currentUser.toKey()]=Q}(l,g.batchId,r),yield Qu(l,g.changes),yield ru(l.remoteStore)}catch(g){const D=Jd(g,"Failed to persist write");r.reject(D)}}),og.apply(this,arguments)}function eh(i,e){return jh.apply(this,arguments)}function jh(){return jh=(0,T.Z)(function*(i,e){const r=Jt(i);try{const l=yield O_(r.localStore,e);e.targetChanges.forEach((g,D)=>{const M=r.Uo.get(D);M&&(Pn(g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size<=1),g.addedDocuments.size>0?M.$o=!0:g.modifiedDocuments.size>0?Pn(M.$o):g.removedDocuments.size>0&&(Pn(M.$o),M.$o=!1))}),yield Qu(r,l,e)}catch(l){yield Bl(l)}}),jh.apply(this,arguments)}function pm(i,e,r){const l=Jt(i);if(l.isPrimaryClient&&0===r||!l.isPrimaryClient&&1===r){const g=[];l.Oo.forEach((D,M)=>{const U=M.view.ro(e);U.snapshot&&g.push(U.snapshot)}),function(D,M){const U=Jt(D);U.onlineState=M;let Q=!1;U.queries.forEach((ae,ve)=>{for(const je of ve.listeners)je.ro(M)&&(Q=!0)}),Q&&Uf(U)}(l.eventManager,e),g.length&&l.Fo.Pr(g),l.onlineState=e,l.isPrimaryClient&&l.sharedClientState.setOnlineState(e)}}function ag(i,e,r){return $h.apply(this,arguments)}function $h(){return $h=(0,T.Z)(function*(i,e,r){const l=Jt(i);l.sharedClientState.updateQueryState(e,"rejected",r);const g=l.Uo.get(e),D=g&&g.key;if(D){let M=new qi(Cn.comparator);M=M.insert(D,ni.newNoDocument(D,Fn.min()));const U=ii().add(D),Q=new vu(Fn.min(),new Map,new Oi(en),M,U);yield eh(l,Q),l.Bo=l.Bo.remove(D),l.Uo.delete(e),fd(l)}else yield ad(l.localStore,e,!1).then(()=>$c(l,e,r)).catch(Bl)}),$h.apply(this,arguments)}function Hf(i,e){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,T.Z)(function*(i,e){const r=Jt(i),l=e.batch.batchId;try{const g=yield Vp(r.localStore,e);Gh(r,l,null),Hh(r,l),r.sharedClientState.updateMutationState(l,"acknowledged"),yield Qu(r,g)}catch(g){yield Bl(g)}}),Gf.apply(this,arguments)}function gm(i,e,r){return th.apply(this,arguments)}function th(){return th=(0,T.Z)(function*(i,e,r){const l=Jt(i);try{const g=yield function(D,M){const U=Jt(D);return U.persistence.runTransaction("Reject batch","readwrite-primary",Q=>{let ae;return U.An.lookupMutationBatch(Q,M).next(ve=>(Pn(null!==ve),ae=ve.keys(),U.An.removeMutationBatch(Q,ve))).next(()=>U.An.performConsistencyCheck(Q)).next(()=>U.Wn.vn(Q,ae))})}(l.localStore,e);Gh(l,e,r),Hh(l,e),l.sharedClientState.updateMutationState(e,"rejected",r),yield Qu(l,g)}catch(g){yield Bl(g)}}),th.apply(this,arguments)}function Wf(){return Wf=(0,T.Z)(function*(i,e){const r=Jt(i);Iu(r.remoteStore)||Vt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(D){const M=Jt(D);return M.persistence.runTransaction("Get highest unacknowledged batch id","readonly",U=>M.An.getHighestUnacknowledgedBatchId(U))}(r.localStore);if(-1===l)return void e.resolve();const g=r.jo.get(l)||[];g.push(e),r.jo.set(l,g)}catch(l){const g=Jd(l,"Initialization of waitForPendingWrites() operation failed");e.reject(g)}}),Wf.apply(this,arguments)}function Hh(i,e){(i.jo.get(e)||[]).forEach(r=>{r.resolve()}),i.jo.delete(e)}function Gh(i,e,r){const l=Jt(i);let g=l.Ko[l.currentUser.toKey()];if(g){const D=g.get(e);D&&(r?D.reject(r):D.resolve(),g=g.remove(e)),l.Ko[l.currentUser.toKey()]=g}}function $c(i,e,r=null){i.sharedClientState.removeLocalQueryTarget(e);for(const l of i.Mo.get(e))i.Oo.delete(l),r&&i.Fo.zo(l,r);i.Mo.delete(e),i.isPrimaryClient&&i.qo.us(e).forEach(l=>{i.qo.containsKey(l)||zf(i,l)})}function zf(i,e){i.Lo.delete(e.path.canonicalString());const r=i.Bo.get(e);null!==r&&(Ec(i.remoteStore,r),i.Bo=i.Bo.remove(e),i.Uo.delete(r),fd(i))}function Wh(i,e,r){for(const l of r)l instanceof ng?(i.qo.addReference(l.key,e),Yu(i,l)):l instanceof fm?(Vt("SyncEngine","Document no longer in limbo: "+l.key),i.qo.removeReference(l.key,e),i.qo.containsKey(l.key)||zf(i,l.key)):Tn()}function Yu(i,e){const r=e.key,l=r.path.canonicalString();i.Bo.get(r)||i.Lo.has(l)||(Vt("SyncEngine","New document in limbo: "+r),i.Lo.add(l),fd(i))}function fd(i){for(;i.Lo.size>0&&i.Bo.size<i.maxConcurrentLimboResolutions;){const e=i.Lo.values().next().value;i.Lo.delete(e);const r=new Cn(In.fromString(e)),l=i.Qo.next();i.Uo.set(l,new ig(r)),i.Bo=i.Bo.insert(r,l),qd(i.remoteStore,new Ll(it(Nl(r.path)),l,2,we.I))}}function Qu(i,e,r){return Os.apply(this,arguments)}function Os(){return Os=(0,T.Z)(function*(i,e,r){const l=Jt(i),g=[],D=[],M=[];var U;l.Oo.isEmpty()||(l.Oo.forEach((U,Q)=>{M.push(l.Go(Q,e,r).then(ae=>{if(ae){l.isPrimaryClient&&l.sharedClientState.updateQueryState(Q.targetId,ae.fromCache?"not-current":"current"),g.push(ae);const ve=El.$n(Q.targetId,ae);D.push(ve)}}))}),yield Promise.all(M),l.Fo.Pr(g),yield(U=(0,T.Z)(function*(Q,ae){const ve=Jt(Q);try{yield ve.persistence.runTransaction("notifyLocalViewChanges","readwrite",je=>Nt.forEach(ae,lt=>Nt.forEach(lt.kn,Mt=>ve.persistence.referenceDelegate.addReference(je,lt.targetId,Mt)).next(()=>Nt.forEach(lt.xn,Mt=>ve.persistence.referenceDelegate.removeReference(je,lt.targetId,Mt)))))}catch(je){if(!pc(je))throw je;Vt("LocalStore","Failed to update sequence numbers: "+je)}for(const je of ae){const lt=je.targetId;if(!je.fromCache){const Mt=ve.qn.get(lt),jn=Mt.withLastLimboFreeSnapshotVersion(Mt.snapshotVersion);ve.qn=ve.qn.insert(lt,jn)}}}),function(Q,ae){return U.apply(this,arguments)})(l.localStore,D))}),Os.apply(this,arguments)}function Ju(i,e){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,T.Z)(function*(i,e){const r=Jt(i);if(!r.currentUser.isEqual(e)){Vt("SyncEngine","User change. New user:",e.toKey());const l=yield ol(r.localStore,e);r.currentUser=e,(g=r).jo.forEach(M=>{M.forEach(U=>{U.reject(new Tt(ot.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),g.jo.clear(),r.sharedClientState.handleUserChange(e,l.removedBatchIds,l.addedBatchIds),yield Qu(r,l.Gn)}var g}),Tc.apply(this,arguments)}function nh(i,e){const r=Jt(i),l=r.Uo.get(e);if(l&&l.$o)return ii().add(l.key);{let g=ii();const D=r.Mo.get(e);if(!D)return g;for(const M of D){const U=r.Oo.get(M);g=g.unionWith(U.view.Po)}return g}}function qf(i,e){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,T.Z)(function*(i,e){const r=Jt(i),l=yield Ih(r.localStore,e.query,!0),g=e.view.ko(l);return r.isPrimaryClient&&Wh(r,e.targetId,g.Co),g}),Ic.apply(this,arguments)}function Zf(i){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,T.Z)(function*(i){const e=Jt(i);return bc(e.localStore).then(r=>Qu(e,r))}),Sc.apply(this,arguments)}function mm(i,e,r,l){return pd.apply(this,arguments)}function pd(){return pd=(0,T.Z)(function*(i,e,r,l){const g=Jt(i),D=yield function(M,U){const Q=Jt(M),ae=Jt(Q.An);return Q.persistence.runTransaction("Lookup mutation documents","readonly",ve=>ae.Zt(ve,U).next(je=>je?Q.Wn.vn(ve,je):Nt.resolve(null)))}(g.localStore,e);var U;null!==D?("pending"===r?yield ru(g.remoteStore):"acknowledged"===r||"rejected"===r?(Gh(g,e,l||null),Hh(g,e),U=e,Jt(Jt(g.localStore).An).ee(U)):Tn(),yield Qu(g,D)):Vt("SyncEngine","Cannot apply mutation batch with id: "+e)}),pd.apply(this,arguments)}function Kf(){return Kf=(0,T.Z)(function*(i,e){const r=Jt(i);if(Hc(r),hg(r),!0===e&&!0!==r.Wo){const l=r.sharedClientState.getAllActiveQueryTargets(),g=yield zh(r,l.toArray());r.Wo=!0,yield Yp(r.remoteStore,!0);for(const D of g)qd(r.remoteStore,D)}else if(!1===e&&!1!==r.Wo){const l=[];let g=Promise.resolve();r.Mo.forEach((D,M)=>{r.sharedClientState.isLocalQueryTarget(M)?l.push(M):g=g.then(()=>($c(r,M),ad(r.localStore,M,!0))),Ec(r.remoteStore,M)}),yield g,yield zh(r,l),function(D){const M=Jt(D);M.Uo.forEach((U,Q)=>{Ec(M.remoteStore,Q)}),M.qo.hs(),M.Uo=new Map,M.Bo=new qi(Cn.comparator)}(r),r.Wo=!1,yield Yp(r.remoteStore,!1)}}),Kf.apply(this,arguments)}function zh(i,e,r){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,T.Z)(function*(i,e,r){const l=Jt(i),g=[],D=[];for(const M of e){let U;const Q=l.Mo.get(M);if(Q&&0!==Q.length){U=yield vc(l.localStore,it(Q[0]));for(const ae of Q){const ve=l.Oo.get(ae),je=yield qf(l,ve);je.snapshot&&D.push(je.snapshot)}}else{const ae=yield yr(l.localStore,M);U=yield vc(l.localStore,ae),yield sg(l,ug(ae),M,!1)}g.push(U)}return l.Fo.Pr(D),g}),Yf.apply(this,arguments)}function ug(i){return Yl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function cg(i){const e=Jt(i);return Jt(Jt(e.localStore).persistence).Tn()}function rh(i,e,r,l){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,T.Z)(function*(i,e,r,l){const g=Jt(i);if(g.Wo)Vt("SyncEngine","Ignoring unexpected query state notification.");else if(g.Mo.has(e))switch(r){case"current":case"not-current":{const D=yield bc(g.localStore),M=vu.createSynthesizedRemoteEventForCurrentChange(e,"current"===r);yield Qu(g,D,M);break}case"rejected":yield ad(g.localStore,e,!0),$c(g,e,l);break;default:Tn()}}),Qf.apply(this,arguments)}function G_(i,e,r){return dg.apply(this,arguments)}function dg(){return dg=(0,T.Z)(function*(i,e,r){const l=Hc(i);if(l.Wo){for(const g of e){if(l.Mo.has(g)){Vt("SyncEngine","Adding an already active target "+g);continue}const D=yield yr(l.localStore,g),M=yield vc(l.localStore,D);yield sg(l,ug(D),M.targetId,!1),qd(l.remoteStore,M)}for(const g of r)l.Mo.has(g)&&(yield ad(l.localStore,g,!1).then(()=>{Ec(l.remoteStore,g),$c(l,g)}).catch(Bl))}}),dg.apply(this,arguments)}function Hc(i){const e=Jt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=eh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ag.bind(null,e),e.Fo.Pr=cm.bind(null,e.eventManager),e.Fo.zo=B_.bind(null,e.eventManager),e}function hg(i){const e=Jt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hf.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gm.bind(null,e),e}class _m{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,T.Z)(function*(){r.k=Mf(e.databaseInfo.databaseId),r.sharedClientState=r.Jo(e),r.persistence=r.Yo(e),yield r.persistence.start(),r.gcScheduler=r.Xo(e),r.localStore=r.Zo(e)})()}Xo(e){return null}Zo(e){return vf(this.persistence,new ts,e.initialUser,this.k)}Yo(e){return new av(Wd.ks,this.k)}Jo(e){return new Sf}terminate(){var e=this;return(0,T.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ym extends _m{constructor(e,r,l){super(),this.ta=e,this.cacheSizeBytes=r,this.forceOwnership=l,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,l=this;return(0,T.Z)(function*(){yield r().call(l,e),yield function(i){return Dc.apply(this,arguments)}(l.localStore),yield l.ta.initialize(l,e),yield hg(l.ta.syncEngine),yield ru(l.ta.remoteStore),yield l.persistence.sn(()=>(l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()))})()}Zo(e){return vf(this.persistence,new ts,e.initialUser,this.k)}Xo(e){return new tm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const r=_f(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),l=void 0!==this.cacheSizeBytes?L.withCacheSize(this.cacheSizeBytes):L.DEFAULT;return new Fp(this.synchronizeTabs,r,e.clientId,l,e.asyncQueue,cd(),qu(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new Sf}}class iu extends ym{constructor(e,r){super(e,r,!1),this.ta=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,l=this;return(0,T.Z)(function*(){yield r().call(l,e);const g=l.ta.syncEngine;l.sharedClientState instanceof ld&&(l.sharedClientState.syncEngine={mi:mm.bind(null,g),gi:rh.bind(null,g),yi:G_.bind(null,g),Tn:cg.bind(null,g),_i:Zf.bind(null,g)},yield l.sharedClientState.start()),yield l.persistence.sn(function(){var D=(0,T.Z)(function*(M){yield function(i,e){return Kf.apply(this,arguments)}(l.ta.syncEngine,M),l.gcScheduler&&(M&&!l.gcScheduler.started?l.gcScheduler.start(l.localStore):M||l.gcScheduler.stop())});return function(M){return D.apply(this,arguments)}}())})()}Jo(e){const r=cd();if(!ld.bt(r))throw new Tt(ot.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const l=_f(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ld(r,e.asyncQueue,l,e.clientId,e.initialUser)}}class qh{initialize(e,r){var l=this;return(0,T.Z)(function*(){l.localStore||(l.localStore=e.localStore,l.sharedClientState=e.sharedClientState,l.datastore=l.createDatastore(r),l.remoteStore=l.createRemoteStore(r),l.eventManager=l.createEventManager(r),l.syncEngine=l.createSyncEngine(r,!e.synchronizeTabs),l.sharedClientState.onlineStateHandler=g=>pm(l.syncEngine,g,1),l.remoteStore.remoteSyncer.handleCredentialChange=Ju.bind(null,l.syncEngine),yield Yp(l.remoteStore,l.syncEngine.isPrimaryClient))})()}createEventManager(e){return new um}createDatastore(e){const r=Mf(e.databaseInfo.databaseId),l=new k_(e.databaseInfo);return new F_(e.authCredentials,e.appCheckCredentials,l,r)}createRemoteStore(e){return r=this.localStore,l=this.datastore,g=e.asyncQueue,D=U=>pm(this.syncEngine,U,0),M=Rh.bt()?new Rh:new Af,new V_(r,l,g,D,M);var r,l,g,D,M}createSyncEngine(e,r){return function(l,g,D,M,U,Q,ae){const ve=new U_(l,g,D,M,U,Q);return ae&&(ve.Wo=!0),ve}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,T.Z)(function*(r){const l=Jt(r);Vt("RemoteStore","RemoteStore shutting down."),l.Gr.add(5),yield Zu(l),l.Hr.shutdown(),l.Jr.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function Jf(i,e=10240){let r=0;return{read:()=>(0,T.Z)(function*(){if(r<i.byteLength){const l={value:i.slice(r,r+e),done:!1};return r+=e,l}return{done:!0}})(),cancel:()=>(0,T.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Zh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class vm{constructor(e,r){this.sa=e,this.k=r,this.metadata=new Gr,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(l=>{l&&l._o()?this.metadata.resolve(l.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==l?void 0:l.payload)}`))},l=>this.metadata.reject(l))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,T.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,T.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,T.Z)(function*(){const r=yield e.oa();if(null===r)return null;const l=e.ia.decode(r),g=Number(l);isNaN(g)&&e.aa(`length string (${l}) is not valid number`);const D=yield e.ca(g);return new dm(JSON.parse(D),r.length+g)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,T.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const r=e.ua();r<0&&e.aa("Reached the end of bundle when a length string is expected.");const l=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),l})()}ca(e){var r=this;return(0,T.Z)(function*(){for(;r.buffer.length<e;)(yield r.ha())&&r.aa("Reached the end of bundle when more is expected.");const l=r.ia.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),l})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,T.Z)(function*(){const r=yield e.sa.read();if(!r.done){const l=new Uint8Array(e.buffer.length+r.value.length);l.set(e.buffer),l.set(r.value,e.buffer.length),e.buffer=l}return r.done})()}}class bm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,T.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Tt(ot.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield(g=(0,T.Z)(function*(D,M){const U=Jt(D),Q=C(U.k)+"/documents",ae={documents:M.map(Mt=>Bu(U.k,Mt))},ve=yield U.ji("BatchGetDocuments",Q,ae),je=new Map;ve.forEach(Mt=>{const Wt=function(i,e){return"found"in e?function(r,l){Pn(!!l.found);const g=_a(r,l.found.name),D=Ci(l.found.updateTime),M=new xi({mapValue:{fields:l.found.fields}});return ni.newFoundDocument(g,D,M)}(i,e):"missing"in e?function(r,l){Pn(!!l.missing),Pn(!!l.readTime);const g=_a(r,l.missing),D=Ci(l.readTime);return ni.newNoDocument(g,D)}(i,e):Tn()}(U.k,Mt);je.set(Wt.key.toString(),Wt)});const lt=[];return M.forEach(Mt=>{const Wt=je.get(Mt.toString());Pn(!!Wt),lt.push(Wt)}),lt}),function(D,M){return g.apply(this,arguments)})(r.datastore,e);var g;return l.forEach(g=>r.recordVersion(g)),l})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,T.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var l;e.mutations.forEach(l=>{r.delete(l.key.toString())}),r.forEach((l,g)=>{const D=Cn.fromPath(g);e.mutations.push(new _u(D,e.precondition(D)))}),yield(l=(0,T.Z)(function*(g,D){const M=Jt(g),U=C(M.k)+"/documents",Q={writes:D.map(ae=>Re(M.k,ae))};yield M.Bi("Commit",U,Q)}),function(g,D){return l.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Tn();r=Fn.min()}const l=this.readVersions.get(e.key.toString());if(l){if(!r.isEqual(l))throw new Tt(ot.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?ci.updateTime(r):ci.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Fn.min()))throw new Tt(ot.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ci.updateTime(r)}return ci.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class z_{constructor(e,r,l,g){this.asyncQueue=e,this.datastore=r,this.updateFunction=l,this.deferred=g,this.la=5,this.ur=new jp(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,T.Z)(function*(){const r=new bm(e.datastore),l=e.da(r);l&&l.then(g=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(g)}).catch(D=>{e.wa(D)}))}).catch(g=>{e.wa(g)})}))}da(e){try{const r=this.updateFunction(e);return!Qr(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!Lc(r)}return!1}}class q_{constructor(e,r,l,g){var D=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=l,this.databaseInfo=g,this.user=Rr.UNAUTHENTICATED,this.clientId=Xt.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(l,function(){var M=(0,T.Z)(function*(U){Vt("FirestoreClient","Received user=",U.uid),yield D.authCredentialListener(U),D.user=U});return function(U){return M.apply(this,arguments)}}()),this.appCheckCredentials.start(l,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,T.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Tt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,T.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(l){const g=Jd(l,"Failed to shutdown persistence");r.reject(g)}})),r.promise}}function wm(i,e){return fg.apply(this,arguments)}function fg(){return fg=(0,T.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Vt("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield e.initialize(r);let l=r.initialUser;i.setCredentialChangeListener(function(){var g=(0,T.Z)(function*(D){l.isEqual(D)||(yield ol(e.localStore,D),l=D)});return function(D){return g.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),fg.apply(this,arguments)}function pg(i,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,T.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const r=yield Xf(i);Vt("FirestoreClient","Initializing OnlineComponentProvider");const l=yield i.getConfiguration();yield e.initialize(r,l),i.setCredentialChangeListener(g=>{return(D=(0,T.Z)(function*(M,U){const Q=Jt(M);Q.asyncQueue.verifyOperationInProgress(),Vt("RemoteStore","RemoteStore received new credentials");const ae=Iu(Q);Q.Gr.add(3),yield Zu(Q),ae&&Q.Jr.set("Unknown"),yield Q.remoteSyncer.handleCredentialChange(U),Q.Gr.delete(3),yield xh(Q)}),function(M,U){return D.apply(this,arguments)})(e.remoteStore,g);var D}),i.onlineComponents=e}),Dm.apply(this,arguments)}function Xf(i){return gg.apply(this,arguments)}function gg(){return gg=(0,T.Z)(function*(i){return i.offlineComponents||(Vt("FirestoreClient","Using default OfflineComponentProvider"),yield wm(i,new _m)),i.offlineComponents}),gg.apply(this,arguments)}function ep(i){return Em.apply(this,arguments)}function Em(){return Em=(0,T.Z)(function*(i){return i.onlineComponents||(Vt("FirestoreClient","Using default OnlineComponentProvider"),yield pg(i,new qh)),i.onlineComponents}),Em.apply(this,arguments)}function Z_(i){return Xf(i).then(e=>e.persistence)}function Kh(i){return Xf(i).then(e=>e.localStore)}function Cm(i){return ep(i).then(e=>e.remoteStore)}function tp(i){return ep(i).then(e=>e.syncEngine)}function gd(i){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,T.Z)(function*(i){const e=yield ep(i),r=e.eventManager;return r.onListen=lv.bind(null,e.syncEngine),r.onUnlisten=j_.bind(null,e.syncEngine),r}),Tm.apply(this,arguments)}function mg(i,e,r={}){const l=new Gr;return i.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(g,D,M,U,Q){const ae=new Zh({next:je=>{D.enqueueAndForget(()=>Bf(g,ve));const lt=je.docs.has(M);!lt&&je.fromCache?Q.reject(new Tt(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):lt&&je.fromCache&&U&&"server"===U.source?Q.reject(new Tt(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Q.resolve(je)},error:je=>Q.reject(je)}),ve=new jf(Nl(M.path),ae,{includeMetadataChanges:!0,wo:!0});return Jp(g,ve)}(yield gd(i),i.asyncQueue,e,r,l)})),l.promise}function _g(i,e,r={}){const l=new Gr;return i.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(g,D,M,U,Q){const ae=new Zh({next:je=>{D.enqueueAndForget(()=>Bf(g,ve)),je.fromCache&&"server"===U.source?Q.reject(new Tt(ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Q.resolve(je)},error:je=>Q.reject(je)}),ve=new jf(M,ae,{includeMetadataChanges:!0,wo:!0});return Jp(g,ve)}(yield gd(i),i.asyncQueue,e,r,l)})),l.promise}class Y_{constructor(e,r,l,g,D,M,U,Q){this.databaseId=e,this.appId=r,this.persistenceKey=l,this.host=g,this.ssl=D,this.forceLongPolling=M,this.autoDetectLongPolling=U,this.useFetchStreams=Q}}class Gc{constructor(e,r){this.projectId=e,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}const Am=new Map;function vg(i,e,r){if(!r)throw new Tt(ot.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Nm(i,e,r,l){if(!0===e&&!0===l)throw new Tt(ot.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function Mm(i){if(!Cn.isDocumentKey(i))throw new Tt(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Rm(i){if(Cn.isDocumentKey(i))throw new Tt(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function np(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(r=i).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof i?"a function":Tn()}function Jr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Tt(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=np(i);throw new Tt(ot.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return i}function md(i,e){if(e<=0)throw new Tt(ot.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class xm{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new Tt(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tt(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Nm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ac{constructor(e,r,l){this._authCredentials=r,this._appCheckCredentials=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xm({}),this._settingsFrozen=!1,e instanceof Gc?this._databaseId=e:(this._app=e,this._databaseId=function(g){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Tt(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(g.options.projectId)}(e))}get app(){if(!this._app)throw new Tt(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tt(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xm(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Oa;switch(r.type){case"gapi":const l=r.client;return Pn(!("object"!=typeof l||null===l||!l.auth||!l.auth.getAuthHeaderValueForFirstParty)),new B(l,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Tt(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=Am.get(e);r&&(Vt("ComponentProvider","Removing Datastore"),Am.delete(e),r.terminate())}(this),Promise.resolve()}}function Om(i,e,r,l={}){var g;const D=(i=Jr(i,Ac))._getSettings();if("firestore.googleapis.com"!==D.host&&D.host!==e&&Qi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},D),{host:`${e}:${r}`,ssl:!1})),l.mockUserToken){let M,U;if("string"==typeof l.mockUserToken)M=l.mockUserToken,U=Rr.MOCK_USER;else{M=(0,ge.Sg)(l.mockUserToken,null===(g=i._app)||void 0===g?void 0:g.options.projectId);const Q=l.mockUserToken.sub||l.mockUserToken.user_id;if(!Q)throw new Tt(ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");U=new Rr(Q)}i._authCredentials=new k(new fl(M,U))}}class hs{constructor(e,r,l){this.converter=r,this._key=l,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hs(this.firestore,e,this._key)}}class $o{constructor(e,r,l){this.converter=r,this._query=l,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class Ys extends $o{constructor(e,r,l){super(e,r,Nl(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hs(this.firestore,null,new Cn(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function _d(i,e,...r){if(i=(0,ge.m9)(i),vg("collection","path",e),i instanceof Ac){const l=In.fromString(e,...r);return Rm(l),new Ys(i,null,l)}{if(!(i instanceof hs||i instanceof Ys))throw new Tt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=i._path.child(In.fromString(e,...r));return Rm(l),new Ys(i.firestore,null,l)}}function ba(i,e){if(i=Jr(i,Ac),vg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Tt(ot.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $o(i,null,(r=e,new Jo(In.emptyPath(),r)));var r}function Wc(i,e,...r){if(i=(0,ge.m9)(i),1===arguments.length&&(e=Xt.A()),vg("doc","path",e),i instanceof Ac){const l=In.fromString(e,...r);return Mm(l),new hs(i,null,new Cn(l))}{if(!(i instanceof hs||i instanceof Ys))throw new Tt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=i._path.child(In.fromString(e,...r));return Mm(l),new hs(i.firestore,i instanceof Ys?i.converter:null,new Cn(l))}}function yd(i,e){return i=(0,ge.m9)(i),e=(0,ge.m9)(e),(i instanceof hs||i instanceof Ys)&&(e instanceof hs||e instanceof Ys)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Cl(i,e){return i=(0,ge.m9)(i),e=(0,ge.m9)(e),i instanceof $o&&e instanceof $o&&i.firestore===e.firestore&&un(i._query,e._query)&&i.converter===e.converter}class rp{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new jp(this,"async_queue_retry"),this.Ra=()=>{const r=qu();r&&Vt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.ur.er()};const e=qu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const r=qu();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const r=new Gr;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,T.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(r){if(!pc(r))throw r;Vt("AsyncQueue","Operation failed with retryable error: "+r)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const r=this.ma.then(()=>(this.Ea=!0,e().catch(l=>{throw this.Ta=l,this.Ea=!1,Ei("INTERNAL UNHANDLED ERROR: ",function(D){let M=D.message||"";return D.stack&&(M=D.stack.includes(D.message)?D.stack:D.message+"\n"+D.stack),M}(l)),l}).then(l=>(this.Ea=!1,l))));return this.ma=r,r}enqueueAfterDelay(e,r,l){this.Pa(),this.Aa.indexOf(e)>-1&&(r=0);const g=va.createAndSchedule(this,e,r,l,D=>this.Va(D));return this.pa.push(g),g}Pa(){this.Ta&&Tn()}verifyOperationInProgress(){}Sa(){var e=this;return(0,T.Z)(function*(){let r;do{r=e.ma,yield r}while(r!==e.ma)})()}Da(e){for(const r of this.pa)if(r.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((r,l)=>r.targetTimeMs-l.targetTimeMs);for(const r of this.pa)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const r=this.pa.indexOf(e);this.pa.splice(r,1)}}function Nc(i){return function(e,r){if("object"!=typeof e||null===e)return!1;const l=e;for(const g of["next","error","complete"])if(g in l&&"function"==typeof l[g])return!0;return!1}(i)}class vd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,l){this._progressObserver={next:e,error:r,complete:l}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const bd=-1;class Fi extends Ac{constructor(e,r,l){super(e,r,l),this.type="firestore",this._queue=new rp,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wd(this),this._firestoreClient.terminate()}}function ih(i=(0,_.getApp)()){return(0,_._getProvider)(i,"firestore").getImmediate()}function Ds(i){return i._firestoreClient||wd(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function wd(i){var e;const r=i._freezeSettings(),l=(D=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Y_(i._databaseId,D,i._persistenceKey,(U=r).host,U.ssl,U.experimentalForceLongPolling,U.experimentalAutoDetectLongPolling,U.useFetchStreams));var D,U;i._firestoreClient=new q_(i._authCredentials,i._appCheckCredentials,i._queue,l)}function sh(i,e){jm(i=Jr(i,Fi));const r=Ds(i),l=i._freezeSettings(),g=new qh;return bg(r,g,new ym(g,l.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function km(i){jm(i=Jr(i,Fi));const e=Ds(i),r=i._freezeSettings(),l=new qh;return bg(e,l,new iu(l,r.cacheSizeBytes))}function bg(i,e,r){const l=new Gr;return i.asyncQueue.enqueue((0,T.Z)(function*(){try{yield wm(i,r),yield pg(i,e),l.resolve()}catch(g){if(!("FirebaseError"===(D=g).name?D.code===ot.FAILED_PRECONDITION||D.code===ot.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&D instanceof DOMException)||22===D.code||20===D.code||11===D.code))throw g;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+g),l.reject(g)}var D})).then(()=>l.promise)}function Pm(i){if(i._initialized&&!i._terminated)throw new Tt(ot.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,T.Z)(function*(){try{yield(r=(0,T.Z)(function*(l){if(!Fl.bt())return Promise.resolve();const g=l+"main";yield Fl.delete(g)}),function(l){return r.apply(this,arguments)})(_f(i._databaseId,i._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}function Fm(i){return function(e){const r=new Gr;return e.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(i,e){return Wf.apply(this,arguments)}(yield tp(e),r)})),r.promise}(Ds(i=Jr(i,Fi)))}function Lm(i){return function(i){return i.asyncQueue.enqueue((0,T.Z)(function*(){const e=yield Z_(i),r=yield Cm(i);return e.setNetworkEnabled(!0),function(l){const g=Jt(l);return g.Gr.delete(0),xh(g)}(r)}))}(Ds(i=Jr(i,Fi)))}function Vm(i){return function(i){return i.asyncQueue.enqueue((0,T.Z)(function*(){const e=yield Z_(i),r=yield Cm(i);return e.setNetworkEnabled(!1),(l=(0,T.Z)(function*(g){const D=Jt(g);D.Gr.add(0),yield Zu(D),D.Jr.set("Offline")}),function(g){return l.apply(this,arguments)})(r);var l}))}(Ds(i=Jr(i,Fi)))}function Bm(i,e){const r=Ds(i=Jr(i,Fi)),l=new vd;return function(i,e,r,l){const g=function(D,M){let U;return U="string"==typeof D?(new TextEncoder).encode(D):D,Q=function(Q,ae){if(Q instanceof Uint8Array)return Jf(Q,void 0);if(Q instanceof ArrayBuffer)return Jf(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(U),new vm(Q,M);var Q}(r,Mf(e));i.asyncQueue.enqueueAndForget((0,T.Z)(function*(){!function(i,e,r){const l=Jt(i);var g;(g=(0,T.Z)(function*(D,M,U){try{const Q=yield M.getMetadata();if(yield function(lt,Mt){const Wt=Jt(lt),jn=Ci(Mt.createTime);return Wt.persistence.runTransaction("hasNewerBundle","readonly",Qn=>Wt.Ye.getBundleMetadata(Qn,Mt.id)).then(Qn=>!!Qn&&Qn.createTime.compareTo(jn)>=0)}(D.localStore,Q))return yield M.close(),void U._completeWith((lt=Q,{taskState:"Success",documentsLoaded:lt.totalDocuments,bytesLoaded:lt.totalBytes,totalDocuments:lt.totalDocuments,totalBytes:lt.totalBytes}));U._updateProgress(tg(Q));const ae=new eg(Q,D.localStore,M.k);let ve=yield M.Ho();for(;ve;){const lt=yield ae.yo(ve);lt&&U._updateProgress(lt),ve=yield M.Ho()}const je=yield ae.complete();yield Qu(D,je.In,void 0),yield function(lt,Mt){const Wt=Jt(lt);return Wt.persistence.runTransaction("Save bundle","readwrite",jn=>Wt.Ye.saveBundleMetadata(jn,Mt))}(D.localStore,Q),U._completeWith(je.progress)}catch(Q){Qi("SyncEngine",`Loading bundle failed with ${Q}`),U._failWith(Q)}var lt}),function(D,M,U){return g.apply(this,arguments)})(l,e,r).then(()=>{l.sharedClientState.notifyBundleLoaded()})}(yield tp(i),g,l)}))}(r,i._databaseId,e,l),l}function Um(i,e){return function(i,e){return i.asyncQueue.enqueue((0,T.Z)(function*(){return function(r,l){const g=Jt(r);return g.persistence.runTransaction("Get named query","readonly",D=>g.Ye.getNamedQuery(D,l))}(yield Kh(i),e)}))}(Ds(i=Jr(i,Fi)),e).then(r=>r?new $o(i,null,r.query):null)}function jm(i){if(i._initialized||i._terminated)throw new Tt(ot.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xu{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Tt(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mc(Si.fromBase64String(e))}catch(r){throw new Tt(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Mc(Si.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zc{constructor(e){this._methodName=e}}class ip{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Tt(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Tt(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}}const J_=/^__.*__$/;class $m{constructor(e,r,l){this.data=e,this.fieldMask=r,this.fieldTransforms=l}toMutation(e,r){return null!==this.fieldMask?new ma(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ms(e,this.data,r,this.fieldTransforms)}}class Hm{constructor(e,r,l){this.data=e,this.fieldMask=r,this.fieldTransforms=l}toMutation(e,r){return new ma(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function wg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tn()}}class sp{constructor(e,r,l,g,D,M){this.settings=e,this.databaseId=r,this.k=l,this.ignoreUndefinedProperties=g,void 0===D&&this.ka(),this.fieldTransforms=D||[],this.fieldMask=M||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new sp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var r;const l=null===(r=this.path)||void 0===r?void 0:r.child(e),g=this.$a({path:l,Oa:!1});return g.Ma(e),g}La(e){var r;const l=null===(r=this.path)||void 0===r?void 0:r.child(e),g=this.$a({path:l,Oa:!1});return g.ka(),g}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return cp(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(wg(this.xa)&&J_.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class X_{constructor(e,r,l){this.databaseId=e,this.ignoreUndefinedProperties=r,this.k=l||Mf(e)}ja(e,r,l,g=!1){return new sp({xa:e,methodName:r,Ka:l,path:pi.emptyPath(),Oa:!1,qa:g},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function oh(i){const e=i._freezeSettings(),r=Mf(i._databaseId);return new X_(i._databaseId,!!e.ignoreUndefinedProperties,r)}function op(i,e,r,l,g,D={}){const M=i.ja(D.merge||D.mergeFields?2:0,e,r,g);up("Data must be an object, but it was:",M,l);const U=Cd(l,M);let Q,ae;if(D.merge)Q=new ka(M.fieldMask),ae=M.fieldTransforms;else if(D.mergeFields){const ve=[];for(const je of D.mergeFields){const lt=Cg(e,je,r);if(!M.contains(lt))throw new Tt(ot.INVALID_ARGUMENT,`Field '${lt}' is specified in your field mask but missing from your input data.`);dp(ve,lt)||ve.push(lt)}Q=new ka(ve),ae=M.fieldTransforms.filter(je=>Q.covers(je.field))}else Q=null,ae=M.fieldTransforms;return new $m(new xi(U),Q,ae)}class Dd extends zc{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dd}}function ap(i,e,r){return new sp({xa:3,Ka:e.settings.Ka,methodName:i._methodName,Oa:r},e.databaseId,e.k,e.ignoreUndefinedProperties)}class Dg extends zc{_toFieldTransform(e){return new fu(e.path,new yl)}isEqual(e){return e instanceof Dg}}class fv extends zc{constructor(e,r){super(e),this.Qa=r}_toFieldTransform(e){const r=ap(this,e,!0),l=this.Qa.map(D=>Ed(D,r)),g=new Ua(l);return new fu(e.path,g)}isEqual(e){return this===e}}class pv extends zc{constructor(e,r){super(e),this.Qa=r}_toFieldTransform(e){const r=ap(this,e,!0),l=this.Qa.map(D=>Ed(D,r)),g=new Xo(l);return new fu(e.path,g)}isEqual(e){return this===e}}class gv extends zc{constructor(e,r){super(e),this.Wa=r}_toFieldTransform(e){const r=new du(e.k,ro(e.k,this.Wa));return new fu(e.path,r)}isEqual(e){return this===e}}function Eg(i,e,r,l){const g=i.ja(1,e,r);up("Data must be an object, but it was:",g,l);const D=[],M=xi.empty();ui(l,(Q,ae)=>{const ve=ah(e,Q,r);ae=(0,ge.m9)(ae);const je=g.La(ve);if(ae instanceof Dd)D.push(ve);else{const lt=Ed(ae,je);null!=lt&&(D.push(ve),M.set(ve,lt))}});const U=new ka(D);return new Hm(M,U,g.fieldTransforms)}function lp(i,e,r,l,g,D){const M=i.ja(1,e,r),U=[Cg(e,l,r)],Q=[g];if(D.length%2!=0)throw new Tt(ot.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let lt=0;lt<D.length;lt+=2)U.push(Cg(e,D[lt])),Q.push(D[lt+1]);const ae=[],ve=xi.empty();for(let lt=U.length-1;lt>=0;--lt)if(!dp(ae,U[lt])){const Mt=U[lt];let Wt=Q[lt];Wt=(0,ge.m9)(Wt);const jn=M.La(Mt);if(Wt instanceof Dd)ae.push(Mt);else{const Qn=Ed(Wt,jn);null!=Qn&&(ae.push(Mt),ve.set(Mt,Qn))}}const je=new ka(ae);return new Hm(ve,je,M.fieldTransforms)}function ey(i,e,r,l=!1){return Ed(r,i.ja(l?4:3,e))}function Ed(i,e){if(Gm(i=(0,ge.m9)(i)))return up("Unsupported field value:",e,i),Cd(i,e);if(i instanceof zc)return function(r,l){if(!wg(l.xa))throw l.Ua(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Ua(`${r._methodName}() is not currently supported inside arrays`);const g=r._toFieldTransform(l);g&&l.fieldTransforms.push(g)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(r,l){const g=[];let D=0;for(const M of r){let U=Ed(M,l.Ba(D));null==U&&(U={nullValue:"NULL_VALUE"}),g.push(U),D++}return{arrayValue:{values:g}}}(i,e)}return function(r,l){if(null===(r=(0,ge.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return ro(l.k,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const g=Yn.fromDate(r);return{timestampValue:Lu(l.k,g)}}if(r instanceof Yn){const g=new Yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lu(l.k,g)}}if(r instanceof ip)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mc)return{bytesValue:Fd(l.k,r._byteString)};if(r instanceof hs){const g=l.databaseId,D=r.firestore._databaseId;if(!D.isEqual(g))throw l.Ua(`Document reference is for database ${D.projectId}/${D.database} but should be for database ${g.projectId}/${g.database}`);return{referenceValue:bu(r.firestore._databaseId||l.databaseId,r._key.path)}}throw l.Ua(`Unsupported field value: ${np(r)}`)}(i,e)}function Cd(i,e){const r={};return bs(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ui(i,(l,g)=>{const D=Ed(g,e.Fa(l));null!=D&&(r[l]=D)}),{mapValue:{fields:r}}}function Gm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Yn||i instanceof ip||i instanceof Mc||i instanceof hs||i instanceof zc)}function up(i,e,r){if(!Gm(r)||"object"!=typeof(l=r)||null===l||Object.getPrototypeOf(l)!==Object.prototype&&null!==Object.getPrototypeOf(l)){const l=np(r);throw e.Ua("an object"===l?i+" a custom object":i+" "+l)}var l}function Cg(i,e,r){if((e=(0,ge.m9)(e))instanceof Xu)return e._internalPath;if("string"==typeof e)return ah(i,e);throw cp("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const Wm=new RegExp("[~\\*/\\[\\]]");function ah(i,e,r){if(e.search(Wm)>=0)throw cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Xu(...e.split("."))._internalPath}catch(l){throw cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function cp(i,e,r,l,g){const D=l&&!l.isEmpty(),M=void 0!==g;let U=`Function ${e}() called with invalid data`;r&&(U+=" (via `toFirestore()`)"),U+=". ";let Q="";return(D||M)&&(Q+=" (found",D&&(Q+=` in field ${l}`),M&&(Q+=` in document ${g}`),Q+=")"),new Tt(ot.INVALID_ARGUMENT,U+i+Q)}function dp(i,e){return i.some(r=>r.isEqual(e))}class qc{constructor(e,r,l,g,D){this._firestore=e,this._userDataWriter=r,this._key=l,this._document=g,this._converter=D}get id(){return this._key.path.lastSegment()}get ref(){return new hs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Tg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Qh("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class Tg extends qc{data(){return super.data()}}function Qh(i,e){return"string"==typeof e?ah(i,e):e instanceof Xu?e._internalPath:e._delegate._internalPath}class Td{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ec extends qc{constructor(e,r,l,g,D,M){super(e,r,l,g,M),this._firestore=e,this._firestoreImpl=e,this.metadata=D}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const l=this._document.data.field(Qh("DocumentSnapshot.get",e));if(null!==l)return this._userDataWriter.convertValue(l,r.serverTimestamps)}}}class Id extends ec{data(e={}){return super.data(e)}}class Zc{constructor(e,r,l,g){this._firestore=e,this._userDataWriter=r,this._snapshot=g,this.metadata=new Td(g.hasPendingWrites,g.fromCache),this.query=l}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(l=>{e.call(r,new Id(this._firestore,this._userDataWriter,l.key,l,new Td(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Tt(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(l,g){if(l._snapshot.oldDocs.isEmpty()){let D=0;return l._snapshot.docChanges.map(M=>({type:"added",doc:new Id(l._firestore,l._userDataWriter,M.doc.key,M.doc,new Td(l._snapshot.mutatedKeys.has(M.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:D++}))}{let D=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(M=>g||3!==M.type).map(M=>{const U=new Id(l._firestore,l._userDataWriter,M.doc.key,M.doc,new Td(l._snapshot.mutatedKeys.has(M.doc.key),l._snapshot.fromCache),l.query.converter);let Q=-1,ae=-1;return 0!==M.type&&(Q=D.indexOf(M.doc.key),D=D.delete(M.doc.key)),1!==M.type&&(D=D.add(M.doc),ae=D.indexOf(M.doc.key)),{type:Ig(M.type),doc:U,oldIndex:Q,newIndex:ae}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Ig(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tn()}}function Sg(i,e){return i instanceof ec&&e instanceof ec?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Zc&&e instanceof Zc&&i._firestore===e._firestore&&Cl(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Jh(i){if(F(i)&&0===i.explicitOrderBy.length)throw new Tt(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xh{}function Ag(i,...e){for(const r of e)i=r._apply(i);return i}class ty extends Xh{constructor(e,r,l){super(),this.Ga=e,this.za=r,this.Ha=l,this.type="where"}_apply(e){const r=oh(e.firestore),l=function(g,D,M,U,Q,ae,ve){let je;if(Q.isKeyField()){if("array-contains"===ae||"array-contains-any"===ae)throw new Tt(ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ae}' queries on FieldPath.documentId().`);if("in"===ae||"not-in"===ae){xg(ve,ae);const Mt=[];for(const Wt of ve)Mt.push(Km(U,g,Wt));je={arrayValue:{values:Mt}}}else je=Km(U,g,ve)}else"in"!==ae&&"not-in"!==ae&&"array-contains-any"!==ae||xg(ve,ae),je=ey(M,"where",ve,"in"===ae||"not-in"===ae);const lt=us.create(Q,ae,je);return function(Mt,Wt){if(Wt.V()){const Qn=X(Mt);if(null!==Qn&&!Qn.isEqual(Wt.field))throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Qn.toString()}' and '${Wt.field.toString()}'`);const ia=$(Mt);null!==ia&&pp(0,Wt.field,ia)}const jn=function(Qn,ia){for(const wa of Qn.filters)if(ia.indexOf(wa.op)>=0)return wa.op;return null}(Mt,function(Qn){switch(Qn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Wt.op));if(null!==jn)throw new Tt(ot.INVALID_ARGUMENT,jn===Wt.op?`Invalid query. You cannot use more than one '${Wt.op.toString()}' filter.`:`Invalid query. You cannot use '${Wt.op.toString()}' filters with '${jn.toString()}' filters.`)}(g,lt),lt}(e._query,0,r,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new $o(e.firestore,e.converter,function(g,D){const M=g.filters.concat([D]);return new Jo(g.path,g.collectionGroup,g.explicitOrderBy.slice(),M,g.limit,g.limitType,g.startAt,g.endAt)}(e._query,l))}}function mv(i,e,r){const l=e,g=Qh("where",i);return new ty(g,l,r)}class ef extends Xh{constructor(e,r){super(),this.Ga=e,this.Ja=r,this.type="orderBy"}_apply(e){const r=function(l,g,D){if(null!==l.startAt)throw new Tt(ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==l.endAt)throw new Tt(ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const M=new Al(g,D);return function(U,Q){if(null===$(U)){const ae=X(U);null!==ae&&pp(0,ae,Q.field)}}(l,M),M}(e._query,this.Ga,this.Ja);return new $o(e.firestore,e.converter,function(l,g){const D=l.explicitOrderBy.concat([g]);return new Jo(l.path,l.collectionGroup,D,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e._query,r))}}function zm(i,e="asc"){const r=e,l=Qh("orderBy",i);return new ef(l,r)}class hp extends Xh{constructor(e,r,l){super(),this.type=e,this.Ya=r,this.Xa=l}_apply(e){return new $o(e.firestore,e.converter,Rt(e._query,this.Ya,this.Xa))}}function Ng(i){return md("limit",i),new hp("limit",i,"F")}function ny(i){return md("limitToLast",i),new hp("limitToLast",i,"L")}class fp extends Xh{constructor(e,r,l){super(),this.type=e,this.Za=r,this.tc=l}_apply(e){const r=Rg(e,this.type,this.Za,this.tc);return new $o(e.firestore,e.converter,(g=r,new Jo((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,g,l.endAt)));var l,g}}function Mg(...i){return new fp("startAt",i,!0)}function qm(...i){return new fp("startAfter",i,!1)}class ry extends Xh{constructor(e,r,l){super(),this.type=e,this.Za=r,this.tc=l}_apply(e){const r=Rg(e,this.type,this.Za,this.tc);return new $o(e.firestore,e.converter,(g=r,new Jo((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,g)));var l,g}}function iy(...i){return new ry("endBefore",i,!0)}function Zm(...i){return new ry("endAt",i,!1)}function Rg(i,e,r,l){if(r[0]=(0,ge.m9)(r[0]),r[0]instanceof qc)return function(g,D,M,U,Q){if(!U)throw new Tt(ot.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${M}().`);const ae=[];for(const ve of Fe(g))if(ve.field.isKeyField())ae.push(Zl(D,U.key));else{const je=U.data.field(ve.field);if(Lo(je))throw new Tt(ot.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ve.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===je){const lt=ve.field.canonicalString();throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${lt}' (used as the orderBy) does not exist.`)}ae.push(je)}return new ml(ae,Q)}(i._query,i.firestore._databaseId,e,r[0]._document,l);{const g=oh(i.firestore);return function(D,M,U,Q,ae,ve){const je=D.explicitOrderBy;if(ae.length>je.length)throw new Tt(ot.INVALID_ARGUMENT,`Too many arguments provided to ${Q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const lt=[];for(let Mt=0;Mt<ae.length;Mt++){const Wt=ae[Mt];if(je[Mt].field.isKeyField()){if("string"!=typeof Wt)throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Q}(), but got a ${typeof Wt}`);if(!fe(D)&&-1!==Wt.indexOf("/"))throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${Q}() must be a plain document ID, but '${Wt}' contains a slash.`);const jn=D.path.child(In.fromString(Wt));if(!Cn.isDocumentKey(jn))throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${Q}() must result in a valid document path, but '${jn}' is not because it contains an odd number of segments.`);const Qn=new Cn(jn);lt.push(Zl(M,Qn))}else{const jn=ey(U,Q,Wt);lt.push(jn)}}return new ml(lt,ve)}(i._query,i.firestore._databaseId,g,e,r,l)}}function Km(i,e,r){if("string"==typeof(r=(0,ge.m9)(r))){if(""===r)throw new Tt(ot.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!fe(e)&&-1!==r.indexOf("/"))throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const l=e.path.child(In.fromString(r));if(!Cn.isDocumentKey(l))throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return Zl(i,new Cn(l))}if(r instanceof hs)return Zl(i,r._key);throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${np(r)}.`)}function xg(i,e){if(!Array.isArray(i)||0===i.length)throw new Tt(ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Tt(ot.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pp(i,e,r){if(!r.isEqual(e))throw new Tt(ot.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class gp{convertValue(e,r="none"){switch(zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Tn()}}convertObject(e,r){const l={};return ui(e.fields,(g,D)=>{l[g]=this.convertValue(D,r)}),l}convertGeoPoint(e){return new ip(Ai(e.latitude),Ai(e.longitude))}convertArray(e,r){return(e.values||[]).map(l=>this.convertValue(l,r))}convertServerTimestamp(e,r){switch(r){case"previous":const l=Wl(e);return null==l?null:this.convertValue(l,r);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const r=Ws(e);return new Yn(r.seconds,r.nanos)}convertDocumentKey(e,r){const l=In.fromString(e);Pn(Pl(l));const g=new Gc(l.get(1),l.get(3)),D=new Cn(l.popFirst(5));return g.isEqual(r)||Ei(`Document ${D} contains a document reference within a different database (${g.projectId}/${g.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),D}}function tf(i,e,r){let l;return l=i?r&&(r.merge||r.mergeFields)?i.toFirestore(e,r):i.toFirestore(e):e,l}class Og extends gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new hs(this.firestore,null,r)}}class kg{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=oh(e)}set(e,r,l){this._verifyNotCommitted();const g=Kc(e,this._firestore),D=tf(g.converter,r,l),M=op(this._dataReader,"WriteBatch.set",g._key,D,null!==g.converter,l);return this._mutations.push(M.toMutation(g._key,ci.none())),this}update(e,r,l,...g){this._verifyNotCommitted();const D=Kc(e,this._firestore);let M;return M="string"==typeof(r=(0,ge.m9)(r))||r instanceof Xu?lp(this._dataReader,"WriteBatch.update",D._key,r,l,g):Eg(this._dataReader,"WriteBatch.update",D._key,r),this._mutations.push(M.toMutation(D._key,ci.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Kc(e,this._firestore);return this._mutations=this._mutations.concat(new Zs(r._key,ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(ot.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kc(i,e){if((i=(0,ge.m9)(i)).firestore!==e)throw new Tt(ot.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function Ym(i){i=Jr(i,hs);const e=Jr(i.firestore,Fi);return mg(Ds(e),i._key).then(r=>_p(e,i,r))}class Yc extends gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new hs(this.firestore,null,r)}}function Pg(i){i=Jr(i,hs);const e=Jr(i.firestore,Fi),r=Ds(e),l=new Yc(e);return function(i,e){const r=new Gr;return i.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return(l=(0,T.Z)(function*(g,D,M){try{const U=yield function(Q,ae){const ve=Jt(Q);return ve.persistence.runTransaction("read document","readonly",je=>ve.Wn.Rn(je,ae))}(g,D);U.isFoundDocument()?M.resolve(U):U.isNoDocument()?M.resolve(null):M.reject(new Tt(ot.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(U){const Q=Jd(U,`Failed to get document '${D} from cache`);M.reject(Q)}}),function(g,D,M){return l.apply(this,arguments)})(yield Kh(i),e,r);var l})),r.promise}(r,i._key).then(g=>new ec(e,l,i._key,g,new Td(null!==g&&g.hasLocalMutations,!0),i.converter))}function Qm(i){i=Jr(i,hs);const e=Jr(i.firestore,Fi);return mg(Ds(e),i._key,{source:"server"}).then(r=>_p(e,i,r))}function sy(i){i=Jr(i,$o);const e=Jr(i.firestore,Fi),r=Ds(e),l=new Yc(e);return Jh(i._query),_g(r,i._query).then(g=>new Zc(e,l,i,g))}function Jm(i){i=Jr(i,$o);const e=Jr(i.firestore,Fi),r=Ds(e),l=new Yc(e);return function(i,e){const r=new Gr;return i.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return(l=(0,T.Z)(function*(g,D,M){try{const U=yield Ih(g,D,!0),Q=new Au(D,U.zn),ae=Q.bo(U.documents),ve=Q.applyChanges(ae,!1);M.resolve(ve.snapshot)}catch(U){const Q=Jd(U,`Failed to execute query '${D} against cache`);M.reject(Q)}}),function(g,D,M){return l.apply(this,arguments)})(yield Kh(i),e,r);var l})),r.promise}(r,i._query).then(g=>new Zc(e,l,i,g))}function Xm(i){i=Jr(i,$o);const e=Jr(i.firestore,Fi),r=Ds(e),l=new Yc(e);return _g(r,i._query,{source:"server"}).then(g=>new Zc(e,l,i,g))}function Fg(i,e,r){i=Jr(i,hs);const l=Jr(i.firestore,Fi),g=tf(i.converter,e,r);return Sd(l,[op(oh(l),"setDoc",i._key,g,null!==i.converter,r).toMutation(i._key,ci.none())])}function mp(i,e,r,...l){i=Jr(i,hs);const g=Jr(i.firestore,Fi),D=oh(g);let M;return M="string"==typeof(e=(0,ge.m9)(e))||e instanceof Xu?lp(D,"updateDoc",i._key,e,r,l):Eg(D,"updateDoc",i._key,e),Sd(g,[M.toMutation(i._key,ci.exists(!0))])}function Lg(i){return Sd(Jr(i.firestore,Fi),[new Zs(i._key,ci.none())])}function e_(i,e){const r=Jr(i.firestore,Fi),l=Wc(i),g=tf(i.converter,e);return Sd(r,[op(oh(i.firestore),"addDoc",l._key,g,null!==i.converter,{}).toMutation(l._key,ci.exists(!1))]).then(()=>l)}function t_(i,...e){var r,l,g;i=(0,ge.m9)(i);let D={includeMetadataChanges:!1},M=0;"object"!=typeof e[M]||Nc(e[M])||(D=e[M],M++);const U={includeMetadataChanges:D.includeMetadataChanges};if(Nc(e[M])){const je=e[M];e[M]=null===(r=je.next)||void 0===r?void 0:r.bind(je),e[M+1]=null===(l=je.error)||void 0===l?void 0:l.bind(je),e[M+2]=null===(g=je.complete)||void 0===g?void 0:g.bind(je)}let Q,ae,ve;if(i instanceof hs)ae=Jr(i.firestore,Fi),ve=Nl(i._key.path),Q={next:je=>{e[M]&&e[M](_p(ae,i,je))},error:e[M+1],complete:e[M+2]};else{const je=Jr(i,$o);ae=Jr(je.firestore,Fi),ve=je._query;const lt=new Yc(ae);Q={next:Mt=>{e[M]&&e[M](new Zc(ae,lt,je,Mt))},error:e[M+1],complete:e[M+2]},Jh(i._query)}return function(je,lt,Mt,Wt){const jn=new Zh(Wt),Qn=new jf(lt,jn,Mt);return je.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return Jp(yield gd(je),Qn)})),()=>{jn.na(),je.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return Bf(yield gd(je),Qn)}))}}(Ds(ae),ve,U,Q)}function n_(i,e){return function(i,e){const r=new Zh(e);return i.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return l=yield gd(i),g=r,Jt(l).io.add(g),void g.next();var l,g})),()=>{r.na(),i.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return l=yield gd(i),g=r,void Jt(l).io.delete(g);var l,g}))}}(Ds(i=Jr(i,Fi)),Nc(e)?e:{next:e})}function Sd(i,e){return function(r,l){const g=new Gr;return r.asyncQueue.enqueueAndForget((0,T.Z)(function*(){return function(i,e,r){return og.apply(this,arguments)}(yield tp(r),l,g)})),g.promise}(Ds(i),e)}function _p(i,e,r){const l=r.docs.get(e._key),g=new Yc(i);return new ec(i,g,e._key,l,new Td(r.hasPendingWrites,r.fromCache),e.converter)}class r_ extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=oh(e)}get(e){const r=Kc(e,this._firestore),l=new Og(this._firestore);return this._transaction.lookup([r._key]).then(g=>{if(!g||1!==g.length)return Tn();const D=g[0];if(D.isFoundDocument())return new qc(this._firestore,l,D.key,D,r.converter);if(D.isNoDocument())return new qc(this._firestore,l,r._key,null,r.converter);throw Tn()})}set(e,r,l){const g=Kc(e,this._firestore),D=tf(g.converter,r,l),M=op(this._dataReader,"Transaction.set",g._key,D,null!==g.converter,l);return this._transaction.set(g._key,M),this}update(e,r,l,...g){const D=Kc(e,this._firestore);let M;return M="string"==typeof(r=(0,ge.m9)(r))||r instanceof Xu?lp(this._dataReader,"Transaction.update",D._key,r,l,g):Eg(this._dataReader,"Transaction.update",D._key,r),this._transaction.update(D._key,M),this}delete(e){const r=Kc(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Kc(e,this._firestore),l=new Yc(this._firestore);return super.get(e).then(g=>new ec(this._firestore,l,r._key,g._document,new Td(!1,!1),r.converter))}}function i_(i,e){return function(i,e){const r=new Gr;return i.asyncQueue.enqueueAndForget((0,T.Z)(function*(){const l=yield(g=i,ep(g).then(D=>D.datastore));var g;new z_(i.asyncQueue,l,e,r).run()})),r.promise}(Ds(i=Jr(i,Fi)),r=>e(new r_(i,r)))}function _v(){return new Dd("deleteField")}function oy(){return new Dg("serverTimestamp")}function ay(...i){return new fv("arrayUnion",i)}function s_(...i){return new pv("arrayRemove",i)}function ly(i){return new gv("increment",i)}!function(i,e=!0){bo=_.SDK_VERSION,(0,_._registerComponent)(new Y.wA("firestore",(r,{options:l})=>{const g=r.getProvider("app").getImmediate(),D=new Fi(g,new N(r.getProvider("auth-internal")),new te(r.getProvider("app-check-internal")));return l=Object.assign({useFetchStreams:e},l),D._setSettings(l),D},"PUBLIC")),(0,_.registerVersion)(vo,"3.4.1",i),(0,_.registerVersion)(vo,"3.4.1","esm2017")}()},2090:(Zt,Ye,H)=>{"use strict";H.d(Ye,{BH:()=>tt,LL:()=>Ge,ZR:()=>gt,gQ:()=>Gn,zI:()=>et,hu:()=>_,g5:()=>Y,US:()=>xe,tV:()=>$e,h$:()=>Be,$s:()=>We,r3:()=>Ln,Sg:()=>Xe,ne:()=>Mr,p$:()=>le,vZ:()=>Hn,ZB:()=>ue,gK:()=>vn,pd:()=>wt,m9:()=>yt,z$:()=>ut,GJ:()=>ur,jU:()=>Ae,ru:()=>Le,d:()=>me,xb:()=>Zn,w1:()=>_t,hl:()=>zt,uI:()=>dt,UG:()=>ze,Yr:()=>Ut,b$:()=>Pe,G6:()=>Ct,Mn:()=>pt,w9:()=>Mn,cI:()=>an,UI:()=>cr,xO:()=>Lr,zd:()=>Xr,DV:()=>Ti,ug:()=>An,dS:()=>Dr,Pz:()=>Qt,Dv:()=>Ar,Wj:()=>bn,lb:()=>Vn,eu:()=>qe});const _=function(ie,oe){if(!ie)throw Y(oe)},Y=function(ie){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ie)},K=function(ie){const oe=[];let _e=0;for(let Ze=0;Ze<ie.length;Ze++){let Ue=ie.charCodeAt(Ze);Ue<128?oe[_e++]=Ue:Ue<2048?(oe[_e++]=Ue>>6|192,oe[_e++]=63&Ue|128):55296==(64512&Ue)&&Ze+1<ie.length&&56320==(64512&ie.charCodeAt(Ze+1))?(Ue=65536+((1023&Ue)<<10)+(1023&ie.charCodeAt(++Ze)),oe[_e++]=Ue>>18|240,oe[_e++]=Ue>>12&63|128,oe[_e++]=Ue>>6&63|128,oe[_e++]=63&Ue|128):(oe[_e++]=Ue>>12|224,oe[_e++]=Ue>>6&63|128,oe[_e++]=63&Ue|128)}return oe},xe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ie,oe){if(!Array.isArray(ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const _e=oe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ze=[];for(let Ue=0;Ue<ie.length;Ue+=3){const Gt=ie[Ue],rn=Ue+1<ie.length,or=rn?ie[Ue+1]:0,xr=Ue+2<ie.length,hn=xr?ie[Ue+2]:0;let be=(15&or)<<2|hn>>6,Ie=63&hn;xr||(Ie=64,rn||(be=64)),Ze.push(_e[Gt>>2],_e[(3&Gt)<<4|or>>4],_e[be],_e[Ie])}return Ze.join("")},encodeString(ie,oe){return this.HAS_NATIVE_SUPPORT&&!oe?btoa(ie):this.encodeByteArray(K(ie),oe)},decodeString(ie,oe){return this.HAS_NATIVE_SUPPORT&&!oe?atob(ie):function(ie){const oe=[];let _e=0,Ze=0;for(;_e<ie.length;){const Ue=ie[_e++];if(Ue<128)oe[Ze++]=String.fromCharCode(Ue);else if(Ue>191&&Ue<224){const Gt=ie[_e++];oe[Ze++]=String.fromCharCode((31&Ue)<<6|63&Gt)}else if(Ue>239&&Ue<365){const xr=((7&Ue)<<18|(63&ie[_e++])<<12|(63&ie[_e++])<<6|63&ie[_e++])-65536;oe[Ze++]=String.fromCharCode(55296+(xr>>10)),oe[Ze++]=String.fromCharCode(56320+(1023&xr))}else{const Gt=ie[_e++],rn=ie[_e++];oe[Ze++]=String.fromCharCode((15&Ue)<<12|(63&Gt)<<6|63&rn)}}return oe.join("")}(this.decodeStringToByteArray(ie,oe))},decodeStringToByteArray(ie,oe){this.init_();const _e=oe?this.charToByteMapWebSafe_:this.charToByteMap_,Ze=[];for(let Ue=0;Ue<ie.length;){const Gt=_e[ie.charAt(Ue++)],or=Ue<ie.length?_e[ie.charAt(Ue)]:0;++Ue;const hn=Ue<ie.length?_e[ie.charAt(Ue)]:64;++Ue;const Ve=Ue<ie.length?_e[ie.charAt(Ue)]:64;if(++Ue,null==Gt||null==or||null==hn||null==Ve)throw Error();Ze.push(Gt<<2|or>>4),64!==hn&&(Ze.push(or<<4&240|hn>>2),64!==Ve&&Ze.push(hn<<6&192|Ve))}return Ze},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ie=0;ie<this.ENCODED_VALS.length;ie++)this.byteToCharMap_[ie]=this.ENCODED_VALS.charAt(ie),this.charToByteMap_[this.byteToCharMap_[ie]]=ie,this.byteToCharMapWebSafe_[ie]=this.ENCODED_VALS_WEBSAFE.charAt(ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ie]]=ie,ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ie)]=ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ie)]=ie)}}},Be=function(ie){const oe=K(ie);return xe.encodeByteArray(oe,!0)},de=function(ie){return Be(ie).replace(/\./g,"")},$e=function(ie){try{return xe.decodeString(ie,!0)}catch(oe){console.error("base64Decode failed: ",oe)}return null};function le(ie){return ue(void 0,ie)}function ue(ie,oe){if(!(oe instanceof Object))return oe;switch(oe.constructor){case Date:return new Date(oe.getTime());case Object:void 0===ie&&(ie={});break;case Array:ie=[];break;default:return oe}for(const _e in oe)!oe.hasOwnProperty(_e)||!Oe(_e)||(ie[_e]=ue(ie[_e],oe[_e]));return ie}function Oe(ie){return"__proto__"!==ie}class tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((oe,_e)=>{this.resolve=oe,this.reject=_e})}wrapCallback(oe){return(_e,Ze)=>{_e?this.reject(_e):this.resolve(Ze),"function"==typeof oe&&(this.promise.catch(()=>{}),1===oe.length?oe(_e):oe(_e,Ze))}}}function Xe(ie,oe){if(ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ze=oe||"demo-project",Ue=ie.iat||0,Gt=ie.sub||ie.user_id;if(!Gt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rn=Object.assign({iss:`https://securetoken.google.com/${Ze}`,aud:Ze,iat:Ue,exp:Ue+3600,auth_time:Ue,sub:Gt,user_id:Gt,firebase:{sign_in_provider:"custom",identities:{}}},ie);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(rn)),""].join(".")}function ut(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function dt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ie){return!1}}function Ae(){return"object"==typeof self&&self.self===self}function Le(){const ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ie&&void 0!==ie.id}function Pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){return ut().indexOf("Electron/")>=0}function _t(){const ie=ut();return ie.indexOf("MSIE ")>=0||ie.indexOf("Trident/")>=0}function pt(){return ut().indexOf("MSAppHost/")>=0}function Ut(){return!1}function Ct(){return!ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zt(){return"object"==typeof indexedDB}function qe(){return new Promise((ie,oe)=>{try{let _e=!0;const Ze="validate-browser-context-for-indexeddb-analytics-module",Ue=self.indexedDB.open(Ze);Ue.onsuccess=()=>{Ue.result.close(),_e||self.indexedDB.deleteDatabase(Ze),ie(!0)},Ue.onupgradeneeded=()=>{_e=!1},Ue.onerror=()=>{var Gt;oe((null===(Gt=Ue.error)||void 0===Gt?void 0:Gt.message)||"")}}catch(_e){oe(_e)}})}function et(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class gt extends Error{constructor(oe,_e,Ze){super(_e),this.code=oe,this.customData=Ze,this.name="FirebaseError",Object.setPrototypeOf(this,gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(oe,_e,Ze){this.service=oe,this.serviceName=_e,this.errors=Ze}create(oe,..._e){const Ze=_e[0]||{},Ue=`${this.service}/${oe}`,Gt=this.errors[oe],rn=Gt?function(ie,oe){return ie.replace(xt,(_e,Ze)=>{const Ue=oe[Ze];return null!=Ue?String(Ue):`<${Ze}?>`})}(Gt,Ze):"Error";return new gt(Ue,`${this.serviceName}: ${rn} (${Ue}).`,Ze)}}const xt=/\{\$([^}]+)}/g;function an(ie){return JSON.parse(ie)}function Qt(ie){return JSON.stringify(ie)}const It=function(ie){let oe={},_e={},Ze={},Ue="";try{const Gt=ie.split(".");oe=an($e(Gt[0])||""),_e=an($e(Gt[1])||""),Ue=Gt[2],Ze=_e.d||{},delete _e.d}catch(Gt){}return{header:oe,claims:_e,data:Ze,signature:Ue}},Mn=function(ie){const _e=It(ie).claims;return!!_e&&"object"==typeof _e&&_e.hasOwnProperty("iat")},ur=function(ie){const oe=It(ie).claims;return"object"==typeof oe&&!0===oe.admin};function Ln(ie,oe){return Object.prototype.hasOwnProperty.call(ie,oe)}function Ti(ie,oe){if(Object.prototype.hasOwnProperty.call(ie,oe))return ie[oe]}function Zn(ie){for(const oe in ie)if(Object.prototype.hasOwnProperty.call(ie,oe))return!1;return!0}function cr(ie,oe,_e){const Ze={};for(const Ue in ie)Object.prototype.hasOwnProperty.call(ie,Ue)&&(Ze[Ue]=oe.call(_e,ie[Ue],Ue,ie));return Ze}function Hn(ie,oe){if(ie===oe)return!0;const _e=Object.keys(ie),Ze=Object.keys(oe);for(const Ue of _e){if(!Ze.includes(Ue))return!1;const Gt=ie[Ue],rn=oe[Ue];if(Ni(Gt)&&Ni(rn)){if(!Hn(Gt,rn))return!1}else if(Gt!==rn)return!1}for(const Ue of Ze)if(!_e.includes(Ue))return!1;return!0}function Ni(ie){return null!==ie&&"object"==typeof ie}function Lr(ie){const oe=[];for(const[_e,Ze]of Object.entries(ie))Array.isArray(Ze)?Ze.forEach(Ue=>{oe.push(encodeURIComponent(_e)+"="+encodeURIComponent(Ue))}):oe.push(encodeURIComponent(_e)+"="+encodeURIComponent(Ze));return oe.length?"&"+oe.join("&"):""}function Xr(ie){const oe={};return ie.replace(/^\?/,"").split("&").forEach(Ze=>{if(Ze){const[Ue,Gt]=Ze.split("=");oe[decodeURIComponent(Ue)]=decodeURIComponent(Gt)}}),oe}function wt(ie){const oe=ie.indexOf("?");if(!oe)return"";const _e=ie.indexOf("#",oe);return ie.substring(oe,_e>0?_e:void 0)}class Gn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let oe=1;oe<this.blockSize;++oe)this.pad_[oe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(oe,_e){_e||(_e=0);const Ze=this.W_;if("string"==typeof oe)for(let Ve=0;Ve<16;Ve++)Ze[Ve]=oe.charCodeAt(_e)<<24|oe.charCodeAt(_e+1)<<16|oe.charCodeAt(_e+2)<<8|oe.charCodeAt(_e+3),_e+=4;else for(let Ve=0;Ve<16;Ve++)Ze[Ve]=oe[_e]<<24|oe[_e+1]<<16|oe[_e+2]<<8|oe[_e+3],_e+=4;for(let Ve=16;Ve<80;Ve++){const be=Ze[Ve-3]^Ze[Ve-8]^Ze[Ve-14]^Ze[Ve-16];Ze[Ve]=4294967295&(be<<1|be>>>31)}let hn,zr,Ue=this.chain_[0],Gt=this.chain_[1],rn=this.chain_[2],or=this.chain_[3],xr=this.chain_[4];for(let Ve=0;Ve<80;Ve++){Ve<40?Ve<20?(hn=or^Gt&(rn^or),zr=1518500249):(hn=Gt^rn^or,zr=1859775393):Ve<60?(hn=Gt&rn|or&(Gt|rn),zr=2400959708):(hn=Gt^rn^or,zr=3395469782);const be=(Ue<<5|Ue>>>27)+hn+xr+zr+Ze[Ve]&4294967295;xr=or,or=rn,rn=4294967295&(Gt<<30|Gt>>>2),Gt=Ue,Ue=be}this.chain_[0]=this.chain_[0]+Ue&4294967295,this.chain_[1]=this.chain_[1]+Gt&4294967295,this.chain_[2]=this.chain_[2]+rn&4294967295,this.chain_[3]=this.chain_[3]+or&4294967295,this.chain_[4]=this.chain_[4]+xr&4294967295}update(oe,_e){if(null==oe)return;void 0===_e&&(_e=oe.length);const Ze=_e-this.blockSize;let Ue=0;const Gt=this.buf_;let rn=this.inbuf_;for(;Ue<_e;){if(0===rn)for(;Ue<=Ze;)this.compress_(oe,Ue),Ue+=this.blockSize;if("string"==typeof oe){for(;Ue<_e;)if(Gt[rn]=oe.charCodeAt(Ue),++rn,++Ue,rn===this.blockSize){this.compress_(Gt),rn=0;break}}else for(;Ue<_e;)if(Gt[rn]=oe[Ue],++rn,++Ue,rn===this.blockSize){this.compress_(Gt),rn=0;break}}this.inbuf_=rn,this.total_+=_e}digest(){const oe=[];let _e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ue=this.blockSize-1;Ue>=56;Ue--)this.buf_[Ue]=255&_e,_e/=256;this.compress_(this.buf_);let Ze=0;for(let Ue=0;Ue<5;Ue++)for(let Gt=24;Gt>=0;Gt-=8)oe[Ze]=this.chain_[Ue]>>Gt&255,++Ze;return oe}}function Mr(ie,oe){const _e=new Yr(ie,oe);return _e.subscribe.bind(_e)}class Yr{constructor(oe,_e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=_e,this.task.then(()=>{oe(this)}).catch(Ze=>{this.error(Ze)})}next(oe){this.forEachObserver(_e=>{_e.next(oe)})}error(oe){this.forEachObserver(_e=>{_e.error(oe)}),this.close(oe)}complete(){this.forEachObserver(oe=>{oe.complete()}),this.close()}subscribe(oe,_e,Ze){let Ue;if(void 0===oe&&void 0===_e&&void 0===Ze)throw new Error("Missing Observer.");Ue=function(ie,oe){if("object"!=typeof ie||null===ie)return!1;for(const _e of["next","error","complete"])if(_e in ie&&"function"==typeof ie[_e])return!0;return!1}(oe)?oe:{next:oe,error:_e,complete:Ze},void 0===Ue.next&&(Ue.next=wr),void 0===Ue.error&&(Ue.error=wr),void 0===Ue.complete&&(Ue.complete=wr);const Gt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ue.error(this.finalError):Ue.complete()}catch(rn){}}),this.observers.push(Ue),Gt}unsubscribeOne(oe){void 0===this.observers||void 0===this.observers[oe]||(delete this.observers[oe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(oe){if(!this.finalized)for(let _e=0;_e<this.observers.length;_e++)this.sendOne(_e,oe)}sendOne(oe,_e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[oe])try{_e(this.observers[oe])}catch(Ze){"undefined"!=typeof console&&console.error&&console.error(Ze)}})}close(oe){this.finalized||(this.finalized=!0,void 0!==oe&&(this.finalError=oe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wr(){}const Ar=function(ie,oe,_e,Ze){let Ue;if(Ze<oe?Ue="at least "+oe:Ze>_e&&(Ue=0===_e?"none":"no more than "+_e),Ue)throw new Error(ie+" failed: Was called with "+Ze+(1===Ze?" argument.":" arguments.")+" Expects "+Ue+".")};function vn(ie,oe){return`${ie} failed: ${oe} argument `}function bn(ie,oe,_e,Ze){if((!Ze||_e)&&"function"!=typeof _e)throw new Error(vn(ie,oe)+"must be a valid function.")}function Vn(ie,oe,_e,Ze){if((!Ze||_e)&&("object"!=typeof _e||null===_e))throw new Error(vn(ie,oe)+"must be a valid context object.")}const Dr=function(ie){const oe=[];let _e=0;for(let Ze=0;Ze<ie.length;Ze++){let Ue=ie.charCodeAt(Ze);if(Ue>=55296&&Ue<=56319){const Gt=Ue-55296;Ze++,_(Ze<ie.length,"Surrogate pair missing trail surrogate."),Ue=65536+(Gt<<10)+(ie.charCodeAt(Ze)-56320)}Ue<128?oe[_e++]=Ue:Ue<2048?(oe[_e++]=Ue>>6|192,oe[_e++]=63&Ue|128):Ue<65536?(oe[_e++]=Ue>>12|224,oe[_e++]=Ue>>6&63|128,oe[_e++]=63&Ue|128):(oe[_e++]=Ue>>18|240,oe[_e++]=Ue>>12&63|128,oe[_e++]=Ue>>6&63|128,oe[_e++]=63&Ue|128)}return oe},An=function(ie){let oe=0;for(let _e=0;_e<ie.length;_e++){const Ze=ie.charCodeAt(_e);Ze<128?oe++:Ze<2048?oe+=2:Ze>=55296&&Ze<=56319?(oe+=4,_e++):oe+=3}return oe};function We(ie,oe=1e3,_e=2){const Ze=oe*Math.pow(_e,ie),Ue=Math.round(.5*Ze*(Math.random()-.5)*2);return Math.min(144e5,Ze+Ue)}function yt(ie){return ie&&ie._delegate?ie._delegate:ie}},2334:(Zt,Ye,H)=>{"use strict";H.d(Ye,{I:()=>_});var T=H(5e3);let _=(()=>{class Y{constructor(){this.quiz_round_num=1}save_key(ge,xe){localStorage.setItem(ge,JSON.stringify(xe))}read_key(ge){let xe=localStorage.getItem(ge);return null!==xe?JSON.parse(xe):0}fetch_user_score_details(){let ge=localStorage.getItem("user_score"),xe=localStorage.getItem("user");return{user_score:ge,user:JSON.parse(xe||"")}}}return Y.\u0275fac=function(ge){return new(ge||Y)},Y.\u0275prov=T.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})()},3150:(Zt,Ye,H)=>{"use strict";var T=H(9808),_=H(5e3);class Y extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class K extends Y{static makeCurrent(){(0,T.HT)(new K)}onAndCancel(u,s,f){return u.addEventListener(s,f,!1),()=>{u.removeEventListener(s,f,!1)}}dispatchEvent(u,s){u.dispatchEvent(s)}remove(u){u.parentNode&&u.parentNode.removeChild(u)}createElement(u,s){return(s=s||this.getDefaultDocument()).createElement(u)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(u){return u.nodeType===Node.ELEMENT_NODE}isShadowRoot(u){return u instanceof DocumentFragment}getGlobalEventTarget(u,s){return"window"===s?window:"document"===s?u:"body"===s?u.body:null}getBaseHref(u){const s=(ge=ge||document.querySelector("base"),ge?ge.getAttribute("href"):null);return null==s?null:function(a){Be=Be||document.createElement("a"),Be.setAttribute("href",a);const u=Be.pathname;return"/"===u.charAt(0)?u:`/${u}`}(s)}resetBaseElement(){ge=null}getUserAgent(){return window.navigator.userAgent}getCookie(u){return(0,T.Mx)(document.cookie,u)}}let Be,ge=null;const $e=new _.OlP("TRANSITION_ID"),ue=[{provide:_.ip1,useFactory:function(a,u,s){return()=>{s.get(_.CZH).donePromise.then(()=>{const f=(0,T.q)(),E=u.querySelectorAll(`style[ng-transition="${a}"]`);for(let O=0;O<E.length;O++)f.remove(E[O])})}},deps:[$e,T.K0,_.zs3],multi:!0}];class Oe{static init(){(0,_.VLi)(new Oe)}addToWindow(u){_.dqk.getAngularTestability=(f,E=!0)=>{const O=u.findTestabilityInTree(f,E);if(null==O)throw new Error("Could not find testability for element.");return O},_.dqk.getAllAngularTestabilities=()=>u.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>u.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(f=>{const E=_.dqk.getAllAngularTestabilities();let O=E.length,re=!1;const Ee=function(ke){re=re||ke,O--,0==O&&f(re)};E.forEach(function(ke){ke.whenStable(Ee)})})}findTestabilityInTree(u,s,f){if(null==s)return null;const E=u.getTestability(s);return null!=E?E:f?(0,T.q)().isShadowRoot(s)?this.findTestabilityInTree(u,s.host,!0):this.findTestabilityInTree(u,s.parentElement,!0):null}}let tt=(()=>{class a{build(){return new XMLHttpRequest}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac}),a})();const Xe=new _.OlP("EventManagerPlugins");let ut=(()=>{class a{constructor(s,f){this._zone=f,this._eventNameToPlugin=new Map,s.forEach(E=>E.manager=this),this._plugins=s.slice().reverse()}addEventListener(s,f,E){return this._findPluginFor(f).addEventListener(s,f,E)}addGlobalEventListener(s,f,E){return this._findPluginFor(f).addGlobalEventListener(s,f,E)}getZone(){return this._zone}_findPluginFor(s){const f=this._eventNameToPlugin.get(s);if(f)return f;const E=this._plugins;for(let O=0;O<E.length;O++){const re=E[O];if(re.supports(s))return this._eventNameToPlugin.set(s,re),re}throw new Error(`No event manager plugin found for event ${s}`)}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(Xe),_.LFG(_.R0b))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac}),a})();class dt{constructor(u){this._doc=u}addGlobalEventListener(u,s,f){const E=(0,T.q)().getGlobalEventTarget(this._doc,u);if(!E)throw new Error(`Unsupported event target ${E} for event ${s}`);return this.addEventListener(E,s,f)}}let ze=(()=>{class a{constructor(){this._stylesSet=new Set}addStyles(s){const f=new Set;s.forEach(E=>{this._stylesSet.has(E)||(this._stylesSet.add(E),f.add(E))}),this.onStylesAdded(f)}onStylesAdded(s){}getAllStyles(){return Array.from(this._stylesSet)}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac}),a})(),Ae=(()=>{class a extends ze{constructor(s){super(),this._doc=s,this._hostNodes=new Map,this._hostNodes.set(s.head,[])}_addStylesToHost(s,f,E){s.forEach(O=>{const re=this._doc.createElement("style");re.textContent=O,E.push(f.appendChild(re))})}addHost(s){const f=[];this._addStylesToHost(this._stylesSet,s,f),this._hostNodes.set(s,f)}removeHost(s){const f=this._hostNodes.get(s);f&&f.forEach(Le),this._hostNodes.delete(s)}onStylesAdded(s){this._hostNodes.forEach((f,E)=>{this._addStylesToHost(s,E,f)})}ngOnDestroy(){this._hostNodes.forEach(s=>s.forEach(Le))}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(T.K0))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac}),a})();function Le(a){(0,T.q)().remove(a)}const Pe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},me=/%COMP%/g;function et(a,u,s){for(let f=0;f<u.length;f++){let E=u[f];Array.isArray(E)?et(a,E,s):(E=E.replace(me,a),s.push(E))}return s}function Qe(a){return u=>{if("__ngUnwrap__"===u)return a;!1===a(u)&&(u.preventDefault(),u.returnValue=!1)}}let gt=(()=>{class a{constructor(s,f,E){this.eventManager=s,this.sharedStylesHost=f,this.appId=E,this.rendererByCompId=new Map,this.defaultRenderer=new Ge(s)}createRenderer(s,f){if(!s||!f)return this.defaultRenderer;switch(f.encapsulation){case _.ifc.Emulated:{let E=this.rendererByCompId.get(f.id);return E||(E=new an(this.eventManager,this.sharedStylesHost,f,this.appId),this.rendererByCompId.set(f.id,E)),E.applyToHost(s),E}case 1:case _.ifc.ShadowDom:return new Qt(this.eventManager,this.sharedStylesHost,s,f);default:if(!this.rendererByCompId.has(f.id)){const E=et(f.id,f.styles,[]);this.sharedStylesHost.addStyles(E),this.rendererByCompId.set(f.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(ut),_.LFG(Ae),_.LFG(_.AFp))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac}),a})();class Ge{constructor(u){this.eventManager=u,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(u,s){return s?document.createElementNS(Pe[s]||s,u):document.createElement(u)}createComment(u){return document.createComment(u)}createText(u){return document.createTextNode(u)}appendChild(u,s){u.appendChild(s)}insertBefore(u,s,f){u&&u.insertBefore(s,f)}removeChild(u,s){u&&u.removeChild(s)}selectRootElement(u,s){let f="string"==typeof u?document.querySelector(u):u;if(!f)throw new Error(`The selector "${u}" did not match any elements`);return s||(f.textContent=""),f}parentNode(u){return u.parentNode}nextSibling(u){return u.nextSibling}setAttribute(u,s,f,E){if(E){s=E+":"+s;const O=Pe[E];O?u.setAttributeNS(O,s,f):u.setAttribute(s,f)}else u.setAttribute(s,f)}removeAttribute(u,s,f){if(f){const E=Pe[f];E?u.removeAttributeNS(E,s):u.removeAttribute(`${f}:${s}`)}else u.removeAttribute(s)}addClass(u,s){u.classList.add(s)}removeClass(u,s){u.classList.remove(s)}setStyle(u,s,f,E){E&(_.JOm.DashCase|_.JOm.Important)?u.style.setProperty(s,f,E&_.JOm.Important?"important":""):u.style[s]=f}removeStyle(u,s,f){f&_.JOm.DashCase?u.style.removeProperty(s):u.style[s]=""}setProperty(u,s,f){u[s]=f}setValue(u,s){u.nodeValue=s}listen(u,s,f){return"string"==typeof u?this.eventManager.addGlobalEventListener(u,s,Qe(f)):this.eventManager.addEventListener(u,s,Qe(f))}}class an extends Ge{constructor(u,s,f,E){super(u),this.component=f;const O=et(E+"-"+f.id,f.styles,[]);s.addStyles(O),this.contentAttr="_ngcontent-%COMP%".replace(me,E+"-"+f.id),this.hostAttr="_nghost-%COMP%".replace(me,E+"-"+f.id)}applyToHost(u){super.setAttribute(u,this.hostAttr,"")}createElement(u,s){const f=super.createElement(u,s);return super.setAttribute(f,this.contentAttr,""),f}}class Qt extends Ge{constructor(u,s,f,E){super(u),this.sharedStylesHost=s,this.hostEl=f,this.shadowRoot=f.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const O=et(E.id,E.styles,[]);for(let re=0;re<O.length;re++){const Ee=document.createElement("style");Ee.textContent=O[re],this.shadowRoot.appendChild(Ee)}}nodeOrShadowRoot(u){return u===this.hostEl?this.shadowRoot:u}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(u,s){return super.appendChild(this.nodeOrShadowRoot(u),s)}insertBefore(u,s,f){return super.insertBefore(this.nodeOrShadowRoot(u),s,f)}removeChild(u,s){return super.removeChild(this.nodeOrShadowRoot(u),s)}parentNode(u){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(u)))}}let It=(()=>{class a extends dt{constructor(s){super(s)}supports(s){return!0}addEventListener(s,f,E){return s.addEventListener(f,E,!1),()=>this.removeEventListener(s,f,E)}removeEventListener(s,f,E){return s.removeEventListener(f,E)}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(T.K0))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac}),a})();const Kt=["alt","control","meta","shift"],Mn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ur={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ln={alt:a=>a.altKey,control:a=>a.ctrlKey,meta:a=>a.metaKey,shift:a=>a.shiftKey};let Ti=(()=>{class a extends dt{constructor(s){super(s)}supports(s){return null!=a.parseEventName(s)}addEventListener(s,f,E){const O=a.parseEventName(f),re=a.eventCallback(O.fullKey,E,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(s,O.domEventName,re))}static parseEventName(s){const f=s.toLowerCase().split("."),E=f.shift();if(0===f.length||"keydown"!==E&&"keyup"!==E)return null;const O=a._normalizeKey(f.pop());let re="";if(Kt.forEach(ke=>{const at=f.indexOf(ke);at>-1&&(f.splice(at,1),re+=ke+".")}),re+=O,0!=f.length||0===O.length)return null;const Ee={};return Ee.domEventName=E,Ee.fullKey=re,Ee}static getEventFullKey(s){let f="",E=function(a){let u=a.key;if(null==u){if(u=a.keyIdentifier,null==u)return"Unidentified";u.startsWith("U+")&&(u=String.fromCharCode(parseInt(u.substring(2),16)),3===a.location&&ur.hasOwnProperty(u)&&(u=ur[u]))}return Mn[u]||u}(s);return E=E.toLowerCase()," "===E?E="space":"."===E&&(E="dot"),Kt.forEach(O=>{O!=E&&Ln[O](s)&&(f+=O+".")}),f+=E,f}static eventCallback(s,f,E){return O=>{a.getEventFullKey(O)===s&&E.runGuarded(()=>f(O))}}static _normalizeKey(s){return"esc"===s?"escape":s}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(T.K0))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac}),a})();const Xr=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:T.bD},{provide:_.g9A,useValue:function(){K.makeCurrent(),Oe.init()},multi:!0},{provide:T.K0,useFactory:function(){return(0,_.RDi)(document),document},deps:[]}]),wt=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function(){return new _.qLn},deps:[]},{provide:Xe,useClass:It,multi:!0,deps:[T.K0,_.R0b,_.Lbi]},{provide:Xe,useClass:Ti,multi:!0,deps:[T.K0]},{provide:gt,useClass:gt,deps:[ut,Ae,_.AFp]},{provide:_.FYo,useExisting:gt},{provide:ze,useExisting:Ae},{provide:Ae,useClass:Ae,deps:[T.K0]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:ut,useClass:ut,deps:[Xe,_.R0b]},{provide:T.JF,useClass:tt,deps:[]}];let Gn=(()=>{class a{constructor(s){if(s)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(s){return{ngModule:a,providers:[{provide:_.AFp,useValue:s.appId},{provide:$e,useExisting:_.AFp},ue]}}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(a,12))},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({providers:wt,imports:[T.ez,_.hGG]}),a})();"undefined"!=typeof window&&window;var Pt=H(541),Rn=H(1205);const On=[{path:"",loadChildren:()=>H.e(674).then(H.bind(H,1674)).then(a=>a.AuthModule)},{path:"auth",loadChildren:()=>H.e(674).then(H.bind(H,1674)).then(a=>a.AuthModule)},{path:"application",loadChildren:()=>H.e(331).then(H.bind(H,5331)).then(a=>a.ApplicationModule),canActivate:[(()=>{class a{constructor(s,f){this.afAuth=s,this._router=f}canActivate(s,f){return this.afAuth.authState.subscribe(E=>E?(this.userData=E,localStorage.setItem("user",JSON.stringify(this.userData)),localStorage.getItem("user"),console.log(`${E} --- IS signed-in`),!0):(localStorage.setItem("user","NONE"),localStorage.getItem("user"),console.log("User IS NOT signed-in"),this._router.navigate(["../auth/"]),!1)),!0}canActivateChild(s,f){return this.afAuth.authState.subscribe(E=>E&&1==E.emailVerified?(this.userData=E,localStorage.setItem("user",JSON.stringify(this.userData)),localStorage.getItem("user"),console.log(`${E} --- IS signed-in`),this._router.navigate(["../application"]),!0):(localStorage.removeItem("user"),this._router.navigate(["../auth/"]),!1)),!0}canDeactivate(s,f,E,O){return!0}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(Rn.zQ),_.LFG(Pt.F0))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()]}];let Jn=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[Pt.Bz.forRoot(On)],Pt.Bz]}),a})();var mr=H(8306),Or=H(515),wn=H(9646),hr=H(7579),Mi=H(8421),Cs=H(5577),Js=H(1144),Vi=H(576),jr=H(3268);const uo=["addListener","removeListener"],Bi=["addEventListener","removeEventListener"],$t=["on","off"];function fn(a,u,s,f){if((0,Vi.m)(s)&&(f=s,s=void 0),f)return fn(a,u,s).pipe((0,jr.Z)(f));const[E,O]=function(a){return(0,Vi.m)(a.addEventListener)&&(0,Vi.m)(a.removeEventListener)}(a)?Bi.map(re=>Ee=>a[re](u,Ee,s)):function(a){return(0,Vi.m)(a.addListener)&&(0,Vi.m)(a.removeListener)}(a)?uo.map(Er(a,u)):function(a){return(0,Vi.m)(a.on)&&(0,Vi.m)(a.off)}(a)?$t.map(Er(a,u)):[];if(!E&&(0,Js.z)(a))return(0,Cs.z)(re=>fn(re,u,s))((0,Mi.Xf)(a));if(!E)throw new TypeError("Invalid event target");return new mr.y(re=>{const Ee=(...ke)=>re.next(1<ke.length?ke:ke[0]);return E(Ee),()=>O(Ee)})}function Er(a,u){return s=>f=>a[s](u,f)}var yi=H(4986),ir=H(3532);function Ts(a=0,u,s=yi.P){let f=-1;return null!=u&&((0,ir.K)(u)?s=u:f=u),new mr.y(E=>{let O=function(a){return a instanceof Date&&!isNaN(a)}(a)?+a-s.now():a;O<0&&(O=0);let re=0;return s.schedule(function(){E.closed||(E.next(re++),0<=f?this.schedule(void 0,f):E.complete())},O)})}const{isArray:Nn}=Array;function ks(a){return 1===a.length&&Nn(a[0])?a[0]:a}var oi=H(5403);function lr(...a){return 1===(a=ks(a)).length?(0,Mi.Xf)(a[0]):new mr.y(function(a){return u=>{let s=[];for(let f=0;s&&!u.closed&&f<a.length;f++)s.push((0,Mi.Xf)(a[f]).subscribe(new oi.Q(u,E=>{if(s){for(let O=0;O<s.length;O++)O!==f&&s[O].unsubscribe();s=null}u.next(E)})))}}(a))}H(1135),H(9841);var Te=H(5032);new mr.y(Te.Z);var mt=H(3269);function Ot(...a){const u=(0,mt.jO)(a),s=ks(a);return s.length?new mr.y(f=>{let E=s.map(()=>[]),O=s.map(()=>!1);f.add(()=>{E=O=null});for(let re=0;!f.closed&&re<s.length;re++)(0,Mi.Xf)(s[re]).subscribe(new oi.Q(f,Ee=>{if(E[re].push(Ee),E.every(ke=>ke.length)){const ke=E.map(at=>at.shift());f.next(u?u(...ke):ke),E.some((at,kt)=>!at.length&&O[kt])&&f.complete()}},()=>{O[re]=!0,!E[re].length&&f.complete()}));return()=>{E=O=null}}):Or.E}var At=H(7272),sr=H(4482);function Dn(a){return(0,sr.e)((u,s)=>{(0,Mi.Xf)(a).subscribe(new oi.Q(s,()=>s.complete(),Te.Z)),!s.closed&&u.subscribe(s)})}var ei=H(9300),Xn=H(5698),gi=H(4004),Ha=(H(8675),H(1884),H(3900)),fs=H(8505),Io=H(1365);function Ta(a,u){return u?s=>(0,At.z)(u.pipe((0,Xn.q)(1),(0,sr.e)((a,u)=>{a.subscribe(new oi.Q(u,Te.Z))})),s.pipe(Ta(a))):(0,Cs.z)((s,f)=>a(s,f).pipe((0,Xn.q)(1),function(a){return(0,gi.U)(()=>a)}(s)))}H(8996),H(4742),H(1810);let Ei=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({}),a})(),ql=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[Ei]]}),a})(),Il=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[ql]}),a})();const ni=["*"],un=["dialog"];function bl(a){return null!=a}function Ci(a){return(a||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(a){let u=this;if(!document.documentElement.contains(u))return null;do{if(u.matches(a))return u;u=u.parentElement||u.parentNode}while(null!==u&&1===u.nodeType);return null});const _a={animation:!0,transitionTimerDelayMs:5},Ol=()=>{},{transitionTimerDelayMs:nd}=_a,C=new Map,y=(a,u,s,f)=>{let E=f.context||{};const O=C.get(u);if(O)switch(f.runningTransition){case"continue":return Or.E;case"stop":a.run(()=>O.transition$.complete()),E=Object.assign(O.context,E),C.delete(u)}const re=s(u,f.animation,E)||Ol;if(!f.animation||"none"===window.getComputedStyle(u).transitionProperty)return a.run(()=>re()),(0,wn.of)(void 0).pipe(function(a){return u=>new mr.y(s=>u.subscribe({next:re=>a.run(()=>s.next(re)),error:re=>a.run(()=>s.error(re)),complete:()=>a.run(()=>s.complete())}))}(a));const Ee=new hr.x,ke=new hr.x,at=Ee.pipe(function(...a){return u=>(0,At.z)(u,(0,wn.of)(...a))}(!0));C.set(u,{transition$:Ee,complete:()=>{ke.next(),ke.complete()},context:E});const kt=function(a){const{transitionDelay:u,transitionDuration:s}=window.getComputedStyle(a);return 1e3*(parseFloat(u)+parseFloat(s))}(u);return a.runOutsideAngular(()=>{const gn=fn(u,"transitionend").pipe(Dn(at),(0,ei.h)(({target:$n})=>$n===u));lr(Ts(kt+nd).pipe(Dn(at)),gn,ke).pipe(Dn(at)).subscribe(()=>{C.delete(u),a.run(()=>{re(),Ee.next(),Ee.complete()})})}),Ee.asObservable()};let ee=(()=>{class a{constructor(){this.animation=_a.animation}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ds=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),ki=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),hc=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({}),a})(),oo=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),Uu=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({}),a})();var xs=(()=>{return(a=xs||(xs={}))[a.Tab=9]="Tab",a[a.Enter=13]="Enter",a[a.Escape=27]="Escape",a[a.Space=32]="Space",a[a.PageUp=33]="PageUp",a[a.PageDown=34]="PageDown",a[a.End=35]="End",a[a.Home=36]="Home",a[a.ArrowLeft=37]="ArrowLeft",a[a.ArrowUp=38]="ArrowUp",a[a.ArrowRight=39]="ArrowRight",a[a.ArrowDown=40]="ArrowDown",xs;var a})();const b=(a,u)=>!!u&&u.some(s=>s.contains(a)),A=(a,u)=>!u||null!=function(a,u){return u&&void 0!==a.closest?a.closest(u):null}(a,u),L="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function se(a,u,s,f,E,O,re,Ee){s&&a.runOutsideAngular((a=>L?()=>setTimeout(()=>a(),100):a)(()=>{const at=fn(u,"keydown").pipe(Dn(E),(0,ei.h)(yn=>yn.which===xs.Escape),(0,fs.b)(yn=>yn.preventDefault())),kt=fn(u,"mousedown").pipe((0,gi.U)(yn=>{const $n=yn.target;return 2!==yn.button&&!b($n,re)&&("inside"===s?b($n,O)&&A($n,Ee):"outside"===s?!b($n,O):A($n,Ee)||!b($n,O))}),Dn(E)),gn=fn(u,"mouseup").pipe((0,Io.M)(kt),(0,ei.h)(([yn,$n])=>$n),function(a,u=yi.z){const s=Ts(0,u);return Ta(()=>s)}(),Dn(E));lr([at.pipe((0,gi.U)(yn=>0)),gn.pipe((0,gi.U)(yn=>1))]).subscribe(yn=>a.run(()=>f(yn)))}))}const pe=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Ce(a){const u=Array.from(a.querySelectorAll(pe)).filter(s=>-1!==s.tabIndex);return[u[0],u[u.length-1]]}const Dt=/\s+/,pn=new class{getAllStyles(u){return window.getComputedStyle(u)}getStyle(u,s){return this.getAllStyles(u)[s]}isStaticPositioned(u){return"static"===(this.getStyle(u,"position")||"static")}offsetParent(u){let s=u.offsetParent||document.documentElement;for(;s&&s!==document.documentElement&&this.isStaticPositioned(s);)s=s.offsetParent;return s||document.documentElement}position(u,s=!0){let f,E={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(u,"position"))f=u.getBoundingClientRect(),f={top:f.top,bottom:f.bottom,left:f.left,right:f.right,height:f.height,width:f.width};else{const O=this.offsetParent(u);f=this.offset(u,!1),O!==document.documentElement&&(E=this.offset(O,!1)),E.top+=O.clientTop,E.left+=O.clientLeft}return f.top-=E.top,f.bottom-=E.top,f.left-=E.left,f.right-=E.left,s&&(f.top=Math.round(f.top),f.bottom=Math.round(f.bottom),f.left=Math.round(f.left),f.right=Math.round(f.right)),f}offset(u,s=!0){const f=u.getBoundingClientRect(),E_top=window.scrollY-document.documentElement.clientTop,E_left=window.scrollX-document.documentElement.clientLeft;let O={height:f.height||u.offsetHeight,width:f.width||u.offsetWidth,top:f.top+E_top,bottom:f.bottom+E_top,left:f.left+E_left,right:f.right+E_left};return s&&(O.height=Math.round(O.height),O.width=Math.round(O.width),O.top=Math.round(O.top),O.bottom=Math.round(O.bottom),O.left=Math.round(O.left),O.right=Math.round(O.right)),O}positionElements(u,s,f,E){const[O="top",re="center"]=f.split("-"),Ee=E?this.offset(u,!1):this.position(u,!1),ke=this.getAllStyles(s),at=parseFloat(ke.marginTop),kt=parseFloat(ke.marginBottom),gn=parseFloat(ke.marginLeft),yn=parseFloat(ke.marginRight);let $n=0,vr=0;switch(O){case"top":$n=Ee.top-(s.offsetHeight+at+kt);break;case"bottom":$n=Ee.top+Ee.height;break;case"left":vr=Ee.left-(s.offsetWidth+gn+yn);break;case"right":vr=Ee.left+Ee.width}switch(re){case"top":$n=Ee.top;break;case"bottom":$n=Ee.top+Ee.height-s.offsetHeight;break;case"left":vr=Ee.left;break;case"right":vr=Ee.left+Ee.width-s.offsetWidth;break;case"center":"top"===O||"bottom"===O?vr=Ee.left+Ee.width/2-s.offsetWidth/2:$n=Ee.top+Ee.height/2-s.offsetHeight/2}s.style.transform=`translate(${Math.round(vr)}px, ${Math.round($n)}px)`;const br=s.getBoundingClientRect(),si=document.documentElement,Qs=window.innerHeight||si.clientHeight,as=window.innerWidth||si.clientWidth;return br.left>=0&&br.top>=0&&br.right<=as&&br.bottom<=Qs}};new Date(1882,10,12),new Date(2174,10,25);let Mh=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez,Il]]}),a})(),If=(()=>{class a{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),ld=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275dir=_.lG2({type:a,selectors:[["",8,"navbar"]]}),a})(),Sf=(()=>{class a{constructor(s){this.elementRef=s,this._disabled=!1}set disabled(s){this._disabled=""===s||!0===s}get disabled(){return this._disabled}}return a.\u0275fac=function(s){return new(s||a)(_.Y36(_.SBq))},a.\u0275dir=_.lG2({type:a,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(s,f){2&s&&_.ekj("disabled",f.disabled)},inputs:{disabled:"disabled"}}),a})(),Af=(()=>{class a{constructor(s,f){this.dropdown=s,this.placement="bottom",this.isOpen=!1,this.nativeElement=f.nativeElement}}return a.\u0275fac=function(s){return new(s||a)(_.Y36((0,_.Gpc)(()=>ud)),_.Y36(_.SBq))},a.\u0275dir=_.lG2({type:a,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(s,f,E){if(1&s&&_.Suo(E,Sf,4),2&s){let O;_.iGM(O=_.CRH())&&(f.menuItems=O)}},hostVars:5,hostBindings:function(s,f){1&s&&_.NdJ("keydown.ArrowUp",function(O){return f.dropdown.onKeyDown(O)})("keydown.ArrowDown",function(O){return f.dropdown.onKeyDown(O)})("keydown.Home",function(O){return f.dropdown.onKeyDown(O)})("keydown.End",function(O){return f.dropdown.onKeyDown(O)})("keydown.Enter",function(O){return f.dropdown.onKeyDown(O)})("keydown.Space",function(O){return f.dropdown.onKeyDown(O)})("keydown.Tab",function(O){return f.dropdown.onKeyDown(O)})("keydown.Shift.Tab",function(O){return f.dropdown.onKeyDown(O)}),2&s&&(_.uIk("x-placement",f.placement),_.ekj("dropdown-menu",!0)("show",f.dropdown.isOpen()))}}),a})(),Rh=(()=>{class a{constructor(s,f){this.dropdown=s,this.nativeElement=f.nativeElement}}return a.\u0275fac=function(s){return new(s||a)(_.Y36((0,_.Gpc)(()=>ud)),_.Y36(_.SBq))},a.\u0275dir=_.lG2({type:a,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(s,f){2&s&&_.uIk("aria-expanded",f.dropdown.isOpen())}}),a})(),Nf=(()=>{class a extends Rh{constructor(s,f){super(s,f)}}return a.\u0275fac=function(s){return new(s||a)(_.Y36((0,_.Gpc)(()=>ud)),_.Y36(_.SBq))},a.\u0275dir=_.lG2({type:a,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(s,f){1&s&&_.NdJ("click",function(){return f.dropdown.toggle()})("keydown.ArrowUp",function(O){return f.dropdown.onKeyDown(O)})("keydown.ArrowDown",function(O){return f.dropdown.onKeyDown(O)})("keydown.Home",function(O){return f.dropdown.onKeyDown(O)})("keydown.End",function(O){return f.dropdown.onKeyDown(O)})("keydown.Tab",function(O){return f.dropdown.onKeyDown(O)})("keydown.Shift.Tab",function(O){return f.dropdown.onKeyDown(O)}),2&s&&_.uIk("aria-expanded",f.dropdown.isOpen())},features:[_._Bn([{provide:Rh,useExisting:(0,_.Gpc)(()=>a)}]),_.qOj]}),a})(),ud=(()=>{class a{constructor(s,f,E,O,re,Ee,ke){this._changeDetector=s,this._document=E,this._ngZone=O,this._elementRef=re,this._renderer=Ee,this._closed$=new hr.x,this._bodyContainer=null,this._open=!1,this.openChange=new _.vpe,this.placement=f.placement,this.container=f.container,this.autoClose=f.autoClose,this.display=ke?"static":"dynamic",this._zoneSubscription=O.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe((0,Xn.q)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(s){if(s.container&&this._open&&this._applyContainer(this.container),s.placement&&!s.placement.isFirstChange&&this._applyPlacementClasses(),s.dropdownClass){const{currentValue:f,previousValue:E}=s.dropdownClass;this._applyCustomDropdownClass(f,E)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){se(this._ngZone,this._document,this.autoClose,s=>{this.close(),0===s&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(s){const f=s.which,E=this._getMenuElements();let O=-1,re=null;const Ee=this._isEventFromToggle(s);if(!Ee&&E.length&&E.forEach((ke,at)=>{ke.contains(s.target)&&(re=ke),ke===this._document.activeElement&&(O=at)}),f!==xs.Space&&f!==xs.Enter){if(f!==xs.Tab){if(Ee||re){if(this.open(),E.length){switch(f){case xs.ArrowDown:O=Math.min(O+1,E.length-1);break;case xs.ArrowUp:if(this._isDropup()&&-1===O){O=E.length-1;break}O=Math.max(O-1,0);break;case xs.Home:O=0;break;case xs.End:O=E.length-1}E[O].focus()}s.preventDefault()}}else if(s.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===s.target)return void("body"!==this.container||s.shiftKey?s.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const ke=this._menu.nativeElement.querySelectorAll(pe);s.shiftKey&&s.target===ke[0]?(this._anchor.nativeElement.focus(),s.preventDefault()):!s.shiftKey&&s.target===ke[ke.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else fn(s.target,"focusout").pipe((0,Xn.q)(1)).subscribe(({relatedTarget:ke})=>{this._elementRef.nativeElement.contains(ke)||this.close()})}}else re&&(!0===this.autoClose||"inside"===this.autoClose)&&fn(re,"click").pipe((0,Xn.q)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(s){return this._anchor.nativeElement.contains(s.target)}_getMenuElements(){const s=this._menu;return null==s?[]:s.menuItems.filter(f=>!f.disabled).map(f=>f.elementRef.nativeElement)}_positionMenu(){const s=this._menu;this.isOpen()&&s&&this._applyPlacementClasses("dynamic"===this.display?function(a,u,s,f,E){let O=Array.isArray(s)?s:s.split(Dt);const re=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],ke=$n=>{const[vr,br]=$n.split("-"),si=[];return si};let at=O.findIndex($n=>"auto"===$n);at>=0&&re.forEach(function($n){null==O.find(vr=>-1!==vr.search("^"+$n))&&O.splice(at++,1,$n)});const kt=u.style;kt.position="absolute",kt.top="0",kt.left="0",kt["will-change"]="transform";let gn=null,yn=!1;for(gn of O){ke(gn);if(pn.positionElements(a,u,gn,f)){yn=!0;break}}return yn||(gn=O[0],ke(gn),pn.positionElements(a,u,gn,f)),gn}(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(s){return Array.isArray(s)?s[0]:s.split(" ")[0]}_resetContainer(){const s=this._renderer;if(this._menu){const E=this._menu.nativeElement;s.appendChild(this._elementRef.nativeElement,E),s.removeStyle(E,"position"),s.removeStyle(E,"transform")}this._bodyContainer&&(s.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(s=null){if(this._resetContainer(),"body"===s){const f=this._renderer,E=this._menu.nativeElement,O=this._bodyContainer=this._bodyContainer||f.createElement("div");f.setStyle(O,"position","absolute"),f.setStyle(E,"position","static"),f.setStyle(O,"z-index","1050"),f.appendChild(O,E),f.appendChild(this._document.body,O)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(s,f){const E="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;E&&(f&&this._renderer.removeClass(E,f),s&&this._renderer.addClass(E,s))}_applyPlacementClasses(s){const f=this._menu;if(f){s||(s=this._getFirstPlacement(this.placement));const E=this._renderer,O=this._elementRef.nativeElement;E.removeClass(O,"dropup"),E.removeClass(O,"dropdown"),f.placement="static"===this.display?null:s;const re=-1!==s.search("^top")?"dropup":"dropdown";E.addClass(O,re);const Ee=this._bodyContainer;Ee&&(E.removeClass(Ee,"dropup"),E.removeClass(Ee,"dropdown"),E.addClass(Ee,re))}}}return a.\u0275fac=function(s){return new(s||a)(_.Y36(_.sBO),_.Y36(If),_.Y36(T.K0),_.Y36(_.R0b),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(ld,8))},a.\u0275dir=_.lG2({type:a,selectors:[["","ngbDropdown",""]],contentQueries:function(s,f,E){if(1&s&&(_.Suo(E,Af,5),_.Suo(E,Rh,5)),2&s){let O;_.iGM(O=_.CRH())&&(f._menu=O.first),_.iGM(O=_.CRH())&&(f._anchor=O.first)}},hostVars:2,hostBindings:function(s,f){2&s&&_.ekj("show",f.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[_.TTD]}),a})(),cd=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({}),a})();class qu{constructor(u,s,f){this.nodes=u,this.viewRef=s,this.componentRef=f}}let jp=(()=>{class a{constructor(s,f){this._el=s,this._zone=f}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Xn.q)(1)).subscribe(()=>{y(this._zone,this._el.nativeElement,(s,f)=>{f&&Ci(s),s.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return y(this._zone,this._el.nativeElement,({classList:s})=>s.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return a.\u0275fac=function(s){return new(s||a)(_.Y36(_.SBq),_.Y36(_.R0b))},a.\u0275cmp=_.Xpm({type:a,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(s,f){2&s&&(_.Tol("modal-backdrop"+(f.backdropClass?" "+f.backdropClass:"")),_.ekj("show",!f.animation)("fade",f.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(s,f){},encapsulation:2}),a})();class $p{close(u){}dismiss(u){}}class P_{constructor(u,s,f,E){this._windowCmptRef=u,this._contentRef=s,this._backdropCmptRef=f,this._beforeDismiss=E,this._closed=new hr.x,this._dismissed=new hr.x,this._hidden=new hr.x,u.instance.dismissEvent.subscribe(O=>{this.dismiss(O)}),this.result=new Promise((O,re)=>{this._resolve=O,this._reject=re}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Dn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Dn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(u){this._windowCmptRef&&(this._closed.next(u),this._resolve(u),this._removeModalElements())}_dismiss(u){this._dismissed.next(u),this._reject(u),this._removeModalElements()}dismiss(u){if(this._windowCmptRef)if(this._beforeDismiss){const s=this._beforeDismiss();(a=s)&&a.then?s.then(f=>{!1!==f&&this._dismiss(u)},()=>{}):!1!==s&&this._dismiss(u)}else this._dismiss(u);var a}_removeModalElements(){const u=this._windowCmptRef.instance.hide(),s=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,wn.of)(void 0);u.subscribe(()=>{const{nativeElement:f}=this._windowCmptRef.location;f.parentNode.removeChild(f),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),s.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:f}=this._backdropCmptRef.location;f.parentNode.removeChild(f),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ot(u,s).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var dd=(()=>{return(a=dd||(dd={}))[a.BACKDROP_CLICK=0]="BACKDROP_CLICK",a[a.ESC=1]="ESC",dd;var a})();let F_=(()=>{class a{constructor(s,f,E){this._document=s,this._elRef=f,this._zone=E,this._closed$=new hr.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new _.vpe,this.shown=new hr.x,this.hidden=new hr.x}dismiss(s){this.dismissEvent.emit(s)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Xn.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:s}=this._elRef,f={animation:this.animation,runningTransition:"stop"},re=Ot(y(this._zone,s,()=>s.classList.remove("show"),f),y(this._zone,this._dialogEl.nativeElement,()=>{},f));return re.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),re}_show(){const s={animation:this.animation,runningTransition:"continue"};Ot(y(this._zone,this._elRef.nativeElement,(O,re)=>{re&&Ci(O),O.classList.add("show")},s),y(this._zone,this._dialogEl.nativeElement,()=>{},s)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:s}=this._elRef;this._zone.runOutsideAngular(()=>{fn(s,"keydown").pipe(Dn(this._closed$),(0,ei.h)(E=>E.which===xs.Escape)).subscribe(E=>{this.keyboard?requestAnimationFrame(()=>{E.defaultPrevented||this._zone.run(()=>this.dismiss(dd.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let f=!1;fn(this._dialogEl.nativeElement,"mousedown").pipe(Dn(this._closed$),(0,fs.b)(()=>f=!1),(0,Ha.w)(()=>fn(s,"mouseup").pipe(Dn(this._closed$),(0,Xn.q)(1))),(0,ei.h)(({target:E})=>s===E)).subscribe(()=>{f=!0}),fn(s,"click").pipe(Dn(this._closed$)).subscribe(({target:E})=>{s===E&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!f&&this._zone.run(()=>this.dismiss(dd.BACKDROP_CLICK))),f=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:s}=this._elRef;if(!s.contains(document.activeElement)){const f=s.querySelector("[ngbAutofocus]"),E=Ce(s)[0];(f||E||s).focus()}}_restoreFocus(){const s=this._document.body,f=this._elWithFocus;let E;E=f&&f.focus&&s.contains(f)?f:s,this._zone.runOutsideAngular(()=>{setTimeout(()=>E.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&y(this._zone,this._elRef.nativeElement,({classList:s})=>(s.add("modal-static"),()=>s.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return a.\u0275fac=function(s){return new(s||a)(_.Y36(T.K0),_.Y36(_.SBq),_.Y36(_.R0b))},a.\u0275cmp=_.Xpm({type:a,selectors:[["ngb-modal-window"]],viewQuery:function(s,f){if(1&s&&_.Gf(un,7),2&s){let E;_.iGM(E=_.CRH())&&(f._dialogEl=E.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(s,f){2&s&&(_.uIk("aria-modal",!0)("aria-labelledby",f.ariaLabelledBy)("aria-describedby",f.ariaDescribedBy),_.Tol("modal d-block"+(f.windowClass?" "+f.windowClass:"")),_.ekj("fade",f.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:ni,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(s,f){1&s&&(_.F$t(),_.TgZ(0,"div",0,1),_.TgZ(2,"div",2),_.Hsn(3),_.qZA(),_.qZA()),2&s&&_.Tol("modal-dialog"+(f.size?" modal-"+f.size:"")+(f.centered?" modal-dialog-centered":"")+(f.scrollable?" modal-dialog-scrollable":"")+(f.modalDialogClass?" "+f.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),a})();const L_=()=>{};let V_=(()=>{class a{constructor(s){this._document=s}compensate(){const s=this._getWidth();return this._isPresent(s)?this._adjustBody(s):L_}_adjustBody(s){const f=this._document.body,E=f.style.paddingRight,O=parseFloat(window.getComputedStyle(f)["padding-right"]);return f.style["padding-right"]=`${O+s}px`,()=>f.style["padding-right"]=E}_isPresent(s){const f=this._document.body.getBoundingClientRect();return window.innerWidth-(f.left+f.right)>=s-.1*s}_getWidth(){const s=this._document.createElement("div");s.className="modal-scrollbar-measure";const f=this._document.body;f.appendChild(s);const E=s.getBoundingClientRect().width-s.clientWidth;return f.removeChild(s),E}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(T.K0))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),xh=(()=>{class a{constructor(s,f,E,O,re,Ee){this._applicationRef=s,this._injector=f,this._document=E,this._scrollBar=O,this._rendererFactory=re,this._ngZone=Ee,this._activeWindowCmptHasChanged=new hr.x,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new _.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const ke=this._windowCmpts[this._windowCmpts.length-1];((a,u,s,f=!1)=>{this._ngZone.runOutsideAngular(()=>{const E=fn(u,"focusin").pipe(Dn(s),(0,gi.U)(O=>O.target));fn(u,"keydown").pipe(Dn(s),(0,ei.h)(O=>O.which===xs.Tab),(0,Io.M)(E)).subscribe(([O,re])=>{const[Ee,ke]=Ce(u);(re===Ee||re===u)&&O.shiftKey&&(ke.focus(),O.preventDefault()),re===ke&&!O.shiftKey&&(Ee.focus(),O.preventDefault())}),f&&fn(u,"click").pipe(Dn(s),(0,Io.M)(E),(0,gi.U)(O=>O[1])).subscribe(O=>O.focus())})})(0,ke.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(ke.location.nativeElement)}})}open(s,f,E,O){const re=O.container instanceof HTMLElement?O.container:bl(O.container)?this._document.querySelector(O.container):this._document.body,Ee=this._rendererFactory.createRenderer(null,null),ke=this._scrollBar.compensate(),at=()=>{this._modalRefs.length||(Ee.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!re)throw new Error(`The specified modal container "${O.container||"body"}" was not found in the DOM.`);const kt=new $p,gn=this._getContentRef(s,O.injector||f,E,kt,O);let yn=!1!==O.backdrop?this._attachBackdrop(s,re):void 0,$n=this._attachWindowComponent(s,re,gn),vr=new P_($n,gn,yn,O.beforeDismiss);return this._registerModalRef(vr),this._registerWindowCmpt($n),vr.result.then(ke,ke),vr.result.then(at,at),kt.close=br=>{vr.close(br)},kt.dismiss=br=>{vr.dismiss(br)},this._applyWindowOptions($n.instance,O),1===this._modalRefs.length&&Ee.addClass(this._document.body,"modal-open"),yn&&yn.instance&&(this._applyBackdropOptions(yn.instance,O),yn.changeDetectorRef.detectChanges()),$n.changeDetectorRef.detectChanges(),vr}get activeInstances(){return this._activeInstances}dismissAll(s){this._modalRefs.forEach(f=>f.dismiss(s))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(s,f){let O=s.resolveComponentFactory(jp).create(this._injector);return this._applicationRef.attachView(O.hostView),f.appendChild(O.location.nativeElement),O}_attachWindowComponent(s,f,E){let re=s.resolveComponentFactory(F_).create(this._injector,E.nodes);return this._applicationRef.attachView(re.hostView),f.appendChild(re.location.nativeElement),re}_applyWindowOptions(s,f){this._windowAttributes.forEach(E=>{bl(f[E])&&(s[E]=f[E])})}_applyBackdropOptions(s,f){this._backdropAttributes.forEach(E=>{bl(f[E])&&(s[E]=f[E])})}_getContentRef(s,f,E,O,re){return E?E instanceof _.Rgc?this._createFromTemplateRef(E,O):function(a){return"string"==typeof a}(E)?this._createFromString(E):this._createFromComponent(s,f,E,O,re):new qu([])}_createFromTemplateRef(s,f){const O=s.createEmbeddedView({$implicit:f,close(re){f.close(re)},dismiss(re){f.dismiss(re)}});return this._applicationRef.attachView(O),new qu([O.rootNodes],O)}_createFromString(s){const f=this._document.createTextNode(`${s}`);return new qu([[f]])}_createFromComponent(s,f,E,O,re){const Ee=s.resolveComponentFactory(E),ke=_.zs3.create({providers:[{provide:$p,useValue:O}],parent:f}),at=Ee.create(ke),kt=at.location.nativeElement;return re.scrollable&&kt.classList.add("component-host-scrollable"),this._applicationRef.attachView(at.hostView),new qu([[kt]],at.hostView,at)}_setAriaHidden(s){const f=s.parentElement;f&&s!==this._document.body&&(Array.from(f.children).forEach(E=>{E!==s&&"SCRIPT"!==E.nodeName&&(this._ariaHiddenValues.set(E,E.getAttribute("aria-hidden")),E.setAttribute("aria-hidden","true"))}),this._setAriaHidden(f))}_revertAriaHidden(){this._ariaHiddenValues.forEach((s,f)=>{s?f.setAttribute("aria-hidden",s):f.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(s){const f=()=>{const E=this._modalRefs.indexOf(s);E>-1&&(this._modalRefs.splice(E,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(s),this._activeInstances.emit(this._modalRefs),s.result.then(f,f)}_registerWindowCmpt(s){this._windowCmpts.push(s),this._activeWindowCmptHasChanged.next(),s.onDestroy(()=>{const f=this._windowCmpts.indexOf(s);f>-1&&(this._windowCmpts.splice(f,1),this._activeWindowCmptHasChanged.next())})}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(_.z2F),_.LFG(_.zs3),_.LFG(T.K0),_.LFG(V_),_.LFG(_.FYo),_.LFG(_.R0b))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Tu=(()=>{class a{constructor(s){this._ngbConfig=s,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(s){this._animation=s}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(ee))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Zu=(()=>{class a{constructor(s,f,E,O){this._moduleCFR=s,this._injector=f,this._modalStack=E,this._config=O}open(s,f={}){const E=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),f);return this._modalStack.open(this._moduleCFR,this._injector,s,E)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(s){this._modalStack.dismissAll(s)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return a.\u0275fac=function(s){return new(s||a)(_.LFG(_._Vd),_.LFG(_.zs3),_.LFG(xh),_.LFG(Tu))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),zd=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({providers:[Zu]}),a})(),zp=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),kh=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),va=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),Qp=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),um=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),eg=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),ig=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})(),Bh=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({}),a})();new _.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let Hf=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez]]}),a})();const Gf=[ds,ki,hc,oo,Uu,Mh,cd,zd,zp,kh,va,Qp,um,eg,ig,Bh,Hf];let gm=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[Gf,ds,ki,hc,oo,Uu,Mh,cd,zd,zp,kh,va,Qp,um,eg,ig,Bh,Hf]}),a})();var th=H(2334);const H_=["user_profile_modal"];function Wf(a,u){if(1&a){const s=_.EpF();_.TgZ(0,"div",8),_.TgZ(1,"button",9),_._uU(2),_.qZA(),_.TgZ(3,"div",10),_._UZ(4,"button",11),_.TgZ(5,"div",12),_.TgZ(6,"button",13),_.NdJ("click",function(){_.CHM(s);const E=_.oxw(),O=_.MAs(8);return E.user_profile(O)}),_._uU(7,"My Profile"),_.qZA(),_.TgZ(8,"button",13),_.NdJ("click",function(){return _.CHM(s),_.oxw().sign_out()}),_._uU(9,"Log Out"),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&a){const s=_.oxw();_.xp6(2),_.Oqu(s.user_details.user.email)}}function Hh(a,u){if(1&a&&(_.TgZ(0,"div"),_.TgZ(1,"div",19),_.TgZ(2,"div",20),_.TgZ(3,"div",21),_._UZ(4,"img",22),_.TgZ(5,"h2"),_._uU(6),_.qZA(),_.qZA(),_.TgZ(7,"div",23),_.TgZ(8,"p"),_._uU(9,"User ID: "),_.TgZ(10,"strong"),_._uU(11),_.qZA(),_.qZA(),_.TgZ(12,"p"),_._uU(13,"Email: "),_.TgZ(14,"strong"),_._uU(15),_.qZA(),_.qZA(),_.TgZ(16,"p"),_._uU(17,"Email Verified: "),_.TgZ(18,"strong"),_._uU(19),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&a){const s=_.oxw(2);_.Gre("modal-body  user_profile_modal emailVerified-",s.user_details.user.emailVerified,""),_.xp6(4),_.s9C("src",s.user_details.user.photoURL?s.user_details.user.photoURL:"/assets/dummy-user.png",_.LSH),_.s9C("alt",s.user_details.user.displayName),_.xp6(2),_.hij("",s.user_details.user.displayName?s.user_details.user.displayName:"User"," "),_.xp6(5),_.Oqu(s.user_details.user.uid),_.xp6(4),_.Oqu(s.user_details.user.email),_.xp6(4),_.Oqu(s.user_details.user.emailVerified)}}function Gh(a,u){if(1&a){const s=_.EpF();_.TgZ(0,"div",14),_.TgZ(1,"h4",15),_._uU(2,"Profile update"),_.qZA(),_.TgZ(3,"button",16),_.NdJ("click",function(){return _.CHM(s).$implicit.dismiss("Cross click")}),_.TgZ(4,"span",17),_._uU(5,"\xd7"),_.qZA(),_.qZA(),_.qZA(),_.YNc(6,Hh,20,9,"div",18)}if(2&a){const s=_.oxw();_.xp6(6),_.Q6J("ngIf",s.user_details.user)}}let $c=(()=>{class a{constructor(s,f,E){this._router=s,this._ngModal=f,this._appService=E,this.game_round_url="",this.user_details={},this.url_is_quiz=!1,this.closeResult="",this._router.events.subscribe(O=>{var re="",Ee=!1;O instanceof Pt.OD&&(re=O.url);let ke=[];ke=re.split("/");for(let at of ke)(at.includes("quizround")||at.includes("userscore"))&&(Ee=!0);1==Ee&&(this.user_details=this._appService.fetch_user_score_details(),console.log("this.user_details",this.user_details))})}ngOnInit(){}user_profile(s){this.user_details=this._appService.fetch_user_score_details(),this._ngModal.open(s,{ariaLabelledBy:"modal-basic-title"}).result.then(f=>{this.closeResult=`Closed with: ${f}`},f=>{this.closeResult=`Dismissed ${this.getDismissReason(f)}`})}getDismissReason(s){return s===dd.ESC?"by pressing ESC":s===dd.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${s}`}resume_game(){this._router.navigateByUrl(this.game_round_url)}sign_out(){this._router.navigate(["../../../auth/signout"])}}return a.\u0275fac=function(s){return new(s||a)(_.Y36(Pt.F0),_.Y36(Zu),_.Y36(th.I))},a.\u0275cmp=_.Xpm({type:a,selectors:[["app-main-header"]],viewQuery:function(s,f){if(1&s&&_.Gf(H_,5),2&s){let E;_.iGM(E=_.CRH())&&(f.user_profile_modal=E.first)}},decls:9,vars:1,consts:[[1,"navbar"],[1,"container-fluid","game_details_wrap"],[1,"navbar-brand","logo"],[1,"game_details"],["class","btn-group mr-3",4,"ngIf"],[1,"navbar-border"],["class",""],["user_profile_modal",""],[1,"btn-group","mr-3"],["type","button",1,"btn","emailid","btn_secondary"],["ngbDropdown","","role","group","aria-label","Button group with nested dropdown",1,"btn-group"],["ngbDropdownToggle","",1,"btn"],["ngbDropdownMenu","",1,"dropdown-menu"],["ngbDropdownItem","",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"class",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"profile_header"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"profile_body"]],template:function(s,f){1&s&&(_.TgZ(0,"nav",0),_.TgZ(1,"div",1),_.TgZ(2,"a",2),_._uU(3,"Quizzard"),_.qZA(),_.TgZ(4,"div",3),_.YNc(5,Wf,10,1,"div",4),_.qZA(),_.qZA(),_.qZA(),_._UZ(6,"div",5),_.YNc(7,Gh,7,1,"ng-template",6,7,_.W1O)),2&s&&(_.xp6(5),_.Q6J("ngIf",f.user_details.user))},directives:[ld,T.O5,ud,Nf,Af,Sf],styles:[".dropdown-menu[_ngcontent-%COMP%]{left:auto!important;right:0!important;top:40px!important}.navbar[_ngcontent-%COMP%]{background-image:linear-gradient(to right,var(--a3),var(--a3-l));border-bottom:4px solid linear-gradient(to right,var(--a1),var(--a1-l))}.navbar-border[_ngcontent-%COMP%]{height:4px;width:100%;background-image:linear-gradient(to right,var(--a3-l),white)}.user_profile_modal[_ngcontent-%COMP%]{text-align:center}.user_profile_modal[_ngcontent-%COMP%]   .profile_body[_ngcontent-%COMP%]{text-align:left;padding:20px;border-radius:15px}.user_profile_modal[_ngcontent-%COMP%]   .profile_header[_ngcontent-%COMP%]{margin-bottom:30px}.user_profile_modal.emailVerified-true[_ngcontent-%COMP%]   .profile_body[_ngcontent-%COMP%]{background-color:var(--a2-l);border:2px solid var(--a2);color:var(--a1-d)}.user_profile_modal.emailVerified-false[_ngcontent-%COMP%]   .profile_body[_ngcontent-%COMP%]{background-color:var(--a3-l);border:2px solid var(--a3);color:var(--a3-d)}"]}),a})(),zf=(()=>{class a{constructor(){this.title="quizzard"}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=_.Xpm({type:a,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container-fluid","page-wrapper"],["outlet","outlet"]],template:function(s,f){1&s&&(_.TgZ(0,"div",0),_._UZ(1,"app-main-header"),_._UZ(2,"router-outlet",null,1),_.qZA())},directives:[$c,Pt.lC],styles:[""]}),a})();const Wh=[];let Yu=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[Pt.Bz.forChild(Wh)],Pt.Bz]}),a})(),fd=(()=>{class a{static forChild(){return{ngModule:a,providers:[]}}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({imports:[[T.ez,Yu,zd,cd]]}),a})();var Qu=H(2011),Os=H(5813),Ju=H(3692),Tc=H(5867),nh=H(7128),qf=H(8937);class Zf{constructor(u){return u}}class Sc{constructor(){return(0,Os.vb)("auth")}}const pd=new _.OlP("angularfire2.auth-instances");function Kf(a){return(u,s)=>{const f=u.runOutsideAngular(()=>a(s));return new Zf(f)}}const zh={provide:Sc,deps:[[new _.FiY,pd]]},Yf={provide:Zf,useFactory:function(a,u){const s=(0,Os.JM)("auth",a,u);return s&&new Zf(s)},deps:[[new _.FiY,pd],Ju.Ot]};let ug=(()=>{class a{constructor(){(0,Tc.KN)("angularfire",Os.q4.full,"auth")}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({providers:[Yf,zh]}),a})();function cg(a,...u){return{ngModule:ug,providers:[{provide:pd,useFactory:Kf(a),multi:!0,deps:[_.R0b,_.zs3,Os.HU,Ju.z6,[new _.FiY,nh.nm],...u]}]}}const Jf=(0,Os.u3)(qf.v0,!0);var Om=H(9586);const hs_firebase={apiKey:"AIzaSyCv5qT-waDVWtjgfVqHgA5o5r6BKyXvdLo",authDomain:"quizzard-f6723.firebaseapp.com",projectId:"quizzard-f6723",storageBucket:"quizzard-f6723.appspot.com",messagingSenderId:"450692687041",appId:"1:450692687041:web:ab286a2781cbdcfcaaa040",measurementId:"G-YLNNSGGDP1"};var $o=H(1627);class Ys{constructor(u){return u}}const _d="database",yd=new _.OlP("angularfire2.database-instances");function rp(a){return(u,s)=>{const f=u.runOutsideAngular(()=>a(s));return new Ys(f)}}const Nc={provide:class{constructor(){return(0,Os.vb)(_d)}},deps:[[new _.FiY,yd]]},vd={provide:Ys,useFactory:function(a,u){const s=(0,Os.JM)(_d,a,u);return s&&new Ys(s)},deps:[[new _.FiY,yd],Ju.Ot]};let bd=(()=>{class a{constructor(){(0,Tc.KN)("angularfire",Os.q4.full,"rtdb")}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({providers:[vd,Nc]}),a})();function Fi(a,...u){return{ngModule:bd,providers:[{provide:yd,useFactory:rp(a),multi:!0,deps:[_.R0b,_.zs3,Os.HU,Ju.z6,[new _.FiY,Sc],[new _.FiY,nh.nm],...u]}]}}const Xu=(0,Os.u3)($o.N8,!0);var dp=H(5525);class qc{constructor(u){return u}}const Tg="firestore",ec=new _.OlP("angularfire2.firestore-instances");function Zc(a){return(u,s)=>{const f=u.runOutsideAngular(()=>a(s));return new qc(f)}}const Ig={provide:class{constructor(){return(0,Os.vb)(Tg)}},deps:[[new _.FiY,ec]]},Sg={provide:qc,useFactory:function(a,u){const s=(0,Os.JM)(Tg,a,u);return s&&new qc(s)},deps:[[new _.FiY,ec],Ju.Ot]};let Jh=(()=>{class a{constructor(){(0,Tc.KN)("angularfire",Os.q4.full,"fst")}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({providers:[Sg,Ig]}),a})();function Xh(a,...u){return{ngModule:Jh,providers:[{provide:ec,useFactory:Zc(a),multi:!0,deps:[_.R0b,_.zs3,Os.HU,Ju.z6,[new _.FiY,Sc],[new _.FiY,nh.nm],...u]}]}}const Lg=(0,Os.u3)(dp.ad,!0);var je=H(5861),lt=H(9681),Mt=H(2090),Wt=H(4859);const jn="firebasestorage.googleapis.com";class ai extends Mt.ZR{constructor(u,s){super(Ho(u),`Firebase Storage: ${s} (${Ho(u)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ai.prototype)}_codeEquals(u){return Ho(u)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(u){this.customData.serverResponse=u,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ho(a){return"storage/"+a}function nf(a){return new ai("invalid-argument",a)}function fy(){return new ai("app-deleted","The Firebase app was deleted.")}class Ea{constructor(u,s){this.bucket=u,this.path_=s}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const u=encodeURIComponent;return"/b/"+u(this.bucket)+"/o/"+u(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(u,s){let f;try{f=Ea.makeFromUrl(u,s)}catch(E){return new Ea(u,"")}if(""===f.path)return f;throw new ai("invalid-default-bucket","Invalid default bucket '"+u+"'.")}static makeFromUrl(u,s){let f=null;const E="([A-Za-z0-9.\\-_]+)",Ee=new RegExp("^gs://"+E+"(/(.*))?$","i");function at(Wo){Wo.path_=decodeURIComponent(Wo.path)}const gn=s.replace(/[.]/g,"\\."),lo=[{regex:Ee,indices:{bucket:1,path:3},postModify:function(Wo){"/"===Wo.path.charAt(Wo.path.length-1)&&(Wo.path_=Wo.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${gn}/v[A-Za-z0-9_]+/b/${E}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:at},{regex:new RegExp(`^https?://${s===jn?"(?:storage.googleapis.com|storage.cloud.google.com)":s}/${E}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:at}];for(let Wo=0;Wo<lo.length;Wo++){const xc=lo[Wo],Jc=xc.regex.exec(u);if(Jc){let sa=Jc[xc.indices.path];sa||(sa=""),f=new Ea(Jc[xc.indices.bucket],sa),xc.postModify(f);break}}if(null==f)throw new ai("invalid-url","Invalid URL '"+u+"'.");return f}}class gy{constructor(u){this.promise_=Promise.reject(u)}getPromise(){return this.promise_}cancel(u=!1){}}function a_(a,u,s,f){if(f<u)throw nf(`Invalid value for '${a}'. Expected ${u} or greater.`);if(f>s)throw nf(`Invalid value for '${a}'. Expected ${s} or less.`)}var Ad=(()=>{return(a=Ad||(Ad={}))[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT",Ad;var a})();class Ev{constructor(u,s,f,E,O,re,Ee,ke,at,kt,gn){this.url_=u,this.method_=s,this.headers_=f,this.body_=E,this.successCodes_=O,this.additionalRetryCodes_=re,this.callback_=Ee,this.errorCallback_=ke,this.timeout_=at,this.progressCallback_=kt,this.connectionFactory_=gn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((yn,$n)=>{this.resolve_=yn,this.reject_=$n,this.start_()})}start_(){const s=(f,E)=>{const O=this.resolve_,re=this.reject_,Ee=E.connection;if(E.wasSuccessCode)try{const ke=this.callback_(Ee,Ee.getResponse());void 0!==ke?O(ke):O()}catch(ke){re(ke)}else if(null!==Ee){const ke=new ai("unknown","An unknown error occurred, please check the error payload for server response.");ke.serverResponse=Ee.getErrorText(),re(this.errorCallback_?this.errorCallback_(Ee,ke):ke)}else re(E.canceled?this.appDelete_?fy():new ai("canceled","User canceled the upload/download."):new ai("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?s(0,new jg(!1,null,!0)):this.backoffId_=function(a,u,s){let f=1,E=null,O=null,re=!1,Ee=0;function ke(){return 2===Ee}let at=!1;function kt(...si){at||(at=!0,u.apply(null,si))}function gn(si){E=setTimeout(()=>{E=null,a($n,ke())},si)}function yn(){O&&clearTimeout(O)}function $n(si,...Qs){if(at)return void yn();if(si)return yn(),void kt.call(null,si,...Qs);if(ke()||re)return yn(),void kt.call(null,si,...Qs);let lo;f<64&&(f*=2),1===Ee?(Ee=2,lo=0):lo=1e3*(f+Math.random()),gn(lo)}let vr=!1;function br(si){vr||(vr=!0,yn(),!at&&(null!==E?(si||(Ee=2),clearTimeout(E),gn(0)):si||(Ee=1)))}return gn(0),O=setTimeout(()=>{re=!0,br(!0)},s),br}((f,E)=>{if(E)return void f(!1,new jg(!1,null,!0));const O=this.connectionFactory_();this.pendingConnection_=O;const re=Ee=>{null!==this.progressCallback_&&this.progressCallback_(Ee.loaded,Ee.lengthComputable?Ee.total:-1)};null!==this.progressCallback_&&O.addUploadProgressListener(re),O.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&O.removeUploadProgressListener(re),this.pendingConnection_=null;const Ee=O.getErrorCode()===Ad.NO_ERROR,ke=O.getStatus();if(!Ee||this.isRetryStatusCode_(ke)){const kt=O.getErrorCode()===Ad.ABORT;return void f(!1,new jg(!1,null,kt))}const at=-1!==this.successCodes_.indexOf(ke);f(!0,new jg(at,O))})},s,this.timeout_)}getPromise(){return this.promise_}cancel(u){this.canceled_=!0,this.appDelete_=u||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(u){const s=u>=500&&u<600,E=-1!==[408,429].indexOf(u),O=-1!==this.additionalRetryCodes_.indexOf(u);return s||E||O}}class jg{constructor(u,s,f){this.wasSuccessCode=u,this.connection=s,this.canceled=!!f}}class uf{constructor(u,s){this._service=u,this._location=s instanceof Ea?s:Ea.makeFromUrl(s,u.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(u,s){return new uf(u,s)}get root(){const u=new Ea(this._location.bucket,"");return this._newRef(this._service,u)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(a){const u=a.lastIndexOf("/",a.length-2);return-1===u?a:a.slice(u+1)}(this._location.path)}get storage(){return this._service}get parent(){const u=function(a){if(0===a.length)return null;const u=a.lastIndexOf("/");return-1===u?"":a.slice(0,u)}(this._location.path);if(null===u)return null;const s=new Ea(this._location.bucket,u);return new uf(this._service,s)}_throwIfRoot(u){if(""===this._location.path)throw new ai("invalid-root-operation","The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function E_(a,u){const s=null==u?void 0:u.storageBucket;return null==s?null:Ea.makeFromBucketSpec(s,a)}class qg{constructor(u,s,f,E,O){this.app=u,this._authProvider=s,this._appCheckProvider=f,this._url=E,this._firebaseVersion=O,this._bucket=null,this._host=jn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=E?Ea.makeFromBucketSpec(E,this._host):E_(this._host,this.app.options)}get host(){return this._host}set host(u){this._host=u,this._bucket=null!=this._url?Ea.makeFromBucketSpec(this._url,u):E_(u,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(u){a_("time",0,Number.POSITIVE_INFINITY,u),this._maxUploadRetryTime=u}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(u){a_("time",0,Number.POSITIVE_INFINITY,u),this._maxOperationRetryTime=u}_getAuthToken(){var u=this;return(0,je.Z)(function*(){if(u._overrideAuthToken)return u._overrideAuthToken;const s=u._authProvider.getImmediate({optional:!0});if(s){const f=yield s.getToken();if(null!==f)return f.accessToken}return null})()}_getAppCheckToken(){var u=this;return(0,je.Z)(function*(){const s=u._appCheckProvider.getImmediate({optional:!0});return s?(yield s.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(u=>u.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(u){return new uf(this,u)}_makeRequest(u,s,f,E){if(this._deleted)return new gy(fy());{const O=function(a,u,s,f,E,O){const re=function(a){const u=encodeURIComponent;let s="?";for(const f in a)a.hasOwnProperty(f)&&(s=s+(u(f)+"=")+u(a[f])+"&");return s=s.slice(0,-1),s}(a.urlParams),Ee=a.url+re,ke=Object.assign({},a.headers);return function(a,u){u&&(a["X-Firebase-GMPID"]=u)}(ke,u),function(a,u){null!==u&&u.length>0&&(a.Authorization="Firebase "+u)}(ke,s),function(a,u){a["X-Firebase-Storage-Version"]="webjs/"+(null!=u?u:"AppManager")}(ke,O),function(a,u){null!==u&&(a["X-Firebase-AppCheck"]=u)}(ke,f),new Ev(Ee,a.method,ke,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,E)}(u,this._appId,f,E,s,this._firebaseVersion);return this._requests.add(O),O.getPromise().then(()=>this._requests.delete(O),()=>this._requests.delete(O)),O}}makeRequestWithTokens(u,s){var f=this;return(0,je.Z)(function*(){const[E,O]=yield Promise.all([f._getAuthToken(),f._getAppCheckToken()]);return f._makeRequest(u,s,E,O).getPromise()})()}}const $y="@firebase/storage",Hy="storage";function r0(a=(0,lt.getApp)(),u){return a=(0,Mt.m9)(a),(0,lt._getProvider)(a,Hy).getImmediate({identifier:u})}(0,lt._registerComponent)(new Wt.wA(Hy,function(a,{instanceIdentifier:u}){const s=a.getProvider("app").getImmediate(),f=a.getProvider("auth-internal"),E=a.getProvider("app-check-internal");return new qg(s,f,E,u,lt.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,lt.registerVersion)($y,"0.9.0",""),(0,lt.registerVersion)($y,"0.9.0","esm2017");class Zg{constructor(u){return u}}const T_="storage",Ep=new _.OlP("angularfire2.storage-instances");function a0(a){return(u,s)=>{const f=u.runOutsideAngular(()=>a(s));return new Zg(f)}}const l0={provide:class{constructor(){return(0,Os.vb)(T_)}},deps:[[new _.FiY,Ep]]},I_={provide:Zg,useFactory:function(a,u){const s=(0,Os.JM)(T_,a,u);return s&&new Zg(s)},deps:[[new _.FiY,Ep],Ju.Ot]};let S_=(()=>{class a{constructor(){(0,Tc.KN)("angularfire",Os.q4.full,"gcs")}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a}),a.\u0275inj=_.cJS({providers:[I_,l0]}),a})();function Zy(a,...u){return{ngModule:S_,providers:[{provide:Ep,useFactory:a0(a),multi:!0,deps:[_.R0b,_.zs3,Os.HU,Ju.z6,[new _.FiY,Sc],[new _.FiY,nh.nm],...u]}]}}const c0=(0,Os.u3)(r0,!0);let cf=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=_.oAB({type:a,bootstrap:[zf]}),a.\u0275inj=_.cJS({providers:[],imports:[[Gn,Jn,gm,Qu.hO.initializeApp(hs_firebase,"Quizzard"),(0,Ju.hX)(()=>(0,Ju.ZF)(hs_firebase)),cg(()=>Jf()),Fi(()=>Xu()),Xh(()=>Lg()),Zy(()=>c0()),fd.forChild(),Rn.ww,Om.JS]]}),a})();(0,_.G48)(),Xr().bootstrapModule(cf).catch(a=>console.error(a))},5867:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Mq:()=>T.getApp,C6:()=>T.getApps,ZF:()=>T.initializeApp,KN:()=>T.registerVersion});var T=H(9681);(0,T.registerVersion)("firebase","9.6.1","app")},8937:(Zt,Ye,H)=>{"use strict";H.d(Ye,{_O:()=>T.M,GH:()=>T.Q,hJ:()=>T.N,v0:()=>T.n});var T=H(662);H(2090),H(9681),H(1877),H(4859)},127:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Z:()=>T.Z});var T=H(3942);T.Z.registerVersion("firebase","9.6.1","app-compat")},5881:(Zt,Ye,H)=>{"use strict";H.r(Ye);var T=H(5861),_=H(3942),Y=H(662),K=H(2090),Be=(H(9681),H(1877),H(4859));function de(){return window}function ue(){return(ue=(0,T.Z)(function*(Ve,be,Ie){var ht;const{BuildInfo:Pt}=de();(0,Y.ap)(be.sessionId,"AuthEvent did not contain a session ID");const Rn=yield Ae(be.sessionId),Bn={};return(0,Y.aq)()?Bn.ibi=Pt.packageName:(0,Y.ar)()?Bn.apn=Pt.packageName:(0,Y.as)(Ve,"operation-not-supported-in-this-environment"),Pt.displayName&&(Bn.appDisplayName=Pt.displayName),Bn.sessionId=Rn,(0,Y.at)(Ve,Ie,be.type,void 0,null!==(ht=be.eventId)&&void 0!==ht?ht:void 0,Bn)})).apply(this,arguments)}function tt(){return(tt=(0,T.Z)(function*(Ve){const{BuildInfo:be}=de(),Ie={};(0,Y.aq)()?Ie.iosBundleId=be.packageName:(0,Y.ar)()?Ie.androidPackageName=be.packageName:(0,Y.as)(Ve,"operation-not-supported-in-this-environment"),yield(0,Y.au)(Ve,Ie)})).apply(this,arguments)}function dt(){return(dt=(0,T.Z)(function*(Ve,be,Ie){const{cordova:ht}=de();let Pt=()=>{};try{yield new Promise((Rn,Bn)=>{let On=null;function Jn(){var wn;Rn();const hr=null===(wn=ht.plugins.browsertab)||void 0===wn?void 0:wn.close;"function"==typeof hr&&hr(),"function"==typeof(null==Ie?void 0:Ie.close)&&Ie.close()}function mr(){On||(On=window.setTimeout(()=>{Bn((0,Y.av)(Ve,"redirect-cancelled-by-user"))},2e3))}function Or(){"visible"===(null==document?void 0:document.visibilityState)&&mr()}be.addPassiveListener(Jn),document.addEventListener("resume",mr,!1),(0,Y.ar)()&&document.addEventListener("visibilitychange",Or,!1),Pt=()=>{be.removePassiveListener(Jn),document.removeEventListener("resume",mr,!1),document.removeEventListener("visibilitychange",Or,!1),On&&window.clearTimeout(On)}})}finally{Pt()}})).apply(this,arguments)}function Ae(Ve){return Le.apply(this,arguments)}function Le(){return(Le=(0,T.Z)(function*(Ve){const be=Pe(Ve),Ie=yield crypto.subtle.digest("SHA-256",be);return Array.from(new Uint8Array(Ie)).map(Pt=>Pt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pe(Ve){if((0,Y.ap)(/[0-9a-zA-Z]+/.test(Ve),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Ve);const be=new ArrayBuffer(Ve.length),Ie=new Uint8Array(be);for(let ht=0;ht<Ve.length;ht++)Ie[ht]=Ve.charCodeAt(ht);return Ie}class _t extends Y.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(be=>{this.resolveInialized=be})}addPassiveListener(be){this.passiveListeners.add(be)}removePassiveListener(be){this.passiveListeners.delete(be)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(be){return this.resolveInialized(),this.passiveListeners.forEach(Ie=>Ie(be)),super.onEvent(be)}initialized(){var be=this;return(0,T.Z)(function*(){yield be.initPromise})()}}function Ct(Ve){return zt.apply(this,arguments)}function zt(){return(zt=(0,T.Z)(function*(Ve){const be=yield Qe()._get(rt(Ve));return be&&(yield Qe()._remove(rt(Ve))),be})).apply(this,arguments)}function et(){const Ve=[],be="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Ie=0;Ie<20;Ie++){const ht=Math.floor(Math.random()*be.length);Ve.push(be.charAt(ht))}return Ve.join("")}function Qe(){return(0,Y.ax)(Y.b)}function rt(Ve){return(0,Y.ay)("authEvent",Ve.config.apiKey,Ve.name)}function nn(Ve){if(!(null==Ve?void 0:Ve.includes("?")))return{};const[be,...Ie]=Ve.split("?");return(0,K.zd)(Ie.join("?"))}function It(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,Y.av)("no-auth-event")}}function Ln(){var Ve;return(null===(Ve=null==self?void 0:self.location)||void 0===Ve?void 0:Ve.protocol)||null}function Zn(Ve=(0,K.z$)()){return!("file:"!==Ln()&&"ionic:"!==Ln()||!Ve.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xr(){try{const Ve=self.localStorage,be=Y.aG();if(Ve)return Ve.setItem(be,"1"),Ve.removeItem(be),!function(Ve=(0,K.z$)()){return(0,K.w1)()&&11===(null==document?void 0:document.documentMode)||function(Ve=(0,K.z$)()){return/Edge\/\d+/.test(Ve)}(Ve)}()||(0,K.hl)()}catch(Ve){return wt()&&(0,K.hl)()}return!1}function wt(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return("http:"===Ln()||"https:"===Ln()||(0,K.ru)()||Zn())&&!((0,K.b$)()||(0,K.UG)())&&Xr()&&!wt()}function Mr(){return Zn()&&"undefined"!=typeof document}function Lt(){return(Lt=(0,T.Z)(function*(){return!!Mr()&&new Promise(Ve=>{const be=setTimeout(()=>{Ve(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(be),Ve(!0)})})})).apply(this,arguments)}const jt={LOCAL:"local",NONE:"none",SESSION:"session"},wr=Y.aw,Ar="persistence";function _n(Ve){return bn.apply(this,arguments)}function bn(){return(bn=(0,T.Z)(function*(Ve){yield Ve._initializationPromise;const be=Dr(),Ie=Y.ay(Ar,Ve.config.apiKey,Ve.name);(null==be?void 0:be.sessionStorage)&&be.sessionStorage.setItem(Ie,Ve._getPersistence())})).apply(this,arguments)}function Dr(){return"undefined"!=typeof window?window:null}const An=Y.aw;class Ht{constructor(){this.browserResolver=Y.ax(Y.k),this.cordovaResolver=Y.ax(class{constructor(){this._redirectPersistence=Y.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Y.aA}_initialize(be){var Ie=this;return(0,T.Z)(function*(){const ht=be._key();let Pt=Ie.eventManagers.get(ht);return Pt||(Pt=new _t(be),Ie.eventManagers.set(ht,Pt),Ie.attachCallbackListeners(be,Pt)),Pt})()}_openPopup(be){(0,Y.as)(be,"operation-not-supported-in-this-environment")}_openRedirect(be,Ie,ht,Pt){var Rn=this;return(0,T.Z)(function*(){!function(Ve){var be,Ie,ht,Pt,Rn,Bn,On,Jn,mr,Or;const wn=de();(0,Y.aw)("function"==typeof(null===(be=null==wn?void 0:wn.universalLinks)||void 0===be?void 0:be.subscribe),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,Y.aw)(void 0!==(null===(Ie=null==wn?void 0:wn.BuildInfo)||void 0===Ie?void 0:Ie.packageName),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,Y.aw)("function"==typeof(null===(Rn=null===(Pt=null===(ht=null==wn?void 0:wn.cordova)||void 0===ht?void 0:ht.plugins)||void 0===Pt?void 0:Pt.browsertab)||void 0===Rn?void 0:Rn.openUrl),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Y.aw)("function"==typeof(null===(Jn=null===(On=null===(Bn=null==wn?void 0:wn.cordova)||void 0===Bn?void 0:Bn.plugins)||void 0===On?void 0:On.browsertab)||void 0===Jn?void 0:Jn.isAvailable),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,Y.aw)("function"==typeof(null===(Or=null===(mr=null==wn?void 0:wn.cordova)||void 0===mr?void 0:mr.InAppBrowser)||void 0===Or?void 0:Or.open),Ve,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(be);const Bn=yield Rn._initialize(be);yield Bn.initialized(),Bn.resetRedirect(),(0,Y.aB)(),yield Rn._originValidation(be);const On=function(Ve,be,Ie=null){return{type:be,eventId:Ie,urlResponse:null,sessionId:et(),postBody:null,tenantId:Ve.tenantId,error:(0,Y.av)(Ve,"no-auth-event")}}(be,ht,Pt);yield function(Ve,be){return Qe()._set(rt(Ve),be)}(be,On);const Jn=yield function(Ve,be,Ie){return ue.apply(this,arguments)}(be,On,Ie),mr=yield function(Ve){const{cordova:be}=de();return new Promise(Ie=>{be.plugins.browsertab.isAvailable(ht=>{let Pt=null;ht?be.plugins.browsertab.openUrl(Ve):Pt=be.InAppBrowser.open(Ve,(0,Y.ao)()?"_blank":"_system","location=yes"),Ie(Pt)})})}(Jn);return function(Ve,be,Ie){return dt.apply(this,arguments)}(be,Bn,mr)})()}_isIframeWebStorageSupported(be,Ie){throw new Error("Method not implemented.")}_originValidation(be){const Ie=be._key();return this.originValidationPromises[Ie]||(this.originValidationPromises[Ie]=function(Ve){return tt.apply(this,arguments)}(be)),this.originValidationPromises[Ie]}attachCallbackListeners(be,Ie){const{universalLinks:ht,handleOpenURL:Pt,BuildInfo:Rn}=de(),Bn=setTimeout((0,T.Z)(function*(){yield Ct(be),Ie.onEvent(It())}),500),On=function(){var Or=(0,T.Z)(function*(wn){clearTimeout(Bn);const hr=yield Ct(be);let Mi=null;hr&&(null==wn?void 0:wn.url)&&(Mi=function(Ve,be){var Ie,ht;const Pt=function(Ve){const be=nn(Ve),Ie=be.link?decodeURIComponent(be.link):void 0,ht=nn(Ie).link,Pt=be.deep_link_id?decodeURIComponent(be.deep_link_id):void 0;return nn(Pt).link||Pt||ht||Ie||Ve}(be);if(Pt.includes("/__/auth/callback")){const Rn=nn(Pt),Bn=Rn.firebaseError?function(Ve){try{return JSON.parse(Ve)}catch(be){return null}}(decodeURIComponent(Rn.firebaseError)):null,On=null===(ht=null===(Ie=null==Bn?void 0:Bn.code)||void 0===Ie?void 0:Ie.split("auth/"))||void 0===ht?void 0:ht[1],Jn=On?(0,Y.av)(On):null;return Jn?{type:Ve.type,eventId:Ve.eventId,tenantId:Ve.tenantId,error:Jn,urlResponse:null,sessionId:null,postBody:null}:{type:Ve.type,eventId:Ve.eventId,tenantId:Ve.tenantId,sessionId:Ve.sessionId,urlResponse:Pt,postBody:null}}return null}(hr,wn.url)),Ie.onEvent(Mi||It())});return function(hr){return Or.apply(this,arguments)}}();void 0!==ht&&"function"==typeof ht.subscribe&&ht.subscribe(null,On);const Jn=Pt,mr=`${Rn.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var Or=(0,T.Z)(function*(wn){if(wn.toLowerCase().startsWith(mr)&&On({url:wn}),"function"==typeof Jn)try{Jn(wn)}catch(hr){console.error(hr)}});return function(wn){return Or.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Y.a,this._completeRedirectFn=Y.aA}_initialize(be){var Ie=this;return(0,T.Z)(function*(){return yield Ie.selectUnderlyingResolver(),Ie.assertedUnderlyingResolver._initialize(be)})()}_openPopup(be,Ie,ht,Pt){var Rn=this;return(0,T.Z)(function*(){return yield Rn.selectUnderlyingResolver(),Rn.assertedUnderlyingResolver._openPopup(be,Ie,ht,Pt)})()}_openRedirect(be,Ie,ht,Pt){var Rn=this;return(0,T.Z)(function*(){return yield Rn.selectUnderlyingResolver(),Rn.assertedUnderlyingResolver._openRedirect(be,Ie,ht,Pt)})()}_isIframeWebStorageSupported(be,Ie){this.assertedUnderlyingResolver._isIframeWebStorageSupported(be,Ie)}_originValidation(be){return this.assertedUnderlyingResolver._originValidation(be)}get _shouldInitProactively(){return Mr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return An(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var be=this;return(0,T.Z)(function*(){if(be.underlyingResolver)return;const Ie=yield function(){return Lt.apply(this,arguments)}();be.underlyingResolver=Ie?be.cordovaResolver:be.browserResolver})()}}function ln(Ve){return Ve.unwrap()}function dr(Ve){return ye(Ve)}function ye(Ve){const{_tokenResponse:be}=Ve instanceof K.ZR?Ve.customData:Ve;if(!be)return null;if(!(Ve instanceof K.ZR)&&"temporaryProof"in be&&"phoneNumber"in be)return Y.P.credentialFromResult(Ve);const Ie=be.providerId;if(!Ie||Ie===Y.o.PASSWORD)return null;let ht;switch(Ie){case Y.o.GOOGLE:ht=Y.N;break;case Y.o.FACEBOOK:ht=Y.M;break;case Y.o.GITHUB:ht=Y.Q;break;case Y.o.TWITTER:ht=Y.V;break;default:const{oauthIdToken:Pt,oauthAccessToken:Rn,oauthTokenSecret:Bn,pendingToken:On,nonce:Jn}=be;return Rn||Bn||Pt||On?On?Ie.startsWith("saml.")?Y.aJ._create(Ie,On):Y.I._fromParams({providerId:Ie,signInMethod:Ie,pendingToken:On,idToken:Pt,accessToken:Rn}):new Y.T(Ie).credential({idToken:Pt,accessToken:Rn,rawNonce:Jn}):null}return Ve instanceof K.ZR?ht.credentialFromError(Ve):ht.credentialFromResult(Ve)}function Se(Ve,be){return be.catch(Ie=>{throw Ie instanceof K.ZR&&function(Ve,be){var Ie;const ht=null===(Ie=be.customData)||void 0===Ie?void 0:Ie._tokenResponse;if("auth/multi-factor-auth-required"===be.code)be.resolver=new oe(Ve,Y.am(Ve,be));else if(ht){const Pt=ye(be),Rn=be;Pt&&(Rn.credential=Pt,Rn.tenantId=ht.tenantId||void 0,Rn.email=ht.email||void 0,Rn.phoneNumber=ht.phoneNumber||void 0)}}(Ve,Ie),Ie}).then(Ie=>{const Pt=Ie.user;return{operationType:Ie.operationType,credential:dr(Ie),additionalUserInfo:Y.ak(Ie),user:_e.getOrCreate(Pt)}})}function yt(Ve,be){return ie.apply(this,arguments)}function ie(){return(ie=(0,T.Z)(function*(Ve,be){const Ie=yield be;return{verificationId:Ie.verificationId,confirm:ht=>Se(Ve,Ie.confirm(ht))}})).apply(this,arguments)}class oe{constructor(be,Ie){this.resolver=Ie,this.auth=be.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(be){return Se(ln(this.auth),this.resolver.resolveSignIn(be))}}class _e{constructor(be){this._delegate=be,this.multiFactor=Y.an(be)}static getOrCreate(be){return _e.USER_MAP.has(be)||_e.USER_MAP.set(be,new _e(be)),_e.USER_MAP.get(be)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(be){return this._delegate.getIdTokenResult(be)}getIdToken(be){return this._delegate.getIdToken(be)}linkAndRetrieveDataWithCredential(be){return this.linkWithCredential(be)}linkWithCredential(be){var Ie=this;return(0,T.Z)(function*(){return Se(Ie.auth,Y.Y(Ie._delegate,be))})()}linkWithPhoneNumber(be,Ie){var ht=this;return(0,T.Z)(function*(){return yt(ht.auth,Y.l(ht._delegate,be,Ie))})()}linkWithPopup(be){var Ie=this;return(0,T.Z)(function*(){return Se(Ie.auth,Y.d(Ie._delegate,be,Ht))})()}linkWithRedirect(be){var Ie=this;return(0,T.Z)(function*(){return yield _n(Y.aC(Ie.auth)),Y.g(Ie._delegate,be,Ht)})()}reauthenticateAndRetrieveDataWithCredential(be){return this.reauthenticateWithCredential(be)}reauthenticateWithCredential(be){var Ie=this;return(0,T.Z)(function*(){return Se(Ie.auth,Y.Z(Ie._delegate,be))})()}reauthenticateWithPhoneNumber(be,Ie){return yt(this.auth,Y.r(this._delegate,be,Ie))}reauthenticateWithPopup(be){return Se(this.auth,Y.e(this._delegate,be,Ht))}reauthenticateWithRedirect(be){var Ie=this;return(0,T.Z)(function*(){return yield _n(Y.aC(Ie.auth)),Y.h(Ie._delegate,be,Ht)})()}sendEmailVerification(be){return Y.aa(this._delegate,be)}unlink(be){var Ie=this;return(0,T.Z)(function*(){return yield Y.aj(Ie._delegate,be),Ie})()}updateEmail(be){return Y.af(this._delegate,be)}updatePassword(be){return Y.ag(this._delegate,be)}updatePhoneNumber(be){return Y.u(this._delegate,be)}updateProfile(be){return Y.ae(this._delegate,be)}verifyBeforeUpdateEmail(be,Ie){return Y.ab(this._delegate,be,Ie)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_e.USER_MAP=new WeakMap;const Ze=Y.aw;let Ue=(()=>{class Ve{constructor(Ie,ht){if(this.app=Ie,ht.isInitialized())return this._delegate=ht.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Pt}=Ie.options;Ze(Pt,"invalid-api-key",{appName:Ie.name});let Rn=[Y.K];if("undefined"!=typeof window){Rn=function(Ve,be){const Ie=Dr();if(!(null==Ie?void 0:Ie.sessionStorage))return[];const ht=Y.ay(Ar,Ve,be);switch(Ie.sessionStorage.getItem(ht)){case jt.NONE:return[Y.K];case jt.LOCAL:return[Y.i,Y.a];case jt.SESSION:return[Y.a];default:return[]}}(Pt,Ie.name);for(const On of[Y.i,Y.b,Y.a])Rn.includes(On)||Rn.push(On)}Ze(Pt,"invalid-api-key",{appName:Ie.name});const Bn="undefined"!=typeof window?Ht:void 0;this._delegate=ht.initialize({options:{persistence:Rn,popupRedirectResolver:Bn}}),this._delegate._updateErrorMap(Y.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?_e.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Ie){this._delegate.languageCode=Ie}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Ie){this._delegate.tenantId=Ie}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Ie,ht){Y.E(this._delegate,Ie,ht)}applyActionCode(Ie){return Y.a1(this._delegate,Ie)}checkActionCode(Ie){return Y.a2(this._delegate,Ie)}confirmPasswordReset(Ie,ht){return Y.a0(this._delegate,Ie,ht)}createUserWithEmailAndPassword(Ie,ht){var Pt=this;return(0,T.Z)(function*(){return Se(Pt._delegate,Y.a4(Pt._delegate,Ie,ht))})()}fetchProvidersForEmail(Ie){return this.fetchSignInMethodsForEmail(Ie)}fetchSignInMethodsForEmail(Ie){return Y.a9(this._delegate,Ie)}isSignInWithEmailLink(Ie){return Y.a7(this._delegate,Ie)}getRedirectResult(){var Ie=this;return(0,T.Z)(function*(){Ze(Gn(),Ie._delegate,"operation-not-supported-in-this-environment");const ht=yield Y.j(Ie._delegate,Ht);return ht?Se(Ie._delegate,Promise.resolve(ht)):{credential:null,user:null}})()}addFrameworkForLogging(Ie){!function(Ve,be){(0,Y.aC)(Ve)._logFramework(be)}(this._delegate,Ie)}onAuthStateChanged(Ie,ht,Pt){const{next:Rn,error:Bn,complete:On}=Gt(Ie,ht,Pt);return this._delegate.onAuthStateChanged(Rn,Bn,On)}onIdTokenChanged(Ie,ht,Pt){const{next:Rn,error:Bn,complete:On}=Gt(Ie,ht,Pt);return this._delegate.onIdTokenChanged(Rn,Bn,On)}sendSignInLinkToEmail(Ie,ht){return Y.a6(this._delegate,Ie,ht)}sendPasswordResetEmail(Ie,ht){return Y.$(this._delegate,Ie,ht||void 0)}setPersistence(Ie){var ht=this;return(0,T.Z)(function*(){let Pt;switch(function(Ve,be){wr(Object.values(jt).includes(be),Ve,"invalid-persistence-type"),(0,K.b$)()?wr(be!==jt.SESSION,Ve,"unsupported-persistence-type"):(0,K.UG)()?wr(be===jt.NONE,Ve,"unsupported-persistence-type"):wt()?wr(be===jt.NONE||be===jt.LOCAL&&(0,K.hl)(),Ve,"unsupported-persistence-type"):wr(be===jt.NONE||Xr(),Ve,"unsupported-persistence-type")}(ht._delegate,Ie),Ie){case jt.SESSION:Pt=Y.a;break;case jt.LOCAL:Pt=(yield Y.ax(Y.i)._isAvailable())?Y.i:Y.b;break;case jt.NONE:Pt=Y.K;break;default:return Y.as("argument-error",{appName:ht._delegate.name})}return ht._delegate.setPersistence(Pt)})()}signInAndRetrieveDataWithCredential(Ie){return this.signInWithCredential(Ie)}signInAnonymously(){return Se(this._delegate,Y.W(this._delegate))}signInWithCredential(Ie){return Se(this._delegate,Y.X(this._delegate,Ie))}signInWithCustomToken(Ie){return Se(this._delegate,Y._(this._delegate,Ie))}signInWithEmailAndPassword(Ie,ht){return Se(this._delegate,Y.a5(this._delegate,Ie,ht))}signInWithEmailLink(Ie,ht){return Se(this._delegate,Y.a8(this._delegate,Ie,ht))}signInWithPhoneNumber(Ie,ht){return yt(this._delegate,Y.s(this._delegate,Ie,ht))}signInWithPopup(Ie){var ht=this;return(0,T.Z)(function*(){return Ze(Gn(),ht._delegate,"operation-not-supported-in-this-environment"),Se(ht._delegate,Y.c(ht._delegate,Ie,Ht))})()}signInWithRedirect(Ie){var ht=this;return(0,T.Z)(function*(){return Ze(Gn(),ht._delegate,"operation-not-supported-in-this-environment"),yield _n(ht._delegate),Y.f(ht._delegate,Ie,Ht)})()}updateCurrentUser(Ie){return this._delegate.updateCurrentUser(Ie)}verifyPasswordResetCode(Ie){return Y.a3(this._delegate,Ie)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ve.Persistence=jt,Ve})();function Gt(Ve,be,Ie){let ht=Ve;"function"!=typeof Ve&&({next:ht,error:be,complete:Ie}=Ve);const Pt=ht;return{next:Bn=>Pt(Bn&&_e.getOrCreate(Bn)),error:be,complete:Ie}}class rn{constructor(){this.providerId="phone",this._delegate=new Y.P(ln(_.Z.auth()))}static credential(be,Ie){return Y.P.credential(be,Ie)}verifyPhoneNumber(be,Ie){return this._delegate.verifyPhoneNumber(be,Ie)}unwrap(){return this._delegate}}rn.PHONE_SIGN_IN_METHOD=Y.P.PHONE_SIGN_IN_METHOD,rn.PROVIDER_ID=Y.P.PROVIDER_ID;const or=Y.aw;var Ve;(Ve=_.Z).INTERNAL.registerComponent(new Be.wA("auth-compat",be=>{const Ie=be.getProvider("app-compat").getImmediate(),ht=be.getProvider("auth");return new Ue(Ie,ht)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y.A.EMAIL_SIGNIN,PASSWORD_RESET:Y.A.PASSWORD_RESET,RECOVER_EMAIL:Y.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y.A.VERIFY_EMAIL}},EmailAuthProvider:Y.L,FacebookAuthProvider:Y.M,GithubAuthProvider:Y.Q,GoogleAuthProvider:Y.N,OAuthProvider:Y.T,SAMLAuthProvider:Y.U,PhoneAuthProvider:rn,PhoneMultiFactorGenerator:Y.m,RecaptchaVerifier:class{constructor(be,Ie,ht=_.Z.app()){var Pt;or(null===(Pt=ht.options)||void 0===Pt?void 0:Pt.apiKey,"invalid-api-key",{appName:ht.name}),this._delegate=new Y.R(be,Ie,ht.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:Y.V,Auth:Ue,AuthCredential:Y.G,Error:K.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ve.registerVersion("@firebase/auth-compat","0.2.4")},2940:function(Zt,Ye){!function(H){"use strict";function T(ze){return Array.prototype.slice.call(ze)}function _(ze){return new Promise(function(Ae,Le){ze.onsuccess=function(){Ae(ze.result)},ze.onerror=function(){Le(ze.error)}})}function Y(ze,Ae,Le){var Pe,me=new Promise(function(_t,pt){_(Pe=ze[Ae].apply(ze,Le)).then(_t,pt)});return me.request=Pe,me}function K(ze,Ae,Le){var Pe=Y(ze,Ae,Le);return Pe.then(function(me){if(me)return new le(me,Pe.request)})}function ge(ze,Ae,Le){Le.forEach(function(Pe){Object.defineProperty(ze.prototype,Pe,{get:function(){return this[Ae][Pe]},set:function(me){this[Ae][Pe]=me}})})}function xe(ze,Ae,Le,Pe){Pe.forEach(function(me){me in Le.prototype&&(ze.prototype[me]=function(){return Y(this[Ae],me,arguments)})})}function Be(ze,Ae,Le,Pe){Pe.forEach(function(me){me in Le.prototype&&(ze.prototype[me]=function(){return this[Ae][me].apply(this[Ae],arguments)})})}function de(ze,Ae,Le,Pe){Pe.forEach(function(me){me in Le.prototype&&(ze.prototype[me]=function(){return K(this[Ae],me,arguments)})})}function $e(ze){this._index=ze}function le(ze,Ae){this._cursor=ze,this._request=Ae}function ue(ze){this._store=ze}function Oe(ze){this._tx=ze,this.complete=new Promise(function(Ae,Le){ze.oncomplete=function(){Ae()},ze.onerror=function(){Le(ze.error)},ze.onabort=function(){Le(ze.error)}})}function tt(ze,Ae,Le){this._db=ze,this.oldVersion=Ae,this.transaction=new Oe(Le)}function Xe(ze){this._db=ze}ge($e,"_index",["name","keyPath","multiEntry","unique"]),xe($e,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),de($e,"_index",IDBIndex,["openCursor","openKeyCursor"]),ge(le,"_cursor",["direction","key","primaryKey","value"]),xe(le,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ze){ze in IDBCursor.prototype&&(le.prototype[ze]=function(){var Ae=this,Le=arguments;return Promise.resolve().then(function(){return Ae._cursor[ze].apply(Ae._cursor,Le),_(Ae._request).then(function(Pe){if(Pe)return new le(Pe,Ae._request)})})})}),ue.prototype.createIndex=function(){return new $e(this._store.createIndex.apply(this._store,arguments))},ue.prototype.index=function(){return new $e(this._store.index.apply(this._store,arguments))},ge(ue,"_store",["name","keyPath","indexNames","autoIncrement"]),xe(ue,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),de(ue,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Be(ue,"_store",IDBObjectStore,["deleteIndex"]),Oe.prototype.objectStore=function(){return new ue(this._tx.objectStore.apply(this._tx,arguments))},ge(Oe,"_tx",["objectStoreNames","mode"]),Be(Oe,"_tx",IDBTransaction,["abort"]),tt.prototype.createObjectStore=function(){return new ue(this._db.createObjectStore.apply(this._db,arguments))},ge(tt,"_db",["name","version","objectStoreNames"]),Be(tt,"_db",IDBDatabase,["deleteObjectStore","close"]),Xe.prototype.transaction=function(){return new Oe(this._db.transaction.apply(this._db,arguments))},ge(Xe,"_db",["name","version","objectStoreNames"]),Be(Xe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ze){[ue,$e].forEach(function(Ae){ze in Ae.prototype&&(Ae.prototype[ze.replace("open","iterate")]=function(){var Le=T(arguments),Pe=Le[Le.length-1],me=this._store||this._index,_t=me[ze].apply(me,Le.slice(0,-1));_t.onsuccess=function(){Pe(_t.result)}})})}),[$e,ue].forEach(function(ze){ze.prototype.getAll||(ze.prototype.getAll=function(Ae,Le){var Pe=this,me=[];return new Promise(function(_t){Pe.iterateCursor(Ae,function(pt){pt?(me.push(pt.value),void 0===Le||me.length!=Le?pt.continue():_t(me)):_t(me)})})})}),H.openDb=function(ze,Ae,Le){var Pe=Y(indexedDB,"open",[ze,Ae]),me=Pe.request;return me&&(me.onupgradeneeded=function(_t){Le&&Le(new tt(me.result,_t.oldVersion,me.transaction))}),Pe.then(function(_t){return new Xe(_t)})},H.deleteDb=function(ze){return Y(indexedDB,"deleteDatabase",[ze])},Object.defineProperty(H,"__esModule",{value:!0})}(Ye)},1135:(Zt,Ye,H)=>{"use strict";H.d(Ye,{X:()=>_});var T=H(7579);class _ extends T.x{constructor(K){super(),this._value=K}get value(){return this.getValue()}_subscribe(K){const ge=super._subscribe(K);return!ge.closed&&K.next(this._value),ge}getValue(){const{hasError:K,thrownError:ge,_value:xe}=this;if(K)throw ge;return this._throwIfClosed(),xe}next(K){super.next(this._value=K)}}},8306:(Zt,Ye,H)=>{"use strict";H.d(Ye,{y:()=>le});var T=H(930),_=H(727),Y=H(8822),K=H(4671);var Be=H(2416),de=H(576),$e=H(2806);let le=(()=>{class Xe{constructor(dt){dt&&(this._subscribe=dt)}lift(dt){const ze=new Xe;return ze.source=this,ze.operator=dt,ze}subscribe(dt,ze,Ae){const Le=function(Xe){return Xe&&Xe instanceof T.Lv||function(Xe){return Xe&&(0,de.m)(Xe.next)&&(0,de.m)(Xe.error)&&(0,de.m)(Xe.complete)}(Xe)&&(0,_.Nn)(Xe)}(dt)?dt:new T.Hp(dt,ze,Ae);return(0,$e.x)(()=>{const{operator:Pe,source:me}=this;Le.add(Pe?Pe.call(Le,me):me?this._subscribe(Le):this._trySubscribe(Le))}),Le}_trySubscribe(dt){try{return this._subscribe(dt)}catch(ze){dt.error(ze)}}forEach(dt,ze){return new(ze=ue(ze))((Ae,Le)=>{let Pe;Pe=this.subscribe(me=>{try{dt(me)}catch(_t){Le(_t),null==Pe||Pe.unsubscribe()}},Le,Ae)})}_subscribe(dt){var ze;return null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(dt)}[Y.L](){return this}pipe(...dt){return function(Xe){return 0===Xe.length?K.y:1===Xe.length?Xe[0]:function(dt){return Xe.reduce((ze,Ae)=>Ae(ze),dt)}}(dt)(this)}toPromise(dt){return new(dt=ue(dt))((ze,Ae)=>{let Le;this.subscribe(Pe=>Le=Pe,Pe=>Ae(Pe),()=>ze(Le))})}}return Xe.create=ut=>new Xe(ut),Xe})();function ue(Xe){var ut;return null!==(ut=null!=Xe?Xe:Be.v.Promise)&&void 0!==ut?ut:Promise}},7579:(Zt,Ye,H)=>{"use strict";H.d(Ye,{x:()=>Be});var T=H(8306),_=H(727);const K=(0,H(3888).d)($e=>function(){$e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=H(8737),xe=H(2806);let Be=(()=>{class $e extends T.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const Oe=new de(this,this);return Oe.operator=ue,Oe}_throwIfClosed(){if(this.closed)throw new K}next(ue){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Oe=this.observers.slice();for(const tt of Oe)tt.next(ue)}})}error(ue){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().error(ue)}})}complete(){(0,xe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:Oe,isStopped:tt,observers:Xe}=this;return Oe||tt?_.Lc:(Xe.push(ue),new _.w0(()=>(0,ge.P)(Xe,ue)))}_checkFinalizedStatuses(ue){const{hasError:Oe,thrownError:tt,isStopped:Xe}=this;Oe?ue.error(tt):Xe&&ue.complete()}asObservable(){const ue=new T.y;return ue.source=this,ue}}return $e.create=(le,ue)=>new de(le,ue),$e})();class de extends Be{constructor(le,ue){super(),this.destination=le,this.source=ue}next(le){var ue,Oe;null===(Oe=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===Oe||Oe.call(ue,le)}error(le){var ue,Oe;null===(Oe=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===Oe||Oe.call(ue,le)}complete(){var le,ue;null===(ue=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===ue||ue.call(le)}_subscribe(le){var ue,Oe;return null!==(Oe=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(le))&&void 0!==Oe?Oe:_.Lc}}},930:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Hp:()=>tt,Lv:()=>Oe});var T=H(576),_=H(727),Y=H(2416),K=H(7849),ge=H(5032);const xe=$e("C",void 0,void 0);function $e(Ae,Le,Pe){return{kind:Ae,value:Le,error:Pe}}var le=H(3410),ue=H(2806);class Oe extends _.w0{constructor(Le){super(),this.isStopped=!1,Le?(this.destination=Le,(0,_.Nn)(Le)&&Le.add(this)):this.destination=ze}static create(Le,Pe,me){return new tt(Le,Pe,me)}next(Le){this.isStopped?dt($e("N",Le,void 0),this):this._next(Le)}error(Le){this.isStopped?dt($e("E",void 0,Le),this):(this.isStopped=!0,this._error(Le))}complete(){this.isStopped?dt(xe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Le){this.destination.next(Le)}_error(Le){try{this.destination.error(Le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class tt extends Oe{constructor(Le,Pe,me){let _t;if(super(),(0,T.m)(Le))_t=Le;else if(Le){let pt;({next:_t,error:Pe,complete:me}=Le),this&&Y.v.useDeprecatedNextContext?(pt=Object.create(Le),pt.unsubscribe=()=>this.unsubscribe()):pt=Le,_t=null==_t?void 0:_t.bind(pt),Pe=null==Pe?void 0:Pe.bind(pt),me=null==me?void 0:me.bind(pt)}this.destination={next:_t?Xe(_t):ge.Z,error:Xe(null!=Pe?Pe:ut),complete:me?Xe(me):ge.Z}}}function Xe(Ae,Le){return(...Pe)=>{try{Ae(...Pe)}catch(me){Y.v.useDeprecatedSynchronousErrorHandling?(0,ue.O)(me):(0,K.h)(me)}}}function ut(Ae){throw Ae}function dt(Ae,Le){const{onStoppedNotification:Pe}=Y.v;Pe&&le.z.setTimeout(()=>Pe(Ae,Le))}const ze={closed:!0,next:ge.Z,error:ut,complete:ge.Z}},727:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Lc:()=>xe,w0:()=>ge,Nn:()=>Be});var T=H(576);const Y=(0,H(3888).d)($e=>function(ue){$e(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((Oe,tt)=>`${tt+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var K=H(8737);class ge{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const Xe of ue)Xe.remove(this);else ue.remove(this);const{initialTeardown:Oe}=this;if((0,T.m)(Oe))try{Oe()}catch(Xe){le=Xe instanceof Y?Xe.errors:[Xe]}const{_teardowns:tt}=this;if(tt){this._teardowns=null;for(const Xe of tt)try{de(Xe)}catch(ut){le=null!=le?le:[],ut instanceof Y?le=[...le,...ut.errors]:le.push(ut)}}if(le)throw new Y(le)}}add(le){var ue;if(le&&le!==this)if(this.closed)de(le);else{if(le instanceof ge){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._teardowns=null!==(ue=this._teardowns)&&void 0!==ue?ue:[]).push(le)}}_hasParent(le){const{_parentage:ue}=this;return ue===le||Array.isArray(ue)&&ue.includes(le)}_addParent(le){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(le),ue):ue?[ue,le]:le}_removeParent(le){const{_parentage:ue}=this;ue===le?this._parentage=null:Array.isArray(ue)&&(0,K.P)(ue,le)}remove(le){const{_teardowns:ue}=this;ue&&(0,K.P)(ue,le),le instanceof ge&&le._removeParent(this)}}ge.EMPTY=(()=>{const $e=new ge;return $e.closed=!0,$e})();const xe=ge.EMPTY;function Be($e){return $e instanceof ge||$e&&"closed"in $e&&(0,T.m)($e.remove)&&(0,T.m)($e.add)&&(0,T.m)($e.unsubscribe)}function de($e){(0,T.m)($e)?$e():$e.unsubscribe()}},2416:(Zt,Ye,H)=>{"use strict";H.d(Ye,{v:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Zt,Ye,H)=>{"use strict";H.d(Ye,{a:()=>le});var T=H(8306),_=H(4742),Y=H(8996),K=H(4671),ge=H(3268),xe=H(3269),Be=H(1810),de=H(5403),$e=H(9672);function le(...tt){const Xe=(0,xe.yG)(tt),ut=(0,xe.jO)(tt),{args:dt,keys:ze}=(0,_.D)(tt);if(0===dt.length)return(0,Y.D)([],Xe);const Ae=new T.y(function(tt,Xe,ut=K.y){return dt=>{Oe(Xe,()=>{const{length:ze}=tt,Ae=new Array(ze);let Le=ze,Pe=ze;for(let me=0;me<ze;me++)Oe(Xe,()=>{const _t=(0,Y.D)(tt[me],Xe);let pt=!1;_t.subscribe(new de.Q(dt,Ut=>{Ae[me]=Ut,pt||(pt=!0,Pe--),Pe||dt.next(ut(Ae.slice()))},()=>{--Le||dt.complete()}))},dt)},dt)}}(dt,Xe,ze?Le=>(0,Be.n)(ze,Le):K.y));return ut?Ae.pipe((0,ge.Z)(ut)):Ae}function Oe(tt,Xe,ut){tt?(0,$e.f)(ut,tt,Xe):Xe()}},7272:(Zt,Ye,H)=>{"use strict";H.d(Ye,{z:()=>ge});var T=H(8189),Y=H(3269),K=H(8996);function ge(...xe){return(0,T.J)(1)((0,K.D)(xe,(0,Y.yG)(xe)))}},515:(Zt,Ye,H)=>{"use strict";H.d(Ye,{E:()=>_});const _=new(H(8306).y)(ge=>ge.complete())},8996:(Zt,Ye,H)=>{"use strict";H.d(Ye,{D:()=>_t});var T=H(8421),_=H(5363),Y=H(9468),xe=H(8306),de=H(2202),$e=H(576),le=H(9672);function Oe(pt,Ut){if(!pt)throw new Error("Iterable cannot be null");return new xe.y(Ct=>{(0,le.f)(Ct,Ut,()=>{const zt=pt[Symbol.asyncIterator]();(0,le.f)(Ct,Ut,()=>{zt.next().then(qe=>{qe.done?Ct.complete():Ct.next(qe.value)})},0,!0)})})}var tt=H(3670),Xe=H(8239),ut=H(1144),dt=H(6495),ze=H(2206),Ae=H(4532),Le=H(3260);function _t(pt,Ut){return Ut?function(pt,Ut){if(null!=pt){if((0,tt.c)(pt))return function(pt,Ut){return(0,T.Xf)(pt).pipe((0,Y.R)(Ut),(0,_.Q)(Ut))}(pt,Ut);if((0,ut.z)(pt))return function(pt,Ut){return new xe.y(Ct=>{let zt=0;return Ut.schedule(function(){zt===pt.length?Ct.complete():(Ct.next(pt[zt++]),Ct.closed||this.schedule())})})}(pt,Ut);if((0,Xe.t)(pt))return function(pt,Ut){return(0,T.Xf)(pt).pipe((0,Y.R)(Ut),(0,_.Q)(Ut))}(pt,Ut);if((0,ze.D)(pt))return Oe(pt,Ut);if((0,dt.T)(pt))return function(pt,Ut){return new xe.y(Ct=>{let zt;return(0,le.f)(Ct,Ut,()=>{zt=pt[de.h](),(0,le.f)(Ct,Ut,()=>{let qe,et;try{({value:qe,done:et}=zt.next())}catch(Qe){return void Ct.error(Qe)}et?Ct.complete():Ct.next(qe)},0,!0)}),()=>(0,$e.m)(null==zt?void 0:zt.return)&&zt.return()})}(pt,Ut);if((0,Le.L)(pt))return function(pt,Ut){return Oe((0,Le.Q)(pt),Ut)}(pt,Ut)}throw(0,Ae.z)(pt)}(pt,Ut):(0,T.Xf)(pt)}},8421:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Xf:()=>tt});var T=H(5987),_=H(1144),Y=H(8239),K=H(8306),ge=H(3670),xe=H(2206),Be=H(4532),de=H(6495),$e=H(3260),le=H(576),ue=H(7849),Oe=H(8822);function tt(me){if(me instanceof K.y)return me;if(null!=me){if((0,ge.c)(me))return function(me){return new K.y(_t=>{const pt=me[Oe.L]();if((0,le.m)(pt.subscribe))return pt.subscribe(_t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,_.z)(me))return function(me){return new K.y(_t=>{for(let pt=0;pt<me.length&&!_t.closed;pt++)_t.next(me[pt]);_t.complete()})}(me);if((0,Y.t)(me))return function(me){return new K.y(_t=>{me.then(pt=>{_t.closed||(_t.next(pt),_t.complete())},pt=>_t.error(pt)).then(null,ue.h)})}(me);if((0,xe.D)(me))return Ae(me);if((0,de.T)(me))return function(me){return new K.y(_t=>{for(const pt of me)if(_t.next(pt),_t.closed)return;_t.complete()})}(me);if((0,$e.L)(me))return function(me){return Ae((0,$e.Q)(me))}(me)}throw(0,Be.z)(me)}function Ae(me){return new K.y(_t=>{(function(me,_t){var pt,Ut,Ct,zt;return(0,T.mG)(this,void 0,void 0,function*(){try{for(pt=(0,T.KL)(me);!(Ut=yield pt.next()).done;)if(_t.next(Ut.value),_t.closed)return}catch(qe){Ct={error:qe}}finally{try{Ut&&!Ut.done&&(zt=pt.return)&&(yield zt.call(pt))}finally{if(Ct)throw Ct.error}}_t.complete()})})(me,_t).catch(pt=>_t.error(pt))})}},6451:(Zt,Ye,H)=>{"use strict";H.d(Ye,{T:()=>xe});var T=H(8189),_=H(8421),Y=H(515),K=H(3269),ge=H(8996);function xe(...Be){const de=(0,K.yG)(Be),$e=(0,K._6)(Be,1/0),le=Be;return le.length?1===le.length?(0,_.Xf)(le[0]):(0,T.J)($e)((0,ge.D)(le,de)):Y.E}},9646:(Zt,Ye,H)=>{"use strict";H.d(Ye,{of:()=>Y});var T=H(3269),_=H(8996);function Y(...K){const ge=(0,T.yG)(K);return(0,_.D)(K,ge)}},5403:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Q:()=>_});var T=H(930);class _ extends T.Lv{constructor(K,ge,xe,Be,de){super(K),this.onFinalize=de,this._next=ge?function($e){try{ge($e)}catch(le){K.error(le)}}:super._next,this._error=Be?function($e){try{Be($e)}catch(le){K.error(le)}finally{this.unsubscribe()}}:super._error,this._complete=xe?function(){try{xe()}catch($e){K.error($e)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var K;const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(K=this.onFinalize)||void 0===K||K.call(this))}}},6590:(Zt,Ye,H)=>{"use strict";H.d(Ye,{d:()=>Y});var T=H(4482),_=H(5403);function Y(K){return(0,T.e)((ge,xe)=>{let Be=!1;ge.subscribe(new _.Q(xe,de=>{Be=!0,xe.next(de)},()=>{Be||xe.next(K),xe.complete()}))})}},1884:(Zt,Ye,H)=>{"use strict";H.d(Ye,{x:()=>K});var T=H(4671),_=H(4482),Y=H(5403);function K(xe,Be=T.y){return xe=null!=xe?xe:ge,(0,_.e)((de,$e)=>{let le,ue=!0;de.subscribe(new Y.Q($e,Oe=>{const tt=Be(Oe);(ue||!xe(le,tt))&&(ue=!1,le=tt,$e.next(Oe))}))})}function ge(xe,Be){return xe===Be}},9300:(Zt,Ye,H)=>{"use strict";H.d(Ye,{h:()=>Y});var T=H(4482),_=H(5403);function Y(K,ge){return(0,T.e)((xe,Be)=>{let de=0;xe.subscribe(new _.Q(Be,$e=>K.call(ge,$e,de++)&&Be.next($e)))})}},590:(Zt,Ye,H)=>{"use strict";H.d(Ye,{P:()=>Be});var T=H(6805),_=H(9300),Y=H(5698),K=H(6590),ge=H(8068),xe=H(4671);function Be(de,$e){const le=arguments.length>=2;return ue=>ue.pipe(de?(0,_.h)((Oe,tt)=>de(Oe,tt,ue)):xe.y,(0,Y.q)(1),le?(0,K.d)($e):(0,ge.T)(()=>new T.K))}},4004:(Zt,Ye,H)=>{"use strict";H.d(Ye,{U:()=>Y});var T=H(4482),_=H(5403);function Y(K,ge){return(0,T.e)((xe,Be)=>{let de=0;xe.subscribe(new _.Q(Be,$e=>{Be.next(K.call(ge,$e,de++))}))})}},8189:(Zt,Ye,H)=>{"use strict";H.d(Ye,{J:()=>Y});var T=H(5577),_=H(4671);function Y(K=1/0){return(0,T.z)(_.y,K)}},5577:(Zt,Ye,H)=>{"use strict";H.d(Ye,{z:()=>de});var T=H(4004),_=H(8421),Y=H(4482),ge=(H(9672),H(5403)),Be=H(576);function de($e,le,ue=1/0){return(0,Be.m)(le)?de((Oe,tt)=>(0,T.U)((Xe,ut)=>le(Oe,Xe,tt,ut))((0,_.Xf)($e(Oe,tt))),ue):("number"==typeof le&&(ue=le),(0,Y.e)((Oe,tt)=>function($e,le,ue,Oe,tt,Xe,ut,dt){const ze=[];let Ae=0,Le=0,Pe=!1;const me=()=>{Pe&&!ze.length&&!Ae&&le.complete()},_t=Ut=>Ae<Oe?pt(Ut):ze.push(Ut),pt=Ut=>{Ae++;let Ct=!1;(0,_.Xf)(ue(Ut,Le++)).subscribe(new ge.Q(le,zt=>{le.next(zt)},()=>{Ct=!0},void 0,()=>{if(Ct)try{for(Ae--;ze.length&&Ae<Oe;){const zt=ze.shift();pt(zt)}me()}catch(zt){le.error(zt)}}))};return $e.subscribe(new ge.Q(le,_t,()=>{Pe=!0,me()})),()=>{}}(Oe,tt,$e,ue)))}},5363:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Q:()=>K});var T=H(9672),_=H(4482),Y=H(5403);function K(ge,xe=0){return(0,_.e)((Be,de)=>{Be.subscribe(new Y.Q(de,$e=>(0,T.f)(de,ge,()=>de.next($e),xe),()=>(0,T.f)(de,ge,()=>de.complete(),xe),$e=>(0,T.f)(de,ge,()=>de.error($e),xe)))})}},5026:(Zt,Ye,H)=>{"use strict";H.d(Ye,{R:()=>K});var T=H(4482),_=H(5403);function Y(ge,xe,Be,de,$e){return(le,ue)=>{let Oe=Be,tt=xe,Xe=0;le.subscribe(new _.Q(ue,ut=>{const dt=Xe++;tt=Oe?ge(tt,ut,dt):(Oe=!0,ut),de&&ue.next(tt)},$e&&(()=>{Oe&&ue.next(tt),ue.complete()})))}}function K(ge,xe){return(0,T.e)(Y(ge,xe,arguments.length>=2,!0))}},3099:(Zt,Ye,H)=>{"use strict";H.d(Ye,{B:()=>xe});var T=H(8996),_=H(5698),Y=H(7579),K=H(930),ge=H(4482);function xe(de={}){const{connector:$e=(()=>new Y.x),resetOnError:le=!0,resetOnComplete:ue=!0,resetOnRefCountZero:Oe=!0}=de;return tt=>{let Xe=null,ut=null,dt=null,ze=0,Ae=!1,Le=!1;const Pe=()=>{null==ut||ut.unsubscribe(),ut=null},me=()=>{Pe(),Xe=dt=null,Ae=Le=!1},_t=()=>{const pt=Xe;me(),null==pt||pt.unsubscribe()};return(0,ge.e)((pt,Ut)=>{ze++,!Le&&!Ae&&Pe();const Ct=dt=null!=dt?dt:$e();Ut.add(()=>{ze--,0===ze&&!Le&&!Ae&&(ut=Be(_t,Oe))}),Ct.subscribe(Ut),Xe||(Xe=new K.Hp({next:zt=>Ct.next(zt),error:zt=>{Le=!0,Pe(),ut=Be(me,le,zt),Ct.error(zt)},complete:()=>{Ae=!0,Pe(),ut=Be(me,ue),Ct.complete()}}),(0,T.D)(pt).subscribe(Xe))})(tt)}}function Be(de,$e,...le){return!0===$e?(de(),null):!1===$e?null:$e(...le).pipe((0,_.q)(1)).subscribe(()=>de())}},8675:(Zt,Ye,H)=>{"use strict";H.d(Ye,{O:()=>K});var T=H(7272),_=H(3269),Y=H(4482);function K(...ge){const xe=(0,_.yG)(ge);return(0,Y.e)((Be,de)=>{(xe?(0,T.z)(ge,Be,xe):(0,T.z)(ge,Be)).subscribe(de)})}},9468:(Zt,Ye,H)=>{"use strict";H.d(Ye,{R:()=>_});var T=H(4482);function _(Y,K=0){return(0,T.e)((ge,xe)=>{xe.add(Y.schedule(()=>ge.subscribe(xe),K))})}},3900:(Zt,Ye,H)=>{"use strict";H.d(Ye,{w:()=>K});var T=H(8421),_=H(4482),Y=H(5403);function K(ge,xe){return(0,_.e)((Be,de)=>{let $e=null,le=0,ue=!1;const Oe=()=>ue&&!$e&&de.complete();Be.subscribe(new Y.Q(de,tt=>{null==$e||$e.unsubscribe();let Xe=0;const ut=le++;(0,T.Xf)(ge(tt,ut)).subscribe($e=new Y.Q(de,dt=>de.next(xe?xe(tt,dt,ut,Xe++):dt),()=>{$e=null,Oe()}))},()=>{ue=!0,Oe()}))})}},5698:(Zt,Ye,H)=>{"use strict";H.d(Ye,{q:()=>K});var T=H(515),_=H(4482),Y=H(5403);function K(ge){return ge<=0?()=>T.E:(0,_.e)((xe,Be)=>{let de=0;xe.subscribe(new Y.Q(Be,$e=>{++de<=ge&&(Be.next($e),ge<=de&&Be.complete())}))})}},8505:(Zt,Ye,H)=>{"use strict";H.d(Ye,{b:()=>ge});var T=H(576),_=H(4482),Y=H(5403),K=H(4671);function ge(xe,Be,de){const $e=(0,T.m)(xe)||Be||de?{next:xe,error:Be,complete:de}:xe;return $e?(0,_.e)((le,ue)=>{var Oe;null===(Oe=$e.subscribe)||void 0===Oe||Oe.call($e);let tt=!0;le.subscribe(new Y.Q(ue,Xe=>{var ut;null===(ut=$e.next)||void 0===ut||ut.call($e,Xe),ue.next(Xe)},()=>{var Xe;tt=!1,null===(Xe=$e.complete)||void 0===Xe||Xe.call($e),ue.complete()},Xe=>{var ut;tt=!1,null===(ut=$e.error)||void 0===ut||ut.call($e,Xe),ue.error(Xe)},()=>{var Xe,ut;tt&&(null===(Xe=$e.unsubscribe)||void 0===Xe||Xe.call($e)),null===(ut=$e.finalize)||void 0===ut||ut.call($e)}))}):K.y}},8068:(Zt,Ye,H)=>{"use strict";H.d(Ye,{T:()=>K});var T=H(6805),_=H(4482),Y=H(5403);function K(xe=ge){return(0,_.e)((Be,de)=>{let $e=!1;Be.subscribe(new Y.Q(de,le=>{$e=!0,de.next(le)},()=>$e?de.complete():de.error(xe())))})}function ge(){return new T.K}},1365:(Zt,Ye,H)=>{"use strict";H.d(Ye,{M:()=>Be});var T=H(4482),_=H(5403),Y=H(8421),K=H(4671),ge=H(5032),xe=H(3269);function Be(...de){const $e=(0,xe.jO)(de);return(0,T.e)((le,ue)=>{const Oe=de.length,tt=new Array(Oe);let Xe=de.map(()=>!1),ut=!1;for(let dt=0;dt<Oe;dt++)(0,Y.Xf)(de[dt]).subscribe(new _.Q(ue,ze=>{tt[dt]=ze,!ut&&!Xe[dt]&&(Xe[dt]=!0,(ut=Xe.every(K.y))&&(Xe=null))},ge.Z));le.subscribe(new _.Q(ue,dt=>{if(ut){const ze=[dt,...tt];ue.next($e?$e(...ze):ze)}}))})}},4408:(Zt,Ye,H)=>{"use strict";H.d(Ye,{o:()=>ge});var T=H(727);class _ extends T.w0{constructor(Be,de){super()}schedule(Be,de=0){return this}}const Y={setInterval(...xe){const{delegate:Be}=Y;return((null==Be?void 0:Be.setInterval)||setInterval)(...xe)},clearInterval(xe){const{delegate:Be}=Y;return((null==Be?void 0:Be.clearInterval)||clearInterval)(xe)},delegate:void 0};var K=H(8737);class ge extends _{constructor(Be,de){super(Be,de),this.scheduler=Be,this.work=de,this.pending=!1}schedule(Be,de=0){if(this.closed)return this;this.state=Be;const $e=this.id,le=this.scheduler;return null!=$e&&(this.id=this.recycleAsyncId(le,$e,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(le,this.id,de),this}requestAsyncId(Be,de,$e=0){return Y.setInterval(Be.flush.bind(Be,this),$e)}recycleAsyncId(Be,de,$e=0){if(null!=$e&&this.delay===$e&&!1===this.pending)return de;Y.clearInterval(de)}execute(Be,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const $e=this._execute(Be,de);if($e)return $e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Be,de){let le,$e=!1;try{this.work(Be)}catch(ue){$e=!0,le=ue||new Error("Scheduled action threw falsy error")}if($e)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Be,scheduler:de}=this,{actions:$e}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,K.P)($e,this),null!=Be&&(this.id=this.recycleAsyncId(de,Be,null)),this.delay=null,super.unsubscribe()}}}},7565:(Zt,Ye,H)=>{"use strict";H.d(Ye,{v:()=>Y});var T=H(6063);class _{constructor(ge,xe=_.now){this.schedulerActionCtor=ge,this.now=xe}schedule(ge,xe=0,Be){return new this.schedulerActionCtor(this,ge).schedule(Be,xe)}}_.now=T.l.now;class Y extends _{constructor(ge,xe=_.now){super(ge,xe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ge){const{actions:xe}=this;if(this._active)return void xe.push(ge);let Be;this._active=!0;do{if(Be=ge.execute(ge.state,ge.delay))break}while(ge=xe.shift());if(this._active=!1,Be){for(;ge=xe.shift();)ge.unsubscribe();throw Be}}}},4986:(Zt,Ye,H)=>{"use strict";H.d(Ye,{z:()=>Y,P:()=>K});var T=H(4408);const Y=new(H(7565).v)(T.o),K=Y},6063:(Zt,Ye,H)=>{"use strict";H.d(Ye,{l:()=>T});const T={now:()=>(T.delegate||Date).now(),delegate:void 0}},3410:(Zt,Ye,H)=>{"use strict";H.d(Ye,{z:()=>T});const T={setTimeout(..._){const{delegate:Y}=T;return((null==Y?void 0:Y.setTimeout)||setTimeout)(..._)},clearTimeout(_){const{delegate:Y}=T;return((null==Y?void 0:Y.clearTimeout)||clearTimeout)(_)},delegate:void 0}},2202:(Zt,Ye,H)=>{"use strict";H.d(Ye,{h:()=>_});const _="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},8822:(Zt,Ye,H)=>{"use strict";H.d(Ye,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Zt,Ye,H)=>{"use strict";H.d(Ye,{K:()=>_});const _=(0,H(3888).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Zt,Ye,H)=>{"use strict";H.d(Ye,{jO:()=>K,yG:()=>ge,_6:()=>xe});var T=H(576),_=H(3532);function Y(Be){return Be[Be.length-1]}function K(Be){return(0,T.m)(Y(Be))?Be.pop():void 0}function ge(Be){return(0,_.K)(Y(Be))?Be.pop():void 0}function xe(Be,de){return"number"==typeof Y(Be)?Be.pop():de}},4742:(Zt,Ye,H)=>{"use strict";H.d(Ye,{D:()=>ge});const{isArray:T}=Array,{getPrototypeOf:_,prototype:Y,keys:K}=Object;function ge(Be){if(1===Be.length){const de=Be[0];if(T(de))return{args:de,keys:null};if(function(Be){return Be&&"object"==typeof Be&&_(Be)===Y}(de)){const $e=K(de);return{args:$e.map(le=>de[le]),keys:$e}}}return{args:Be,keys:null}}},8737:(Zt,Ye,H)=>{"use strict";function T(_,Y){if(_){const K=_.indexOf(Y);0<=K&&_.splice(K,1)}}H.d(Ye,{P:()=>T})},3888:(Zt,Ye,H)=>{"use strict";function T(_){const K=_(ge=>{Error.call(ge),ge.stack=(new Error).stack});return K.prototype=Object.create(Error.prototype),K.prototype.constructor=K,K}H.d(Ye,{d:()=>T})},1810:(Zt,Ye,H)=>{"use strict";function T(_,Y){return _.reduce((K,ge,xe)=>(K[ge]=Y[xe],K),{})}H.d(Ye,{n:()=>T})},2806:(Zt,Ye,H)=>{"use strict";H.d(Ye,{x:()=>Y,O:()=>K});var T=H(2416);let _=null;function Y(ge){if(T.v.useDeprecatedSynchronousErrorHandling){const xe=!_;if(xe&&(_={errorThrown:!1,error:null}),ge(),xe){const{errorThrown:Be,error:de}=_;if(_=null,Be)throw de}}else ge()}function K(ge){T.v.useDeprecatedSynchronousErrorHandling&&_&&(_.errorThrown=!0,_.error=ge)}},9672:(Zt,Ye,H)=>{"use strict";function T(_,Y,K,ge=0,xe=!1){const Be=Y.schedule(function(){K(),xe?_.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(_.add(Be),!xe)return Be}H.d(Ye,{f:()=>T})},4671:(Zt,Ye,H)=>{"use strict";function T(_){return _}H.d(Ye,{y:()=>T})},1144:(Zt,Ye,H)=>{"use strict";H.d(Ye,{z:()=>T});const T=_=>_&&"number"==typeof _.length&&"function"!=typeof _},2206:(Zt,Ye,H)=>{"use strict";H.d(Ye,{D:()=>_});var T=H(576);function _(Y){return Symbol.asyncIterator&&(0,T.m)(null==Y?void 0:Y[Symbol.asyncIterator])}},576:(Zt,Ye,H)=>{"use strict";function T(_){return"function"==typeof _}H.d(Ye,{m:()=>T})},3670:(Zt,Ye,H)=>{"use strict";H.d(Ye,{c:()=>Y});var T=H(8822),_=H(576);function Y(K){return(0,_.m)(K[T.L])}},6495:(Zt,Ye,H)=>{"use strict";H.d(Ye,{T:()=>Y});var T=H(2202),_=H(576);function Y(K){return(0,_.m)(null==K?void 0:K[T.h])}},8239:(Zt,Ye,H)=>{"use strict";H.d(Ye,{t:()=>_});var T=H(576);function _(Y){return(0,T.m)(null==Y?void 0:Y.then)}},3260:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Q:()=>Y,L:()=>K});var T=H(5987),_=H(576);function Y(ge){return(0,T.FC)(this,arguments,function*(){const Be=ge.getReader();try{for(;;){const{value:de,done:$e}=yield(0,T.qq)(Be.read());if($e)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(de)}}finally{Be.releaseLock()}})}function K(ge){return(0,_.m)(null==ge?void 0:ge.getReader)}},3532:(Zt,Ye,H)=>{"use strict";H.d(Ye,{K:()=>_});var T=H(576);function _(Y){return Y&&(0,T.m)(Y.schedule)}},4482:(Zt,Ye,H)=>{"use strict";H.d(Ye,{A:()=>_,e:()=>Y});var T=H(576);function _(K){return(0,T.m)(null==K?void 0:K.lift)}function Y(K){return ge=>{if(_(ge))return ge.lift(function(xe){try{return K(xe,this)}catch(Be){this.error(Be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Z:()=>K});var T=H(4004);const{isArray:_}=Array;function K(ge){return(0,T.U)(xe=>function(ge,xe){return _(xe)?ge(...xe):ge(xe)}(ge,xe))}},5032:(Zt,Ye,H)=>{"use strict";function T(){}H.d(Ye,{Z:()=>T})},7849:(Zt,Ye,H)=>{"use strict";H.d(Ye,{h:()=>Y});var T=H(2416),_=H(3410);function Y(K){_.z.setTimeout(()=>{const{onUnhandledError:ge}=T.v;if(!ge)throw K;ge(K)})}},4532:(Zt,Ye,H)=>{"use strict";function T(_){return new TypeError(`You provided ${null!==_&&"object"==typeof _?"an invalid object":`'${_}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(Ye,{z:()=>T})},5987:(Zt,Ye,H)=>{"use strict";function de(qe,et,Qe,rt){return new(Qe||(Qe=Promise))(function(Ge,nn){function xt(It){try{Qt(rt.next(It))}catch(Kt){nn(Kt)}}function an(It){try{Qt(rt.throw(It))}catch(Kt){nn(Kt)}}function Qt(It){It.done?Ge(It.value):function(Ge){return Ge instanceof Qe?Ge:new Qe(function(nn){nn(Ge)})}(It.value).then(xt,an)}Qt((rt=rt.apply(qe,et||[])).next())})}function ze(qe){return this instanceof ze?(this.v=qe,this):new ze(qe)}function Ae(qe,et,Qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt,rt=Qe.apply(qe,et||[]),Ge=[];return gt={},nn("next"),nn("throw"),nn("return"),gt[Symbol.asyncIterator]=function(){return this},gt;function nn(dn){rt[dn]&&(gt[dn]=function(Mn){return new Promise(function(ur,Ln){Ge.push([dn,Mn,ur,Ln])>1||xt(dn,Mn)})})}function xt(dn,Mn){try{!function(dn){dn.value instanceof ze?Promise.resolve(dn.value.v).then(Qt,It):Kt(Ge[0][2],dn)}(rt[dn](Mn))}catch(ur){Kt(Ge[0][3],ur)}}function Qt(dn){xt("next",dn)}function It(dn){xt("throw",dn)}function Kt(dn,Mn){dn(Mn),Ge.shift(),Ge.length&&xt(Ge[0][0],Ge[0][1])}}function Pe(qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,et=qe[Symbol.asyncIterator];return et?et.call(qe):(qe=function(qe){var et="function"==typeof Symbol&&Symbol.iterator,Qe=et&&qe[et],rt=0;if(Qe)return Qe.call(qe);if(qe&&"number"==typeof qe.length)return{next:function(){return qe&&rt>=qe.length&&(qe=void 0),{value:qe&&qe[rt++],done:!qe}}};throw new TypeError(et?"Object is not iterable.":"Symbol.iterator is not defined.")}(qe),Qe={},rt("next"),rt("throw"),rt("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe);function rt(Ge){Qe[Ge]=qe[Ge]&&function(nn){return new Promise(function(xt,an){!function(Ge,nn,xt,an){Promise.resolve(an).then(function(Qt){Ge({value:Qt,done:xt})},nn)}(xt,an,(nn=qe[Ge](nn)).done,nn.value)})}}}H.d(Ye,{mG:()=>de,qq:()=>ze,FC:()=>Ae,KL:()=>Pe})},9808:(Zt,Ye,H)=>{"use strict";H.d(Ye,{mr:()=>Le,ez:()=>Sa,K0:()=>Be,Do:()=>me,V_:()=>le,Ye:()=>_t,S$:()=>ze,mk:()=>ks,sg:()=>Wn,O5:()=>Te,tP:()=>gi,b0:()=>Pe,lw:()=>de,EM:()=>Ro,JF:()=>$i,NF:()=>Mo,PM:()=>Ui,w_:()=>xe,bD:()=>Yi,q:()=>Y,Mx:()=>Nn,HT:()=>ge});var T=H(5e3);let _=null;function Y(){return _}function ge(V){_||(_=V)}class xe{}const Be=new T.OlP("DocumentToken");let de=(()=>{class V{historyGo(j){throw new Error("Not implemented")}}return V.\u0275fac=function(j){return new(j||V)},V.\u0275prov=T.Yz7({token:V,factory:function(){return(0,T.LFG)(ue)},providedIn:"platform"}),V})();const le=new T.OlP("Location Initialized");let ue=(()=>{class V extends de{constructor(j){super(),this._doc=j,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(j){const ne=Y().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",j,!1),()=>ne.removeEventListener("popstate",j)}onHashChange(j){const ne=Y().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",j,!1),()=>ne.removeEventListener("hashchange",j)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(j){this.location.pathname=j}pushState(j,ne,De){Oe()?this._history.pushState(j,ne,De):this.location.hash=De}replaceState(j,ne,De){Oe()?this._history.replaceState(j,ne,De):this.location.hash=De}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}}return V.\u0275fac=function(j){return new(j||V)(T.LFG(Be))},V.\u0275prov=T.Yz7({token:V,factory:function(){return new ue((0,T.LFG)(Be))},providedIn:"platform"}),V})();function Oe(){return!!window.history.pushState}function Xe(V,Z){if(0==V.length)return Z;if(0==Z.length)return V;let j=0;return V.endsWith("/")&&j++,Z.startsWith("/")&&j++,2==j?V+Z.substring(1):1==j?V+Z:V+"/"+Z}function ut(V){const Z=V.match(/#|\?|$/),j=Z&&Z.index||V.length;return V.slice(0,j-("/"===V[j-1]?1:0))+V.slice(j)}function dt(V){return V&&"?"!==V[0]?"?"+V:V}let ze=(()=>{class V{historyGo(j){throw new Error("Not implemented")}}return V.\u0275fac=function(j){return new(j||V)},V.\u0275prov=T.Yz7({token:V,factory:function(){return function(V){const Z=(0,T.LFG)(Be).location;return new Pe((0,T.LFG)(de),Z&&Z.origin||"")}()},providedIn:"root"}),V})();const Le=new T.OlP("appBaseHref");let Pe=(()=>{class V extends ze{constructor(j,ne){if(super(),this._platformLocation=j,this._removeListenerFns=[],null==ne&&(ne=this._platformLocation.getBaseHrefFromDOM()),null==ne)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ne}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return Xe(this._baseHref,j)}path(j=!1){const ne=this._platformLocation.pathname+dt(this._platformLocation.search),De=this._platformLocation.hash;return De&&j?`${ne}${De}`:ne}pushState(j,ne,De,Je){const Et=this.prepareExternalUrl(De+dt(Je));this._platformLocation.pushState(j,ne,Et)}replaceState(j,ne,De,Je){const Et=this.prepareExternalUrl(De+dt(Je));this._platformLocation.replaceState(j,ne,Et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var ne,De;null===(De=(ne=this._platformLocation).historyGo)||void 0===De||De.call(ne,j)}}return V.\u0275fac=function(j){return new(j||V)(T.LFG(de),T.LFG(Le,8))},V.\u0275prov=T.Yz7({token:V,factory:V.\u0275fac}),V})(),me=(()=>{class V extends ze{constructor(j,ne){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl(j){const ne=Xe(this._baseHref,j);return ne.length>0?"#"+ne:ne}pushState(j,ne,De,Je){let Et=this.prepareExternalUrl(De+dt(Je));0==Et.length&&(Et=this._platformLocation.pathname),this._platformLocation.pushState(j,ne,Et)}replaceState(j,ne,De,Je){let Et=this.prepareExternalUrl(De+dt(Je));0==Et.length&&(Et=this._platformLocation.pathname),this._platformLocation.replaceState(j,ne,Et)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var ne,De;null===(De=(ne=this._platformLocation).historyGo)||void 0===De||De.call(ne,j)}}return V.\u0275fac=function(j){return new(j||V)(T.LFG(de),T.LFG(Le,8))},V.\u0275prov=T.Yz7({token:V,factory:V.\u0275fac}),V})(),_t=(()=>{class V{constructor(j,ne){this._subject=new T.vpe,this._urlChangeListeners=[],this._platformStrategy=j;const De=this._platformStrategy.getBaseHref();this._platformLocation=ne,this._baseHref=ut(Ct(De)),this._platformStrategy.onPopState(Je=>{this._subject.emit({url:this.path(!0),pop:!0,state:Je.state,type:Je.type})})}path(j=!1){return this.normalize(this._platformStrategy.path(j))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(j,ne=""){return this.path()==this.normalize(j+dt(ne))}normalize(j){return V.stripTrailingSlash(function(V,Z){return V&&Z.startsWith(V)?Z.substring(V.length):Z}(this._baseHref,Ct(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._platformStrategy.prepareExternalUrl(j)}go(j,ne="",De=null){this._platformStrategy.pushState(De,"",j,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+dt(ne)),De)}replaceState(j,ne="",De=null){this._platformStrategy.replaceState(De,"",j,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+dt(ne)),De)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(j=0){var ne,De;null===(De=(ne=this._platformStrategy).historyGo)||void 0===De||De.call(ne,j)}onUrlChange(j){this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)}))}_notifyUrlChangeListeners(j="",ne){this._urlChangeListeners.forEach(De=>De(j,ne))}subscribe(j,ne,De){return this._subject.subscribe({next:j,error:ne,complete:De})}}return V.normalizeQueryParams=dt,V.joinWithSlash=Xe,V.stripTrailingSlash=ut,V.\u0275fac=function(j){return new(j||V)(T.LFG(ze),T.LFG(de))},V.\u0275prov=T.Yz7({token:V,factory:function(){return new _t((0,T.LFG)(ze),(0,T.LFG)(de))},providedIn:"root"}),V})();function Ct(V){return V.replace(/\/index.html$/,"")}var et=(()=>((et=et||{})[et.Zero=0]="Zero",et[et.One=1]="One",et[et.Two=2]="Two",et[et.Few=3]="Few",et[et.Many=4]="Many",et[et.Other=5]="Other",et))();const wt=T.kL8;class yi{}let qr=(()=>{class V extends yi{constructor(j){super(),this.locale=j}getPluralCategory(j,ne){switch(wt(ne||this.locale)(j)){case et.Zero:return"zero";case et.One:return"one";case et.Two:return"two";case et.Few:return"few";case et.Many:return"many";default:return"other"}}}return V.\u0275fac=function(j){return new(j||V)(T.LFG(T.soG))},V.\u0275prov=T.Yz7({token:V,factory:V.\u0275fac}),V})();function Nn(V,Z){Z=encodeURIComponent(Z);for(const j of V.split(";")){const ne=j.indexOf("="),[De,Je]=-1==ne?[j,""]:[j.slice(0,ne),j.slice(ne+1)];if(De.trim()===Z)return decodeURIComponent(Je)}return null}let ks=(()=>{class V{constructor(j,ne,De,Je){this._iterableDiffers=j,this._keyValueDiffers=ne,this._ngEl=De,this._renderer=Je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(j){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof j?j.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(j){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof j?j.split(/\s+/):j,this._rawClass&&((0,T.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const j=this._iterableDiffer.diff(this._rawClass);j&&this._applyIterableChanges(j)}else if(this._keyValueDiffer){const j=this._keyValueDiffer.diff(this._rawClass);j&&this._applyKeyValueChanges(j)}}_applyKeyValueChanges(j){j.forEachAddedItem(ne=>this._toggleClass(ne.key,ne.currentValue)),j.forEachChangedItem(ne=>this._toggleClass(ne.key,ne.currentValue)),j.forEachRemovedItem(ne=>{ne.previousValue&&this._toggleClass(ne.key,!1)})}_applyIterableChanges(j){j.forEachAddedItem(ne=>{if("string"!=typeof ne.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,T.AaK)(ne.item)}`);this._toggleClass(ne.item,!0)}),j.forEachRemovedItem(ne=>this._toggleClass(ne.item,!1))}_applyClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(ne=>this._toggleClass(ne,!0)):Object.keys(j).forEach(ne=>this._toggleClass(ne,!!j[ne])))}_removeClasses(j){j&&(Array.isArray(j)||j instanceof Set?j.forEach(ne=>this._toggleClass(ne,!1)):Object.keys(j).forEach(ne=>this._toggleClass(ne,!1)))}_toggleClass(j,ne){(j=j.trim())&&j.split(/\s+/g).forEach(De=>{ne?this._renderer.addClass(this._ngEl.nativeElement,De):this._renderer.removeClass(this._ngEl.nativeElement,De)})}}return V.\u0275fac=function(j){return new(j||V)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},V.\u0275dir=T.lG2({type:V,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),V})();class lr{constructor(Z,j,ne,De){this.$implicit=Z,this.ngForOf=j,this.index=ne,this.count=De}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wn=(()=>{class V{constructor(j,ne,De){this._viewContainer=j,this._template=ne,this._differs=De,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const ne=this._viewContainer;j.forEachOperation((De,Je,Et)=>{if(null==De.previousIndex)ne.createEmbeddedView(this._template,new lr(De.item,this._ngForOf,-1,-1),null===Et?void 0:Et);else if(null==Et)ne.remove(null===Je?void 0:Je);else if(null!==Je){const sn=ne.get(Je);ne.move(sn,Et),on(sn,De)}});for(let De=0,Je=ne.length;De<Je;De++){const sn=ne.get(De).context;sn.index=De,sn.count=Je,sn.ngForOf=this._ngForOf}j.forEachIdentityChange(De=>{on(ne.get(De.currentIndex),De)})}static ngTemplateContextGuard(j,ne){return!0}}return V.\u0275fac=function(j){return new(j||V)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},V.\u0275dir=T.lG2({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),V})();function on(V,Z){V.context.$implicit=Z.item}let Te=(()=>{class V{constructor(j,ne){this._viewContainer=j,this._context=new Ne,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){He("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){He("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,ne){return!0}}return V.\u0275fac=function(j){return new(j||V)(T.Y36(T.s_b),T.Y36(T.Rgc))},V.\u0275dir=T.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),V})();class Ne{constructor(){this.$implicit=null,this.ngIf=null}}function He(V,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,T.AaK)(Z)}'.`)}let gi=(()=>{class V{constructor(j){this._viewContainerRef=j,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(j){if(j.ngTemplateOutlet){const ne=this._viewContainerRef;this._viewRef&&ne.remove(ne.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?ne.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&j.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return V.\u0275fac=function(j){return new(j||V)(T.Y36(T.s_b))},V.\u0275dir=T.lG2({type:V,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[T.TTD]}),V})(),Sa=(()=>{class V{}return V.\u0275fac=function(j){return new(j||V)},V.\u0275mod=T.oAB({type:V}),V.\u0275inj=T.cJS({providers:[{provide:yi,useClass:qr}]}),V})();const Yi="browser";function Mo(V){return V===Yi}function Ui(V){return"server"===V}let Ro=(()=>{class V{}return V.\u0275prov=(0,T.Yz7)({token:V,providedIn:"root",factory:()=>new Fs((0,T.LFG)(Be),window)}),V})();class Fs{constructor(Z,j){this.document=Z,this.window=j,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const j=function(V,Z){const j=V.getElementById(Z)||V.getElementsByName(Z)[0];if(j)return j;if("function"==typeof V.createTreeWalker&&V.body&&(V.body.createShadowRoot||V.body.attachShadow)){const ne=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let De=ne.currentNode;for(;De;){const Je=De.shadowRoot;if(Je){const Et=Je.getElementById(Z)||Je.querySelector(`[name="${Z}"]`);if(Et)return Et}De=ne.nextNode()}}return null}(this.document,Z);j&&(this.scrollToElement(j),this.attemptFocus(j))}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const j=this.window.history;j&&j.scrollRestoration&&(j.scrollRestoration=Z)}}scrollToElement(Z){const j=Z.getBoundingClientRect(),ne=j.left+this.window.pageXOffset,De=j.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(ne-Je[0],De-Je[1])}attemptFocus(Z){return Z.focus(),this.document.activeElement===Z}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=xo(this.window.history)||xo(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch(Z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Z){return!1}}}function xo(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class $i{}},5e3:(Zt,Ye,H)=>{"use strict";H.d(Ye,{deG:()=>Ka,tb:()=>sw,AFp:()=>nw,ip1:()=>S0,CZH:()=>Xg,hGG:()=>yE,z2F:()=>x_,sBO:()=>qD,Sil:()=>N0,_Vd:()=>Kg,EJc:()=>aw,SBq:()=>a,qLn:()=>oo,vpe:()=>Nd,tBr:()=>es,XFs:()=>Lt,OlP:()=>Qr,zs3:()=>iu,ZZ4:()=>iv,aQg:()=>sv,soG:()=>nv,YKP:()=>Yg,h0i:()=>sa,PXZ:()=>BD,R0b:()=>nc,FiY:()=>ri,Lbi:()=>iw,g9A:()=>rw,Qsj:()=>E,FYo:()=>f,JOm:()=>Dl,tp0:()=>ro,Rgc:()=>M_,dDg:()=>cw,q4F:()=>at,GfV:()=>ke,s_b:()=>Jy,ifc:()=>Ht,eFA:()=>fw,G48:()=>zD,Gpc:()=>ue,X6Q:()=>WD,_c5:()=>dE,VLi:()=>PD,c2e:()=>ow,zSh:()=>qf,wAp:()=>rr,vHH:()=>ut,cg1:()=>p_,kL8:()=>Ay,dqk:()=>ye,sIi:()=>Ac,CqO:()=>tf,QGY:()=>pp,F4k:()=>gp,RDi:()=>Ro,AaK:()=>de,qOj:()=>yg,TTD:()=>mi,_Bn:()=>u0,xp6:()=>bc,uIk:()=>rp,Tol:()=>wa,Gre:()=>Ug,ekj:()=>jn,Suo:()=>kb,Xpm:()=>hn,lG2:()=>Bn,Yz7:()=>Ln,cJS:()=>Zn,oAB:()=>ht,Yjl:()=>On,Y36:()=>ef,_UZ:()=>qm,qZA:()=>Mg,TgZ:()=>fp,EpF:()=>xg,n5z:()=>pi,Ikx:()=>wp,SDv:()=>zy,QtT:()=>qy,pQV:()=>Ep,LFG:()=>Fe,$8M:()=>pl,$Z:()=>zm,NdJ:()=>Og,CRH:()=>Pb,oxw:()=>Qm,Hsn:()=>Xm,F$t:()=>Jm,Q6J:()=>hp,s9C:()=>Fg,MGl:()=>mp,VKq:()=>vb,WLB:()=>bb,kEZ:()=>wb,iGM:()=>xb,MAs:()=>Mc,CHM:()=>Oo,LSH:()=>ee,Udp:()=>Wt,YNc:()=>Xu,W1O:()=>Bb,_uU:()=>rf,Oqu:()=>lh,hij:()=>Ea,Gf:()=>Ob});var T=H(7579),_=H(727),Y=H(8306),K=H(6451),ge=H(3099);function xe(t){for(let n in t)if(t[n]===xe)return n;throw Error("Could not find renamed property on target object.")}function Be(t,n){for(const o in n)n.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=n[o])}function de(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(de).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const o=n.indexOf("\n");return-1===o?n:n.substring(0,o)}function $e(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const le=xe({__forward_ref__:xe});function ue(t){return t.__forward_ref__=ue,t.toString=function(){return de(this())},t}function Oe(t){return tt(t)?t():t}function tt(t){return"function"==typeof t&&t.hasOwnProperty(le)&&t.__forward_ref__===ue}class ut extends Error{constructor(n,o){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,o)),this.code=n}}function Ae(t){return"string"==typeof t?t:null==t?"":String(t)}function Le(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ae(t)}function pt(t,n){const o=n?` in ${n}`:"";throw new ut("201",`No provider for ${Le(t)} found${o}`)}function Kt(t,n,o,c){throw new Error(`ASSERTION ERROR: ${t}`+(null==c?"":` [Expected=> ${o} ${c} ${n} <=Actual]`))}function Ln(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Zn(t){return{providers:t.providers||[],imports:t.imports||[]}}function cr(t){return Hn(t,wt)||Hn(t,Mr)}function Hn(t,n){return t.hasOwnProperty(n)?t[n]:null}function Xr(t){return t&&(t.hasOwnProperty(Gn)||t.hasOwnProperty(Yr))?t[Gn]:null}const wt=xe({\u0275prov:xe}),Gn=xe({\u0275inj:xe}),Mr=xe({ngInjectableDef:xe}),Yr=xe({ngInjectorDef:xe});var Lt=(()=>((Lt=Lt||{})[Lt.Default=0]="Default",Lt[Lt.Host=1]="Host",Lt[Lt.Self=2]="Self",Lt[Lt.SkipSelf=4]="SkipSelf",Lt[Lt.Optional=8]="Optional",Lt))();let jt;function Ar(t){const n=jt;return jt=t,n}function vn(t,n,o){const c=cr(t);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&Lt.Optional?null:void 0!==n?n:void pt(de(t),"Injector")}function bn(t){return{toString:t}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),Ht=(()=>{return(t=Ht||(Ht={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Ht;var t})();const ln="undefined"!=typeof globalThis&&globalThis,Li="undefined"!=typeof window&&window,dr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ye=ln||"undefined"!=typeof global&&global||Li||dr,ie={},oe=[],_e=xe({\u0275cmp:xe}),Ze=xe({\u0275dir:xe}),Ue=xe({\u0275pipe:xe}),Gt=xe({\u0275mod:xe}),rn=xe({\u0275fac:xe}),or=xe({__NG_ELEMENT_ID__:xe});let xr=0;function hn(t){return bn(()=>{const o={},c={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||oe,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ht.Emulated,id:"c",styles:t.styles||oe,_:null,setInput:null,schemas:t.schemas||null,tView:null},p=t.directives,v=t.features,I=t.pipes;return c.id+=xr++,c.inputs=Rn(t.inputs,o),c.outputs=Rn(t.outputs),v&&v.forEach(x=>x(c)),c.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ve):null,c.pipeDefs=I?()=>("function"==typeof I?I():I).map(be):null,c})}function Ve(t){return Jn(t)||function(t){return t[Ze]||null}(t)}function be(t){return function(t){return t[Ue]||null}(t)}const Ie={};function ht(t){return bn(()=>{const n={type:t.type,bootstrap:t.bootstrap||oe,declarations:t.declarations||oe,imports:t.imports||oe,exports:t.exports||oe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Ie[t.id]=t.type),n})}function Rn(t,n){if(null==t)return ie;const o={};for(const c in t)if(t.hasOwnProperty(c)){let p=t[c],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),o[p]=c,n&&(n[p]=v)}return o}const Bn=hn;function On(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Jn(t){return t[_e]||null}function wn(t,n){const o=t[Gt]||null;if(!o&&!0===n)throw new Error(`Type ${de(t)} does not have '\u0275mod' property.`);return o}function At(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ft(t){return Array.isArray(t)&&!0===t[1]}function sr(t){return 0!=(8&t.flags)}function Dn(t){return 2==(2&t.flags)}function ei(t){return 1==(1&t.flags)}function Xn(t){return null!==t.template}function gi(t){return 0!=(512&t[2])}function li(t,n){return t.hasOwnProperty(rn)?t[rn]:null}class Ri{constructor(n,o,c){this.previousValue=n,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function mi(){return Cr}function Cr(t){return t.type.prototype.ngOnChanges&&(t.setInput=Sa),Ki}function Ki(){const t=Tr(this),n=null==t?void 0:t.current;if(n){const o=t.previous;if(o===ie)t.previous=n;else for(let c in n)o[c]=n[c];t.current=null,this.ngOnChanges(n)}}function Sa(t,n,o,c){const p=Tr(t)||function(t,n){return t[Yi]=n}(t,{previous:ie,current:null}),v=p.current||(p.current={}),I=p.previous,x=this.declaredInputs[o],P=I[x];v[x]=new Ri(P&&P.currentValue,n,I===ie),t[c]=n}mi.ngInherit=!0;const Yi="__ngSimpleChanges__";function Tr(t){return t[Yi]||null}let Kn;function Ro(t){Kn=t}function Fs(){return void 0!==Kn?Kn:"undefined"!=typeof document?document:void 0}function Ir(t){return!!t.listen}const ji={createRenderer:(t,n)=>Fs()};function V(t){for(;Array.isArray(t);)t=t[0];return t}function ne(t,n){return V(n[t])}function De(t,n){return V(n[t.index])}function Et(t,n){return t.data[n]}function mn(t,n){const o=n[t];return At(o)?o:o[0]}function Sr(t){return 4==(4&t[2])}function fr(t){return 128==(128&t[2])}function Br(t,n){return null==n?null:t[n]}function _r(t){t[18]=0}function kn(t,n){t[5]+=n;let o=t,c=t[3];for(;null!==c&&(1===n&&1===o[5]||-1===n&&0===o[5]);)c[5]+=n,o=c,c=c[3]}const Sn={lFrame:is(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _s(){return Sn.bindingsEnabled}function bt(){return Sn.lFrame.lView}function er(){return Sn.lFrame.tView}function Oo(t){return Sn.lFrame.contextLView=t,t[8]}function ar(){let t=cl();for(;null!==t&&64===t.type;)t=t.parent;return t}function cl(){return Sn.lFrame.currentTNode}function la(){const t=Sn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function eo(t,n){const o=Sn.lFrame;o.currentTNode=t,o.isParent=n}function Wa(){return Sn.lFrame.isParent}function Aa(){Sn.lFrame.isParent=!1}function po(){return Sn.isInCheckNoChangesMode}function ys(t){Sn.isInCheckNoChangesMode=t}function Gi(){const t=Sn.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function ca(){return Sn.lFrame.bindingIndex++}function ls(t){const n=Sn.lFrame,o=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,o}function Tl(t){Sn.lFrame.inI18n=t}function go(t,n){const o=Sn.lFrame;o.bindingIndex=o.bindingRootIndex=t,da(n)}function da(t){Sn.lFrame.currentDirectiveIndex=t}function Di(){return Sn.lFrame.currentQueryIndex}function hl(t){Sn.lFrame.currentQueryIndex=t}function qo(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function mo(t,n,o){if(o&Lt.SkipSelf){let p=n,v=t;for(;!(p=p.parent,null!==p||o&Lt.Host||(p=qo(v),null===p||(v=v[15],10&p.type))););if(null===p)return!1;n=p,t=v}const c=Sn.lFrame=ko();return c.currentTNode=n,c.lView=t,!0}function Us(t){const n=ko(),o=t[1];Sn.lFrame=n,n.currentTNode=o.firstChild,n.lView=t,n.tView=o,n.contextLView=t,n.bindingIndex=o.bindingStartIndex,n.inI18n=!1}function ko(){const t=Sn.lFrame,n=null===t?null:t.child;return null===n?is(t):n}function is(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function js(){const t=Sn.lFrame;return Sn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ss=js;function $s(){const t=js();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fi(){return Sn.lFrame.selectedIndex}function yo(t){Sn.lFrame.selectedIndex=t}function Ur(){const t=Sn.lFrame;return Et(t.tView,t.selectedIndex)}function tr(t,n){for(let o=n.directiveStart,c=n.directiveEnd;o<c;o++){const v=t.data[o].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:x,ngAfterViewInit:P,ngAfterViewChecked:q,ngOnDestroy:J}=v;I&&(t.contentHooks||(t.contentHooks=[])).push(-o,I),x&&((t.contentHooks||(t.contentHooks=[])).push(o,x),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(o,x)),P&&(t.viewHooks||(t.viewHooks=[])).push(-o,P),q&&((t.viewHooks||(t.viewHooks=[])).push(o,q),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(o,q)),null!=J&&(t.destroyHooks||(t.destroyHooks=[])).push(o,J)}}function Ii(t,n,o){lu(t,n,3,o)}function Is(t,n,o,c){(3&t[2])===o&&lu(t,n,o,c)}function ha(t,n){let o=t[2];(3&o)===n&&(o&=2047,o+=1,t[2]=o)}function lu(t,n,o,c){const v=null!=c?c:-1,I=n.length-1;let x=0;for(let P=void 0!==c?65535&t[18]:0;P<I;P++)if("number"==typeof n[P+1]){if(x=n[P],null!=c&&x>=c)break}else n[P]<0&&(t[18]+=65536),(x<v||-1==v)&&(Za(t,o,n,P),t[18]=(4294901760&t[18])+P+2),P++}function Za(t,n,o,c){const p=o[c]<0,v=o[c+1],x=t[p?-o[c]:o[c]];if(p){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{v.call(x)}finally{}}}else try{v.call(x)}finally{}}class fa{constructor(n,o,c){this.factory=n,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}function Vt(t,n,o){const c=Ir(t);let p=0;for(;p<o.length;){const v=o[p];if("number"==typeof v){if(0!==v)break;p++;const I=o[p++],x=o[p++],P=o[p++];c?t.setAttribute(n,x,P,I):n.setAttributeNS(I,x,P)}else{const I=v,x=o[++p];Qi(I)?c&&t.setProperty(n,I,x):c?t.setAttribute(n,I,x):n.setAttribute(I,x),p++}}return p}function Ei(t){return 3===t||4===t||6===t}function Qi(t){return 64===t.charCodeAt(0)}function Ra(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let o=-1;for(let c=0;c<n.length;c++){const p=n[c];"number"==typeof p?o=p:0===o||Tn(t,o,p,null,-1===o||2===o?n[++c]:null)}}return t}function Tn(t,n,o,c,p){let v=0,I=t.length;if(-1===n)I=-1;else for(;v<t.length;){const x=t[v++];if("number"==typeof x){if(x===n){I=-1;break}if(x>n){I=v-1;break}}}for(;v<t.length;){const x=t[v];if("number"==typeof x)break;if(x===o){if(null===c)return void(null!==p&&(t[v+1]=p));if(c===t[v+1])return void(t[v+2]=p)}v++,null!==c&&v++,null!==p&&v++}-1!==I&&(t.splice(I,0,n),v=I+1),t.splice(v++,0,o),null!==c&&t.splice(v++,0,c),null!==p&&t.splice(v++,0,p)}function Pn(t){return-1!==t}function xa(t){return 32767&t}function ot(t,n){let o=function(t){return t>>16}(t),c=n;for(;o>0;)c=c[15],o--;return c}let Tt=!0;function Gr(t){const n=Tt;return Tt=t,n}let N=0;function B(t,n){const o=te(t,n);if(-1!==o)return o;const c=n[1];c.firstCreatePass&&(t.injectorIndex=n.length,W(c.data,t),W(n,null),W(c.blueprint,null));const p=he(t,n),v=t.injectorIndex;if(Pn(p)){const I=xa(p),x=ot(p,n),P=x[1].data;for(let q=0;q<8;q++)n[v+q]=x[I+q]|P[I+q]}return n[v+8]=p,v}function W(t,n){t.push(0,0,0,0,0,0,0,0,n)}function te(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function he(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,c=null,p=n;for(;null!==p;){const v=p[1],I=v.type;if(c=2===I?v.declTNode:1===I?p[6]:null,null===c)return-1;if(o++,p=p[15],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return-1}function we(t,n,o){!function(t,n,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(or)&&(c=o[or]),null==c&&(c=o[or]=N++);const p=255&c;n.data[t+(p>>5)]|=1<<p}(t,n,o)}function Xt(t,n,o){if(o&Lt.Optional)return t;pt(n,"NodeInjector")}function en(t,n,o,c){if(o&Lt.Optional&&void 0===c&&(c=null),0==(o&(Lt.Self|Lt.Host))){const p=t[9],v=Ar(void 0);try{return p?p.get(n,c,o&Lt.Optional):vn(n,c,o&Lt.Optional)}finally{Ar(v)}}return Xt(c,n,o)}function En(t,n,o,c=Lt.Default,p){if(null!==t){const v=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(or)?t[or]:void 0;return"number"==typeof n?n>=0?255&n:Yn:n}(o);if("function"==typeof v){if(!mo(n,t,c))return c&Lt.Host?Xt(p,o,c):en(n,o,c,p);try{const I=v(c);if(null!=I||c&Lt.Optional)return I;pt(o)}finally{ss()}}else if("number"==typeof v){let I=null,x=te(t,n),P=-1,q=c&Lt.Host?n[16][6]:null;for((-1===x||c&Lt.SkipSelf)&&(P=-1===x?he(t,n):n[x+8],-1!==P&&In(c,!1)?(I=n[1],x=xa(P),n=ot(P,n)):x=-1);-1!==x;){const J=n[1];if(Hs(v,x,J.data)){const ce=Fn(x,n,o,I,c,q);if(ce!==Nr)return ce}P=n[x+8],-1!==P&&In(c,n[1].data[x+8]===q)&&Hs(v,x,n)?(I=J,x=xa(P),n=ot(P,n)):x=-1}}}return en(n,o,c,p)}const Nr={};function Yn(){return new Gs(ar(),bt())}function Fn(t,n,o,c,p,v){const I=n[1],x=I.data[t+8],J=Ji(x,I,o,null==c?Dn(x)&&Tt:c!=I&&0!=(3&x.type),p&Lt.Host&&v===x);return null!==J?ui(n,I,J,x):Nr}function Ji(t,n,o,c,p){const v=t.providerIndexes,I=n.data,x=1048575&v,P=t.directiveStart,J=v>>20,Me=p?x+J:t.directiveEnd;for(let Ke=c?x:x+J;Ke<Me;Ke++){const vt=I[Ke];if(Ke<P&&o===vt||Ke>=P&&vt.type===o)return Ke}if(p){const Ke=I[P];if(Ke&&Xn(Ke)&&Ke.type===o)return P}return null}function ui(t,n,o,c){let p=t[o];const v=n.data;if(function(t){return t instanceof fa}(p)){const I=p;I.resolving&&function(t,n){throw new ut("200",`Circular dependency in DI detected for ${t}`)}(Le(v[o]));const x=Gr(I.canSeeViewProviders);I.resolving=!0;const P=I.injectImpl?Ar(I.injectImpl):null;mo(t,c,Lt.Default);try{p=t[o]=I.factory(void 0,v,t,c),n.firstCreatePass&&o>=c.directiveStart&&function(t,n,o){const{ngOnChanges:c,ngOnInit:p,ngDoCheck:v}=n.type.prototype;if(c){const I=Cr(n);(o.preOrderHooks||(o.preOrderHooks=[])).push(t,I),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(t,I)}p&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-t,p),v&&((o.preOrderHooks||(o.preOrderHooks=[])).push(t,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(t,v))}(o,v[o],n)}finally{null!==P&&Ar(P),Gr(x),I.resolving=!1,ss()}}return p}function Hs(t,n,o){return!!(o[n+(t>>5)]&1<<t)}function In(t,n){return!(t&Lt.Self||t&Lt.Host&&n)}class Gs{constructor(n,o){this._tNode=n,this._lView=o}get(n,o,c){return En(this._tNode,this._lView,n,c,o)}}function pi(t){return bn(()=>{const n=t.prototype.constructor,o=n[rn]||ka(n),c=Object.prototype;let p=Object.getPrototypeOf(t.prototype).constructor;for(;p&&p!==c;){const v=p[rn]||ka(p);if(v&&v!==o)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function ka(t){return tt(t)?()=>{const n=ka(Oe(t));return n&&n()}:li(t)}function pl(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const o=t.attrs;if(o){const c=o.length;let p=0;for(;p<c;){const v=o[p];if(Ei(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<c&&"string"==typeof o[p];)p++;else{if(v===n)return o[p+1];p+=2}}}return null}(ar(),t)}const pa="__parameters__";function Lo(t,n,o){return bn(()=>{const c=function(t){return function(...o){if(t){const c=t(...o);for(const p in c)this[p]=c[p]}}}(n);function p(...v){if(this instanceof p)return c.apply(this,v),this;const I=new p(...v);return x.annotation=I,x;function x(P,q,J){const ce=P.hasOwnProperty(pa)?P[pa]:Object.defineProperty(P,pa,{value:[]})[pa];for(;ce.length<=J;)ce.push(null);return(ce[J]=ce[J]||[]).push(I),P}}return o&&(p.prototype=Object.create(o.prototype)),p.prototype.ngMetadataName=t,p.annotationCls=p,p})}class Qr{constructor(n,o){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Ln({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ka=new Qr("AnalyzeForEntryComponents");function wo(t,n){void 0===n&&(n=t);for(let o=0;o<t.length;o++){let c=t[o];Array.isArray(c)?(n===t&&(n=t.slice(0,o)),wo(c,n)):n!==t&&n.push(c)}return n}function zi(t,n){t.forEach(o=>Array.isArray(o)?zi(o,n):n(o))}function Yo(t,n,o){n>=t.length?t.push(o):t.splice(n,0,o)}function xi(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Sl(t,n){const o=[];for(let c=0;c<t;c++)o.push(n);return o}function Xi(t,n,o){let c=gl(t,n);return c>=0?t[1|c]=o:(c=~c,function(t,n,o,c){let p=t.length;if(p==n)t.push(o,c);else if(1===p)t.push(c,t[0]),t[0]=o;else{for(p--,t.push(t[p-1],t[p]);p>n;)t[p]=t[p-2],p--;t[n]=o,t[n+1]=c}}(t,c,n,o)),c}function us(t,n){const o=gl(t,n);if(o>=0)return t[1|o]}function gl(t,n){return function(t,n,o){let c=0,p=t.length>>o;for(;p!==c;){const v=c+(p-c>>1),I=t[v<<o];if(n===I)return v<<o;I>n?p=v:c=v+1}return~(p<<o)}(t,n,1)}const As={},el="__NG_DI_FLAG__",_l="ngTempTokenPath",Yl=/\n/gm,qs="__source",F=xe({provide:String,useValue:xe});let $;function X(t){const n=$;return $=t,n}function fe(t,n=Lt.Default){if(void 0===$)throw new Error("inject() must be called from an injection context");return null===$?vn(t,void 0,n):$.get(t,n&Lt.Optional?null:void 0,n)}function Fe(t,n=Lt.Default){return(jt||fe)(Oe(t),n)}function un(t){const n=[];for(let o=0;o<t.length;o++){const c=Oe(t[o]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let p,v=Lt.Default;for(let I=0;I<c.length;I++){const x=c[I],P=kr(x);"number"==typeof P?-1===P?p=x.token:v|=P:p=x}n.push(Fe(p,v))}else n.push(Fe(c))}return n}function tn(t,n){return t[el]=n,t.prototype[el]=n,t}function kr(t){return t[el]}const es=tn(Lo("Inject",t=>({token:t})),-1),ri=tn(Lo("Optional"),8),ro=tn(Lo("SkipSelf"),4);let Ql;function ga(t){var n;return(null===(n=function(){if(void 0===Ql&&(Ql=null,ye.trustedTypes))try{Ql=ye.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Ql}())||void 0===n?void 0:n.createHTML(t))||t}class Zs{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ml(t){return t instanceof Zs?t.changingThisBreaksApplicationSecurity:t}class cc{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const o=(new window.DOMParser).parseFromString(ga(n),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(n):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class xd{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const c=this.inertDocument.createElement("body");o.appendChild(c)}}getInertBodyElement(n){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=ga(n),o;const c=this.inertDocument.createElement("body");return c.innerHTML=ga(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(n){const o=n.attributes;for(let p=o.length-1;0<p;p--){const I=o.item(p).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&n.removeAttribute(I)}let c=n.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const kd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function yu(t){return(t=String(t)).match(kd)||t.match(mh)?t:"unsafe:"+t}function vu(t){return(t=String(t)).split(",").map(n=>yu(n.trim())).join(", ")}function io(t){const n={};for(const o of t.split(","))n[o]=!0;return n}function Rl(...t){const n={};for(const o of t)for(const c in o)o.hasOwnProperty(c)&&(n[c]=!0);return n}const Xl=io("area,br,col,hr,img,wbr"),eu=io("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rl=io("rp,rt"),bl=Rl(Xl,Rl(eu,io("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rl(rl,io("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rl(rl,eu)),il=io("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),td=io("srcset"),Vu=Rl(il,td,io("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),io("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var w=(()=>((w=w||{})[w.NONE=0]="NONE",w[w.HTML=1]="HTML",w[w.STYLE=2]="STYLE",w[w.SCRIPT=3]="SCRIPT",w[w.URL=4]="URL",w[w.RESOURCE_URL=5]="RESOURCE_URL",w))();function ee(t){const n=function(){const t=bt();return t&&t[12]}();return n?n.sanitize(w.URL,t)||"":function(t,n){const o=function(t){return t instanceof Zs&&t.getTypeName()||null}(t);if(null!=o&&o!==n){if("ResourceURL"===o&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===n}(t,"URL")?Ml(t):yu(Ae(t))}const tu="__ngContext__";function ki(t,n){t[tu]=n}function nu(t){const n=function(t){return t[tu]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function sl(t){return t.ngOriginalError}function jo(t,...n){t.error(...n)}class oo{constructor(){this._console=console}handleError(n){const o=this._findOriginalError(n),c=(t=n)&&t.ngErrorLogger||jo;var t;c(this._console,"ERROR",n),o&&c(this._console,"ORIGINAL ERROR",o)}_findOriginalError(n){let o=n&&sl(n);for(;o&&sl(o);)o=sl(o);return o||null}}const Uu=/^>|^->|<!--|-->|--!>|<!-$/g,ta=/(<|>)/;const pf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ye))();function $a(t){return t instanceof Function?t():t}var Dl=(()=>((Dl=Dl||{})[Dl.Important=1]="Important",Dl[Dl.DashCase=2]="DashCase",Dl))();let Ll;function Ud(t,n){return Ll(t,n)}function gc(t){const n=t[3];return Ft(n)?n[3]:n}function ju(t){return _c(t[13])}function $u(t){return _c(t[4])}function _c(t){for(;null!==t&&!Ft(t);)t=t[4];return t}function Hu(t,n,o,c,p){if(null!=c){let v,I=!1;Ft(c)?v=c:At(c)&&(I=!0,c=c[0]);const x=V(c);0===t&&null!==o?null==p?ao(n,o,x):Fr(n,o,x,p||null,!0):1===t&&null!==o?Fr(n,o,x,p||null,!0):2===t?Op(n,x,I):3===t&&n.destroyNode(x),null!=v&&function(t,n,o,c,p){const v=o[7];v!==V(o)&&Hu(n,t,c,v,p);for(let x=10;x<o.length;x++){const P=o[x];Vc(P[1],P,t,n,c,v)}}(n,t,v,o,p)}}function wh(t,n){return Ir(t)?t.createText(n):t.createTextNode(n)}function xs(t,n,o){Ir(t)?t.setValue(n,o):n.textContent=o}function Mp(t,n){return t.createComment(function(t){return t.replace(Uu,n=>n.replace(ta,"\u200b$1\u200b"))}(n))}function m(t,n,o){return Ir(t)?t.createElement(n,o):null===o?t.createElement(n):t.createElementNS(o,n)}function se(t,n){const o=t[9],c=o.indexOf(n),p=n[3];1024&n[2]&&(n[2]&=-1025,kn(p,-1)),o.splice(c,1)}function pe(t,n){if(t.length<=10)return;const o=10+n,c=t[o];if(c){const p=c[17];null!==p&&p!==t&&se(p,c),n>0&&(t[o-1][4]=c[4]);const v=xi(t,10+n);!function(t,n){Vc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(c[1],c);const I=v[19];null!==I&&I.detachView(v[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Ce(t,n){if(!(256&n[2])){const o=n[11];Ir(o)&&o.destroyNode&&Vc(t,n,o,3,null,null),function(t){let n=t[13];if(!n)return st(t[1],t);for(;n;){let o=null;if(At(n))o=n[13];else{const c=n[10];c&&(o=c)}if(!o){for(;n&&!n[4]&&n!==t;)At(n)&&st(n[1],n),n=n[3];null===n&&(n=t),At(n)&&st(n[1],n),o=n&&n[4]}n=o}}(n)}}function st(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let c=0;c<o.length;c+=2){const p=n[o[c]];if(!(p instanceof fa)){const v=o[c+1];if(Array.isArray(v))for(let I=0;I<v.length;I+=2){const x=p[v[I]],P=v[I+1];try{P.call(x)}finally{}}else try{v.call(p)}finally{}}}}(t,n),function(t,n){const o=t.cleanup,c=n[7];let p=-1;if(null!==o)for(let v=0;v<o.length-1;v+=2)if("string"==typeof o[v]){const I=o[v+1],x="function"==typeof I?I(n):V(n[I]),P=c[p=o[v+2]],q=o[v+3];"boolean"==typeof q?x.removeEventListener(o[v],P,q):q>=0?c[p=q]():c[p=-q].unsubscribe(),v+=2}else{const I=c[p=o[v+1]];o[v].call(I)}if(null!==c){for(let v=p+1;v<c.length;v++)c[v]();n[7]=null}}(t,n),1===n[1].type&&Ir(n[11])&&n[11].destroy();const o=n[17];if(null!==o&&Ft(n[3])){o!==n[3]&&se(o,n);const c=n[19];null!==c&&c.detachView(t)}}}function pn(t,n,o){return zn(t,n.parent,o)}function zn(t,n,o){let c=n;for(;null!==c&&40&c.type;)c=(n=c).parent;if(null===c)return o[0];if(2&c.flags){const p=t.data[c.directiveStart].encapsulation;if(p===Ht.None||p===Ht.Emulated)return null}return De(c,o)}function Fr(t,n,o,c,p){Ir(t)?t.insertBefore(n,o,c,p):n.insertBefore(o,c,p)}function ao(t,n,o){Ir(t)?t.appendChild(n,o):n.appendChild(o)}function Vl(t,n,o,c,p){null!==c?Fr(t,n,o,c,p):ao(t,n,o)}function Gu(t,n){return Ir(t)?t.parentNode(n):n.parentNode}function em(t,n,o){return nm(t,n,o)}function tm(t,n,o){return 40&t.type?De(t,o):null}let Rp,nm=tm;function Dh(t,n){nm=t,Rp=n}function yc(t,n,o,c){const p=pn(t,c,n),v=n[11],x=em(c.parent||n[6],c,n);if(null!=p)if(Array.isArray(o))for(let P=0;P<o.length;P++)Vl(v,p,o[P],x,!1);else Vl(v,p,o,x,!1);void 0!==Rp&&Rp(v,c,n,o,p)}function Eh(t,n){if(null!==n){const o=n.type;if(3&o)return De(n,t);if(4&o)return xp(-1,t[n.index]);if(8&o){const c=n.child;if(null!==c)return Eh(t,c);{const p=t[n.index];return Ft(p)?xp(-1,p):V(p)}}if(32&o)return Ud(n,t)()||V(t[n.index]);{const c=rm(t,n);return null!==c?Array.isArray(c)?c[0]:Eh(gc(t[16]),c):Eh(t,n.next)}}return null}function rm(t,n){return null!==n?t[16][6].projection[n.projection]:null}function xp(t,n){const o=10+t+1;if(o<n.length){const c=n[o],p=c[1].firstChild;if(null!==p)return Eh(c,p)}return n[7]}function Op(t,n,o){const c=Gu(t,n);c&&function(t,n,o,c){Ir(t)?t.removeChild(n,o,c):n.removeChild(o)}(t,c,n,o)}function Wu(t,n,o,c,p,v,I){for(;null!=o;){const x=c[o.index],P=o.type;if(I&&0===n&&(x&&ki(V(x),c),o.flags|=4),64!=(64&o.flags))if(8&P)Wu(t,n,o.child,c,p,v,!1),Hu(n,t,p,x,v);else if(32&P){const q=Ud(o,c);let J;for(;J=q();)Hu(n,t,p,J,v);Hu(n,t,p,x,v)}else 16&P?kp(t,n,c,o,p,v):Hu(n,t,p,x,v);o=I?o.projectionNext:o.next}}function Vc(t,n,o,c,p,v){Wu(o,c,t.firstChild,n,p,v,!1)}function kp(t,n,o,c,p,v){const I=o[16],P=I[6].projection[c.projection];if(Array.isArray(P))for(let q=0;q<P.length;q++)Hu(n,t,p,P[q],v);else Wu(t,n,P,I[3],p,v,!0)}function $d(t,n,o){Ir(t)?t.setAttribute(n,"style",o):n.style.cssText=o}function Hd(t,n,o){Ir(t)?""===o?t.removeAttribute(n,"class"):t.setAttribute(n,"class",o):n.className=o}function _f(t,n,o){let c=t.length;for(;;){const p=t.indexOf(n,o);if(-1===p)return p;if(0===p||t.charCodeAt(p-1)<=32){const v=n.length;if(p+v===c||t.charCodeAt(p+v)<=32)return p}o=p+1}}const Lp="ng-template";function El(t,n,o){let c=0;for(;c<t.length;){let p=t[c++];if(o&&"class"===p){if(p=t[c],-1!==_f(p.toLowerCase(),n,0))return!0}else if(1===p){for(;c<t.length&&"string"==typeof(p=t[c++]);)if(p.toLowerCase()===n)return!0;return!1}}return!1}function ts(t){return 4===t.type&&t.value!==Lp}function yf(t,n,o){return n===(4!==t.type||o?t.value:Lp)}function vf(t,n,o){let c=4;const p=t.attrs||[],v=function(t){for(let n=0;n<t.length;n++)if(Ei(t[n]))return n;return t.length}(p);let I=!1;for(let x=0;x<n.length;x++){const P=n[x];if("number"!=typeof P){if(!I)if(4&c){if(c=2|1&c,""!==P&&!yf(t,P,o)||""===P&&1===n.length){if(ol(c))return!1;I=!0}}else{const q=8&c?P:n[++x];if(8&c&&null!==t.attrs){if(!El(t.attrs,q,o)){if(ol(c))return!1;I=!0}continue}const ce=bf(8&c?"class":P,p,ts(t),o);if(-1===ce){if(ol(c))return!1;I=!0;continue}if(""!==q){let Me;Me=ce>v?"":p[ce+1].toLowerCase();const Ke=8&c?Me:null;if(Ke&&-1!==_f(Ke,q,0)||2&c&&q!==Me){if(ol(c))return!1;I=!0}}}}else{if(!I&&!ol(c)&&!ol(P))return!1;if(I&&ol(P))continue;I=!1,c=P|1&c}}return ol(c)||I}function ol(t){return 0==(1&t)}function bf(t,n,o,c){if(null===n)return-1;let p=0;if(c||!o){let v=!1;for(;p<n.length;){const I=n[p];if(I===t)return p;if(3===I||6===I)v=!0;else{if(1===I||2===I){let x=n[++p];for(;"string"==typeof x;)x=n[++p];continue}if(4===I)break;if(0===I){p+=4;continue}}p+=v?1:2}return-1}return function(t,n){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const c=t[o];if("number"==typeof c)return-1;if(c===n)return o;o++}return-1}(n,t)}function Vp(t,n,o=!1){for(let c=0;c<n.length;c++)if(vf(t,n[c],o))return!0;return!1}function Th(t,n){e:for(let o=0;o<n.length;o++){const c=n[o];if(t.length===c.length){for(let p=0;p<t.length;p++)if(t[p]!==c[p])continue e;return!0}}return!1}function vc(t,n){return t?":not("+n.trim()+")":n}function ad(t){let n=t[0],o=1,c=2,p="",v=!1;for(;o<t.length;){let I=t[o];if("string"==typeof I)if(2&c){const x=t[++o];p+="["+I+(x.length>0?'="'+x+'"':"")+"]"}else 8&c?p+="."+I:4&c&&(p+=" "+I);else""!==p&&!ol(I)&&(n+=vc(v,p),p=""),c=I,v=v||!ol(c);o++}return""!==p&&(n+=vc(v,p)),n}const yr={};function bc(t){wc(er(),bt(),fi()+t,po())}function wc(t,n,o,c){if(!c)if(3==(3&n[2])){const v=t.preOrderCheckHooks;null!==v&&Ii(n,v,o)}else{const v=t.preOrderHooks;null!==v&&Is(n,v,0,o)}yo(o)}function Bc(t,n){return t<<17|n<<2}function al(t){return t>>17&32767}function Sh(t){return 2|t}function Cu(t){return(131068&t)>>2}function To(t,n){return-131069&t|n<<2}function Bp(t){return 1|t}function Gp(t,n){const o=t.contentQueries;if(null!==o)for(let c=0;c<o.length;c+=2){const p=o[c],v=o[c+1];if(-1!==v){const I=t.data[v];hl(p),I.contentQueries(2,n[v],v)}}}function Uc(t,n,o,c,p,v,I,x,P,q){const J=n.blueprint.slice();return J[0]=p,J[2]=140|c,_r(J),J[3]=J[15]=t,J[8]=o,J[10]=I||t&&t[10],J[11]=x||t&&t[11],J[12]=P||t&&t[12]||null,J[9]=q||t&&t[9]||null,J[6]=v,J[16]=2==n.type?t[16]:J,J}function Su(t,n,o,c,p){let v=t.data[n];if(null===v)v=hd(t,n,o,c,p),Sn.lFrame.inI18n&&(v.flags|=64);else if(64&v.type){v.type=o,v.value=c,v.attrs=p;const I=la();v.injectorIndex=null===I?-1:I.injectorIndex}return eo(v,!0),v}function hd(t,n,o,c,p){const v=cl(),I=Wa(),P=t.data[n]=function(t,n,o,c,p,v){return{type:o,index:c,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?v:v&&v.parent,o,n,c,p);return null===t.firstChild&&(t.firstChild=P),null!==v&&(I?null==v.child&&null!==P.parent&&(v.child=P):null===v.next&&(v.next=P)),P}function Cc(t,n,o,c){if(0===o)return-1;const p=n.length;for(let v=0;v<o;v++)n.push(c),t.blueprint.push(c),t.data.push(null);return p}function ru(t,n,o){Us(n);try{const c=t.viewQuery;null!==c&&th(1,c,o);const p=t.template;null!==p&&xf(t,n,p,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gp(t,n),t.staticViewQueries&&th(2,t.viewQuery,o);const v=t.components;null!==v&&function(t,n){for(let o=0;o<n.length;o++)$_(t,n[o])}(n,v)}catch(c){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),c}finally{n[2]&=-5,$s()}}function Ku(t,n,o,c){const p=n[2];if(256==(256&p))return;Us(n);const v=po();try{_r(n),function(t){Sn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&xf(t,n,o,2,c);const I=3==(3&p);if(!v)if(I){const q=t.preOrderCheckHooks;null!==q&&Ii(n,q,null)}else{const q=t.preOrderHooks;null!==q&&Is(n,q,0,null),ha(n,0)}if(function(t){for(let n=ju(t);null!==n;n=$u(n)){if(!n[2])continue;const o=n[9];for(let c=0;c<o.length;c++){const p=o[c],v=p[3];0==(1024&p[2])&&kn(v,1),p[2]|=1024}}}(n),function(t){for(let n=ju(t);null!==n;n=$u(n))for(let o=10;o<n.length;o++){const c=n[o],p=c[1];fr(c)&&Ku(p,c,p.template,c[8])}}(n),null!==t.contentQueries&&Gp(t,n),!v)if(I){const q=t.contentCheckHooks;null!==q&&Ii(n,q)}else{const q=t.contentHooks;null!==q&&Is(n,q,1),ha(n,1)}!function(t,n){const o=t.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const p=o[c];if(p<0)yo(~p);else{const v=p,I=o[++c],x=o[++c];go(I,v),x(2,n[v])}}}finally{yo(-1)}}(t,n);const x=t.components;null!==x&&function(t,n){for(let o=0;o<n.length;o++)j_(t,n[o])}(n,x);const P=t.viewQuery;if(null!==P&&th(2,P,c),!v)if(I){const q=t.viewCheckHooks;null!==q&&Ii(n,q)}else{const q=t.viewHooks;null!==q&&Is(n,q,2),ha(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),v||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,kn(n[3],-1))}finally{$s()}}function qp(t,n,o,c){const p=n[10],v=!po(),I=Sr(n);try{v&&!I&&p.begin&&p.begin(),I&&ru(t,n,c),Ku(t,n,o,c)}finally{v&&!I&&p.end&&p.end()}}function xf(t,n,o,c,p){const v=fi(),I=2&c;try{yo(-1),I&&n.length>20&&wc(t,n,20,po()),o(c,p)}finally{yo(v)}}function kf(t,n,o){!_s()||(function(t,n,o,c){const p=o.directiveStart,v=o.directiveEnd;t.firstCreatePass||B(o,n),ki(c,n);const I=o.initialInputs;for(let x=p;x<v;x++){const P=t.data[x],q=Xn(P);q&&fm(n,o,P);const J=ui(n,t,x,o);ki(J,n),null!==I&&ig(0,x-p,J,P,0,I),q&&(mn(o.index,n)[8]=J)}}(t,n,o,De(o,n)),128==(128&o.flags)&&function(t,n,o){const c=o.directiveStart,p=o.directiveEnd,I=o.index,x=Sn.lFrame.currentDirectiveIndex;try{yo(I);for(let P=c;P<p;P++){const q=t.data[P],J=n[P];da(P),(null!==q.hostBindings||0!==q.hostVars||null!==q.hostAttrs)&&Uf(q,J)}}finally{yo(-1),da(x)}}(t,n,o))}function kh(t,n,o=De){const c=n.localNames;if(null!==c){let p=n.index+1;for(let v=0;v<c.length;v+=2){const I=c[v+1],x=-1===I?o(n,t):t[I];t[p++]=x}}}function Ph(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Fh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Fh(t,n,o,c,p,v,I,x,P,q){const J=20+c,ce=J+p,Me=function(t,n){const o=[];for(let c=0;c<n;c++)o.push(c<t?null:yr);return o}(J,ce),Ke="function"==typeof q?q():q;return Me[1]={type:t,blueprint:Me,template:o,queries:null,viewQuery:x,declTNode:n,data:Me.slice().fill(null,J),bindingStartIndex:J,expandoStartIndex:ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:P,consts:Ke,incompleteFirstPass:!1}}function Lf(t,n,o,c){const p=Hh(n);null===o?p.push(c):(p.push(o),t.firstCreatePass&&Gh(t).push(c,p.length-1))}function Vf(t,n,o){for(let c in t)if(t.hasOwnProperty(c)){const p=t[c];(o=null===o?{}:o).hasOwnProperty(c)?o[c].push(n,p):o[c]=[n,p]}return o}function va(t,n,o,c,p,v,I,x){const P=De(n,o);let J,q=n.inputs;!x&&null!=q&&(J=q[c])?(Wh(t,o,J,c,p),Dn(n)&&function(t,n){const o=mn(n,t);16&o[2]||(o[2]|=64)}(o,n.index)):3&n.type&&(c=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(c),p=null!=I?I(p,n.value||"",c):p,Ir(v)?v.setProperty(P,c,p):Qi(c)||(P.setProperty?P.setProperty(c,p):P[c]=p))}function Vh(t,n,o,c){let p=!1;if(_s()){const v=function(t,n,o){const c=t.directiveRegistry;let p=null;if(c)for(let v=0;v<c.length;v++){const I=c[v];Vp(o,I.selectors,!1)&&(p||(p=[]),we(B(o,n),t,I.type),Xn(I)?(dm(t,o),p.unshift(I)):p.push(I))}return p}(t,n,o),I=null===c?null:{"":-1};if(null!==v){p=!0,tg(o,t.data.length,v.length);for(let J=0;J<v.length;J++){const ce=v[J];ce.providersResolver&&ce.providersResolver(ce)}let x=!1,P=!1,q=Cc(t,n,v.length,null);for(let J=0;J<v.length;J++){const ce=v[J];o.mergedAttrs=Ra(o.mergedAttrs,ce.hostAttrs),ng(t,o,n,q,ce),eg(q,ce,I),null!==ce.contentQueries&&(o.flags|=8),(null!==ce.hostBindings||null!==ce.hostAttrs||0!==ce.hostVars)&&(o.flags|=128);const Me=ce.type.prototype;!x&&(Me.ngOnChanges||Me.ngOnInit||Me.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(o.index),x=!0),!P&&(Me.ngOnChanges||Me.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(o.index),P=!0),q++}!function(t,n){const c=n.directiveEnd,p=t.data,v=n.attrs,I=[];let x=null,P=null;for(let q=n.directiveStart;q<c;q++){const J=p[q],ce=J.inputs,Me=null===v||ts(n)?null:U_(ce,v);I.push(Me),x=Vf(ce,q,x),P=Vf(J.outputs,q,P)}null!==x&&(x.hasOwnProperty("class")&&(n.flags|=16),x.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=I,n.inputs=x,n.outputs=P}(t,o)}I&&function(t,n,o){if(n){const c=t.localNames=[];for(let p=0;p<n.length;p+=2){const v=o[n[p+1]];if(null==v)throw new ut("301",`Export of name '${n[p+1]}' not found!`);c.push(n[p],v)}}}(o,c,I)}return o.mergedAttrs=Ra(o.mergedAttrs,o.attrs),p}function Bf(t,n,o,c,p,v){const I=v.hostBindings;if(I){let x=t.hostBindingOpCodes;null===x&&(x=t.hostBindingOpCodes=[]);const P=~n.index;(function(t){let n=t.length;for(;n>0;){const o=t[--n];if("number"==typeof o&&o<0)return o}return 0})(x)!=P&&x.push(P),x.push(c,p,I)}}function Uf(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function dm(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function eg(t,n,o){if(o){if(n.exportAs)for(let c=0;c<n.exportAs.length;c++)o[n.exportAs[c]]=t;Xn(n)&&(o[""]=t)}}function tg(t,n,o){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+o,t.providerIndexes=n}function ng(t,n,o,c,p){t.data[c]=p;const v=p.factory||(p.factory=li(p.type)),I=new fa(v,Xn(p),null);t.blueprint[c]=I,o[c]=I,Bf(t,n,0,c,Cc(t,o,p.hostVars,yr),p)}function fm(t,n,o){const c=De(n,t),p=Ph(o),v=t[10],I=eh(t,Uc(t,p,null,o.onPush?64:16,c,n,v,v.createRenderer(c,o),null,null));t[n.index]=I}function rg(t,n,o,c,p,v,I){if(null==v)Ir(t)?t.removeAttribute(n,p,o):n.removeAttribute(p);else{const x=null==I?Ae(v):I(v,c||"",p);Ir(t)?t.setAttribute(n,p,x,o):o?n.setAttributeNS(o,p,x):n.setAttribute(p,x)}}function ig(t,n,o,c,p,v){const I=v[n];if(null!==I){const x=c.setInput;for(let P=0;P<I.length;){const q=I[P++],J=I[P++],ce=I[P++];null!==x?c.setInput(o,ce,q,J):o[J]=ce}}}function U_(t,n){let o=null,c=0;for(;c<n.length;){const p=n[c];if(0!==p)if(5!==p){if("number"==typeof p)break;t.hasOwnProperty(p)&&(null===o&&(o=[]),o.push(p,t[p],n[c+1])),c+=2}else c+=2;else c+=4}return o}function $f(t,n,o,c){return new Array(t,!0,!1,n,null,0,c,o,null,null)}function j_(t,n){const o=mn(n,t);if(fr(o)){const c=o[1];80&o[2]?Ku(c,o,c.template,o[8]):o[5]>0&&Uh(o)}}function Uh(t){for(let c=ju(t);null!==c;c=$u(c))for(let p=10;p<c.length;p++){const v=c[p];if(1024&v[2]){const I=v[1];Ku(I,v,I.template,v[8])}else v[5]>0&&Uh(v)}const o=t[1].components;if(null!==o)for(let c=0;c<o.length;c++){const p=mn(o[c],t);fr(p)&&p[5]>0&&Uh(p)}}function $_(t,n){const o=mn(n,t),c=o[1];(function(t,n){for(let o=n.length;o<t.blueprint.length;o++)n.push(t.blueprint[o])})(c,o),ru(c,o,o[8])}function eh(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function jh(t){for(;t;){t[2]|=64;const n=gc(t);if(gi(t)&&!n)return t;t=n}return null}function $h(t,n,o){const c=n[10];c.begin&&c.begin();try{Ku(t,n,t.template,o)}catch(p){throw zf(n,p),p}finally{c.end&&c.end()}}function Hf(t){!function(t){for(let n=0;n<t.components.length;n++){const o=t.components[n],c=nu(o),p=c[1];qp(p,c,p.template,o)}}(t[8])}function th(t,n,o){hl(0),n(t,o)}const Wf=(()=>Promise.resolve(null))();function Hh(t){return t[7]||(t[7]=[])}function Gh(t){return t.cleanup||(t.cleanup=[])}function zf(t,n){const o=t[9],c=o?o.get(oo,null):null;c&&c.handleError(n)}function Wh(t,n,o,c,p){for(let v=0;v<o.length;){const I=o[v++],x=o[v++],P=n[I],q=t.data[I];null!==q.setInput?q.setInput(P,p,c,x):P[x]=p}}function fd(t,n,o){let c=o?t.styles:null,p=o?t.classes:null,v=0;if(null!==n)for(let I=0;I<n.length;I++){const x=n[I];"number"==typeof x?v=x:1==v?p=$e(p,x):2==v&&(c=$e(c,x+": "+n[++I]+";"))}o?t.styles=c:t.stylesWithoutHost=c,o?t.classes=p:t.classesWithoutHost=p}const Tc=new Qr("INJECTOR",-1);class nh{get(n,o=As){if(o===As){const c=new Error(`NullInjectorError: No provider for ${de(n)}!`);throw c.name="NullInjectorError",c}return o}}const qf=new Qr("Set Injector scope."),Ic={},Zf={};let Sc;function mm(){return void 0===Sc&&(Sc=new nh),Sc}function pd(t,n=null,o=null,c){const p=lg(t,n,o,c);return p._resolveInjectorDefTypes(),p}function lg(t,n=null,o=null,c){return new Kf(t,o,n||mm(),c)}class Kf{constructor(n,o,c,p=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const v=[];o&&zi(o,x=>this.processProvider(x,n,o)),zi([n],x=>this.processInjectorType(x,[],v)),this.records.set(Tc,rh(void 0,this));const I=this.records.get(qf);this.scope=null!=I?I.value:null,this.source=p||("object"==typeof n?null:de(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,o=As,c=Lt.Default){this.assertNotDestroyed();const p=X(this),v=Ar(void 0);try{if(!(c&Lt.SkipSelf)){let x=this.records.get(n);if(void 0===x){const P=("function"==typeof(t=n)||"object"==typeof t&&t instanceof Qr)&&cr(n);x=P&&this.injectableDefInScope(P)?rh(zh(n),Ic):null,this.records.set(n,x)}if(null!=x)return this.hydrate(n,x)}return(c&Lt.Self?mm():this.parent).get(n,o=c&Lt.Optional&&o===As?null:o)}catch(I){if("NullInjectorError"===I.name){if((I[_l]=I[_l]||[]).unshift(de(n)),p)throw I;return function(t,n,o,c){const p=t[_l];throw n[qs]&&p.unshift(n[qs]),t.message=function(t,n,o,c=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let p=de(n);if(Array.isArray(n))p=n.map(de).join(" -> ");else if("object"==typeof n){let v=[];for(let I in n)if(n.hasOwnProperty(I)){let x=n[I];v.push(I+":"+("string"==typeof x?JSON.stringify(x):de(x)))}p=`{${v.join(", ")}}`}return`${o}${c?"("+c+")":""}[${p}]: ${t.replace(Yl,"\n  ")}`}("\n"+t.message,p,o,c),t.ngTokenPath=p,t[_l]=null,t}(I,n,"R3InjectorError",this.source)}throw I}finally{Ar(v),X(p)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((c,p)=>n.push(de(p))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,o,c){if(!(n=Oe(n)))return!1;let p=Xr(n);const v=null==p&&n.ngModule||void 0,I=void 0===v?n:v,x=-1!==c.indexOf(I);if(void 0!==v&&(p=Xr(v)),null==p)return!1;if(null!=p.imports&&!x){let J;c.push(I);try{zi(p.imports,ce=>{this.processInjectorType(ce,o,c)&&(void 0===J&&(J=[]),J.push(ce))})}finally{}if(void 0!==J)for(let ce=0;ce<J.length;ce++){const{ngModule:Me,providers:Ke}=J[ce];zi(Ke,vt=>this.processProvider(vt,Me,Ke||oe))}}this.injectorDefTypes.add(I);const P=li(I)||(()=>new I);this.records.set(I,rh(P,Ic));const q=p.providers;if(null!=q&&!x){const J=n;zi(q,ce=>this.processProvider(ce,J,q))}return void 0!==v&&void 0!==n.providers}processProvider(n,o,c){let p=Hc(n=Oe(n))?n:Oe(n&&n.provide);const v=(t=n,Qf(t)?rh(void 0,t.useValue):rh(cg(t),Ic));var t;if(Hc(n)||!0!==n.multi)this.records.get(p);else{let I=this.records.get(p);I||(I=rh(void 0,Ic,!0),I.factory=()=>un(I.multi),this.records.set(p,I)),p=n,I.multi.push(n)}this.records.set(p,v)}hydrate(n,o){return o.value===Ic&&(o.value=Zf,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(t=o.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const o=Oe(n.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function zh(t){const n=cr(t),o=null!==n?n.factory:li(t);if(null!==o)return o;if(t instanceof Qr)throw new Error(`Token ${de(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const c=Sl(n,"?");throw new Error(`Can't resolve all parameters for ${de(t)}: (${c.join(", ")}).`)}const o=function(t){const n=t&&(t[wt]||t[Mr]);if(n){const o=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),n}return null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new Error("unreachable")}function cg(t,n,o){let c;if(Hc(t)){const p=Oe(t);return li(p)||zh(p)}if(Qf(t))c=()=>Oe(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))c=()=>t.useFactory(...un(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))c=()=>Fe(Oe(t.useExisting));else{const p=Oe(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return li(p)||zh(p);c=()=>new p(...un(t.deps))}return c}function rh(t,n,o=!1){return{factory:t,value:n,multi:o?[]:void 0}}function Qf(t){return null!==t&&"object"==typeof t&&F in t}function Hc(t){return"function"==typeof t}let iu=(()=>{class t{static create(o,c){var p;if(Array.isArray(o))return pd({name:""},c,o,"");{const v=null!==(p=o.name)&&void 0!==p?p:"";return pd({name:v},o.parent,o.providers,v)}}}return t.THROW_IF_NOT_FOUND=As,t.NULL=new nh,t.\u0275prov=Ln({token:t,providedIn:"any",factory:()=>Fe(Tc)}),t.__NG_ELEMENT_ID__=-1,t})();function K_(t,n){tr(nu(t)[1],ar())}function yg(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const c=[t];for(;n;){let p;if(Xn(t))p=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");p=n.\u0275dir}if(p){if(o){c.push(p);const I=t;I.inputs=Gc(t.inputs),I.declaredInputs=Gc(t.declaredInputs),I.outputs=Gc(t.outputs);const x=p.hostBindings;x&&Nm(t,x);const P=p.viewQuery,q=p.contentQueries;if(P&&Am(t,P),q&&vg(t,q),Be(t.inputs,p.inputs),Be(t.declaredInputs,p.declaredInputs),Be(t.outputs,p.outputs),Xn(p)&&p.data.animation){const J=t.data;J.animation=(J.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let I=0;I<v.length;I++){const x=v[I];x&&x.ngInherit&&x(t),x===yg&&(o=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,o=null;for(let c=t.length-1;c>=0;c--){const p=t[c];p.hostVars=n+=p.hostVars,p.hostAttrs=Ra(p.hostAttrs,o=Ra(o,p.hostAttrs))}}(c)}function Gc(t){return t===ie?{}:t===oe?[]:t}function Am(t,n){const o=t.viewQuery;t.viewQuery=o?(c,p)=>{n(c,p),o(c,p)}:n}function vg(t,n){const o=t.contentQueries;t.contentQueries=o?(c,p,v)=>{n(c,p,v),o(c,p,v)}:n}function Nm(t,n){const o=t.hostBindings;t.hostBindings=o?(c,p)=>{n(c,p),o(c,p)}:n}let Jr=null;function md(){if(!Jr){const t=ye.Symbol;if(t&&t.iterator)Jr=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<n.length;++o){const c=n[o];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Jr=c)}}}return Jr}function Ac(t){return!!$o(t)&&(Array.isArray(t)||!(t instanceof Map)&&md()in t)}function $o(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ys(t,n,o){return t[n]=o}function ba(t,n,o){return!Object.is(t[n],o)&&(t[n]=o,!0)}function Wc(t,n,o,c){const p=ba(t,n,o);return ba(t,n+1,c)||p}function rp(t,n,o,c){const p=bt();return ba(p,ca(),n)&&(er(),function(t,n,o,c,p,v){const I=De(t,n);rg(n[11],I,v,t.value,o,c,p)}(Ur(),p,t,n,o,c)),rp}function vd(t,n,o,c){return ba(t,ca(),o)?n+Ae(o)+c:yr}function Xu(t,n,o,c,p,v,I,x){const P=bt(),q=er(),J=t+20,ce=q.firstCreatePass?function(t,n,o,c,p,v,I,x,P){const q=n.consts,J=Su(n,t,4,I||null,Br(q,x));Vh(n,o,J,Br(q,P)),tr(n,J);const ce=J.tViews=Fh(2,J,c,p,v,n.directiveRegistry,n.pipeRegistry,null,n.schemas,q);return null!==n.queries&&(n.queries.template(n,J),ce.queries=n.queries.embeddedTView(J)),J}(J,q,P,n,o,c,p,v,I):q.data[J];eo(ce,!1);const Me=P[11].createComment("");yc(q,P,Me,ce),ki(Me,P),eh(P,P[J]=$f(Me,P,Me,ce)),ei(ce)&&kf(q,P,ce),null!=I&&kh(P,ce,x)}function Mc(t){return function(t,n){return t[n]}(Sn.lFrame.contextLView,20+t)}function ef(t,n=Lt.Default){const o=bt();return null===o?Fe(t,n):En(ar(),o,Oe(t),n)}function zm(){throw new Error("invalid")}function hp(t,n,o){const c=bt();return ba(c,ca(),n)&&va(er(),Ur(),c,t,n,c[11],o,!1),hp}function Ng(t,n,o,c,p){const I=p?"class":"style";Wh(t,o,n.inputs[I],I,c)}function fp(t,n,o,c){const p=bt(),v=er(),I=20+t,x=p[11],P=p[I]=m(x,n,Sn.lFrame.currentNamespace),q=v.firstCreatePass?function(t,n,o,c,p,v,I){const x=n.consts,q=Su(n,t,2,p,Br(x,v));return Vh(n,o,q,Br(x,I)),null!==q.attrs&&fd(q,q.attrs,!1),null!==q.mergedAttrs&&fd(q,q.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,q),q}(I,v,p,0,n,o,c):v.data[I];eo(q,!0);const J=q.mergedAttrs;null!==J&&Vt(x,P,J);const ce=q.classes;null!==ce&&Hd(x,P,ce);const Me=q.styles;null!==Me&&$d(x,P,Me),64!=(64&q.flags)&&yc(v,p,P,q),0===Sn.lFrame.elementDepthCount&&ki(P,p),Sn.lFrame.elementDepthCount++,ei(q)&&(kf(v,p,q),function(t,n,o){if(sr(n)){const p=n.directiveEnd;for(let v=n.directiveStart;v<p;v++){const I=t.data[v];I.contentQueries&&I.contentQueries(1,o[v],v)}}}(v,q,p)),null!==c&&kh(p,q)}function Mg(){let t=ar();Wa()?Aa():(t=t.parent,eo(t,!1));const n=t;Sn.lFrame.elementDepthCount--;const o=er();o.firstCreatePass&&(tr(o,t),sr(t)&&o.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&Ng(o,n,bt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&Ng(o,n,bt(),n.stylesWithoutHost,!1)}function qm(t,n,o,c){fp(t,n,o,c),Mg()}function xg(){return bt()}function pp(t){return!!t&&"function"==typeof t.then}function gp(t){return!!t&&"function"==typeof t.subscribe}const tf=gp;function Og(t,n,o,c){const p=bt(),v=er(),I=ar();return function(t,n,o,c,p,v,I,x){const P=ei(c),J=t.firstCreatePass&&Gh(t),ce=n[8],Me=Hh(n);let Ke=!0;if(3&c.type||x){const cn=De(c,n),xn=x?x(cn):cn,St=Me.length,nr=x?di=>x(V(di[c.index])):c.index;if(Ir(o)){let di=null;if(!x&&P&&(di=function(t,n,o,c){const p=t.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const I=p[v];if(I===o&&p[v+1]===c){const x=n[7],P=p[v+2];return x.length>P?x[P]:null}"string"==typeof I&&(v+=2)}return null}(t,n,p,c.index)),null!==di)(di.__ngLastListenerFn__||di).__ngNextListenerFn__=v,di.__ngLastListenerFn__=v,Ke=!1;else{v=Pg(c,n,ce,v,!1);const ns=o.listen(xn,p,v);Me.push(v,ns),J&&J.push(p,nr,St,St+1)}}else v=Pg(c,n,ce,v,!0),xn.addEventListener(p,v,I),Me.push(v),J&&J.push(p,nr,St,I)}else v=Pg(c,n,ce,v,!1);const vt=c.outputs;let Yt;if(Ke&&null!==vt&&(Yt=vt[p])){const cn=Yt.length;if(cn)for(let xn=0;xn<cn;xn+=2){const rc=n[Yt[xn]][Yt[xn+1]].subscribe(v),Tp=Me.length;Me.push(v,rc),J&&J.push(p,c.index,Tp,-(Tp+1))}}}(v,p,p[11],I,t,n,!!o,c),Og}function Yc(t,n,o,c){try{return!1!==o(c)}catch(p){return zf(t,p),!1}}function Pg(t,n,o,c,p){return function v(I){if(I===Function)return c;const x=2&t.flags?mn(t.index,n):n;0==(32&n[2])&&jh(x);let P=Yc(n,0,c,I),q=v.__ngNextListenerFn__;for(;q;)P=Yc(n,0,q,I)&&P,q=q.__ngNextListenerFn__;return p&&!1===P&&(I.preventDefault(),I.returnValue=!1),P}}function Qm(t=1){return function(t){return(Sn.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,Sn.lFrame.contextLView))[8]}(t)}function sy(t,n){let o=null;const c=function(t){const n=t.attrs;if(null!=n){const o=n.indexOf(5);if(0==(1&o))return n[o+1]}return null}(t);for(let p=0;p<n.length;p++){const v=n[p];if("*"!==v){if(null===c?Vp(t,v,!0):Th(c,v))return p}else o=p}return o}function Jm(t){const n=bt()[16][6];if(!n.projection){const c=n.projection=Sl(t?t.length:1,null),p=c.slice();let v=n.child;for(;null!==v;){const I=t?sy(v,t):0;null!==I&&(p[I]?p[I].projectionNext=v:c[I]=v,p[I]=v),v=v.next}}}function Xm(t,n=0,o){const c=bt(),p=er(),v=Su(p,20+t,16,null,o||null);null===v.projection&&(v.projection=n),Aa(),64!=(64&v.flags)&&function(t,n,o){kp(n[11],0,n,o,pn(t,o,n),em(o.parent||n[6],o,n))}(p,c,v)}function Fg(t,n,o){return mp(t,"",n,"",o),Fg}function mp(t,n,o,c,p){const v=bt(),I=vd(v,n,o,c);return I!==yr&&va(er(),Ur(),v,t,I,v[11],p,!1),mp}function s_(t,n,o,c,p){const v=t[o+1],I=null===n;let x=c?al(v):Cu(v),P=!1;for(;0!==x&&(!1===P||I);){const J=t[x+1];ly(t[x],n)&&(P=!0,t[x+1]=c?Bp(J):Sh(J)),x=c?al(J):Cu(J)}P&&(t[o+1]=c?Sh(v):Bp(v))}function ly(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&gl(t,n)>=0}const ra={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function i(t){return t.substring(ra.key,ra.keyEnd)}function l(t,n){const o=ra.textEnd;return o===n?-1:(n=ra.keyEnd=function(t,n,o){for(;n<o&&t.charCodeAt(n)>32;)n++;return n}(t,ra.key=n,o),U(t,n,o))}function U(t,n,o){for(;n<o&&t.charCodeAt(n)<=32;)n++;return n}function Wt(t,n,o){return Ho(t,n,o,!1),Wt}function jn(t,n){return Ho(t,n,null,!0),jn}function wa(t){Da(Xi,ai,t,!0)}function ai(t,n){for(let o=function(t){return function(t){ra.key=0,ra.keyEnd=0,ra.value=0,ra.valueEnd=0,ra.textEnd=t.length}(t),l(t,U(t,0,ra.textEnd))}(n);o>=0;o=l(n,o))Xi(t,i(n),!0)}function Ho(t,n,o,c){const p=bt(),v=er(),I=ls(2);v.firstUpdatePass&&yp(v,t,I,c),n!==yr&&ba(p,I,n)&&dy(v,v.data[fi()],p,p[11],t,p[I+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=de(Ml(t)))),t}(n,o),c,I)}function Da(t,n,o,c){const p=er(),v=ls(2);p.firstUpdatePass&&yp(p,null,v,c);const I=bt();if(o!==yr&&ba(I,v,o)){const x=p.data[fi()];if(py(x,c)&&!Vg(p,v)){let P=c?x.classesWithoutHost:x.stylesWithoutHost;null!==P&&(o=$e(P,o||"")),Ng(p,x,I,o,c)}else!function(t,n,o,c,p,v,I,x){p===yr&&(p=oe);let P=0,q=0,J=0<p.length?p[0]:null,ce=0<v.length?v[0]:null;for(;null!==J||null!==ce;){const Me=P<p.length?p[P+1]:void 0,Ke=q<v.length?v[q+1]:void 0;let Yt,vt=null;J===ce?(P+=2,q+=2,Me!==Ke&&(vt=ce,Yt=Ke)):null===ce||null!==J&&J<ce?(P+=2,vt=J):(q+=2,vt=ce,Yt=Ke),null!==vt&&dy(t,n,o,c,vt,Yt,I,x),J=P<p.length?p[P]:null,ce=q<v.length?v[q]:null}}(p,x,I,I[11],I[v+1],I[v+1]=function(t,n,o){if(null==o||""===o)return oe;const c=[],p=Ml(o);if(Array.isArray(p))for(let v=0;v<p.length;v++)t(c,p[v],!0);else if("object"==typeof p)for(const v in p)p.hasOwnProperty(v)&&t(c,v,p[v]);else"string"==typeof p&&n(c,p);return c}(t,n,o),c,v)}}function Vg(t,n){return n>=t.expandoStartIndex}function yp(t,n,o,c){const p=t.data;if(null===p[o+1]){const v=p[fi()],I=Vg(t,o);py(v,c)&&null===n&&!I&&(n=!1),n=function(t,n,o,c){const p=function(t){const n=Sn.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let v=c?n.residualClasses:n.residualStyles;if(null===p)0===(c?n.classBindings:n.styleBindings)&&(o=vp(o=Bg(null,t,n,o,c),n.attrs,c),v=null);else{const I=n.directiveStylingLast;if(-1===I||t[I]!==p)if(o=Bg(p,t,n,o,c),null===v){let P=function(t,n,o){const c=o?n.classBindings:n.styleBindings;if(0!==Cu(c))return t[al(c)]}(t,n,c);void 0!==P&&Array.isArray(P)&&(P=Bg(null,t,n,P[1],c),P=vp(P,n.attrs,c),function(t,n,o,c){t[al(o?n.classBindings:n.styleBindings)]=c}(t,n,c,P))}else v=function(t,n,o){let c;const p=n.directiveEnd;for(let v=1+n.directiveStylingLast;v<p;v++)c=vp(c,t[v].hostAttrs,o);return vp(c,n.attrs,o)}(t,n,c)}return void 0!==v&&(c?n.residualClasses=v:n.residualStyles=v),o}(p,v,n,c),function(t,n,o,c,p,v){let I=v?n.classBindings:n.styleBindings,x=al(I),P=Cu(I);t[c]=o;let J,q=!1;if(Array.isArray(o)){const ce=o;J=ce[1],(null===J||gl(ce,J)>0)&&(q=!0)}else J=o;if(p)if(0!==P){const Me=al(t[x+1]);t[c+1]=Bc(Me,x),0!==Me&&(t[Me+1]=To(t[Me+1],c)),t[x+1]=function(t,n){return 131071&t|n<<17}(t[x+1],c)}else t[c+1]=Bc(x,0),0!==x&&(t[x+1]=To(t[x+1],c)),x=c;else t[c+1]=Bc(P,0),0===x?x=c:t[P+1]=To(t[P+1],c),P=c;q&&(t[c+1]=Sh(t[c+1])),s_(t,J,c,!0),s_(t,J,c,!1),function(t,n,o,c,p){const v=p?t.residualClasses:t.residualStyles;null!=v&&"string"==typeof n&&gl(v,n)>=0&&(o[c+1]=Bp(o[c+1]))}(n,J,t,c,v),I=Bc(x,P),v?n.classBindings=I:n.styleBindings=I}(p,v,n,o,I,c)}}function Bg(t,n,o,c,p){let v=null;const I=o.directiveEnd;let x=o.directiveStylingLast;for(-1===x?x=o.directiveStart:x++;x<I&&(v=n[x],c=vp(c,v.hostAttrs,p),v!==t);)x++;return null!==t&&(o.directiveStylingLast=x),c}function vp(t,n,o){const c=o?1:2;let p=-1;if(null!==n)for(let v=0;v<n.length;v++){const I=n[v];"number"==typeof I?p=I:p===c&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Xi(t,I,!!o||n[++v]))}return void 0===t?null:t}function dy(t,n,o,c,p,v,I,x){if(!(3&n.type))return;const P=t.data,q=P[x+1];nf(function(t){return 1==(1&t)}(q)?hy(P,n,o,p,Cu(q),I):void 0)||(nf(v)||function(t){return 2==(2&t)}(q)&&(v=hy(P,null,o,p,x,I)),function(t,n,o,c,p){const v=Ir(t);if(n)p?v?t.addClass(o,c):o.classList.add(c):v?t.removeClass(o,c):o.classList.remove(c);else{let I=-1===c.indexOf("-")?void 0:Dl.DashCase;if(null==p)v?t.removeStyle(o,c,I):o.style.removeProperty(c);else{const x="string"==typeof p&&p.endsWith("!important");x&&(p=p.slice(0,-10),I|=Dl.Important),v?t.setStyle(o,c,p,I):o.style.setProperty(c,p,x?"important":"")}}}(c,I,ne(fi(),o),p,v))}function hy(t,n,o,c,p,v){const I=null===n;let x;for(;p>0;){const P=t[p],q=Array.isArray(P),J=q?P[1]:P,ce=null===J;let Me=o[p+1];Me===yr&&(Me=ce?oe:void 0);let Ke=ce?us(Me,c):J===c?Me:void 0;if(q&&!nf(Ke)&&(Ke=us(P,c)),nf(Ke)&&(x=Ke,I))return x;const vt=t[p+1];p=I?al(vt):Cu(vt)}if(null!==n){let P=v?n.residualClasses:n.residualStyles;null!=P&&(x=us(P,c))}return x}function nf(t){return void 0!==t}function py(t,n){return 0!=(t.flags&(n?16:32))}function rf(t,n=""){const o=bt(),c=er(),p=t+20,v=c.firstCreatePass?Su(c,p,1,n,null):c.data[p],I=o[p]=wh(o[11],n);yc(c,o,I,v),eo(v,!1)}function lh(t){return Ea("",t,""),lh}function Ea(t,n,o){const c=bt(),p=vd(c,t,n,o);return p!==yr&&function(t,n,o){const c=ne(n,t);xs(t[11],c,o)}(c,fi(),p),Ea}function Ug(t,n,o){Da(Xi,ai,vd(bt(),t,n,o),!0)}function wp(t,n,o){const c=bt();return ba(c,ca(),n)&&va(er(),Ur(),c,t,n,c[11],o,!0),wp}const uh=void 0;var Ov=["en",[["a","p"],["AM","PM"],uh],[["AM","PM"],uh,uh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],uh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],uh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",uh,"{1} 'at' {0}",uh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const o=Math.floor(Math.abs(t)),c=t.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let Go={};function p_(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=Ny(n);if(o)return o;const c=n.split("-")[0];if(o=Ny(c),o)return o;if("en"===c)return Ov;throw new Error(`Missing locale data for the locale "${t}".`)}function Ay(t){return p_(t)[rr.PluralCase]}function Ny(t){return t in Go||(Go[t]=ye.ng&&ye.ng.common&&ye.ng.common.locales&&ye.ng.common.locales[t]),Go[t]}var rr=(()=>((rr=rr||{})[rr.LocaleId=0]="LocaleId",rr[rr.DayPeriodsFormat=1]="DayPeriodsFormat",rr[rr.DayPeriodsStandalone=2]="DayPeriodsStandalone",rr[rr.DaysFormat=3]="DaysFormat",rr[rr.DaysStandalone=4]="DaysStandalone",rr[rr.MonthsFormat=5]="MonthsFormat",rr[rr.MonthsStandalone=6]="MonthsStandalone",rr[rr.Eras=7]="Eras",rr[rr.FirstDayOfWeek=8]="FirstDayOfWeek",rr[rr.WeekendRange=9]="WeekendRange",rr[rr.DateFormat=10]="DateFormat",rr[rr.TimeFormat=11]="TimeFormat",rr[rr.DateTimeFormat=12]="DateTimeFormat",rr[rr.NumberSymbols=13]="NumberSymbols",rr[rr.NumberFormats=14]="NumberFormats",rr[rr.CurrencyCode=15]="CurrencyCode",rr[rr.CurrencySymbol=16]="CurrencySymbol",rr[rr.CurrencyName=17]="CurrencyName",rr[rr.Currencies=18]="Currencies",rr[rr.Directionality=19]="Directionality",rr[rr.PluralCase=20]="PluralCase",rr[rr.ExtraData=21]="ExtraData",rr))();const My=["zero","one","two","few","many"],Hg="en-US",su={marker:"element"},ou={marker:"ICU"};var Es=(()=>((Es=Es||{})[Es.SHIFT=2]="SHIFT",Es[Es.APPEND_EAGERLY=1]="APPEND_EAGERLY",Es[Es.COMMENT=2]="COMMENT",Es))();let xy=Hg;function m_(t,n,o){const c=n.insertBeforeIndex,p=Array.isArray(c)?c[0]:c;return null===p?tm(t,0,o):V(o[p])}function Oy(t,n,o,c,p){const v=n.insertBeforeIndex;if(Array.isArray(v)){let I=c,x=null;if(3&n.type||(x=I,I=p),null!==I&&0==(2&n.flags))for(let P=1;P<v.length;P++)Fr(t,I,o[v[P]],x,!1)}}function __(t,n){if(t.push(n),t.length>1)for(let o=t.length-2;o>=0;o--){const c=t[o];ky(c)||Fv(c,n)&&null===Lv(c)&&Vv(c,n.index)}}function ky(t){return!(64&t.type)}function Fv(t,n){return ky(n)||t.index>n.index}function Lv(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function Vv(t,n){const o=t.insertBeforeIndex;Array.isArray(o)?o[0]=n:(Dh(m_,Oy),t.insertBeforeIndex=n)}function af(t,n){const o=t.data[n];return null===o||"string"==typeof o?null:o.hasOwnProperty("currentCaseLViewIndex")?o:o.value}function y_(t,n,o){const c=hd(t,o,64,null,null);return __(n,c),c}function Wg(t,n){const o=n[t.currentCaseLViewIndex];return null===o?o:o<0?~o:o}function Fy(t){return t>>>17}function v_(t){return(131070&t)>>>1}let Ca=0,ch=0;function Uv(t,n,o,c){const p=o[11];let I,v=null;for(let x=0;x<n.length;x++){const P=n[x];if("string"==typeof P){const q=n[++x];null===o[q]&&(o[q]=wh(p,P))}else if("number"==typeof P)switch(1&P){case 0:const q=Fy(P);let J,ce;if(null===v&&(v=q,I=Gu(p,c)),q===v?(J=c,ce=I):(J=null,ce=V(o[q])),null!==ce){const Yt=v_(P);Fr(p,ce,o[Yt],J,!1);const xn=af(t,Yt);if(null!==xn&&"object"==typeof xn){const St=Wg(xn,o);null!==St&&Uv(t,xn.create[St],o,o[xn.anchorIdx])}}break;case 1:const Ke=n[++x],vt=n[++x];rg(p,ne(P>>>1,o),null,null,Ke,vt,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${P}"`)}else switch(P){case ou:const q=n[++x],J=n[++x];null===o[J]&&ki(o[J]=Mp(p,q),o);break;case su:const ce=n[++x],Me=n[++x];null===o[Me]&&ki(o[Me]=m(p,ce,null),o)}}}function By(t,n,o,c,p){for(let v=0;v<o.length;v++){const I=o[v],x=o[++v];if(I&p){let P="";for(let q=v+1;q<=v+x;q++){const J=o[q];if("string"==typeof J)P+=J;else if("number"==typeof J)if(J<0)P+=Ae(n[c-J]);else{const ce=J>>>2;switch(3&J){case 1:const Me=o[++q],Ke=o[++q],vt=t.data[ce];"string"==typeof vt?rg(n[11],n[ce],null,vt,Me,P,Ke):va(t,vt,n,Me,P,n[11],Ke,!1);break;case 0:const Yt=n[ce];null!==Yt&&xs(n[11],Yt,P);break;case 2:jv(t,af(t,ce),n,P);break;case 3:Mu(t,af(t,ce),c,n)}}}}else{const P=o[v+1];if(P>0&&3==(3&P)){const J=af(t,P>>>2);n[J.currentCaseLViewIndex]<0&&Mu(t,J,c,n)}}v+=x}}function Mu(t,n,o,c){let p=c[n.currentCaseLViewIndex];if(null!==p){let v=Ca;p<0&&(p=c[n.currentCaseLViewIndex]=~p,v=-1),By(t,c,n.update[p],o,v)}}function jv(t,n,o,c){const p=function(t,n){let o=t.cases.indexOf(n);if(-1===o)switch(t.type){case 1:{const c=function(t,n){const o=Ay(n)(parseInt(t,10)),c=My[o];return void 0!==c?c:"other"}(n,xy);o=t.cases.indexOf(c),-1===o&&"other"!==c&&(o=t.cases.indexOf("other"));break}case 0:o=t.cases.indexOf("other")}return-1===o?null:o}(n,c);if(Wg(n,o)!==p&&(Uy(t,n,o),o[n.currentCaseLViewIndex]=null===p?null:~p,null!==p)){const I=o[n.anchorIdx];I&&Uv(t,n.create[p],o,I)}}function Uy(t,n,o){let c=Wg(n,o);if(null!==c){const p=n.remove[c];for(let v=0;v<p.length;v++){const I=p[v];if(I>0){const x=ne(I,o);null!==x&&Op(o[11],x)}else Uy(t,af(t,~I),o)}}}function Hv(){const t=[];let o,c,n=-1;function v(x,P){n=0;const q=Wg(x,P);c=null!==q?x.remove[q]:oe}function I(){if(n<c.length){const x=c[n++];return x>0?o[x]:(t.push(n,c),v(o[1].data[~x],o),I())}return 0===t.length?null:(c=t.pop(),n=t.pop(),I())}return function(x,P){for(o=P;t.length;)t.pop();return v(x.value,P),I}}const zg=/\ufffd(\d+):?\d*\ufffd/gi,Wv=/\ufffd(\d+)\ufffd/,w_=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,jy=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,zv=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,qv=/\uE500/g;function D_(t,n,o,c,p,v,I){const x=Cc(t,c,1,null);let P=x<<Es.SHIFT,q=la();n===q&&(q=null),null===q&&(P|=Es.APPEND_EAGERLY),I&&(P|=Es.COMMENT,function(t){void 0===Ll&&(Ll=t())}(Hv)),p.push(P,null===v?"":v);const J=hd(t,x,I?32:1,null===v?"":v,null);__(o,J);const ce=J.index;return eo(J,!1),null!==q&&n!==q&&function(t,n){let o=t.insertBeforeIndex;null===o?(Dh(m_,Oy),o=t.insertBeforeIndex=[null,n]):(function(t,n,o){t!=n&&Kt(o,t,n,"==")}(Array.isArray(o),!0,"Expecting array here"),o.push(n))}(q,ce),J}function Yv(t,n,o,c,p,v,I){const x=I.match(zg),P=D_(t,n,o,v,c,x?null:I,!1);x&&hh(p,I,P.index,null,0,null)}function hh(t,n,o,c,p,v){const I=t.length,x=I+1;t.push(null,null);const P=I+2,q=n.split(zg);let J=0;for(let ce=0;ce<q.length;ce++){const Me=q[ce];if(1&ce){const Ke=p+parseInt(Me,10);t.push(-1-Ke),J|=E_(Ke)}else""!==Me&&t.push(Me)}return t.push(o<<2|(c?1:0)),c&&t.push(c,v),t[I]=J,t[x]=t.length-P,J}function E_(t){return 1<<Math.min(t,31)}function qg(t){let n,v,o="",c=0,p=!1;for(;null!==(n=jy.exec(t));)p?n[0]===`\ufffd/*${v}\ufffd`&&(c=n.index,p=!1):(o+=t.substring(c,n.index+n[0].length),v=n[1],p=!0);return o+=t.substr(c),o}function C_(t,n,o,c,p,v){let I=0;const x={type:p.type,currentCaseLViewIndex:Cc(t,n,1,null),anchorIdx:v,cases:[],create:[],remove:[],update:[]};(function(t,n,o){t.push(E_(n.mainBinding),2,-1-n.mainBinding,o<<2|2)})(o,p,v),function(t,n,o){const c=t.data[n];null===c?t.data[n]=o:c.value=o}(t,v,x);const P=p.values;for(let q=0;q<P.length;q++){const J=P[q],ce=[];for(let Me=0;Me<J.length;Me++){const Ke=J[Me];if("string"!=typeof Ke){const vt=ce.push(Ke)-1;J[Me]=`\x3c!--\ufffd${vt}\ufffd--\x3e`}}I=X0(t,x,n,o,c,p.cases[q],J.join(""),ce)|I}I&&function(t,n,o){t.push(n,1,o<<2|3)}(o,I,v)}function Hy(t){const n=[],o=[];let c=1,p=0;const v=Gy(t=t.replace(w_,function(I,x,P){return c="select"===P?0:1,p=parseInt(x.substr(1),10),""}));for(let I=0;I<v.length;){let x=v[I++].trim();1===c&&(x=x.replace(/\s*(?:=)?(\w+)\s*/,"$1")),x.length&&n.push(x);const P=Gy(v[I++]);n.length>o.length&&o.push(P)}return{type:c,mainBinding:p,cases:n,values:o}}function Gy(t){if(!t)return[];let n=0;const o=[],c=[],p=/[{}]/g;let v;for(p.lastIndex=0;v=p.exec(t);){const x=v.index;if("}"==v[0]){if(o.pop(),0==o.length){const P=t.substring(n,x);w_.test(P)?c.push(Hy(P)):c.push(P),n=x+1}}else{if(0==o.length){const P=t.substring(n,x);c.push(P),n=x+1}o.push("{")}}const I=t.substring(n);return c.push(I),c}function X0(t,n,o,c,p,v,I,x){const P=[],q=[],J=[];n.cases.push(v),n.create.push(P),n.remove.push(q),n.update.push(J);const Me=function(t){const n=new xd(t);return function(){try{return!!(new window.DOMParser).parseFromString(ga(""),"text/html")}catch(t){return!1}}()?new cc(n):n}(Fs()).getInertBodyElement(I),Ke=function(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}(Me)||Me;return Ke?e0(t,n,o,c,P,q,J,Ke,p,x,0):0}function e0(t,n,o,c,p,v,I,x,P,q,J){let ce=0,Me=x.firstChild;for(;Me;){const Ke=Cc(t,o,1,null);switch(Me.nodeType){case Node.ELEMENT_NODE:const vt=Me,Yt=vt.tagName.toLowerCase();if(bl.hasOwnProperty(Yt)){Wy(p,su,Yt,P,Ke),t.data[Ke]=Yt;const nr=vt.attributes;for(let di=0;di<nr.length;di++){const ns=nr.item(di),rc=ns.name.toLowerCase();ns.value.match(zg)?Vu.hasOwnProperty(rc)&&hh(I,ns.value,Ke,ns.name,0,il[rc]?yu:td[rc]?vu:null):rb(p,Ke,ns)}ce=e0(t,n,o,c,p,v,I,Me,Ke,q,J+1)|ce,t0(v,Ke,J)}break;case Node.TEXT_NODE:const cn=Me.textContent||"",xn=cn.match(zg);Wy(p,null,xn?"":cn,P,Ke),t0(v,Ke,J),xn&&(ce=hh(I,cn,Ke,null,0,null)|ce);break;case Node.COMMENT_NODE:const St=Wv.exec(Me.textContent||"");if(St){const di=q[parseInt(St[1],10)];Wy(p,ou,"",P,Ke),C_(t,o,c,P,di,Ke),eb(v,Ke,J)}}Me=Me.nextSibling}return ce}function t0(t,n,o){0===o&&t.push(n)}function eb(t,n,o){0===o&&(t.push(~n),t.push(n))}function Wy(t,n,o,c,p){null!==n&&t.push(n),t.push(o,p,function(t,n,o){return 0|n<<17|o<<1}(0,c,p))}function rb(t,n,o){t.push(n<<1|1,o.name,o.value)}function Zg(t,n,o=-1){const c=er(),p=bt(),v=20+t,I=Br(c.consts,n),x=la();c.firstCreatePass&&function(t,n,o,c,p,v){const I=la(),x=[],P=[],q=[[]];p=function(t,n){if(function(t){return-1===t}(n))return qg(t);{const o=t.indexOf(`:${n}\ufffd`)+2+n.toString().length,c=t.search(new RegExp(`\ufffd\\/\\*\\d+:${n}\ufffd`));return qg(t.substring(o,c))}}(p,v);const J=function(t){return t.replace(qv," ")}(p).split(zv);for(let ce=0;ce<J.length;ce++){let Me=J[ce];if(0==(1&ce)){const Ke=Gy(Me);for(let vt=0;vt<Ke.length;vt++){let Yt=Ke[vt];if(0==(1&vt)){const cn=Yt;""!==cn&&Yv(t,I,q[0],x,P,o,cn)}else{const cn=Yt;if("object"!=typeof cn)throw new Error(`Unable to parse ICU expression in "${p}" message.`);C_(t,o,P,n,cn,D_(t,I,q[0],o,x,"",!0).index)}}}else{const Ke=47===Me.charCodeAt(0),Yt=(Me.charCodeAt(Ke?1:0),20+Number.parseInt(Me.substring(Ke?2:1)));if(Ke)q.shift(),eo(la(),!1);else{const cn=y_(t,q[0],Yt);q.unshift([]),eo(cn,!0)}}}t.data[c]={create:x,update:P}}(c,null===x?0:x.index,p,v,I,o);const P=c.data[v],J=zn(c,x===p[6]?null:x,p);(function(t,n,o,c){const p=t[11];for(let v=0;v<n.length;v++){const I=n[v++],x=n[v],P=(I&Es.COMMENT)===Es.COMMENT,q=(I&Es.APPEND_EAGERLY)===Es.APPEND_EAGERLY,J=I>>>Es.SHIFT;let ce=t[J];null===ce&&(ce=t[J]=P?p.createComment(x):wh(p,x)),q&&null!==o&&Fr(p,o,ce,c,!1)}})(p,P.create,J,x&&8&x.type?p[x.index]:null),Tl(!0)}function zy(t,n,o){Zg(t,n,o),Tl(!1)}function Ep(t){return function(t){t&&(Ca|=1<<Math.min(ch,31)),ch++}(ba(bt(),ca(),t)),Ep}function qy(t){!function(t,n,o){if(ch>0){const c=t.data[o];By(t,n,Array.isArray(c)?c:c.update,Sn.lFrame.bindingIndex-ch-1,Ca)}Ca=0,ch=0}(er(),bt(),t+20)}function I_(t,n,o,c,p){if(t=Oe(t),Array.isArray(t))for(let v=0;v<t.length;v++)I_(t[v],n,o,c,p);else{const v=er(),I=bt();let x=Hc(t)?t:Oe(t.provide),P=cg(t);const q=ar(),J=1048575&q.providerIndexes,ce=q.directiveStart,Me=q.providerIndexes>>20;if(Hc(t)||!t.multi){const Ke=new fa(P,p,ef),vt=Ky(x,n,p?J:J+Me,ce);-1===vt?(we(B(q,I),v,x),S_(v,t,n.length),n.push(x),q.directiveStart++,q.directiveEnd++,p&&(q.providerIndexes+=1048576),o.push(Ke),I.push(Ke)):(o[vt]=Ke,I[vt]=Ke)}else{const Ke=Ky(x,n,J+Me,ce),vt=Ky(x,n,J,J+Me),Yt=Ke>=0&&o[Ke],cn=vt>=0&&o[vt];if(p&&!cn||!p&&!Yt){we(B(q,I),v,x);const xn=function(t,n,o,c,p){const v=new fa(t,o,ef);return v.multi=[],v.index=n,v.componentProviders=0,Zy(v,p,c&&!o),v}(p?db:cb,o.length,p,c,P);!p&&cn&&(o[vt].providerFactory=xn),S_(v,t,n.length,0),n.push(x),q.directiveStart++,q.directiveEnd++,p&&(q.providerIndexes+=1048576),o.push(xn),I.push(xn)}else S_(v,t,Ke>-1?Ke:vt,Zy(o[p?vt:Ke],P,!p&&c));!p&&c&&cn&&o[vt].componentProviders++}}}function S_(t,n,o,c){const p=Hc(n),v=function(t){return!!t.useClass}(n);if(p||v){const P=(v?Oe(n.useClass):n).prototype.ngOnDestroy;if(P){const q=t.destroyHooks||(t.destroyHooks=[]);if(!p&&n.multi){const J=q.indexOf(o);-1===J?q.push(o,[c,P]):q[J+1].push(c,P)}else q.push(o,P)}}}function Zy(t,n,o){return o&&t.componentProviders++,t.multi.push(n)-1}function Ky(t,n,o,c){for(let p=o;p<c;p++)if(n[p]===t)return p;return-1}function cb(t,n,o,c){return Yy(this.multi,[])}function db(t,n,o,c){const p=this.multi;let v;if(this.providerFactory){const I=this.providerFactory.componentProviders,x=ui(o,o[1],this.providerFactory.index,c);v=x.slice(0,I),Yy(p,v);for(let P=I;P<x.length;P++)v.push(x[P])}else v=[],Yy(p,v);return v}function Yy(t,n){for(let o=0;o<t.length;o++)n.push((0,t[o])());return n}function u0(t,n=[]){return o=>{o.providersResolver=(c,p)=>function(t,n,o){const c=er();if(c.firstCreatePass){const p=Xn(t);I_(o,c.data,c.blueprint,p,!0),I_(n,c.data,c.blueprint,p,!1)}}(c,p?p(t):t,n)}}class d0{}class pb{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${de(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Kg=(()=>{class t{}return t.NULL=new pb,t})();function gb(){return cf(ar(),bt())}function cf(t,n){return new a(De(t,n))}let a=(()=>{class t{constructor(o){this.nativeElement=o}}return t.__NG_ELEMENT_ID__=gb,t})();function u(t){return t instanceof a?t.nativeElement:t}class f{}let E=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function(){const t=bt(),o=mn(ar().index,t);return function(t){return t[11]}(At(o)?o:t)}(),t})(),Ee=(()=>{class t{}return t.\u0275prov=Ln({token:t,providedIn:"root",factory:()=>null}),t})();class ke{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const at=new ke("13.1.1"),kt={};function gn(t,n,o,c,p=!1){for(;null!==o;){const v=n[o.index];if(null!==v&&c.push(V(v)),Ft(v))for(let x=10;x<v.length;x++){const P=v[x],q=P[1].firstChild;null!==q&&gn(P[1],P,q,c)}const I=o.type;if(8&I)gn(t,n,o.child,c);else if(32&I){const x=Ud(o,n);let P;for(;P=x();)c.push(P)}else if(16&I){const x=rm(n,o);if(Array.isArray(x))c.push(...x);else{const P=gc(n[16]);gn(P[1],P,x,c,!0)}}o=p?o.projectionNext:o.next}return c}class yn{constructor(n,o){this._lView=n,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,o=n[1];return gn(o,n,o.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Ft(n)){const o=n[8],c=o?o.indexOf(this):-1;c>-1&&(pe(n,c),xi(o,c))}this._attachedToViewContainer=!1}Ce(this._lView[1],this._lView)}onDestroy(n){Lf(this._lView[1],this._lView,null,n)}markForCheck(){jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$h(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,o){ys(!0);try{$h(t,n,o)}finally{ys(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,Vc(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class $n extends yn{constructor(n){super(n),this._view=n}detectChanges(){Hf(this._view)}checkNoChanges(){!function(t){ys(!0);try{Hf(t)}finally{ys(!1)}}(this._view)}get context(){return null}}class vr extends Kg{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const o=Jn(n);return new lo(o,this.ngModule)}}function br(t){const n=[];for(let o in t)t.hasOwnProperty(o)&&n.push({propName:t[o],templateName:o});return n}const Qs=new Qr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pf});class lo extends d0{constructor(n,o){super(),this.componentDef=n,this.ngModule=o,this.componentType=n.type,this.selector=n.selectors.map(ad).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return br(this.componentDef.inputs)}get outputs(){return br(this.componentDef.outputs)}create(n,o,c,p){const v=(p=p||this.ngModule)?function(t,n){return{get:(o,c,p)=>{const v=t.get(o,kt,p);return v!==kt||c===kt?v:n.get(o,c,p)}}}(n,p.injector):n,I=v.get(f,ji),x=v.get(Ee,null),P=I.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",J=c?function(t,n,o){if(Ir(t))return t.selectRootElement(n,o===Ht.ShadowDom);let c="string"==typeof n?t.querySelector(n):n;return c.textContent="",c}(P,c,this.componentDef.encapsulation):m(I.createRenderer(null,this.componentDef),q,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(q)),ce=this.componentDef.onPush?576:528,Me=function(t,n){return{components:[],scheduler:t||pf,clean:Wf,playerHandler:n||null,flags:0}}(),Ke=Fh(0,null,null,1,0,null,null,null,null,null),vt=Uc(null,Ke,Me,ce,null,null,I,P,x,v);let Yt,cn;Us(vt);try{const xn=function(t,n,o,c,p,v){const I=o[1];o[20]=t;const P=Su(I,20,2,"#host",null),q=P.mergedAttrs=n.hostAttrs;null!==q&&(fd(P,q,!0),null!==t&&(Vt(p,t,q),null!==P.classes&&Hd(p,t,P.classes),null!==P.styles&&$d(p,t,P.styles)));const J=c.createRenderer(t,n),ce=Uc(o,Ph(n),null,n.onPush?64:16,o[20],P,c,J,v||null,null);return I.firstCreatePass&&(we(B(P,o),I,n.type),dm(I,P),tg(P,o.length,1)),eh(o,ce),o[20]=ce}(J,this.componentDef,vt,I,P);if(J)if(c)Vt(P,J,["ng-version",at.full]);else{const{attrs:St,classes:nr}=function(t){const n=[],o=[];let c=1,p=2;for(;c<t.length;){let v=t[c];if("string"==typeof v)2===p?""!==v&&n.push(v,t[++c]):8===p&&o.push(v);else{if(!ol(p))break;p=v}c++}return{attrs:n,classes:o}}(this.componentDef.selectors[0]);St&&Vt(P,J,St),nr&&nr.length>0&&Hd(P,J,nr.join(" "))}if(cn=Et(Ke,20),void 0!==o){const St=cn.projection=[];for(let nr=0;nr<this.ngContentSelectors.length;nr++){const di=o[nr];St.push(null!=di?Array.from(di):null)}}Yt=function(t,n,o,c,p){const v=o[1],I=function(t,n,o){const c=ar();t.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),ng(t,c,n,Cc(t,n,1,null),o));const p=ui(n,t,c.directiveStart,c);ki(p,n);const v=De(c,n);return v&&ki(v,n),p}(v,o,n);if(c.components.push(I),t[8]=I,p&&p.forEach(P=>P(I,n)),n.contentQueries){const P=ar();n.contentQueries(1,I,P.directiveStart)}const x=ar();return!v.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(yo(x.index),Bf(o[1],x,0,x.directiveStart,x.directiveEnd,n),Uf(n,I)),I}(xn,this.componentDef,vt,Me,[K_]),ru(Ke,vt,null)}finally{$s()}return new Jc(this.componentType,Yt,cf(cn,vt),vt,cn)}}class Jc extends class{}{constructor(n,o,c,p,v){super(),this.location=c,this._rootLView=p,this._tNode=v,this.instance=o,this.hostView=this.changeDetectorRef=new $n(p),this.componentType=n}get injector(){return new Gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class sa{}class Yg{}const Qg=new Map;class yb extends sa{constructor(n,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vr(this);const c=wn(n);this._bootstrapComponents=$a(c.bootstrap),this._r3Injector=lg(n,o,[{provide:sa,useValue:this},{provide:Kg,useValue:this.componentFactoryResolver}],de(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,o=iu.THROW_IF_NOT_FOUND,c=Lt.Default){return n===iu||n===sa||n===Tc?this:this._r3Injector.get(n,o,c)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class f0 extends Yg{constructor(n){super(),this.moduleType=n,null!==wn(n)&&function(t){const n=new Set;!function o(c){const p=wn(c,!0),v=p.id;null!==v&&(function(t,n,o){if(n&&n!==o)throw new Error(`Duplicate module registered for ${t} - ${de(n)} vs ${de(n.name)}`)}(v,Qg.get(v),c),Qg.set(v,c));const I=$a(p.imports);for(const x of I)n.has(x)||(n.add(x),o(x))}(t)}(n)}create(n){return new yb(this.moduleType,n)}}function vb(t,n,o,c){return function(t,n,o,c,p,v){const I=n+o;return ba(t,I,p)?Ys(t,I+1,v?c.call(v,p):c(p)):A_(t,I+1)}(bt(),Gi(),t,n,o,c)}function bb(t,n,o,c,p){return function(t,n,o,c,p,v,I){const x=n+o;return Wc(t,x,p,v)?Ys(t,x+2,I?c.call(I,p,v):c(p,v)):A_(t,x+2)}(bt(),Gi(),t,n,o,c,p)}function wb(t,n,o,c,p,v){return function(t,n,o,c,p,v,I,x){const P=n+o;return function(t,n,o,c,p){const v=Wc(t,n,o,c);return ba(t,n+2,p)||v}(t,P,p,v,I)?Ys(t,P+3,x?c.call(x,p,v,I):c(p,v,I)):A_(t,P+3)}(bt(),Gi(),t,n,o,c,p,v)}function A_(t,n){const o=t[n];return o===yr?void 0:o}function p0(t){return n=>{setTimeout(t,void 0,n)}}const Nd=class extends T.x{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,o,c){var p,v,I;let x=n,P=o||(()=>null),q=c;if(n&&"object"==typeof n){const ce=n;x=null===(p=ce.next)||void 0===p?void 0:p.bind(ce),P=null===(v=ce.error)||void 0===v?void 0:v.bind(ce),q=null===(I=ce.complete)||void 0===I?void 0:I.bind(ce)}this.__isAsync&&(P=p0(P),x&&(x=p0(x)),q&&(q=p0(q)));const J=super.subscribe({next:x,error:P,complete:q});return n instanceof _.w0&&n.add(J),J}};function Zw(){return this._results[md()]()}class g0{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=md(),c=g0.prototype;c[o]||(c[o]=Zw)}get changes(){return this._changes||(this._changes=new Nd)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,o){return this._results.reduce(n,o)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,o){const c=this;c.dirty=!1;const p=wo(n);(this._changesDetected=!function(t,n,o){if(t.length!==n.length)return!1;for(let c=0;c<t.length;c++){let p=t[c],v=n[c];if(o&&(p=o(p),v=o(v)),v!==p)return!1}return!0}(c._results,p,o))&&(c._results=p,c.length=p.length,c.last=p[this.length-1],c.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let M_=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qw,t})();const Kw=M_,Yw=class extends Kw{constructor(n,o,c){super(),this._declarationLView=n,this._declarationTContainer=o,this.elementRef=c}createEmbeddedView(n){const o=this._declarationTContainer.tViews,c=Uc(this._declarationLView,o,n,16,null,o.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(c[19]=v.createEmbeddedView(o)),ru(o,c,n),new yn(c)}};function Qw(){return Qy(ar(),bt())}function Qy(t,n){return 4&t.type?new Yw(n,t,cf(t,n)):null}let Jy=(()=>{class t{}return t.__NG_ELEMENT_ID__=Jw,t})();function Jw(){return Nb(ar(),bt())}const Xw=Jy,Sb=class extends Xw{constructor(n,o,c){super(),this._lContainer=n,this._hostTNode=o,this._hostLView=c}get element(){return cf(this._hostTNode,this._hostLView)}get injector(){return new Gs(this._hostTNode,this._hostLView)}get parentInjector(){const n=he(this._hostTNode,this._hostLView);if(Pn(n)){const o=ot(n,this._hostLView),c=xa(n);return new Gs(o[1].data[c+8],o)}return new Gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const o=Ab(this._lContainer);return null!==o&&o[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,o,c){const p=n.createEmbeddedView(o||{});return this.insert(p,c),p}createComponent(n,o,c,p,v){const I=n&&!("function"==typeof n);let x;if(I)x=o;else{const ce=o||{};x=ce.index,c=ce.injector,p=ce.projectableNodes,v=ce.ngModuleRef}const P=I?n:new lo(Jn(n)),q=c||this.parentInjector;if(!v&&null==P.ngModule&&q){const ce=q.get(sa,null);ce&&(v=ce)}const J=P.create(q,p,void 0,v);return this.insert(J.hostView,x),J}insert(n,o){const c=n._lView,p=c[1];if(Ft(c[3])){const J=this.indexOf(n);if(-1!==J)this.detach(J);else{const ce=c[3],Me=new Sb(ce,ce[6],ce[3]);Me.detach(Me.indexOf(n))}}const v=this._adjustIndex(o),I=this._lContainer;!function(t,n,o,c){const p=10+c,v=o.length;c>0&&(o[p-1][4]=n),c<v-10?(n[4]=o[p],Yo(o,10+c,n)):(o.push(n),n[4]=null),n[3]=o;const I=n[17];null!==I&&o!==I&&function(t,n){const o=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===o?t[9]=[n]:o.push(n)}(I,n);const x=n[19];null!==x&&x.insertView(t),n[2]|=128}(p,c,I,v);const x=xp(v,I),P=c[11],q=Gu(P,I[7]);return null!==q&&function(t,n,o,c,p,v){c[0]=p,c[6]=n,Vc(t,c,o,1,p,v)}(p,I[6],P,c,q,x),n.attachToViewContainerRef(),Yo(m0(I),v,n),n}move(n,o){return this.insert(n,o)}indexOf(n){const o=Ab(this._lContainer);return null!==o?o.indexOf(n):-1}remove(n){const o=this._adjustIndex(n,-1),c=pe(this._lContainer,o);c&&(xi(m0(this._lContainer),o),Ce(c[1],c))}detach(n){const o=this._adjustIndex(n,-1),c=pe(this._lContainer,o);return c&&null!=xi(m0(this._lContainer),o)?new yn(c):null}_adjustIndex(n,o=0){return null==n?this.length+o:n}};function Ab(t){return t[8]}function m0(t){return t[8]||(t[8]=[])}function Nb(t,n){let o;const c=n[t.index];if(Ft(c))o=c;else{let p;if(8&t.type)p=V(c);else{const v=n[11];p=v.createComment("");const I=De(t,n);Fr(v,Gu(v,I),p,function(t,n){return Ir(t)?t.nextSibling(n):n.nextSibling}(v,I),!1)}n[t.index]=o=$f(c,n,p,t),eh(n,o)}return new Sb(o,t,n)}class _0{constructor(n){this.queryList=n,this.matches=null}clone(){return new _0(this.queryList)}setDirty(){this.queryList.setDirty()}}class y0{constructor(n=[]){this.queries=n}createEmbeddedView(n){const o=n.queries;if(null!==o){const c=null!==n.contentQueries?n.contentQueries[0]:o.length,p=[];for(let v=0;v<c;v++){const I=o.getByIndex(v);p.push(this.queries[I.indexInDeclarationView].clone())}return new y0(p)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let o=0;o<this.queries.length;o++)null!==Vb(n,o).matches&&this.queries[o].setDirty()}}class Mb{constructor(n,o,c=null){this.predicate=n,this.flags=o,this.read=c}}class v0{constructor(n=[]){this.queries=n}elementStart(n,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(n,o)}elementEnd(n){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(n)}embeddedTView(n){let o=null;for(let c=0;c<this.length;c++){const p=null!==o?o.length:0,v=this.getByIndex(c).embeddedTView(n,p);v&&(v.indexInDeclarationView=c,null!==o?o.push(v):o=[v])}return null!==o?new v0(o):null}template(n,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(n,o)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class b0{constructor(n,o=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(n,o){this.isApplyingToNode(o)&&this.matchTNode(n,o)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,o){this.elementStart(n,o)}embeddedTView(n,o){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,o),new b0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let c=n.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(n,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let p=0;p<c.length;p++){const v=c[p];this.matchTNodeWithReadOption(n,o,nD(o,v)),this.matchTNodeWithReadOption(n,o,Ji(o,n,v,!1,!1))}else c===M_?4&o.type&&this.matchTNodeWithReadOption(n,o,-1):this.matchTNodeWithReadOption(n,o,Ji(o,n,c,!1,!1))}matchTNodeWithReadOption(n,o,c){if(null!==c){const p=this.metadata.read;if(null!==p)if(p===a||p===Jy||p===M_&&4&o.type)this.addMatch(o.index,-2);else{const v=Ji(o,n,p,!1,!1);null!==v&&this.addMatch(o.index,v)}else this.addMatch(o.index,c)}}addMatch(n,o){null===this.matches?this.matches=[n,o]:this.matches.push(n,o)}}function nD(t,n){const o=t.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===n)return o[c+1];return null}function iD(t,n,o,c){return-1===o?function(t,n){return 11&t.type?cf(t,n):4&t.type?Qy(t,n):null}(n,t):-2===o?function(t,n,o){return o===a?cf(n,t):o===M_?Qy(n,t):o===Jy?Nb(n,t):void 0}(t,n,c):ui(t,t[1],o,n)}function Rb(t,n,o,c){const p=n[19].queries[c];if(null===p.matches){const v=t.data,I=o.matches,x=[];for(let P=0;P<I.length;P+=2){const q=I[P];x.push(q<0?null:iD(n,v[q],I[P+1],o.metadata.read))}p.matches=x}return p.matches}function w0(t,n,o,c){const p=t.queries.getByIndex(o),v=p.matches;if(null!==v){const I=Rb(t,n,p,o);for(let x=0;x<v.length;x+=2){const P=v[x];if(P>0)c.push(I[x/2]);else{const q=v[x+1],J=n[-P];for(let ce=10;ce<J.length;ce++){const Me=J[ce];Me[17]===Me[3]&&w0(Me[1],Me,q,c)}if(null!==J[9]){const ce=J[9];for(let Me=0;Me<ce.length;Me++){const Ke=ce[Me];w0(Ke[1],Ke,q,c)}}}}}return c}function xb(t){const n=bt(),o=er(),c=Di();hl(c+1);const p=Vb(o,c);if(t.dirty&&Sr(n)===(2==(2&p.metadata.flags))){if(null===p.matches)t.reset([]);else{const v=p.crossesNgTemplate?w0(o,n,c,[]):Rb(o,n,p,c);t.reset(v,u),t.notifyOnChanges()}return!0}return!1}function Ob(t,n,o){const c=er();c.firstCreatePass&&(Lb(c,new Mb(t,n,o),-1),2==(2&n)&&(c.staticViewQueries=!0)),Fb(c,bt(),n)}function kb(t,n,o,c){const p=er();if(p.firstCreatePass){const v=ar();Lb(p,new Mb(n,o,c),v.index),function(t,n){const o=t.contentQueries||(t.contentQueries=[]);n!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,n)}(p,t),2==(2&o)&&(p.staticContentQueries=!0)}Fb(p,bt(),o)}function Pb(){return t=bt(),n=Di(),t[19].queries[n].queryList;var t,n}function Fb(t,n,o){const c=new g0(4==(4&o));Lf(t,n,c,c.destroy),null===n[19]&&(n[19]=new y0),n[19].queries.push(new _0(c))}function Lb(t,n,o){null===t.queries&&(t.queries=new v0),t.queries.track(new b0(n,o))}function Vb(t,n){return t.queries.getByIndex(n)}function Bb(t,n){return Qy(t,n)}function tv(...t){}const S0=new Qr("Application Initializer");let Xg=(()=>{class t{constructor(o){this.appInits=o,this.resolve=tv,this.reject=tv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,p)=>{this.resolve=c,this.reject=p})}runInitializers(){if(this.initialized)return;const o=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const v=this.appInits[p]();if(pp(v))o.push(v);else if(tf(v)){const I=new Promise((x,P)=>{v.subscribe({complete:x,error:P})});o.push(I)}}Promise.all(o).then(()=>{c()}).catch(p=>{this.reject(p)}),0===o.length&&c(),this.initialized=!0}}return t.\u0275fac=function(o){return new(o||t)(Fe(S0,8))},t.\u0275prov=Ln({token:t,factory:t.\u0275fac}),t})();const nw=new Qr("AppId"),TD={provide:nw,useFactory:function(){return`${A0()}${A0()}${A0()}`},deps:[]};function A0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rw=new Qr("Platform Initializer"),iw=new Qr("Platform ID"),sw=new Qr("appBootstrapListener");let ow=(()=>{class t{log(o){console.log(o)}warn(o){console.warn(o)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ln({token:t,factory:t.\u0275fac}),t})();const nv=new Qr("LocaleId"),aw=new Qr("DefaultCurrencyCode");class ID{constructor(n,o){this.ngModuleFactory=n,this.componentFactories=o}}let N0=(()=>{class t{compileModuleSync(o){return new f0(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const c=this.compileModuleSync(o),v=$a(wn(o).declarations).reduce((I,x)=>{const P=Jn(x);return P&&I.push(new lo(P)),I},[]);return new ID(c,v)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ln({token:t,factory:t.\u0275fac}),t})();const AD=(()=>Promise.resolve(0))();function M0(t){"undefined"==typeof Zone?AD.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class nc{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nd(!1),this.onMicrotaskEmpty=new Nd(!1),this.onStable=new Nd(!1),this.onError=new Nd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!c&&o,p.shouldCoalesceRunChangeDetection=c,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function(){let t=ye.requestAnimationFrame,n=ye.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o);const c=n[Zone.__symbol__("OriginalDelegate")];c&&(n=c)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ye,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,x0(t),t.isCheckStableRunning=!0,R0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),x0(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,p,v,I,x)=>{try{return lw(t),o.invokeTask(p,v,I,x)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||t.shouldCoalesceRunChangeDetection)&&n(),uw(t)}},onInvoke:(o,c,p,v,I,x,P)=>{try{return lw(t),o.invoke(p,v,I,x,P)}finally{t.shouldCoalesceRunChangeDetection&&n(),uw(t)}},onHasTask:(o,c,p,v)=>{o.hasTask(p,v),c===p&&("microTask"==v.change?(t._hasPendingMicrotasks=v.microTask,x0(t),R0(t)):"macroTask"==v.change&&(t.hasPendingMacrotasks=v.macroTask))},onHandleError:(o,c,p,v)=>(o.handleError(p,v),t.runOutsideAngular(()=>t.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(nc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,o,c){return this._inner.run(n,o,c)}runTask(n,o,c,p){const v=this._inner,I=v.scheduleEventTask("NgZoneEvent: "+p,n,MD,tv,tv);try{return v.runTask(I,o,c)}finally{v.cancelTask(I)}}runGuarded(n,o,c){return this._inner.runGuarded(n,o,c)}runOutsideAngular(n){return this._outer.run(n)}}const MD={};function R0(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function x0(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function lw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uw(t){t._nesting--,R0(t)}class OD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nd,this.onMicrotaskEmpty=new Nd,this.onStable=new Nd,this.onError=new Nd}run(n,o,c){return n.apply(o,c)}runGuarded(n,o,c){return n.apply(o,c)}runOutsideAngular(n){return n()}runTask(n,o,c,p){return n.apply(o,c)}}let cw=(()=>{class t{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nc.assertNotInAngularZone(),M0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())M0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(o)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,c,p){let v=-1;c&&c>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==v),o(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:o,timeoutId:v,updateCb:p})}whenStable(o,c,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,c,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,c,p){return[]}}return t.\u0275fac=function(o){return new(o||t)(Fe(nc))},t.\u0275prov=Ln({token:t,factory:t.\u0275fac}),t})(),dw=(()=>{class t{constructor(){this._applications=new Map,O0.addToWindow(this)}registerApplication(o,c){this._applications.set(o,c)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,c=!0){return O0.findTestabilityInTree(this,o,c)}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=Ln({token:t,factory:t.\u0275fac}),t})();class kD{addToWindow(n){}findTestabilityInTree(n,o,c){return null}}function PD(t){O0=t}let Xc,O0=new kD;const hw=new Qr("AllowMultipleToken");class BD{constructor(n,o){this.name=n,this.token=o}}function fw(t,n,o=[]){const c=`Platform: ${n}`,p=new Qr(c);return(v=[])=>{let I=pw();if(!I||I.injector.get(hw,!1))if(t)t(o.concat(v).concat({provide:p,useValue:!0}));else{const x=o.concat(v).concat({provide:p,useValue:!0},{provide:qf,useValue:"platform"});!function(t){if(Xc&&!Xc.destroyed&&!Xc.injector.get(hw,!1))throw new ut("400","");Xc=t.get(gw);const n=t.get(rw,null);n&&n.forEach(o=>o())}(iu.create({providers:x,name:c}))}return function(t){const n=pw();if(!n)throw new ut("401","");return n}()}}function pw(){return Xc&&!Xc.destroyed?Xc:null}let gw=(()=>{class t{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,c){const x=function(t,n){let o;return o="noop"===t?new OD:("zone.js"===t?void 0:t)||new nc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),o}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),P=[{provide:nc,useValue:x}];return x.run(()=>{const q=iu.create({providers:P,parent:this.injector,name:o.moduleType.name}),J=o.create(q),ce=J.injector.get(oo,null);if(!ce)throw new ut("402","");return x.runOutsideAngular(()=>{const Me=x.onError.subscribe({next:Ke=>{ce.handleError(Ke)}});J.onDestroy(()=>{k0(this._modules,J),Me.unsubscribe()})}),function(t,n,o){try{const c=o();return pp(c)?c.catch(p=>{throw n.runOutsideAngular(()=>t.handleError(p)),p}):c}catch(c){throw n.runOutsideAngular(()=>t.handleError(c)),c}}(ce,x,()=>{const Me=J.injector.get(Xg);return Me.runInitializers(),Me.donePromise.then(()=>(function(t){(function(t,n){null==t&&Kt(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(xy=t.toLowerCase().replace(/_/g,"-"))}(J.injector.get(nv,Hg)||Hg),this._moduleDoBootstrap(J),J))})})}bootstrapModule(o,c=[]){const p=mw({},c);return function(t,n,o){const c=new f0(o);return Promise.resolve(c)}(0,0,o).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(o){const c=o.injector.get(x_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(p=>c.bootstrap(p));else{if(!o.instance.ngDoBootstrap)throw new ut("403","");o.instance.ngDoBootstrap(c)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ut("404","");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(o){return new(o||t)(Fe(iu))},t.\u0275prov=Ln({token:t,factory:t.\u0275fac}),t})();function mw(t,n){return Array.isArray(n)?n.reduce(mw,t):Object.assign(Object.assign({},t),n)}let x_=(()=>{class t{constructor(o,c,p,v,I){this._zone=o,this._injector=c,this._exceptionHandler=p,this._componentFactoryResolver=v,this._initStatus=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new Y.y(q=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{q.next(this._stable),q.complete()})}),P=new Y.y(q=>{let J;this._zone.runOutsideAngular(()=>{J=this._zone.onStable.subscribe(()=>{nc.assertNotInAngularZone(),M0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,q.next(!0))})})});const ce=this._zone.onUnstable.subscribe(()=>{nc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{q.next(!1)}))});return()=>{J.unsubscribe(),ce.unsubscribe()}});this.isStable=(0,K.T)(x,P.pipe((0,ge.B)()))}bootstrap(o,c){if(!this._initStatus.done)throw new ut("405","");let p;p=o instanceof d0?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(p.componentType);const v=function(t){return t.isBoundToModule}(p)?void 0:this._injector.get(sa),x=p.create(iu.NULL,[],c||p.selector,v),P=x.location.nativeElement,q=x.injector.get(cw,null),J=q&&x.injector.get(dw);return q&&J&&J.registerApplication(P,q),x.onDestroy(()=>{this.detachView(x.hostView),k0(this.components,x),J&&J.unregisterApplication(P)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ut("101","");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const c=o;this._views.push(c),c.attachToAppRef(this)}detachView(o){const c=o;k0(this._views,c),c.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(sw,[]).concat(this._bootstrapListeners).forEach(p=>p(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(o){return new(o||t)(Fe(nc),Fe(iu),Fe(oo),Fe(Kg),Fe(Xg))},t.\u0275prov=Ln({token:t,factory:t.\u0275fac}),t})();function k0(t,n){const o=t.indexOf(n);o>-1&&t.splice(o,1)}let yw=!0,vw=!1;function WD(){return vw=!0,yw}function zD(){if(vw)throw new Error("Cannot enable prod mode after platform setup.");yw=!1}let qD=(()=>{class t{}return t.__NG_ELEMENT_ID__=ZD,t})();function ZD(t){return function(t,n,o){if(Dn(t)&&!o){const c=mn(t.index,n);return new yn(c,c)}return 47&t.type?new yn(n[16],n):null}(ar(),bt(),16==(16&t))}class Tw{constructor(){}supports(n){return Ac(n)}create(n){return new tE(n)}}const eE=(t,n)=>n;class tE{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||eE}forEachItem(n){let o;for(o=this._itHead;null!==o;o=o._next)n(o)}forEachOperation(n){let o=this._itHead,c=this._removalsHead,p=0,v=null;for(;o||c;){const I=!c||o&&o.currentIndex<Sw(c,p,v)?o:c,x=Sw(I,p,v),P=I.currentIndex;if(I===c)p--,c=c._nextRemoved;else if(o=o._next,null==I.previousIndex)p++;else{v||(v=[]);const q=x-p,J=P-p;if(q!=J){for(let Me=0;Me<q;Me++){const Ke=Me<v.length?v[Me]:v[Me]=0,vt=Ke+Me;J<=vt&&vt<q&&(v[Me]=Ke+1)}v[I.previousIndex]=J-q}}x!==P&&n(I,x,P)}}forEachPreviousItem(n){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachMovedItem(n){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}forEachIdentityChange(n){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)n(o)}diff(n){if(null==n&&(n=[]),!Ac(n))throw new Error(`Error trying to diff '${de(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let p,v,I,o=this._itHead,c=!1;if(Array.isArray(n)){this.length=n.length;for(let x=0;x<this.length;x++)v=n[x],I=this._trackByFn(x,v),null!==o&&Object.is(o.trackById,I)?(c&&(o=this._verifyReinsertion(o,v,I,x)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,I,x),c=!0),o=o._next}else p=0,function(t,n){if(Array.isArray(t))for(let o=0;o<t.length;o++)n(t[o]);else{const o=t[md()]();let c;for(;!(c=o.next()).done;)n(c.value)}}(n,x=>{I=this._trackByFn(p,x),null!==o&&Object.is(o.trackById,I)?(c&&(o=this._verifyReinsertion(o,x,I,p)),Object.is(o.item,x)||this._addIdentityChange(o,x)):(o=this._mismatch(o,x,I,p),c=!0),o=o._next,p++}),this.length=p;return this._truncate(o),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,o,c,p){let v;return null===n?v=this._itTail:(v=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._reinsertAfter(n,v,p)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(c,p))?(Object.is(n.item,o)||this._addIdentityChange(n,o),this._moveAfter(n,v,p)):n=this._addAfter(new nE(o,c),v,p),n}_verifyReinsertion(n,o,c,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==v?n=this._reinsertAfter(v,n._prev,p):n.currentIndex!=p&&(n.currentIndex=p,this._addToMoves(n,p)),n}_truncate(n){for(;null!==n;){const o=n._next;this._addToRemovals(this._unlink(n)),n=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const p=n._prevRemoved,v=n._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(n,o,c),this._addToMoves(n,c),n}_moveAfter(n,o,c){return this._unlink(n),this._insertAfter(n,o,c),this._addToMoves(n,c),n}_addAfter(n,o,c){return this._insertAfter(n,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,o,c){const p=null===o?this._itHead:o._next;return n._next=p,n._prev=o,null===p?this._itTail=n:p._prev=n,null===o?this._itHead=n:o._next=n,null===this._linkedRecords&&(this._linkedRecords=new Iw),this._linkedRecords.put(n),n.currentIndex=c,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const o=n._prev,c=n._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,n}_addToMoves(n,o){return n.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Iw),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,o){return n.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class nE{constructor(n,o){this.item=n,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rE{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,n))return c;return null}remove(n){const o=n._prevDup,c=n._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class Iw{constructor(){this.map=new Map}put(n){const o=n.trackById;let c=this.map.get(o);c||(c=new rE,this.map.set(o,c)),c.add(n)}get(n,o){const p=this.map.get(n);return p?p.get(n,o):null}remove(n){const o=n.trackById;return this.map.get(o).remove(n)&&this.map.delete(o),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sw(t,n,o){const c=t.previousIndex;if(null===c)return c;let p=0;return o&&c<o.length&&(p=o[c]),c+n+p}class Aw{constructor(){}supports(n){return n instanceof Map||$o(n)}create(){return new iE}}class iE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let o;for(o=this._mapHead;null!==o;o=o._next)n(o)}forEachPreviousItem(n){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)n(o)}forEachChangedItem(n){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)n(o)}forEachAddedItem(n){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)n(o)}forEachRemovedItem(n){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)n(o)}diff(n){if(n){if(!(n instanceof Map||$o(n)))throw new Error(`Error trying to diff '${de(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(n,(c,p)=>{if(o&&o.key===p)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const v=this._getOrCreateRecordForKey(p,c);o=this._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,o){if(n){const c=n._prev;return o._next=n,o._prev=c,n._prev=o,c&&(c._next=o),n===this._mapHead&&(this._mapHead=o),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(n,o){if(this._records.has(n)){const p=this._records.get(n);this._maybeAddToChanges(p,o);const v=p._prev,I=p._next;return v&&(v._next=I),I&&(I._prev=v),p._next=null,p._prev=null,p}const c=new sE(n);return this._records.set(n,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,o){Object.is(o,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=o,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,o){n instanceof Map?n.forEach(o):Object.keys(n).forEach(c=>o(n[c],c))}}class sE{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Nw(){return new iv([new Tw])}let iv=(()=>{class t{constructor(o){this.factories=o}static create(o,c){if(null!=c){const p=c.factories.slice();o=o.concat(p)}return new t(o)}static extend(o){return{provide:t,useFactory:c=>t.create(o,c||Nw()),deps:[[t,new ro,new ri]]}}find(o){const c=this.factories.find(p=>p.supports(o));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(t){return t.name||typeof t}(o)}'`)}}return t.\u0275prov=Ln({token:t,providedIn:"root",factory:Nw}),t})();function Mw(){return new sv([new Aw])}let sv=(()=>{class t{constructor(o){this.factories=o}static create(o,c){if(c){const p=c.factories.slice();o=o.concat(p)}return new t(o)}static extend(o){return{provide:t,useFactory:c=>t.create(o,c||Mw()),deps:[[t,new ro,new ri]]}}find(o){const c=this.factories.find(p=>p.supports(o));if(c)return c;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return t.\u0275prov=Ln({token:t,providedIn:"root",factory:Mw}),t})();const aE=[new Aw],uE=new iv([new Tw]),cE=new sv(aE),dE=fw(null,"core",[{provide:iw,useValue:"unknown"},{provide:gw,deps:[iu]},{provide:dw,deps:[]},{provide:ow,deps:[]}]),mE=[{provide:x_,useClass:x_,deps:[nc,iu,oo,Kg,Xg]},{provide:Qs,deps:[nc],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(o){n.push(o)}}},{provide:Xg,useClass:Xg,deps:[[new ri,S0]]},{provide:N0,useClass:N0,deps:[]},TD,{provide:iv,useFactory:function(){return uE},deps:[]},{provide:sv,useFactory:function(){return cE},deps:[]},{provide:nv,useFactory:function(t){return t||"undefined"!=typeof $localize&&$localize.locale||Hg},deps:[[new es(nv),new ri,new ro]]},{provide:aw,useValue:"USD"}];let yE=(()=>{class t{constructor(o){}}return t.\u0275fac=function(o){return new(o||t)(Fe(x_))},t.\u0275mod=ht({type:t}),t.\u0275inj=Zn({providers:mE}),t})()},541:(Zt,Ye,H)=>{"use strict";H.d(Ye,{gz:()=>oi,OD:()=>dn,F0:()=>gr,yS:()=>Ii,Bz:()=>ic,lC:()=>Tr});var T=H(5e3),_=H(8306),Y=H(8421);function K(k){return new _.y(N=>{(0,Y.Xf)(k()).subscribe(N)})}var ge=H(727),xe=H(4482),Be=H(5403);function de(){return(0,xe.e)((k,N)=>{let S=null;k._refCount++;const B=new Be.Q(N,void 0,void 0,void 0,()=>{if(!k||k._refCount<=0||0<--k._refCount)return void(S=null);const W=k._connection,te=S;S=null,W&&(!te||W===te)&&W.unsubscribe(),N.unsubscribe()});k.subscribe(B),B.closed||(S=k.connect())})}class $e extends _.y{constructor(N,S){super(),this.source=N,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,(0,xe.A)(N)&&(this.lift=N.lift)}_subscribe(N){return this.getSubject().subscribe(N)}getSubject(){const N=this._subject;return(!N||N.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:N}=this;this._subject=this._connection=null,null==N||N.unsubscribe()}connect(){let N=this._connection;if(!N){N=this._connection=new ge.w0;const S=this.getSubject();N.add(this.source.subscribe(new Be.Q(S,void 0,()=>{this._teardown(),S.complete()},B=>{this._teardown(),S.error(B)},()=>this._teardown()))),N.closed&&(this._connection=null,N=ge.w0.EMPTY)}return N}refCount(){return de()(this)}}var le=H(8996),ue=H(9646),Oe=H(1135),tt=H(9841),Xe=H(6805),ut=H(7272),dt=H(515),ze=H(7579);function Ae(k){return(0,xe.e)((N,S)=>{let te,B=null,W=!1;B=N.subscribe(new Be.Q(S,void 0,void 0,he=>{te=(0,Y.Xf)(k(he,Ae(k)(N))),B?(B.unsubscribe(),B=null,te.subscribe(S)):W=!0})),W&&(B.unsubscribe(),B=null,te.subscribe(S))})}var Le=H(5577),Pe=H(576);function me(k,N){return(0,Pe.m)(N)?(0,Le.z)(k,N,1):(0,Le.z)(k,1)}var _t=H(9300);function pt(k){return k<=0?()=>dt.E:(0,xe.e)((N,S)=>{let B=[];N.subscribe(new Be.Q(S,W=>{B.push(W),k<B.length&&B.shift()},()=>{for(const W of B)S.next(W);S.complete()},void 0,()=>{B=null}))})}var Ut=H(8068),Ct=H(6590),zt=H(4671),Qe=H(4004),rt=H(3900),gt=H(5698),Ge=H(8675),nn=H(5026),xt=H(590),an=H(8505),Qt=H(8189),It=H(9808);class Kt{constructor(N,S){this.id=N,this.url=S}}class dn extends Kt{constructor(N,S,B="imperative",W=null){super(N,S),this.navigationTrigger=B,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mn extends Kt{constructor(N,S,B){super(N,S),this.urlAfterRedirects=B}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ur extends Kt{constructor(N,S,B){super(N,S),this.reason=B}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ln extends Kt{constructor(N,S,B){super(N,S),this.error=B}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ti extends Kt{constructor(N,S,B,W){super(N,S),this.urlAfterRedirects=B,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zn extends Kt{constructor(N,S,B,W){super(N,S),this.urlAfterRedirects=B,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cr extends Kt{constructor(N,S,B,W,te){super(N,S),this.urlAfterRedirects=B,this.state=W,this.shouldActivate=te}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hn extends Kt{constructor(N,S,B,W){super(N,S),this.urlAfterRedirects=B,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni extends Kt{constructor(N,S,B,W){super(N,S),this.urlAfterRedirects=B,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr{constructor(N){this.route=N}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xr{constructor(N){this.route=N}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wt{constructor(N){this.snapshot=N}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gn{constructor(N){this.snapshot=N}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mr{constructor(N){this.snapshot=N}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yr{constructor(N){this.snapshot=N}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lt{constructor(N,S,B){this.routerEvent=N,this.position=S,this.anchor=B}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class wr{constructor(N){this.params=N||{}}has(N){return Object.prototype.hasOwnProperty.call(this.params,N)}get(N){if(this.has(N)){const S=this.params[N];return Array.isArray(S)?S[0]:S}return null}getAll(N){if(this.has(N)){const S=this.params[N];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Ar(k){return new wr(k)}const vn="ngNavigationCancelingError";function _n(k){const N=Error("NavigationCancelingError: "+k);return N[vn]=!0,N}function Vn(k,N,S){const B=S.path.split("/");if(B.length>k.length||"full"===S.pathMatch&&(N.hasChildren()||B.length<k.length))return null;const W={};for(let te=0;te<B.length;te++){const he=B[te],we=k[te];if(he.startsWith(":"))W[he.substring(1)]=we;else if(he!==we.path)return null}return{consumed:k.slice(0,B.length),posParams:W}}function An(k,N){const S=k?Object.keys(k):void 0,B=N?Object.keys(N):void 0;if(!S||!B||S.length!=B.length)return!1;let W;for(let te=0;te<S.length;te++)if(W=S[te],!Ht(k[W],N[W]))return!1;return!0}function Ht(k,N){if(Array.isArray(k)&&Array.isArray(N)){if(k.length!==N.length)return!1;const S=[...k].sort(),B=[...N].sort();return S.every((W,te)=>B[te]===W)}return k===N}function ln(k){return Array.prototype.concat.apply([],k)}function Li(k){return k.length>0?k[k.length-1]:null}function We(k,N){for(const S in k)k.hasOwnProperty(S)&&N(k[S],S)}function ye(k){return(0,T.CqO)(k)?k:(0,T.QGY)(k)?(0,le.D)(Promise.resolve(k)):(0,ue.of)(k)}const yt={exact:function Ze(k,N,S){if(!be(k.segments,N.segments)||!or(k.segments,N.segments,S)||k.numberOfChildren!==N.numberOfChildren)return!1;for(const B in N.children)if(!k.children[B]||!Ze(k.children[B],N.children[B],S))return!1;return!0},subset:Gt},ie={exact:function(k,N){return An(k,N)},subset:function(k,N){return Object.keys(N).length<=Object.keys(k).length&&Object.keys(N).every(S=>Ht(k[S],N[S]))},ignored:()=>!0};function oe(k,N,S){return yt[S.paths](k.root,N.root,S.matrixParams)&&ie[S.queryParams](k.queryParams,N.queryParams)&&!("exact"===S.fragment&&k.fragment!==N.fragment)}function Gt(k,N,S){return rn(k,N,N.segments,S)}function rn(k,N,S,B){if(k.segments.length>S.length){const W=k.segments.slice(0,S.length);return!(!be(W,S)||N.hasChildren()||!or(W,S,B))}if(k.segments.length===S.length){if(!be(k.segments,S)||!or(k.segments,S,B))return!1;for(const W in N.children)if(!k.children[W]||!Gt(k.children[W],N.children[W],B))return!1;return!0}{const W=S.slice(0,k.segments.length),te=S.slice(k.segments.length);return!!(be(k.segments,W)&&or(k.segments,W,B)&&k.children[jt])&&rn(k.children[jt],N,te,B)}}function or(k,N,S){return N.every((B,W)=>ie[S](k[W].parameters,B.parameters))}class xr{constructor(N,S,B){this.root=N,this.queryParams=S,this.fragment=B}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ar(this.queryParams)),this._queryParamMap}toString(){return Rn.serialize(this)}}class hn{constructor(N,S){this.segments=N,this.children=S,this.parent=null,We(S,(B,W)=>B.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bn(this)}}class zr{constructor(N,S){this.path=N,this.parameters=S}get parameterMap(){return this._parameterMap||(this._parameterMap=Ar(this.parameters)),this._parameterMap}toString(){return Cs(this)}}function be(k,N){return k.length===N.length&&k.every((S,B)=>S.path===N[B].path)}class ht{}class Pt{parse(N){const S=new _i(N);return new xr(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(N){const S=`/${On(N.root,!0)}`,B=function(k){const N=Object.keys(k).map(S=>{const B=k[S];return Array.isArray(B)?B.map(W=>`${mr(S)}=${mr(W)}`).join("&"):`${mr(S)}=${mr(B)}`}).filter(S=>!!S);return N.length?`?${N.join("&")}`:""}(N.queryParams);var k;return`${S}${B}${"string"==typeof N.fragment?`#${k=N.fragment,encodeURI(k)}`:""}`}}const Rn=new Pt;function Bn(k){return k.segments.map(N=>Cs(N)).join("/")}function On(k,N){if(!k.hasChildren())return Bn(k);if(N){const S=k.children[jt]?On(k.children[jt],!1):"",B=[];return We(k.children,(W,te)=>{te!==jt&&B.push(`${te}:${On(W,!1)}`)}),B.length>0?`${S}(${B.join("//")})`:S}{const S=function(k,N){let S=[];return We(k.children,(B,W)=>{W===jt&&(S=S.concat(N(B,W)))}),We(k.children,(B,W)=>{W!==jt&&(S=S.concat(N(B,W)))}),S}(k,(B,W)=>W===jt?[On(k.children[jt],!1)]:[`${W}:${On(B,!1)}`]);return 1===Object.keys(k.children).length&&null!=k.children[jt]?`${Bn(k)}/${S[0]}`:`${Bn(k)}/(${S.join("//")})`}}function Jn(k){return encodeURIComponent(k).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mr(k){return Jn(k).replace(/%3B/gi,";")}function wn(k){return Jn(k).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hr(k){return decodeURIComponent(k)}function Mi(k){return hr(k.replace(/\+/g,"%20"))}function Cs(k){return`${wn(k.path)}${function(k){return Object.keys(k).map(N=>`;${wn(N)}=${wn(k[N])}`).join("")}(k.parameters)}`}const jr=/^[^\/()?;=#]+/;function uo(k){const N=k.match(jr);return N?N[0]:""}const Bi=/^[^=?&#]+/,fn=/^[^&#]+/;class _i{constructor(N){this.url=N,this.remaining=N}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){const N={};if(this.consumeOptional("?"))do{this.parseQueryParam(N)}while(this.consumeOptional("&"));return N}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const N=[];for(this.peekStartsWith("(")||N.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),N.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let B={};return this.peekStartsWith("(")&&(B=this.parseParens(!1)),(N.length>0||Object.keys(S).length>0)&&(B[jt]=new hn(N,S)),B}parseSegment(){const N=uo(this.remaining);if(""===N&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(N),new zr(hr(N),this.parseMatrixParams())}parseMatrixParams(){const N={};for(;this.consumeOptional(";");)this.parseParam(N);return N}parseParam(N){const S=uo(this.remaining);if(!S)return;this.capture(S);let B="";if(this.consumeOptional("=")){const W=uo(this.remaining);W&&(B=W,this.capture(B))}N[hr(S)]=hr(B)}parseQueryParam(N){const S=function(k){const N=k.match(Bi);return N?N[0]:""}(this.remaining);if(!S)return;this.capture(S);let B="";if(this.consumeOptional("=")){const he=function(k){const N=k.match(fn);return N?N[0]:""}(this.remaining);he&&(B=he,this.capture(B))}const W=Mi(S),te=Mi(B);if(N.hasOwnProperty(W)){let he=N[W];Array.isArray(he)||(he=[he],N[W]=he),he.push(te)}else N[W]=te}parseParens(N){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const B=uo(this.remaining),W=this.remaining[B.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let te;B.indexOf(":")>-1?(te=B.substr(0,B.indexOf(":")),this.capture(te),this.capture(":")):N&&(te=jt);const he=this.parseChildren();S[te]=1===Object.keys(he).length?he[jt]:new hn([],he),this.consumeOptional("//")}return S}peekStartsWith(N){return this.remaining.startsWith(N)}consumeOptional(N){return!!this.peekStartsWith(N)&&(this.remaining=this.remaining.substring(N.length),!0)}capture(N){if(!this.consumeOptional(N))throw new Error(`Expected "${N}".`)}}class Zi{constructor(N){this._root=N}get root(){return this._root.value}parent(N){const S=this.pathFromRoot(N);return S.length>1?S[S.length-2]:null}children(N){const S=Vr(N,this._root);return S?S.children.map(B=>B.value):[]}firstChild(N){const S=Vr(N,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(N){const S=yi(N,this._root);return S.length<2?[]:S[S.length-2].children.map(W=>W.value).filter(W=>W!==N)}pathFromRoot(N){return yi(N,this._root).map(S=>S.value)}}function Vr(k,N){if(k===N.value)return N;for(const S of N.children){const B=Vr(k,S);if(B)return B}return null}function yi(k,N){if(k===N.value)return[N];for(const S of N.children){const B=yi(k,S);if(B.length)return B.unshift(N),B}return[]}class ir{constructor(N,S){this.value=N,this.children=S}toString(){return`TreeNode(${this.value})`}}function qr(k){const N={};return k&&k.children.forEach(S=>N[S.value.outlet]=S),N}class Ts extends Zi{constructor(N,S){super(N),this.snapshot=S,Te(this,N)}toString(){return this.snapshot.toString()}}function Nn(k,N){const S=function(k,N){const he=new on([],{},{},"",{},jt,N,null,k.root,-1,{});return new $r("",new ir(he,[]))}(k,N),B=new Oe.X([new zr("",{})]),W=new Oe.X({}),te=new Oe.X({}),he=new Oe.X({}),we=new Oe.X(""),ct=new oi(B,W,he,we,te,jt,N,S.root);return ct.snapshot=S.root,new Ts(new ir(ct,[]),S)}class oi{constructor(N,S,B,W,te,he,we,ct){this.url=N,this.params=S,this.queryParams=B,this.fragment=W,this.data=te,this.outlet=he,this.component=we,this._futureSnapshot=ct}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(N=>Ar(N)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(N=>Ar(N)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lr(k,N="emptyOnly"){const S=k.pathFromRoot;let B=0;if("always"!==N)for(B=S.length-1;B>=1;){const W=S[B],te=S[B-1];if(W.routeConfig&&""===W.routeConfig.path)B--;else{if(te.component)break;B--}}return function(k){return k.reduce((N,S)=>({params:Object.assign(Object.assign({},N.params),S.params),data:Object.assign(Object.assign({},N.data),S.data),resolve:Object.assign(Object.assign({},N.resolve),S._resolvedData)}),{params:{},data:{},resolve:{}})}(S.slice(B))}class on{constructor(N,S,B,W,te,he,we,ct,Xt,en,En){this.url=N,this.params=S,this.queryParams=B,this.fragment=W,this.data=te,this.outlet=he,this.component=we,this.routeConfig=ct,this._urlSegment=Xt,this._lastPathIndex=en,this._resolve=En}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ar(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ar(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(B=>B.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $r extends Zi{constructor(N,S){super(S),this.url=N,Te(this,S)}toString(){return Ne(this._root)}}function Te(k,N){N.value._routerState=k,N.children.forEach(S=>Te(k,S))}function Ne(k){const N=k.children.length>0?` { ${k.children.map(Ne).join(", ")} } `:"";return`${k.value}${N}`}function He(k){if(k.snapshot){const N=k.snapshot,S=k._futureSnapshot;k.snapshot=S,An(N.queryParams,S.queryParams)||k.queryParams.next(S.queryParams),N.fragment!==S.fragment&&k.fragment.next(S.fragment),An(N.params,S.params)||k.params.next(S.params),function(k,N){if(k.length!==N.length)return!1;for(let S=0;S<k.length;++S)if(!An(k[S],N[S]))return!1;return!0}(N.url,S.url)||k.url.next(S.url),An(N.data,S.data)||k.data.next(S.data)}else k.snapshot=k._futureSnapshot,k.data.next(k._futureSnapshot.data)}function mt(k,N){const S=An(k.params,N.params)&&function(k,N){return be(k,N)&&k.every((S,B)=>An(S.parameters,N[B].parameters))}(k.url,N.url);return S&&!(!k.parent!=!N.parent)&&(!k.parent||mt(k.parent,N.parent))}function At(k,N,S){if(S&&k.shouldReuseRoute(N.value,S.value.snapshot)){const B=S.value;B._futureSnapshot=N.value;const W=function(k,N,S){return N.children.map(B=>{for(const W of S.children)if(k.shouldReuseRoute(B.value,W.value.snapshot))return At(k,B,W);return At(k,B)})}(k,N,S);return new ir(B,W)}{if(k.shouldAttach(N.value)){const te=k.retrieve(N.value);if(null!==te){const he=te.route;return he.value._futureSnapshot=N.value,he.children=N.children.map(we=>At(k,we)),he}}const B=function(k){return new oi(new Oe.X(k.url),new Oe.X(k.params),new Oe.X(k.queryParams),new Oe.X(k.fragment),new Oe.X(k.data),k.outlet,k.component,k)}(N.value),W=N.children.map(te=>At(k,te));return new ir(B,W)}}function ei(k){return"object"==typeof k&&null!=k&&!k.outlets&&!k.segmentPath}function Xn(k){return"object"==typeof k&&null!=k&&k.outlets}function gi(k,N,S,B,W){let te={};return B&&We(B,(he,we)=>{te[we]=Array.isArray(he)?he.map(ct=>`${ct}`):`${he}`}),new xr(S.root===k?N:oa(S.root,k,N),te,W)}function oa(k,N,S){const B={};return We(k.children,(W,te)=>{B[te]=W===N?S:oa(W,N,S)}),new hn(k.segments,B)}class vi{constructor(N,S,B){if(this.isAbsolute=N,this.numberOfDoubleDots=S,this.commands=B,N&&B.length>0&&ei(B[0]))throw new Error("Root segment cannot have matrix parameters");const W=B.find(Xn);if(W&&W!==Li(B))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class fs{constructor(N,S,B){this.segmentGroup=N,this.processChildren=S,this.index=B}}function Ta(k,N,S){if(k||(k=new hn([],{})),0===k.segments.length&&k.hasChildren())return Ao(k,N,S);const B=function(k,N,S){let B=0,W=N;const te={match:!1,pathIndex:0,commandIndex:0};for(;W<k.segments.length;){if(B>=S.length)return te;const he=k.segments[W],we=S[B];if(Xn(we))break;const ct=`${we}`,Xt=B<S.length-1?S[B+1]:null;if(W>0&&void 0===ct)break;if(ct&&Xt&&"object"==typeof Xt&&void 0===Xt.outlets){if(!ps(ct,Xt,he))return te;B+=2}else{if(!ps(ct,{},he))return te;B++}W++}return{match:!0,pathIndex:W,commandIndex:B}}(k,N,S),W=S.slice(B.commandIndex);if(B.match&&B.pathIndex<k.segments.length){const te=new hn(k.segments.slice(0,B.pathIndex),{});return te.children[jt]=new hn(k.segments.slice(B.pathIndex),k.children),Ao(te,0,W)}return B.match&&0===W.length?new hn(k.segments,{}):B.match&&!k.hasChildren()?co(k,N,S):B.match?Ao(k,0,W):co(k,N,S)}function Ao(k,N,S){if(0===S.length)return new hn(k.segments,{});{const B=function(k){return Xn(k[0])?k[0].outlets:{[jt]:k}}(S),W={};return We(B,(te,he)=>{"string"==typeof te&&(te=[te]),null!==te&&(W[he]=Ta(k.children[he],N,te))}),We(k.children,(te,he)=>{void 0===B[he]&&(W[he]=te)}),new hn(k.segments,W)}}function co(k,N,S){const B=k.segments.slice(0,N);let W=0;for(;W<S.length;){const te=S[W];if(Xn(te)){const ct=ll(te.outlets);return new hn(B,ct)}if(0===W&&ei(S[0])){B.push(new zr(k.segments[N].path,Ia(S[0]))),W++;continue}const he=Xn(te)?te.outlets[jt]:`${te}`,we=W<S.length-1?S[W+1]:null;he&&we&&ei(we)?(B.push(new zr(he,Ia(we))),W+=2):(B.push(new zr(he,{})),W++)}return new hn(B,{})}function ll(k){const N={};return We(k,(S,B)=>{"string"==typeof S&&(S=[S]),null!==S&&(N[B]=co(new hn([],{}),0,S))}),N}function Ia(k){const N={};return We(k,(S,B)=>N[B]=`${S}`),N}function ps(k,N,S){return k==S.path&&An(N,S.parameters)}class gs{constructor(N,S,B,W){this.routeReuseStrategy=N,this.futureState=S,this.currState=B,this.forwardEvent=W}activate(N){const S=this.futureState._root,B=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,B,N),He(this.futureState.root),this.activateChildRoutes(S,B,N)}deactivateChildRoutes(N,S,B){const W=qr(S);N.children.forEach(te=>{const he=te.value.outlet;this.deactivateRoutes(te,W[he],B),delete W[he]}),We(W,(te,he)=>{this.deactivateRouteAndItsChildren(te,B)})}deactivateRoutes(N,S,B){const W=N.value,te=S?S.value:null;if(W===te)if(W.component){const he=B.getContext(W.outlet);he&&this.deactivateChildRoutes(N,S,he.children)}else this.deactivateChildRoutes(N,S,B);else te&&this.deactivateRouteAndItsChildren(S,B)}deactivateRouteAndItsChildren(N,S){N.value.component&&this.routeReuseStrategy.shouldDetach(N.value.snapshot)?this.detachAndStoreRouteSubtree(N,S):this.deactivateRouteAndOutlet(N,S)}detachAndStoreRouteSubtree(N,S){const B=S.getContext(N.value.outlet),W=B&&N.value.component?B.children:S,te=qr(N);for(const he of Object.keys(te))this.deactivateRouteAndItsChildren(te[he],W);if(B&&B.outlet){const he=B.outlet.detach(),we=B.children.onOutletDeactivated();this.routeReuseStrategy.store(N.value.snapshot,{componentRef:he,route:N,contexts:we})}}deactivateRouteAndOutlet(N,S){const B=S.getContext(N.value.outlet),W=B&&N.value.component?B.children:S,te=qr(N);for(const he of Object.keys(te))this.deactivateRouteAndItsChildren(te[he],W);B&&B.outlet&&(B.outlet.deactivate(),B.children.onOutletDeactivated(),B.attachRef=null,B.resolver=null,B.route=null)}activateChildRoutes(N,S,B){const W=qr(S);N.children.forEach(te=>{this.activateRoutes(te,W[te.value.outlet],B),this.forwardEvent(new Yr(te.value.snapshot))}),N.children.length&&this.forwardEvent(new Gn(N.value.snapshot))}activateRoutes(N,S,B){const W=N.value,te=S?S.value:null;if(He(W),W===te)if(W.component){const he=B.getOrCreateContext(W.outlet);this.activateChildRoutes(N,S,he.children)}else this.activateChildRoutes(N,S,B);else if(W.component){const he=B.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const we=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),he.children.onOutletReAttached(we.contexts),he.attachRef=we.componentRef,he.route=we.route.value,he.outlet&&he.outlet.attach(we.componentRef,we.route.value),He(we.route.value),this.activateChildRoutes(N,null,he.children)}else{const we=function(k){for(let N=k.parent;N;N=N.parent){const S=N.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig;if(S&&S.component)return null}return null}(W.snapshot),ct=we?we.module.componentFactoryResolver:null;he.attachRef=null,he.route=W,he.resolver=ct,he.outlet&&he.outlet.activateWith(W,ct),this.activateChildRoutes(N,null,he.children)}}else this.activateChildRoutes(N,null,B)}}class Ps{constructor(N,S){this.routes=N,this.module=S}}function ti(k){return"function"==typeof k}function hi(k){return k instanceof xr}const Cr=Symbol("INITIAL_VALUE");function Ki(){return(0,rt.w)(k=>(0,tt.a)(k.map(N=>N.pipe((0,gt.q)(1),(0,Ge.O)(Cr)))).pipe((0,nn.R)((N,S)=>{let B=!1;return S.reduce((W,te,he)=>W!==Cr?W:(te===Cr&&(B=!0),B||!1!==te&&he!==S.length-1&&!hi(te)?W:te),N)},Cr),(0,_t.h)(N=>N!==Cr),(0,Qe.U)(N=>hi(N)?N:!0===N),(0,gt.q)(1)))}class Sa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Yi,this.attachRef=null}}class Yi{constructor(){this.contexts=new Map}onChildOutletCreated(N,S){const B=this.getOrCreateContext(N);B.outlet=S,this.contexts.set(N,B)}onChildOutletDestroyed(N){const S=this.getContext(N);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const N=this.contexts;return this.contexts=new Map,N}onOutletReAttached(N){this.contexts=N}getOrCreateContext(N){let S=this.getContext(N);return S||(S=new Sa,this.contexts.set(N,S)),S}getContext(N){return this.contexts.get(N)||null}}let Tr=(()=>{class k{constructor(S,B,W,te,he){this.parentContexts=S,this.location=B,this.resolver=W,this.changeDetector=he,this.activated=null,this._activatedRoute=null,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.name=te||jt,S.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const S=this.parentContexts.getContext(this.name);S&&S.route&&(S.attachRef?this.attach(S.attachRef,S.route):this.activateWith(S.route,S.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const S=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(S.instance),S}attach(S,B){this.activated=S,this._activatedRoute=B,this.location.insert(S.hostView),this.attachEvents.emit(S.instance)}deactivate(){if(this.activated){const S=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,B){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;const he=(B=B||this.resolver).resolveComponentFactory(S._futureSnapshot.routeConfig.component),we=this.parentContexts.getOrCreateContext(this.name).children,ct=new bi(S,we,this.location.injector);this.activated=this.location.createComponent(he,this.location.length,ct),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return k.\u0275fac=function(S){return new(S||k)(T.Y36(Yi),T.Y36(T.s_b),T.Y36(T._Vd),T.$8M("name"),T.Y36(T.sBO))},k.\u0275dir=T.lG2({type:k,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),k})();class bi{constructor(N,S,B){this.route=N,this.childContexts=S,this.parent=B}get(N,S){return N===oi?this.route:N===Yi?this.childContexts:this.parent.get(N,S)}}let aa=(()=>{class k{}return k.\u0275fac=function(S){return new(S||k)},k.\u0275cmp=T.Xpm({type:k,selectors:[["ng-component"]],decls:1,vars:0,template:function(S,B){1&S&&T._UZ(0,"router-outlet")},directives:[Tr],encapsulation:2}),k})();function Mo(k,N=""){for(let S=0;S<k.length;S++){const B=k[S];Ui(B,ho(N,B))}}function Ui(k,N){k.children&&Mo(k.children,N)}function ho(k,N){return N?k||N.path?k&&!N.path?`${k}/`:!k&&N.path?N.path:`${k}/${N.path}`:"":k}function Ga(k){const N=k.children&&k.children.map(Ga),S=N?Object.assign(Object.assign({},k),{children:N}):Object.assign({},k);return!S.component&&(N||S.loadChildren)&&S.outlet&&S.outlet!==jt&&(S.component=aa),S}function Kn(k){return k.outlet||jt}function Ro(k,N){const S=k.filter(B=>Kn(B)===N);return S.push(...k.filter(B=>Kn(B)!==N)),S}const Fs={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function xo(k,N,S){var B;if(""===N.path)return"full"===N.pathMatch&&(k.hasChildren()||S.length>0)?Object.assign({},Fs):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const te=(N.matcher||Vn)(S,k,N);if(!te)return Object.assign({},Fs);const he={};We(te.posParams,(ct,Xt)=>{he[Xt]=ct.path});const we=te.consumed.length>0?Object.assign(Object.assign({},he),te.consumed[te.consumed.length-1].parameters):he;return{matched:!0,consumedSegments:te.consumed,lastChild:te.consumed.length,parameters:we,positionalParamSegments:null!==(B=te.posParams)&&void 0!==B?B:{}}}function Ir(k,N,S,B,W="corrected"){if(S.length>0&&function(k,N,S){return S.some(B=>j(k,N,B)&&Kn(B)!==jt)}(k,S,B)){const he=new hn(N,function(k,N,S,B){const W={};W[jt]=B,B._sourceSegment=k,B._segmentIndexShift=N.length;for(const te of S)if(""===te.path&&Kn(te)!==jt){const he=new hn([],{});he._sourceSegment=k,he._segmentIndexShift=N.length,W[Kn(te)]=he}return W}(k,N,B,new hn(S,k.children)));return he._sourceSegment=k,he._segmentIndexShift=N.length,{segmentGroup:he,slicedSegments:[]}}if(0===S.length&&function(k,N,S){return S.some(B=>j(k,N,B))}(k,S,B)){const he=new hn(k.segments,function(k,N,S,B,W,te){const he={};for(const we of B)if(j(k,S,we)&&!W[Kn(we)]){const ct=new hn([],{});ct._sourceSegment=k,ct._segmentIndexShift="legacy"===te?k.segments.length:N.length,he[Kn(we)]=ct}return Object.assign(Object.assign({},W),he)}(k,N,S,B,k.children,W));return he._sourceSegment=k,he._segmentIndexShift=N.length,{segmentGroup:he,slicedSegments:S}}const te=new hn(k.segments,k.children);return te._sourceSegment=k,te._segmentIndexShift=N.length,{segmentGroup:te,slicedSegments:S}}function j(k,N,S){return(!(k.hasChildren()||N.length>0)||"full"!==S.pathMatch)&&""===S.path}function ne(k,N,S,B){return!!(Kn(k)===B||B!==jt&&j(N,S,k))&&("**"===k.path||xo(N,k,S).matched)}function De(k,N,S){return 0===N.length&&!k.children[S]}class Je{constructor(N){this.segmentGroup=N||null}}class Et{constructor(N){this.urlTree=N}}function sn(k){return new _.y(N=>N.error(new Je(k)))}function mn(k){return new _.y(N=>N.error(new Et(k)))}function Sr(k){return new _.y(N=>N.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${k}'`)))}class Br{constructor(N,S,B,W,te){this.configLoader=S,this.urlSerializer=B,this.urlTree=W,this.config=te,this.allowRedirects=!0,this.ngModule=N.get(T.h0i)}apply(){const N=Ir(this.urlTree.root,[],[],this.config).segmentGroup,S=new hn(N.segments,N.children);return this.expandSegmentGroup(this.ngModule,this.config,S,jt).pipe((0,Qe.U)(te=>this.createUrlTree(kn(te),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ae(te=>{if(te instanceof Et)return this.allowRedirects=!1,this.match(te.urlTree);throw te instanceof Je?this.noMatchError(te):te}))}match(N){return this.expandSegmentGroup(this.ngModule,this.config,N.root,jt).pipe((0,Qe.U)(W=>this.createUrlTree(kn(W),N.queryParams,N.fragment))).pipe(Ae(W=>{throw W instanceof Je?this.noMatchError(W):W}))}noMatchError(N){return new Error(`Cannot match any routes. URL Segment: '${N.segmentGroup}'`)}createUrlTree(N,S,B){const W=N.segments.length>0?new hn([],{[jt]:N}):N;return new xr(W,S,B)}expandSegmentGroup(N,S,B,W){return 0===B.segments.length&&B.hasChildren()?this.expandChildren(N,S,B).pipe((0,Qe.U)(te=>new hn([],te))):this.expandSegment(N,B,S,B.segments,W,!0)}expandChildren(N,S,B){const W=[];for(const te of Object.keys(B.children))"primary"===te?W.unshift(te):W.push(te);return(0,le.D)(W).pipe(me(te=>{const he=B.children[te],we=Ro(S,te);return this.expandSegmentGroup(N,we,he,te).pipe((0,Qe.U)(ct=>({segment:ct,outlet:te})))}),(0,nn.R)((te,he)=>(te[he.outlet]=he.segment,te),{}),function(k,N){const S=arguments.length>=2;return B=>B.pipe(k?(0,_t.h)((W,te)=>k(W,te,B)):zt.y,pt(1),S?(0,Ct.d)(N):(0,Ut.T)(()=>new Xe.K))}())}expandSegment(N,S,B,W,te,he){return(0,le.D)(B).pipe(me(we=>this.expandSegmentAgainstRoute(N,S,B,we,W,te,he).pipe(Ae(Xt=>{if(Xt instanceof Je)return(0,ue.of)(null);throw Xt}))),(0,xt.P)(we=>!!we),Ae((we,ct)=>{if(we instanceof Xe.K||"EmptyError"===we.name){if(De(S,W,te))return(0,ue.of)(new hn([],{}));throw new Je(S)}throw we}))}expandSegmentAgainstRoute(N,S,B,W,te,he,we){return ne(W,S,te,he)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(N,S,W,te,he):we&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(N,S,B,W,te,he):sn(S):sn(S)}expandSegmentAgainstRouteUsingRedirect(N,S,B,W,te,he){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(N,B,W,he):this.expandRegularSegmentAgainstRouteUsingRedirect(N,S,B,W,te,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(N,S,B,W){const te=this.applyRedirectCommands([],B.redirectTo,{});return B.redirectTo.startsWith("/")?mn(te):this.lineralizeSegments(B,te).pipe((0,Le.z)(he=>{const we=new hn(he,{});return this.expandSegment(N,we,S,he,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(N,S,B,W,te,he){const{matched:we,consumedSegments:ct,lastChild:Xt,positionalParamSegments:en}=xo(S,W,te);if(!we)return sn(S);const En=this.applyRedirectCommands(ct,W.redirectTo,en);return W.redirectTo.startsWith("/")?mn(En):this.lineralizeSegments(W,En).pipe((0,Le.z)(Nr=>this.expandSegment(N,S,B,Nr.concat(te.slice(Xt)),he,!1)))}matchSegmentAgainstRoute(N,S,B,W,te){if("**"===B.path)return B.loadChildren?(B._loadedConfig?(0,ue.of)(B._loadedConfig):this.configLoader.load(N.injector,B)).pipe((0,Qe.U)(Nr=>(B._loadedConfig=Nr,new hn(W,{})))):(0,ue.of)(new hn(W,{}));const{matched:he,consumedSegments:we,lastChild:ct}=xo(S,B,W);if(!he)return sn(S);const Xt=W.slice(ct);return this.getChildConfig(N,B,W).pipe((0,Le.z)(En=>{const Nr=En.module,Yn=En.routes,{segmentGroup:Fn,slicedSegments:Ji}=Ir(S,we,Xt,Yn),ui=new hn(Fn.segments,Fn.children);if(0===Ji.length&&ui.hasChildren())return this.expandChildren(Nr,Yn,ui).pipe((0,Qe.U)(Gs=>new hn(we,Gs)));if(0===Yn.length&&0===Ji.length)return(0,ue.of)(new hn(we,{}));const bs=Kn(B)===te;return this.expandSegment(Nr,ui,Yn,Ji,bs?jt:te,!0).pipe((0,Qe.U)(In=>new hn(we.concat(In.segments),In.children)))}))}getChildConfig(N,S,B){return S.children?(0,ue.of)(new Ps(S.children,N)):S.loadChildren?void 0!==S._loadedConfig?(0,ue.of)(S._loadedConfig):this.runCanLoadGuards(N.injector,S,B).pipe((0,Le.z)(W=>{return W?this.configLoader.load(N.injector,S).pipe((0,Qe.U)(te=>(S._loadedConfig=te,te))):(k=S,new _.y(N=>N.error(_n(`Cannot load children because the guard of the route "path: '${k.path}'" returned false`))));var k})):(0,ue.of)(new Ps([],N))}runCanLoadGuards(N,S,B){const W=S.canLoad;if(!W||0===W.length)return(0,ue.of)(!0);const te=W.map(he=>{const we=N.get(he);let ct;if((k=we)&&ti(k.canLoad))ct=we.canLoad(S,B);else{if(!ti(we))throw new Error("Invalid CanLoad guard");ct=we(S,B)}var k;return ye(ct)});return(0,ue.of)(te).pipe(Ki(),(0,an.b)(he=>{if(!hi(he))return;const we=_n(`Redirecting to "${this.urlSerializer.serialize(he)}"`);throw we.url=he,we}),(0,Qe.U)(he=>!0===he))}lineralizeSegments(N,S){let B=[],W=S.root;for(;;){if(B=B.concat(W.segments),0===W.numberOfChildren)return(0,ue.of)(B);if(W.numberOfChildren>1||!W.children[jt])return Sr(N.redirectTo);W=W.children[jt]}}applyRedirectCommands(N,S,B){return this.applyRedirectCreatreUrlTree(S,this.urlSerializer.parse(S),N,B)}applyRedirectCreatreUrlTree(N,S,B,W){const te=this.createSegmentGroup(N,S.root,B,W);return new xr(te,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(N,S){const B={};return We(N,(W,te)=>{if("string"==typeof W&&W.startsWith(":")){const we=W.substring(1);B[te]=S[we]}else B[te]=W}),B}createSegmentGroup(N,S,B,W){const te=this.createSegments(N,S.segments,B,W);let he={};return We(S.children,(we,ct)=>{he[ct]=this.createSegmentGroup(N,we,B,W)}),new hn(te,he)}createSegments(N,S,B,W){return S.map(te=>te.path.startsWith(":")?this.findPosParam(N,te,W):this.findOrReturn(te,B))}findPosParam(N,S,B){const W=B[S.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${N}'. Cannot find '${S.path}'.`);return W}findOrReturn(N,S){let B=0;for(const W of S){if(W.path===N.path)return S.splice(B),W;B++}return N}}function kn(k){const N={};for(const B of Object.keys(k.children)){const te=kn(k.children[B]);(te.segments.length>0||te.hasChildren())&&(N[B]=te)}return function(k){if(1===k.numberOfChildren&&k.children[jt]){const N=k.children[jt];return new hn(k.segments.concat(N.segments),N.children)}return k}(new hn(k.segments,N))}class fo{constructor(N){this.path=N,this.route=this.path[this.path.length-1]}}class rs{constructor(N,S){this.component=N,this.route=S}}function Hi(k,N,S){const B=k._root;return Bs(B,N?N._root:null,S,[B.value])}function _s(k,N,S){const B=function(k){if(!k)return null;for(let N=k.parent;N;N=N.parent){const S=N.routeConfig;if(S&&S._loadedConfig)return S._loadedConfig}return null}(N);return(B?B.module.injector:S).get(k)}function Bs(k,N,S,B,W={canDeactivateChecks:[],canActivateChecks:[]}){const te=qr(N);return k.children.forEach(he=>{(function(k,N,S,B,W={canDeactivateChecks:[],canActivateChecks:[]}){const te=k.value,he=N?N.value:null,we=S?S.getContext(k.value.outlet):null;if(he&&te.routeConfig===he.routeConfig){const ct=function(k,N,S){if("function"==typeof S)return S(k,N);switch(S){case"pathParamsChange":return!be(k.url,N.url);case"pathParamsOrQueryParamsChange":return!be(k.url,N.url)||!An(k.queryParams,N.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mt(k,N)||!An(k.queryParams,N.queryParams);default:return!mt(k,N)}}(he,te,te.routeConfig.runGuardsAndResolvers);ct?W.canActivateChecks.push(new fo(B)):(te.data=he.data,te._resolvedData=he._resolvedData),Bs(k,N,te.component?we?we.children:null:S,B,W),ct&&we&&we.outlet&&we.outlet.isActivated&&W.canDeactivateChecks.push(new rs(we.outlet.component,he))}else he&&Oo(N,we,W),W.canActivateChecks.push(new fo(B)),Bs(k,null,te.component?we?we.children:null:S,B,W)})(he,te[he.value.outlet],S,B.concat([he.value]),W),delete te[he.value.outlet]}),We(te,(he,we)=>Oo(he,S.getContext(we),W)),W}function Oo(k,N,S){const B=qr(k),W=k.value;We(B,(te,he)=>{Oo(te,W.component?N?N.children.getContext(he):null:N,S)}),S.canDeactivateChecks.push(new rs(W.component&&N&&N.outlet&&N.outlet.isActivated?N.outlet.component:null,W))}class po{}function ys(k){return new _.y(N=>N.error(k))}class wi{constructor(N,S,B,W,te,he){this.rootComponentType=N,this.config=S,this.urlTree=B,this.url=W,this.paramsInheritanceStrategy=te,this.relativeLinkResolution=he}recognize(){const N=Ir(this.urlTree.root,[],[],this.config.filter(he=>void 0===he.redirectTo),this.relativeLinkResolution).segmentGroup,S=this.processSegmentGroup(this.config,N,jt);if(null===S)return null;const B=new on([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new ir(B,S),te=new $r(this.url,W);return this.inheritParamsAndData(te._root),te}inheritParamsAndData(N){const S=N.value,B=lr(S,this.paramsInheritanceStrategy);S.params=Object.freeze(B.params),S.data=Object.freeze(B.data),N.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(N,S,B){return 0===S.segments.length&&S.hasChildren()?this.processChildren(N,S):this.processSegment(N,S,S.segments,B)}processChildren(N,S){const B=[];for(const te of Object.keys(S.children)){const he=S.children[te],we=Ro(N,te),ct=this.processSegmentGroup(we,he,te);if(null===ct)return null;B.push(...ct)}const W=to(B);return W.sort((N,S)=>N.value.outlet===jt?-1:S.value.outlet===jt?1:N.value.outlet.localeCompare(S.value.outlet)),W}processSegment(N,S,B,W){for(const te of N){const he=this.processSegmentAgainstRoute(te,S,B,W);if(null!==he)return he}return De(S,B,W)?[]:null}processSegmentAgainstRoute(N,S,B,W){if(N.redirectTo||!ne(N,S,B,W))return null;let te,he=[],we=[];if("**"===N.path){const Yn=B.length>0?Li(B).parameters:{};te=new on(B,Yn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,da(N),Kn(N),N.component,N,go(S),dl(S)+B.length,Na(N))}else{const Yn=xo(S,N,B);if(!Yn.matched)return null;he=Yn.consumedSegments,we=B.slice(Yn.lastChild),te=new on(he,Yn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,da(N),Kn(N),N.component,N,go(S),dl(S)+he.length,Na(N))}const ct=(k=N).children?k.children:k.loadChildren?k._loadedConfig.routes:[],{segmentGroup:Xt,slicedSegments:en}=Ir(S,he,we,ct.filter(Yn=>void 0===Yn.redirectTo),this.relativeLinkResolution);var k;if(0===en.length&&Xt.hasChildren()){const Yn=this.processChildren(ct,Xt);return null===Yn?null:[new ir(te,Yn)]}if(0===ct.length&&0===en.length)return[new ir(te,[])];const En=Kn(N)===W,Nr=this.processSegment(ct,Xt,en,En?jt:W);return null===Nr?null:[new ir(te,Nr)]}}function ls(k){const N=k.value.routeConfig;return N&&""===N.path&&void 0===N.redirectTo}function to(k){const N=[],S=new Set;for(const B of k){if(!ls(B)){N.push(B);continue}const W=N.find(te=>B.value.routeConfig===te.value.routeConfig);void 0!==W?(W.children.push(...B.children),S.add(W)):N.push(B)}for(const B of S){const W=to(B.children);N.push(new ir(B.value,W))}return N.filter(B=>!S.has(B))}function go(k){let N=k;for(;N._sourceSegment;)N=N._sourceSegment;return N}function dl(k){let N=k,S=N._segmentIndexShift?N._segmentIndexShift:0;for(;N._sourceSegment;)N=N._sourceSegment,S+=N._segmentIndexShift?N._segmentIndexShift:0;return S-1}function da(k){return k.data||{}}function Na(k){return k.resolve||{}}function ko(k){return(0,rt.w)(N=>{const S=k(N);return S?(0,le.D)(S).pipe((0,Qe.U)(()=>N)):(0,ue.of)(N)})}class ss extends class{shouldDetach(N){return!1}store(N,S){}shouldAttach(N){return!1}retrieve(N){return null}shouldReuseRoute(N,S){return N.routeConfig===S.routeConfig}}{}const $s=new T.OlP("ROUTES");class $l{constructor(N,S,B,W){this.injector=N,this.compiler=S,this.onLoadStartListener=B,this.onLoadEndListener=W}load(N,S){if(S._loader$)return S._loader$;this.onLoadStartListener&&this.onLoadStartListener(S);const W=this.loadModuleFactory(S.loadChildren).pipe((0,Qe.U)(te=>{this.onLoadEndListener&&this.onLoadEndListener(S);const he=te.create(N);return new Ps(ln(he.injector.get($s,void 0,T.XFs.Self|T.XFs.Optional)).map(Ga),he)}),Ae(te=>{throw S._loader$=void 0,te}));return S._loader$=new $e(W,()=>new ze.x).pipe(de()),S._loader$}loadModuleFactory(N){return ye(N()).pipe((0,Le.z)(S=>S instanceof T.YKP?(0,ue.of)(S):(0,le.D)(this.compiler.compileModuleAsync(S))))}}class fi{shouldProcessUrl(N){return!0}extract(N){return N}merge(N,S){return N}}function yo(k){throw k}function Ur(k,N,S){return N.parse("/")}function Zo(k,N){return(0,ue.of)(null)}const za={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ko={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gr=(()=>{class k{constructor(S,B,W,te,he,we,ct){this.rootComponentType=S,this.urlSerializer=B,this.rootContexts=W,this.location=te,this.config=ct,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ze.x,this.errorHandler=yo,this.malformedUriErrorHandler=Ur,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zo,afterPreactivation:Zo},this.urlHandlingStrategy=new fi,this.routeReuseStrategy=new ss,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=he.get(T.h0i),this.console=he.get(T.c2e);const En=he.get(T.R0b);this.isNgZoneEnabled=En instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(ct),this.currentUrlTree=new xr(new hn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $l(he,we,Nr=>this.triggerEvent(new Lr(Nr)),Nr=>this.triggerEvent(new Xr(Nr))),this.routerState=Nn(this.currentUrlTree,this.rootComponentType),this.transitions=new Oe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var S;return null===(S=this.location.getState())||void 0===S?void 0:S.\u0275routerPageId}setupNavigations(S){const B=this.events;return S.pipe((0,_t.h)(W=>0!==W.id),(0,Qe.U)(W=>Object.assign(Object.assign({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),(0,rt.w)(W=>{let te=!1,he=!1;return(0,ue.of)(W).pipe((0,an.b)(we=>{this.currentNavigation={id:we.id,initialUrl:we.currentRawUrl,extractedUrl:we.extractedUrl,trigger:we.source,extras:we.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,rt.w)(we=>{const ct=this.browserUrlTree.toString(),Xt=!this.navigated||we.extractedUrl.toString()!==ct||ct!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Xt)&&this.urlHandlingStrategy.shouldProcessUrl(we.rawUrl))return qa(we.source)&&(this.browserUrlTree=we.extractedUrl),(0,ue.of)(we).pipe((0,rt.w)(En=>{const Nr=this.transitions.getValue();return B.next(new dn(En.id,this.serializeUrl(En.extractedUrl),En.source,En.restoredState)),Nr!==this.transitions.getValue()?dt.E:Promise.resolve(En)}),function(k,N,S,B){return(0,rt.w)(W=>function(k,N,S,B,W){return new Br(k,N,S,B,W).apply()}(k,N,S,W.extractedUrl,B).pipe((0,Qe.U)(te=>Object.assign(Object.assign({},W),{urlAfterRedirects:te}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,an.b)(En=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:En.urlAfterRedirects})}),function(k,N,S,B,W){return(0,Le.z)(te=>function(k,N,S,B,W="emptyOnly",te="legacy"){try{const he=new wi(k,N,S,B,W,te).recognize();return null===he?ys(new po):(0,ue.of)(he)}catch(he){return ys(he)}}(k,N,te.urlAfterRedirects,S(te.urlAfterRedirects),B,W).pipe((0,Qe.U)(he=>Object.assign(Object.assign({},te),{targetSnapshot:he}))))}(this.rootComponentType,this.config,En=>this.serializeUrl(En),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,an.b)(En=>{if("eager"===this.urlUpdateStrategy){if(!En.extras.skipLocationChange){const Yn=this.urlHandlingStrategy.merge(En.urlAfterRedirects,En.rawUrl);this.setBrowserUrl(Yn,En)}this.browserUrlTree=En.urlAfterRedirects}const Nr=new Ti(En.id,this.serializeUrl(En.extractedUrl),this.serializeUrl(En.urlAfterRedirects),En.targetSnapshot);B.next(Nr)}));if(Xt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Nr,extractedUrl:Yn,source:Fn,restoredState:Ji,extras:ui}=we,bs=new dn(Nr,this.serializeUrl(Yn),Fn,Ji);B.next(bs);const Hs=Nn(Yn,this.rootComponentType).snapshot;return(0,ue.of)(Object.assign(Object.assign({},we),{targetSnapshot:Hs,urlAfterRedirects:Yn,extras:Object.assign(Object.assign({},ui),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=we.rawUrl,we.resolve(null),dt.E}),ko(we=>{const{targetSnapshot:ct,id:Xt,extractedUrl:en,rawUrl:En,extras:{skipLocationChange:Nr,replaceUrl:Yn}}=we;return this.hooks.beforePreactivation(ct,{navigationId:Xt,appliedUrlTree:en,rawUrlTree:En,skipLocationChange:!!Nr,replaceUrl:!!Yn})}),(0,an.b)(we=>{const ct=new Zn(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot);this.triggerEvent(ct)}),(0,Qe.U)(we=>Object.assign(Object.assign({},we),{guards:Hi(we.targetSnapshot,we.currentSnapshot,this.rootContexts)})),function(k,N){return(0,Le.z)(S=>{const{targetSnapshot:B,currentSnapshot:W,guards:{canActivateChecks:te,canDeactivateChecks:he}}=S;return 0===he.length&&0===te.length?(0,ue.of)(Object.assign(Object.assign({},S),{guardsResult:!0})):function(k,N,S,B){return(0,le.D)(k).pipe((0,Le.z)(W=>function(k,N,S,B,W){const te=N&&N.routeConfig?N.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,ue.of)(!0);const he=te.map(we=>{const ct=_s(we,N,W);let Xt;if(function(k){return k&&ti(k.canDeactivate)}(ct))Xt=ye(ct.canDeactivate(k,N,S,B));else{if(!ti(ct))throw new Error("Invalid CanDeactivate guard");Xt=ye(ct(k,N,S,B))}return Xt.pipe((0,xt.P)())});return(0,ue.of)(he).pipe(Ki())}(W.component,W.route,S,N,B)),(0,xt.P)(W=>!0!==W,!0))}(he,B,W,k).pipe((0,Le.z)(we=>we&&function(k){return"boolean"==typeof k}(we)?function(k,N,S,B){return(0,le.D)(N).pipe(me(W=>(0,ut.z)(function(k,N){return null!==k&&N&&N(new wt(k)),(0,ue.of)(!0)}(W.route.parent,B),function(k,N){return null!==k&&N&&N(new Mr(k)),(0,ue.of)(!0)}(W.route,B),function(k,N,S){const B=N[N.length-1],te=N.slice(0,N.length-1).reverse().map(he=>function(k){const N=k.routeConfig?k.routeConfig.canActivateChild:null;return N&&0!==N.length?{node:k,guards:N}:null}(he)).filter(he=>null!==he).map(he=>K(()=>{const we=he.guards.map(ct=>{const Xt=_s(ct,he.node,S);let en;if(function(k){return k&&ti(k.canActivateChild)}(Xt))en=ye(Xt.canActivateChild(B,k));else{if(!ti(Xt))throw new Error("Invalid CanActivateChild guard");en=ye(Xt(B,k))}return en.pipe((0,xt.P)())});return(0,ue.of)(we).pipe(Ki())}));return(0,ue.of)(te).pipe(Ki())}(k,W.path,S),function(k,N,S){const B=N.routeConfig?N.routeConfig.canActivate:null;if(!B||0===B.length)return(0,ue.of)(!0);const W=B.map(te=>K(()=>{const he=_s(te,N,S);let we;if(function(k){return k&&ti(k.canActivate)}(he))we=ye(he.canActivate(N,k));else{if(!ti(he))throw new Error("Invalid CanActivate guard");we=ye(he(N,k))}return we.pipe((0,xt.P)())}));return(0,ue.of)(W).pipe(Ki())}(k,W.route,S))),(0,xt.P)(W=>!0!==W,!0))}(B,te,k,N):(0,ue.of)(we)),(0,Qe.U)(we=>Object.assign(Object.assign({},S),{guardsResult:we})))})}(this.ngModule.injector,we=>this.triggerEvent(we)),(0,an.b)(we=>{if(hi(we.guardsResult)){const Xt=_n(`Redirecting to "${this.serializeUrl(we.guardsResult)}"`);throw Xt.url=we.guardsResult,Xt}const ct=new cr(we.id,this.serializeUrl(we.extractedUrl),this.serializeUrl(we.urlAfterRedirects),we.targetSnapshot,!!we.guardsResult);this.triggerEvent(ct)}),(0,_t.h)(we=>!!we.guardsResult||(this.restoreHistory(we),this.cancelNavigationTransition(we,""),!1)),ko(we=>{if(we.guards.canActivateChecks.length)return(0,ue.of)(we).pipe((0,an.b)(ct=>{const Xt=new Hn(ct.id,this.serializeUrl(ct.extractedUrl),this.serializeUrl(ct.urlAfterRedirects),ct.targetSnapshot);this.triggerEvent(Xt)}),(0,rt.w)(ct=>{let Xt=!1;return(0,ue.of)(ct).pipe(function(k,N){return(0,Le.z)(S=>{const{targetSnapshot:B,guards:{canActivateChecks:W}}=S;if(!W.length)return(0,ue.of)(S);let te=0;return(0,le.D)(W).pipe(me(he=>function(k,N,S,B){return function(k,N,S,B){const W=Object.keys(k);if(0===W.length)return(0,ue.of)({});const te={};return(0,le.D)(W).pipe((0,Le.z)(he=>function(k,N,S,B){const W=_s(k,N,B);return ye(W.resolve?W.resolve(N,S):W(N,S))}(k[he],N,S,B).pipe((0,an.b)(we=>{te[he]=we}))),pt(1),(0,Le.z)(()=>Object.keys(te).length===W.length?(0,ue.of)(te):dt.E))}(k._resolve,k,N,B).pipe((0,Qe.U)(te=>(k._resolvedData=te,k.data=Object.assign(Object.assign({},k.data),lr(k,S).resolve),null)))}(he.route,B,k,N)),(0,an.b)(()=>te++),pt(1),(0,Le.z)(he=>te===W.length?(0,ue.of)(S):dt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,an.b)({next:()=>Xt=!0,complete:()=>{Xt||(this.restoreHistory(ct),this.cancelNavigationTransition(ct,"At least one route resolver didn't emit any value."))}}))}),(0,an.b)(ct=>{const Xt=new Ni(ct.id,this.serializeUrl(ct.extractedUrl),this.serializeUrl(ct.urlAfterRedirects),ct.targetSnapshot);this.triggerEvent(Xt)}))}),ko(we=>{const{targetSnapshot:ct,id:Xt,extractedUrl:en,rawUrl:En,extras:{skipLocationChange:Nr,replaceUrl:Yn}}=we;return this.hooks.afterPreactivation(ct,{navigationId:Xt,appliedUrlTree:en,rawUrlTree:En,skipLocationChange:!!Nr,replaceUrl:!!Yn})}),(0,Qe.U)(we=>{const ct=function(k,N,S){const B=At(k,N._root,S?S._root:void 0);return new Ts(B,N)}(this.routeReuseStrategy,we.targetSnapshot,we.currentRouterState);return Object.assign(Object.assign({},we),{targetRouterState:ct})}),(0,an.b)(we=>{this.currentUrlTree=we.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(we.urlAfterRedirects,we.rawUrl),this.routerState=we.targetRouterState,"deferred"===this.urlUpdateStrategy&&(we.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,we),this.browserUrlTree=we.urlAfterRedirects)}),((k,N,S)=>(0,Qe.U)(B=>(new gs(N,B.targetRouterState,B.currentRouterState,S).activate(k),B)))(this.rootContexts,this.routeReuseStrategy,we=>this.triggerEvent(we)),(0,an.b)({next(){te=!0},complete(){te=!0}}),function(k){return(0,xe.e)((N,S)=>{try{N.subscribe(S)}finally{S.add(k)}})}(()=>{var we;te||he||this.cancelNavigationTransition(W,`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`),(null===(we=this.currentNavigation)||void 0===we?void 0:we.id)===W.id&&(this.currentNavigation=null)}),Ae(we=>{if(he=!0,function(k){return k&&k[vn]}(we)){const ct=hi(we.url);ct||(this.navigated=!0,this.restoreHistory(W,!0));const Xt=new ur(W.id,this.serializeUrl(W.extractedUrl),we.message);B.next(Xt),ct?setTimeout(()=>{const en=this.urlHandlingStrategy.merge(we.url,this.rawUrlTree),En={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qa(W.source)};this.scheduleNavigation(en,"imperative",null,En,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const ct=new Ln(W.id,this.serializeUrl(W.extractedUrl),we);B.next(ct);try{W.resolve(this.errorHandler(we))}catch(Xt){W.reject(Xt)}}return dt.E}))}))}resetRootComponentType(S){this.rootComponentType=S,this.routerState.root.component=this.rootComponentType}setTransition(S){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),S))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(S=>{const B="popstate"===S.type?"popstate":"hashchange";"popstate"===B&&setTimeout(()=>{var W;const te={replaceUrl:!0},he=(null===(W=S.state)||void 0===W?void 0:W.navigationId)?S.state:null;if(he){const ct=Object.assign({},he);delete ct.navigationId,delete ct.\u0275routerPageId,0!==Object.keys(ct).length&&(te.state=ct)}const we=this.parseUrl(S.url);this.scheduleNavigation(we,B,he,te)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(S){this.events.next(S)}resetConfig(S){Mo(S),this.config=S.map(Ga),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(S,B={}){const{relativeTo:W,queryParams:te,fragment:he,queryParamsHandling:we,preserveFragment:ct}=B,Xt=W||this.routerState.root,en=ct?this.currentUrlTree.fragment:he;let En=null;switch(we){case"merge":En=Object.assign(Object.assign({},this.currentUrlTree.queryParams),te);break;case"preserve":En=this.currentUrlTree.queryParams;break;default:En=te||null}return null!==En&&(En=this.removeEmptyProps(En)),function(k,N,S,B,W){if(0===S.length)return gi(N.root,N.root,N,B,W);const te=function(k){if("string"==typeof k[0]&&1===k.length&&"/"===k[0])return new vi(!0,0,k);let N=0,S=!1;const B=k.reduce((W,te,he)=>{if("object"==typeof te&&null!=te){if(te.outlets){const we={};return We(te.outlets,(ct,Xt)=>{we[Xt]="string"==typeof ct?ct.split("/"):ct}),[...W,{outlets:we}]}if(te.segmentPath)return[...W,te.segmentPath]}return"string"!=typeof te?[...W,te]:0===he?(te.split("/").forEach((we,ct)=>{0==ct&&"."===we||(0==ct&&""===we?S=!0:".."===we?N++:""!=we&&W.push(we))}),W):[...W,te]},[]);return new vi(S,N,B)}(S);if(te.toRoot())return gi(N.root,new hn([],{}),N,B,W);const he=function(k,N,S){if(k.isAbsolute)return new fs(N.root,!0,0);if(-1===S.snapshot._lastPathIndex){const te=S.snapshot._urlSegment;return new fs(te,te===N.root,0)}const B=ei(k.commands[0])?0:1;return function(k,N,S){let B=k,W=N,te=S;for(;te>W;){if(te-=W,B=B.parent,!B)throw new Error("Invalid number of '../'");W=B.segments.length}return new fs(B,!1,W-te)}(S.snapshot._urlSegment,S.snapshot._lastPathIndex+B,k.numberOfDoubleDots)}(te,N,k),we=he.processChildren?Ao(he.segmentGroup,he.index,te.commands):Ta(he.segmentGroup,he.index,te.commands);return gi(he.segmentGroup,we,N,B,W)}(Xt,this.currentUrlTree,S,En,null!=en?en:null)}navigateByUrl(S,B={skipLocationChange:!1}){const W=hi(S)?S:this.parseUrl(S),te=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(te,"imperative",null,B)}navigate(S,B={skipLocationChange:!1}){return function(k){for(let N=0;N<k.length;N++){const S=k[N];if(null==S)throw new Error(`The requested path contains ${S} segment at index ${N}`)}}(S),this.navigateByUrl(this.createUrlTree(S,B),B)}serializeUrl(S){return this.urlSerializer.serialize(S)}parseUrl(S){let B;try{B=this.urlSerializer.parse(S)}catch(W){B=this.malformedUriErrorHandler(W,this.urlSerializer,S)}return B}isActive(S,B){let W;if(W=!0===B?Object.assign({},za):!1===B?Object.assign({},Ko):B,hi(S))return oe(this.currentUrlTree,S,W);const te=this.parseUrl(S);return oe(this.currentUrlTree,te,W)}removeEmptyProps(S){return Object.keys(S).reduce((B,W)=>{const te=S[W];return null!=te&&(B[W]=te),B},{})}processNavigations(){this.navigations.subscribe(S=>{this.navigated=!0,this.lastSuccessfulId=S.id,this.currentPageId=S.targetPageId,this.events.next(new Mn(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,S.resolve(!0)},S=>{this.console.warn(`Unhandled Navigation Error: ${S}`)})}scheduleNavigation(S,B,W,te,he){var we,ct,Xt;if(this.disposed)return Promise.resolve(!1);const en=this.transitions.value,En=qa(B)&&en&&!qa(en.source),Nr=en.rawUrl.toString()===S.toString(),Yn=en.id===(null===(we=this.currentNavigation)||void 0===we?void 0:we.id);if(En&&Nr&&Yn)return Promise.resolve(!0);let Ji,ui,bs;he?(Ji=he.resolve,ui=he.reject,bs=he.promise):bs=new Promise((Gs,pi)=>{Ji=Gs,ui=pi});const Hs=++this.navigationId;let In;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),In=W&&W.\u0275routerPageId?W.\u0275routerPageId:te.replaceUrl||te.skipLocationChange?null!==(ct=this.browserPageId)&&void 0!==ct?ct:0:(null!==(Xt=this.browserPageId)&&void 0!==Xt?Xt:0)+1):In=0,this.setTransition({id:Hs,targetPageId:In,source:B,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:S,extras:te,resolve:Ji,reject:ui,promise:bs,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),bs.catch(Gs=>Promise.reject(Gs))}setBrowserUrl(S,B){const W=this.urlSerializer.serialize(S),te=Object.assign(Object.assign({},B.extras.state),this.generateNgRouterState(B.id,B.targetPageId));this.location.isCurrentPathEqualTo(W)||B.extras.replaceUrl?this.location.replaceState(W,"",te):this.location.go(W,"",te)}restoreHistory(S,B=!1){var W,te;if("computed"===this.canceledNavigationResolution){const he=this.currentPageId-S.targetPageId;"popstate"!==S.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)||0===he?this.currentUrlTree===(null===(te=this.currentNavigation)||void 0===te?void 0:te.finalUrl)&&0===he&&(this.resetState(S),this.browserUrlTree=S.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(he)}else"replace"===this.canceledNavigationResolution&&(B&&this.resetState(S),this.resetUrlToCurrentUrlTree())}resetState(S){this.routerState=S.currentRouterState,this.currentUrlTree=S.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,S.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(S,B){const W=new ur(S.id,this.serializeUrl(S.extractedUrl),B);this.triggerEvent(W),S.resolve(!1)}generateNgRouterState(S,B){return"computed"===this.canceledNavigationResolution?{navigationId:S,\u0275routerPageId:B}:{navigationId:S}}}return k.\u0275fac=function(S){T.$Z()},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac}),k})();function qa(k){return"imperative"!==k}let Ii=(()=>{class k{constructor(S,B,W){this.router=S,this.route=B,this.locationStrategy=W,this.commands=null,this.href=null,this.onChanges=new ze.x,this.subscription=S.events.subscribe(te=>{te instanceof Mn&&this.updateTargetUrlAndHref()})}set routerLink(S){this.commands=null!=S?Array.isArray(S)?S:[S]:null}ngOnChanges(S){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(S,B,W,te,he){if(0!==S||B||W||te||he||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const we={skipLocationChange:Is(this.skipLocationChange),replaceUrl:Is(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,we),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Is(this.preserveFragment)})}}return k.\u0275fac=function(S){return new(S||k)(T.Y36(gr),T.Y36(oi),T.Y36(It.S$))},k.\u0275dir=T.lG2({type:k,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(S,B){1&S&&T.NdJ("click",function(te){return B.onClick(te.button,te.ctrlKey,te.shiftKey,te.altKey,te.metaKey)}),2&S&&T.uIk("target",B.target)("href",B.href,T.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[T.TTD]}),k})();function Is(k){return""===k||!!k}class Za{}class fa{preload(N,S){return(0,ue.of)(null)}}let Ss=(()=>{class k{constructor(S,B,W,te){this.router=S,this.injector=W,this.preloadingStrategy=te,this.loader=new $l(W,B,ct=>S.triggerEvent(new Lr(ct)),ct=>S.triggerEvent(new Xr(ct)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,_t.h)(S=>S instanceof Mn),me(()=>this.preload())).subscribe(()=>{})}preload(){const S=this.injector.get(T.h0i);return this.processRoutes(S,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(S,B){const W=[];for(const te of B)if(te.loadChildren&&!te.canLoad&&te._loadedConfig){const he=te._loadedConfig;W.push(this.processRoutes(he.module,he.routes))}else te.loadChildren&&!te.canLoad?W.push(this.preloadConfig(S,te)):te.children&&W.push(this.processRoutes(S,te.children));return(0,le.D)(W).pipe((0,Qt.J)(),(0,Qe.U)(te=>{}))}preloadConfig(S,B){return this.preloadingStrategy.preload(B,()=>(B._loadedConfig?(0,ue.of)(B._loadedConfig):this.loader.load(S.injector,B)).pipe((0,Le.z)(te=>(B._loadedConfig=te,this.processRoutes(te.module,te.routes)))))}}return k.\u0275fac=function(S){return new(S||k)(T.LFG(gr),T.LFG(T.Sil),T.LFG(T.zs3),T.LFG(Za))},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac}),k})(),Ma=(()=>{class k{constructor(S,B,W={}){this.router=S,this.viewportScroller=B,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(S=>{S instanceof dn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=S.navigationTrigger,this.restoredId=S.restoredState?S.restoredState.navigationId:0):S instanceof Mn&&(this.lastId=S.id,this.scheduleScrollEvent(S,this.router.parseUrl(S.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(S=>{S instanceof Lt&&(S.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(S.position):S.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(S.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(S,B){this.router.triggerEvent(new Lt(S,"popstate"===this.lastSource?this.store[this.restoredId]:null,B))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return k.\u0275fac=function(S){T.$Z()},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac}),k})();const Rr=new T.OlP("ROUTER_CONFIGURATION"),bo=new T.OlP("ROUTER_FORROOT_GUARD"),Po=[It.Ye,{provide:ht,useClass:Pt},{provide:gr,useFactory:function(k,N,S,B,W,te,he={},we,ct){const Xt=new gr(null,k,N,S,B,W,ln(te));return we&&(Xt.urlHandlingStrategy=we),ct&&(Xt.routeReuseStrategy=ct),function(k,N){k.errorHandler&&(N.errorHandler=k.errorHandler),k.malformedUriErrorHandler&&(N.malformedUriErrorHandler=k.malformedUriErrorHandler),k.onSameUrlNavigation&&(N.onSameUrlNavigation=k.onSameUrlNavigation),k.paramsInheritanceStrategy&&(N.paramsInheritanceStrategy=k.paramsInheritanceStrategy),k.relativeLinkResolution&&(N.relativeLinkResolution=k.relativeLinkResolution),k.urlUpdateStrategy&&(N.urlUpdateStrategy=k.urlUpdateStrategy),k.canceledNavigationResolution&&(N.canceledNavigationResolution=k.canceledNavigationResolution)}(he,Xt),he.enableTracing&&Xt.events.subscribe(en=>{var En,Nr;null===(En=console.group)||void 0===En||En.call(console,`Router Event: ${en.constructor.name}`),console.log(en.toString()),console.log(en),null===(Nr=console.groupEnd)||void 0===Nr||Nr.call(console)}),Xt},deps:[ht,Yi,It.Ye,T.zs3,T.Sil,$s,Rr,[class{},new T.FiY],[class{},new T.FiY]]},Yi,{provide:oi,useFactory:function(k){return k.routerState.root},deps:[gr]},Ss,fa,class{preload(N,S){return S().pipe(Ae(()=>(0,ue.of)(null)))}},{provide:Rr,useValue:{enableTracing:!1}}];function Gl(){return new T.PXZ("Router",gr)}let ic=(()=>{class k{constructor(S,B){}static forRoot(S,B){return{ngModule:k,providers:[Po,Ra(S),{provide:bo,useFactory:Qi,deps:[[gr,new T.FiY,new T.tp0]]},{provide:Rr,useValue:B||{}},{provide:It.S$,useFactory:Ei,deps:[It.lw,[new T.tBr(It.mr),new T.FiY],Rr]},{provide:Ma,useFactory:Vt,deps:[gr,It.EM,Rr]},{provide:Za,useExisting:B&&B.preloadingStrategy?B.preloadingStrategy:fa},{provide:T.PXZ,multi:!0,useFactory:Gl},[Jt,{provide:T.ip1,multi:!0,useFactory:ot,deps:[Jt]},{provide:Gr,useFactory:Tt,deps:[Jt]},{provide:T.tb,multi:!0,useExisting:Gr}]]}}static forChild(S){return{ngModule:k,providers:[Ra(S)]}}}return k.\u0275fac=function(S){return new(S||k)(T.LFG(bo,8),T.LFG(gr,8))},k.\u0275mod=T.oAB({type:k}),k.\u0275inj=T.cJS({}),k})();function Vt(k,N,S){return S.scrollOffset&&N.setOffset(S.scrollOffset),new Ma(k,N,S)}function Ei(k,N,S={}){return S.useHash?new It.Do(k,N):new It.b0(k,N)}function Qi(k){return"guarded"}function Ra(k){return[{provide:T.deG,multi:!0,useValue:k},{provide:$s,multi:!0,useValue:k}]}let Jt=(()=>{class k{constructor(S){this.injector=S,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ze.x}appInitializer(){return this.injector.get(It.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let B=null;const W=new Promise(we=>B=we),te=this.injector.get(gr),he=this.injector.get(Rr);return"disabled"===he.initialNavigation?(te.setUpLocationChangeListener(),B(!0)):"enabled"===he.initialNavigation||"enabledBlocking"===he.initialNavigation?(te.hooks.afterPreactivation=()=>this.initNavigation?(0,ue.of)(null):(this.initNavigation=!0,B(!0),this.resultOfPreactivationDone),te.initialNavigation()):B(!0),W})}bootstrapListener(S){const B=this.injector.get(Rr),W=this.injector.get(Ss),te=this.injector.get(Ma),he=this.injector.get(gr),we=this.injector.get(T.z2F);S===we.components[0]&&(("enabledNonBlocking"===B.initialNavigation||void 0===B.initialNavigation)&&he.initialNavigation(),W.setUpPreloading(),te.init(),he.resetRootComponentType(we.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return k.\u0275fac=function(S){return new(S||k)(T.LFG(T.zs3))},k.\u0275prov=T.Yz7({token:k,factory:k.\u0275fac}),k})();function ot(k){return k.appInitializer.bind(k)}function Tt(k){return k.bootstrapListener.bind(k)}const Gr=new T.OlP("Router Initializer")},3942:(Zt,Ye,H)=>{"use strict";H.d(Ye,{Z:()=>ut});var T=H(2090),_=H(4859),Y=H(9681),K=H(1877);class ge{constructor(ze,Ae){this._delegate=ze,this.firebase=Ae,(0,Y._addComponent)(ze,new _.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(ze,Ae=Y._DEFAULT_ENTRY_NAME){var Le;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(ze);return!Pe.isInitialized()&&"EXPLICIT"===(null===(Le=Pe.getComponent())||void 0===Le?void 0:Le.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:Ae})}_removeServiceInstance(ze,Ae=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Ae)}_addComponent(ze){(0,Y._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,Y._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Be=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function $e(){const dt=function(dt){const ze={},Ae={__esModule:!0,initializeApp:function(Ct,zt={}){const qe=Y.initializeApp(Ct,zt);if((0,T.r3)(ze,qe.name))return ze[qe.name];const et=new dt(qe,Ae);return ze[qe.name]=et,et},app:Pe,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function(Ct){const zt=Ct.name,qe=zt.replace("-compat","");if(Y._registerComponent(Ct)&&"PUBLIC"===Ct.type){const et=(Qe=Pe())=>{if("function"!=typeof Qe[qe])throw Be.create("invalid-app-argument",{appName:zt});return Qe[qe]()};void 0!==Ct.serviceProps&&(0,T.ZB)(et,Ct.serviceProps),Ae[qe]=et,dt.prototype[qe]=function(...Qe){return this._getService.bind(this,zt).apply(this,Ct.multipleInstances?Qe:[])}}return"PUBLIC"===Ct.type?Ae[qe]:null},removeApp:function(Ct){delete ze[Ct]},useAsService:function(Ct,zt){return"serverAuth"===zt?null:zt},modularAPIs:Y}};function Pe(Ct){if(!(0,T.r3)(ze,Ct=Ct||Y._DEFAULT_ENTRY_NAME))throw Be.create("no-app",{appName:Ct});return ze[Ct]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function(){return Object.keys(ze).map(Ct=>ze[Ct])}}),Pe.App=dt,Ae}(ge);return dt.INTERNAL=Object.assign(Object.assign({},dt.INTERNAL),{createFirebaseNamespace:$e,extendNamespace:function(Ae){(0,T.ZB)(dt,Ae)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),dt}(),ue=new K.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const dt=self.firebase.SDK_VERSION;dt&&dt.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ut=le;(0,Y.registerVersion)("@firebase/app-compat","0.1.12",undefined)},9681:(Zt,Ye,H)=>{"use strict";H.r(Ye),H.d(Ye,{FirebaseError:()=>K.ZR,SDK_VERSION:()=>Lr,_DEFAULT_ENTRY_NAME:()=>an,_addComponent:()=>dn,_addOrOverwriteComponent:()=>Mn,_apps:()=>It,_clearComponents:()=>Zn,_components:()=>Kt,_getProvider:()=>Ln,_registerComponent:()=>ur,_removeServiceInstance:()=>Ti,deleteApp:()=>Mr,getApp:()=>wt,getApps:()=>Gn,initializeApp:()=>Xr,onLog:()=>jt,registerVersion:()=>Lt,setLogLevel:()=>wr});var T=H(5861),_=H(4859),Y=H(1877),K=H(2090);class ge{constructor(_n){this.container=_n}getPlatformInfoString(){return this.container.getProviders().map(bn=>{if(function(vn){const _n=vn.getComponent();return"VERSION"===(null==_n?void 0:_n.type)}(bn)){const Vn=bn.getImmediate();return`${Vn.library}/${Vn.version}`}return null}).filter(bn=>bn).join(" ")}}const Be="@firebase/app",$e=new Y.Yd("@firebase/app"),an="[DEFAULT]",Qt={[Be]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},It=new Map,Kt=new Map;function dn(vn,_n){try{vn.container.addComponent(_n)}catch(bn){$e.debug(`Component ${_n.name} failed to register with FirebaseApp ${vn.name}`,bn)}}function Mn(vn,_n){vn.container.addOrOverwriteComponent(_n)}function ur(vn){const _n=vn.name;if(Kt.has(_n))return $e.debug(`There were multiple attempts to register component ${_n}.`),!1;Kt.set(_n,vn);for(const bn of It.values())dn(bn,vn);return!0}function Ln(vn,_n){return vn.container.getProvider(_n)}function Ti(vn,_n,bn=an){Ln(vn,_n).clearInstance(bn)}function Zn(){Kt.clear()}const Hn=new K.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Ni{constructor(_n,bn,Vn){this._isDeleted=!1,this._options=Object.assign({},_n),this._config=Object.assign({},bn),this._name=bn.name,this._automaticDataCollectionEnabled=bn.automaticDataCollectionEnabled,this._container=Vn,this.container.addComponent(new _.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_n){this.checkDestroyed(),this._automaticDataCollectionEnabled=_n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_n){this._isDeleted=_n}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}const Lr="9.6.1";function Xr(vn,_n={}){"object"!=typeof _n&&(_n={name:_n});const bn=Object.assign({name:an,automaticDataCollectionEnabled:!1},_n),Vn=bn.name;if("string"!=typeof Vn||!Vn)throw Hn.create("bad-app-name",{appName:String(Vn)});const Dr=It.get(Vn);if(Dr){if((0,K.vZ)(vn,Dr.options)&&(0,K.vZ)(bn,Dr.config))return Dr;throw Hn.create("duplicate-app",{appName:Vn})}const An=new _.H0(Vn);for(const ln of Kt.values())An.addComponent(ln);const Ht=new Ni(vn,bn,An);return It.set(Vn,Ht),Ht}function wt(vn=an){const _n=It.get(vn);if(!_n)throw Hn.create("no-app",{appName:vn});return _n}function Gn(){return Array.from(It.values())}function Mr(vn){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,T.Z)(function*(vn){const _n=vn.name;It.has(_n)&&(It.delete(_n),yield Promise.all(vn.container.getProviders().map(bn=>bn.delete())),vn.isDeleted=!0)})).apply(this,arguments)}function Lt(vn,_n,bn){var Vn;let Dr=null!==(Vn=Qt[vn])&&void 0!==Vn?Vn:vn;bn&&(Dr+=`-${bn}`);const An=Dr.match(/\s|\//),Ht=_n.match(/\s|\//);if(An||Ht){const ln=[`Unable to register library "${Dr}" with version "${_n}":`];return An&&ln.push(`library name "${Dr}" contains illegal characters (whitespace or "/")`),An&&Ht&&ln.push("and"),Ht&&ln.push(`version name "${_n}" contains illegal characters (whitespace or "/")`),void $e.warn(ln.join(" "))}ur(new _.wA(`${Dr}-version`,()=>({library:Dr,version:_n}),"VERSION"))}function jt(vn,_n){if(null!==vn&&"function"!=typeof vn)throw Hn.create("invalid-log-argument");(0,Y.Am)(vn,_n)}function wr(vn){(0,Y.Ub)(vn)}ur(new _.wA("platform-logger",_n=>new ge(_n),"PRIVATE")),Lt(Be,"0.7.11",""),Lt(Be,"0.7.11","esm2017"),Lt("fire-js","")},4859:(Zt,Ye,H)=>{"use strict";H.d(Ye,{wA:()=>Y,H0:()=>de,zt:()=>ge});var T=H(5861),_=H(2090);class Y{constructor(le,ue,Oe){this.name=le,this.instanceFactory=ue,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const K="[DEFAULT]";class ge{constructor(le,ue){this.name=le,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ue=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ue)){const Oe=new _.BH;if(this.instancesDeferred.set(ue,Oe),this.isInitialized(ue)||this.shouldAutoInitialize())try{const tt=this.getOrInitializeService({instanceIdentifier:ue});tt&&Oe.resolve(tt)}catch(tt){}}return this.instancesDeferred.get(ue).promise}getImmediate(le){var ue;const Oe=this.normalizeInstanceIdentifier(null==le?void 0:le.identifier),tt=null!==(ue=null==le?void 0:le.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(Xe){if(tt)return null;throw Xe}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if("EAGER"===le.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:K})}catch(ue){}for(const[ue,Oe]of this.instancesDeferred.entries()){const tt=this.normalizeInstanceIdentifier(ue);try{const Xe=this.getOrInitializeService({instanceIdentifier:tt});Oe.resolve(Xe)}catch(Xe){}}}}clearInstance(le=K){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,T.Z)(function*(){const ue=Array.from(le.instances.values());yield Promise.all([...ue.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...ue.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=K){return this.instances.has(le)}getOptions(le=K){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ue={}}=le,Oe=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tt=this.getOrInitializeService({instanceIdentifier:Oe,options:ue});for(const[Xe,ut]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(Xe)&&ut.resolve(tt);return tt}onInit(le,ue){var Oe;const tt=this.normalizeInstanceIdentifier(ue),Xe=null!==(Oe=this.onInitCallbacks.get(tt))&&void 0!==Oe?Oe:new Set;Xe.add(le),this.onInitCallbacks.set(tt,Xe);const ut=this.instances.get(tt);return ut&&le(ut,tt),()=>{Xe.delete(le)}}invokeOnInitCallbacks(le,ue){const Oe=this.onInitCallbacks.get(ue);if(Oe)for(const tt of Oe)try{tt(le,ue)}catch(Xe){}}getOrInitializeService({instanceIdentifier:le,options:ue={}}){let Oe=this.instances.get(le);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:($e=le,$e===K?void 0:$e),options:ue}),this.instances.set(le,Oe),this.instancesOptions.set(le,ue),this.invokeOnInitCallbacks(Oe,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,Oe)}catch(tt){}var $e;return Oe||null}normalizeInstanceIdentifier(le=K){return this.component?this.component.multipleInstances?le:K:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ue=this.getProvider(le.name);if(ue.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ue.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ue=new ge(le,this);return this.providers.set(le,ue),ue}getProviders(){return Array.from(this.providers.values())}}},1877:(Zt,Ye,H)=>{"use strict";H.d(Ye,{in:()=>_,Yd:()=>Be,Ub:()=>de,Am:()=>$e});const T=[];var _=(()=>{return(le=_||(_={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",_;var le})();const Y={debug:_.DEBUG,verbose:_.VERBOSE,info:_.INFO,warn:_.WARN,error:_.ERROR,silent:_.SILENT},K=_.INFO,ge={[_.DEBUG]:"log",[_.VERBOSE]:"log",[_.INFO]:"info",[_.WARN]:"warn",[_.ERROR]:"error"},xe=(le,ue,...Oe)=>{if(ue<le.logLevel)return;const tt=(new Date).toISOString(),Xe=ge[ue];if(!Xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[Xe](`[${tt}]  ${le.name}:`,...Oe)};class Be{constructor(ue){this.name=ue,this._logLevel=K,this._logHandler=xe,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in _))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?Y[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,_.DEBUG,...ue),this._logHandler(this,_.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,_.VERBOSE,...ue),this._logHandler(this,_.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,_.INFO,...ue),this._logHandler(this,_.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,_.WARN,...ue),this._logHandler(this,_.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,_.ERROR,...ue),this._logHandler(this,_.ERROR,...ue)}}function de(le){T.forEach(ue=>{ue.setLogLevel(le)})}function $e(le,ue){for(const Oe of T){let tt=null;ue&&ue.level&&(tt=Y[ue.level]),Oe.userLogHandler=null===le?null:(Xe,ut,...dt)=>{const ze=dt.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(Le){return null}}).filter(Ae=>Ae).join(" ");ut>=(null!=tt?tt:Xe.logLevel)&&le({level:_[ut].toLowerCase(),message:ze,args:dt,type:Xe.name})}}}},5861:(Zt,Ye,H)=>{"use strict";function T(Y,K,ge,xe,Be,de,$e){try{var le=Y[de]($e),ue=le.value}catch(Oe){return void ge(Oe)}le.done?K(ue):Promise.resolve(ue).then(xe,Be)}function _(Y){return function(){var K=this,ge=arguments;return new Promise(function(xe,Be){var de=Y.apply(K,ge);function $e(ue){T(de,xe,Be,$e,le,"next",ue)}function le(ue){T(de,xe,Be,$e,le,"throw",ue)}$e(void 0)})}}H.d(Ye,{Z:()=>_})}},Zt=>{Zt(Zt.s=3150)}]);